{"version":3,"sources":["webpack://module-template/./node_modules/codemirror-spell-checker/src/js/spell-checker.js","webpack://module-template/./node_modules/codemirror/addon/dialog/dialog.js","webpack://module-template/./node_modules/codemirror/addon/display/autorefresh.js","webpack://module-template/./node_modules/codemirror/addon/display/fullscreen.js","webpack://module-template/./node_modules/codemirror/addon/display/placeholder.js","webpack://module-template/./node_modules/codemirror/addon/edit/continuelist.js","webpack://module-template/./node_modules/codemirror/addon/edit/matchbrackets.js","webpack://module-template/./node_modules/codemirror/addon/mode/overlay.js","webpack://module-template/./node_modules/codemirror/addon/search/searchcursor.js","webpack://module-template/./node_modules/codemirror/addon/selection/mark-selection.js","webpack://module-template/./node_modules/codemirror/keymap/vim.js","webpack://module-template/./node_modules/codemirror/lib/codemirror.js","webpack://module-template/./node_modules/codemirror/mode/gfm/gfm.js","webpack://module-template/./node_modules/codemirror/mode/markdown/markdown.js","webpack://module-template/./node_modules/codemirror/mode/meta.js","webpack://module-template/./node_modules/codemirror/mode/xml/xml.js","webpack://module-template/./node_modules/easymde/src/js/codemirror/tablist.js","webpack://module-template/./node_modules/easymde/src/js/easymde.js","webpack://module-template/./node_modules/linkify-it/index.js","webpack://module-template/./node_modules/linkify-it/lib/re.js","webpack://module-template/./node_modules/markdown-it-container/index.js","webpack://module-template/./node_modules/markdown-it/index.js","webpack://module-template/./node_modules/markdown-it/lib/common/entities.js","webpack://module-template/./node_modules/markdown-it/lib/common/html_blocks.js","webpack://module-template/./node_modules/markdown-it/lib/common/html_re.js","webpack://module-template/./node_modules/markdown-it/lib/common/utils.js","webpack://module-template/./node_modules/markdown-it/lib/helpers/index.js","webpack://module-template/./node_modules/markdown-it/lib/helpers/parse_link_destination.js","webpack://module-template/./node_modules/markdown-it/lib/helpers/parse_link_label.js","webpack://module-template/./node_modules/markdown-it/lib/helpers/parse_link_title.js","webpack://module-template/./node_modules/markdown-it/lib/index.js","webpack://module-template/./node_modules/markdown-it/lib/parser_block.js","webpack://module-template/./node_modules/markdown-it/lib/parser_core.js","webpack://module-template/./node_modules/markdown-it/lib/parser_inline.js","webpack://module-template/./node_modules/markdown-it/lib/presets/commonmark.js","webpack://module-template/./node_modules/markdown-it/lib/presets/default.js","webpack://module-template/./node_modules/markdown-it/lib/presets/zero.js","webpack://module-template/./node_modules/markdown-it/lib/renderer.js","webpack://module-template/./node_modules/markdown-it/lib/ruler.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/blockquote.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/code.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/fence.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/heading.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/hr.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/html_block.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/lheading.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/list.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/paragraph.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/reference.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/state_block.js","webpack://module-template/./node_modules/markdown-it/lib/rules_block/table.js","webpack://module-template/./node_modules/markdown-it/lib/rules_core/block.js","webpack://module-template/./node_modules/markdown-it/lib/rules_core/inline.js","webpack://module-template/./node_modules/markdown-it/lib/rules_core/linkify.js","webpack://module-template/./node_modules/markdown-it/lib/rules_core/normalize.js","webpack://module-template/./node_modules/markdown-it/lib/rules_core/replacements.js","webpack://module-template/./node_modules/markdown-it/lib/rules_core/smartquotes.js","webpack://module-template/./node_modules/markdown-it/lib/rules_core/state_core.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/autolink.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/backticks.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/balance_pairs.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/emphasis.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/entity.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/escape.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/html_inline.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/image.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/link.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/newline.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/state_inline.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/strikethrough.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/text.js","webpack://module-template/./node_modules/markdown-it/lib/rules_inline/text_collapse.js","webpack://module-template/./node_modules/markdown-it/lib/token.js","webpack://module-template/./node_modules/marked/lib/marked.js","webpack://module-template/./node_modules/mdurl/decode.js","webpack://module-template/./node_modules/mdurl/encode.js","webpack://module-template/./node_modules/mdurl/format.js","webpack://module-template/./node_modules/mdurl/index.js","webpack://module-template/./node_modules/mdurl/parse.js","webpack://module-template/./node_modules/punycode/punycode.es6.js","webpack://module-template/./node_modules/typo-js/typo.js","webpack://module-template/./node_modules/uc.micro/categories/Cc/regex.js","webpack://module-template/./node_modules/uc.micro/categories/Cf/regex.js","webpack://module-template/./node_modules/uc.micro/categories/P/regex.js","webpack://module-template/./node_modules/uc.micro/categories/Z/regex.js","webpack://module-template/./node_modules/uc.micro/index.js","webpack://module-template/./node_modules/uc.micro/properties/Any/regex.js","webpack://module-template/./src/scripts/index.js","webpack://module-template/./src/scripts/mmde.js","webpack://module-template/./src/scripts/plugins/base.js","webpack://module-template/./src/scripts/plugins/quick-insert.js","webpack://module-template/./src/scripts/settings.js","webpack://module-template/webpack/bootstrap","webpack://module-template/webpack/runtime/compat get default export","webpack://module-template/webpack/runtime/define property getters","webpack://module-template/webpack/runtime/hasOwnProperty shorthand","webpack://module-template/webpack/runtime/make namespace object","webpack://module-template/webpack/startup"],"names":["Typo","CodeMirrorSpellChecker","options","codeMirrorInstance","defineMode","String","prototype","includes","indexOf","apply","this","arguments","config","aff_loading","xhr_aff","XMLHttpRequest","open","onload","readyState","status","aff_data","responseText","num_loaded","typo","dic_data","platform","send","dic_loading","xhr_dic","rx_word","overlay","token","stream","ch","peek","word","next","check","mode","getMode","backdrop","overlayMode","console","log","module","exports","CodeMirror","dialogDiv","cm","template","bottom","dialog","wrap","getWrapperElement","appendChild","document","createElement","className","innerHTML","addClass","closeNotification","newVal","state","currentNotificationClose","defineExtension","callback","closed","me","close","inp","value","rmClass","parentNode","removeChild","focus","onClose","button","getElementsByTagName","selectValueOnOpen","select","onInput","on","e","onKeyUp","onKeyDown","keyCode","closeOnEnter","blur","e_stop","closeOnBlur","evt","relatedTarget","callbacks","buttons","blurring","i","length","b","e_preventDefault","setTimeout","doneTimer","duration","clearTimeout","mod","stopListening","_cm","timeout","off","window","hurry","defineOption","val","autoRefresh","display","wrapper","offsetHeight","lastWrapHeight","clientHeight","refresh","delay","startListening","old","Init","fullScreenRestore","scrollTop","pageYOffset","scrollLeft","pageXOffset","width","style","height","documentElement","overflow","setFullscreen","replace","info","scrollTo","setNormal","clearPlaceholder","placeholder","setPlaceholder","elt","cssText","direction","getOption","placeHolder","createTextNode","lineSpace","insertBefore","firstChild","onBlur","isEmpty","onChange","empty","lineCount","getLine","prev","getInputField","placeholderCompose","input","nodeName","test","querySelector","textContent","onComposition","hasFocus","listRE","emptyListRE","unorderedListRE","incrementRemainingMarkdownListNumbers","pos","startLine","line","lookAhead","skipCount","startItem","exec","startIndent","nextLineNumber","nextLine","nextItem","nextIndent","newNumber","parseInt","nextNumber","itemNumber","isNaN","replaceRange","commands","newlineAndIndentContinueMarkdownList","Pass","ranges","listSelections","replacements","head","eolState","getStateAfter","inner","innerMode","name","execCommand","inList","list","inQuote","quote","match","cursorBeforeBullet","slice","endOfQuote","endOfList","indent","after","numbered","bullet","replaceSelections","ie_lt8","navigator","userAgent","documentMode","Pos","matching","bracketRegex","findMatchingBracket","where","getLineHandle","afterCursor","re","text","charAt","dir","strict","getTokenTypeAt","found","scanForBracket","from","to","forward","maxScanLen","maxScanLineLength","maxScanLines","stack","lineEnd","Math","min","lastLine","max","firstLine","lineNo","end","undefined","push","pop","matchBrackets","autoclear","maxHighlightLen","maxHighlightLineLength","marks","markText","focused","clear","operation","doMatchBrackets","currentlyHighlighted","oldConfig","base","combine","startState","basePos","baseCur","overlayPos","overlayCur","streamSeen","copyState","start","combineTokens","textAfter","electricChars","blankLine","baseToken","overlayToken","doFold","noFold","ensureFlags","regexp","flags","current","ignoreCase","global","multiline","regexpFlags","target","RegExp","source","maybeMultiline","searchRegexpForward","doc","last","lastIndex","string","index","searchRegexpForwardMultiline","chunk","curLine","before","split","inside","startCh","lastMatchIn","endMargin","newMatch","searchRegexpBackward","first","searchRegexpBackwardMultiline","chunkSize","adjustPos","orig","folded","foldFunc","mid","len","searchStringForward","query","caseFold","fold","lines","search","cutFrom","endString","searchStringBackward","lastIndexOf","top","topString","SearchCursor","atOccurrence","clipPos","matches","reverse","normalize","str","toLowerCase","findNext","find","findPrevious","result","cmpPos","newText","origin","splitLines","defineDocExtension","cur","getSearchCursor","getCursor","anchor","setSelections","onCursorActivity","markedSelection","somethingSelected","reset","array","coverRange","coverStart","coverEnd","cmp","shift","update","markedSelectionStyle","addAt","cls","endLine","atEnd","mark","splice","defaultKeymap","keys","type","toKeys","context","action","motion","motionArgs","linewise","toJumplist","wordEnd","bigWord","inclusive","explicitRepeat","toFirstChar","repeatOffset","isEdit","actionArgs","matchIndent","sameLine","operator","operatorArgs","indentRight","toLower","operatorMotionArgs","visualLine","shouldMoveCursor","insertAt","interlaceInsertRepeat","blockwise","keepSpaces","fullLine","exitVisualBlock","position","increase","backtrack","textObjectInner","searchArgs","querySrc","wholeWordOnly","defaultKeymapLength","defaultExCommandMap","shortName","possiblyAsync","excludeFromCommandHistory","Vim","detachVimMap","keyMap","vim","body","caretColor","clearFatCursorMark","updateFatCursorMark","fatCursorMarks","disableFatCursorMark","attach","attachVimMap","setOption","getOnPasteFn","leaveVimMode","enableFatCursorMark","signal","maybeInitVimState","enterVimMode","range","lineLength","cmKey","key","vimKey","pieces","lastPiece","hasCharacter","piece","modifiers","specialKeys","isUpperCase","join","cmKeyToVimKey","cmd","findKey","Enter","Backspace","Delete","Insert","onPasteFn","insertMode","setCursor","offsetCursor","actions","enterInsertMode","numberRegex","wordCharTest","isWordChar","bigWordCharTest","makeKeyRange","size","fromCharCode","upperCaseAlphabet","lowerCaseAlphabet","numbers","validMarks","concat","validRegisters","isLine","isLowerCase","k","isWhiteSpaceString","isEndOfSentenceSymbol","inArray","arr","defaultValue","aliases","Error","cfg","option","scope","local","vimGlobalState","lastInsertModeKeyTimer","createCircularJumpList","pointer","tail","buffer","Array","move","offset","newCur","inc","oldCur","cursorEqual","cachedCursor","add","curMark","useNextSlot","cursor","trashMark","setBookmark","markPos","oldPointer","createInsertModeChanges","c","changes","expectCursorActivityForChange","MacroModeState","latestRegister","isPlaying","isRecording","replaySearchQueries","onRecordingDone","lastInsertModeChanges","inputState","InputState","lastEditInputState","lastEditActionCommand","lastHPos","lastHSPos","lastMotion","fakeCursor","insertModeRepeat","visualMode","visualBlock","lastSelection","lastPastedText","sel","resetVimGlobalState","optionName","searchQuery","searchIsReversed","lastSubstituteReplacePart","jumpList","macroModeState","lastCharacterSearch","increment","selectedCharacter","registerController","RegisterController","searchHistoryController","HistoryController","exCommandHistoryController","exitMacroRecordMode","enterMacroRecordMode","registerName","register","getRegister","openDialog","vimApi","buildKeyMap","getRegisterController","resetVimGlobalState_","getVimGlobalState_","maybeInitVimState_","suppressErrorLogging","InsertModeKey","map","lhs","rhs","ctx","exCommandDispatcher","unmap","noremap","toCtxArray","ctxsToMap","actualLength","mapping","substr","newMapping","_mapCommand","mappedCtxs","filter","el","mapclear","origLength","userKeymap","contexts","j","defineEx","prefix","func","exCommands","commandMap_","handleKey","command","handleMacroRecording","clearInputState","pushText","logKey","handleEsc","exitVisualMode","exitInsertMode","keyBuffer","keysAreChars","commandDispatcher","matchCommand","thisMatch","selections","here","handleKeyInsertMode","keysMatcher","pushRepeatDigit","handleKeyNonInsertMode","curOp","isVimOp","substring","doKeyToKey","processCommand","handleEx","defineMotion","fn","motions","defineAction","defineOperator","operators","mapCommand","args","extra","defineRegister","registers","prefixRepeat","motionRepeat","reason","Register","insertModeChanges","searchQueries","unnamedRegister","historyBuffer","iterator","initialPrefix","n","getRepeat","repeat","setText","pushInsertModeChanges","pushSearchQuery","toString","isValidRegister","shiftNumericRegisters_","nextMatch","up","element","pushInput","bestMatch","partial","full","commandMatch","commandMatches","character","lastChar","repeatOverride","processMotion","processOperator","processOperatorMotion","processAction","processSearch","processEx","copyArgs","evalInput","updateCmSelection","repeatIsExplicit","recordLastEdit","getSearchState","setReversed","promptPrefix","originalQuery","getQuery","originalScrollPos","getScrollInfo","handleQuery","showPrompt","left","logSearchQuery","desc","searchPromptDesc","parsedQuery","keyName","selectionEnd","selectionStart","updateSearchQuery","scrollIntoView","clearSearchHighlight","expandWordUnderCursor","isKeyword","smartCase","showConfirm","onPromptClose","onPromptKeyDown","exArgs","newHead","newAnchor","origHead","copyCursor","clipCursorToContent","origAnchor","oldHead","oldAnchor","noRepeat","motionResult","recordJumpPosition","Infinity","updateMark","cursorIsBefore","lastSel","lineOffset","abs","chOffset","curStart","curEnd","cmSel","cursorMin","cursorMax","makeCmSelection","tmp","expandSelectionToLine","selection","getRange","clipToLine","primary","operatorMoveTo","actionCommand","moveToTopLine","_head","getUserVisibleLines","findFirstNonWhiteSpaceCharacter","moveToMiddleLine","floor","moveToBottomLine","expandToLine","isReversed","highlightSearchMatches","findAndSelectNextInclusive","prevInputState","findNextFromAndToInclusive","subMode","goToMark","getMarkPos","moveToOtherHighlightedEnd","jumpToMark","best","equal","between","cursorIsBetween","moveByCharacters","moveByLines","endCh","moveByDisplayLines","moveByScroll","moveToColumn","moveToEol","posV","findPosV","moveToStartOfLine","charCoords","res","hitSide","goalCoords","coordsChar","resCoords","moveByPage","moveByParagraph","findParagraph","moveBySentence","nextChar","idx","ln","stop","curr","last_valid","skip_empty_lines","curr_index","findSentence","scrollbox","defaultTextHeight","dest","moveByWords","words","emptyLineIsWord","findWord","eodCh","shortCircuit","firstWord","lastWord","moveToWord","moveTillCharacter","moveToCharacter","recordLastCharacterSearch","moveToSymbol","symb","curCh","lineText","nextCh","lastCh","reverseSymb","depth","curMoveThrough","symbolToMode","init","findSymbolModes","isComplete","lineLen","findSymbol","moveToFirstNonWhiteSpaceCharacter","moveToMatchedSymbol","symbol","moveToLineOrEdgeOfDocument","lineNum","textObjectManipulation","bracketRegexp","openSym","selectCompanionObject","'","chars","firstIndex","findBeginningAndEnd","findMatchingTag","findEnclosingTag","tags","expandTagUnderCursor","expandSelection","repeatLastCharacterSearch","lastSearch","moveH","fillArray","times","change","finalHead","Number","MAX_VALUE","setSelection","getSelection","replaceSelection","replacement","lastState","prevLineEnd","wasLastLine","newlineAndIndent","indentLine","indentAuto","_args","changeCase","getSelections","swapped","toSwap","toUpperCase","yank","endPos","jumpListWalk","scroll","lineHeight","delta","newPos","cursorCoords","ceil","newBottom","scrollToCursor","y","replayMacro","executeMacroRegister","toggleOverwrite","overwrite","getLastEditPos","onKeyEventTargetKeyDown","selectForInsert","toggleVisualMode","reselectLastSelection","_actionArgs","updateLastSelection","anchorMark","headMark","joinLines","finalCh","curFinalPos","newLineAndEnterInsertMode","newlineAndIndentContinueComment","paste","tabSize","whitespaceLength","tabs","spaces","currentLine","chompedText","wasChomped","firstIndent","wspace","newIndent","quotient","curPosFinal","lastSelectionCurEnd","selectedArea","getCurrentSelectedAreaRange","getLastSelectedAreaRange","block","getSelectedAreaRange","selectedText","emptyStrings","selectBlock","posFromIndex","indexFromPos","extendLineToColumn","undo","repeatFn","redo","setRegister","setMark","replaceTo","replaceWith","replaceWithStr","incrementNumberToken","numberStr","lineStr","baseStr","digits","zeroPadding","repeatLastEdit","includeLineBreak","maxCh","ret","prop","hasOwnProperty","offsetLine","offsetCh","pressed","mapped","prefixLen","pressedPrefix","mappedPrefix","cur1","cur2","call","cur3","cur1before2","cur2before3","trim","s","column","isClipped","primIndex","atAnchor","atHead","getIndex","wasClipped","baseCh","headCh","newDir","lineHead","updateFakeCursor","exclusive","headOffset","anchorOffset","right","moveHead","clearFakeCursor","firstNonWS","_forward","noSymbol","getHead","wordStart","bracket","section","comment","method","preprocess","charTests","foundWord","keepHPos","retval","charIdxInLine","markName","includeChar","isBoundary","any","SearchState","searchState_","splitBySeparator","argString","separator","slashes","findUnescapedSeparators","tokens","escapeNextChar","setQuery","getOverlay","searchOverlay","setOverlay","reversed","getScrollbarAnnotate","annotate","setScrollbarAnnotate","charUnescapes","unescapes","parseQuery","regexPart","forceIgnoreCase","out","specialComesNext","translateRegex","openNotification","alert","raw","shortText","prompt","rawQuery","r1","r2","props","regexEqual","highlightTimeout","searchState","removeOverlay","matchSol","sol","backUp","eol","skipToEnd","addOverlay","showMatchesOnScrollbar","isInRange","scrollInfo","bottomY","done","history","ExCommandDispatcher","buildCommandMap_","opt_params","that","_processCommand","commandHistoryRegister","previousCommand","inputStream","StringStream","commandName","params","parseInput_","matchCommand_","parseCommandArgs_","toInput","eatWhile","eat","parseLineSpec_","numberMatch","parseLineSpecOffset_","offsetMatch","delim","argDelimiter","user","unshift","colorscheme","mapArgs","imap","nmap","vmap","set","setArgs","setCfg","expr","forceGet","optionIsBoolean","oldValue","message","setOptionReturn","setlocal","setglobal","regArgs","regInfo","sort","unique","number","pattern","err","eatSpace","opts","decimal","hex","octal","parseArgs","lineStart","radix","numPart","textPart","matchPart","a","compareFn","textOld","anum","bnum","splitBySlash","matchedLines","content","nextCommand","substitute","trailing","flagsPart","count","replacePart","confirm","output","matched","matcher","unescapeRegexReplace","translateRegexReplace","startPos","searchCursor","exMode","lastPos","replaceAll","_value","savedCallback","doReplace","write","save","nohlsearch","delmarks","sym","startMark","finishMark","charCodeAt","finish","insertModeChangeRegister","lastChange","logInsertModeChange","imc","repeatInsertModeChanges","changeObj","ignoreCount","selectionCount","maybeReset","handleExternalSelection","widget","fakeCursorBookmark","lookupKey","repeatForInsert","isAction","cachedInputState","repeatCommand","repeatInsert","changeObject","keyHandler","binding","detach","fallthrough","gecko","ie_upto10","ie_11up","edge","ie","ie_version","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","flipCtrlCmd","captureRightClick","classTest","node","removeChildren","childNodes","removeChildrenAndAdd","parent","tag","eltP","setAttribute","contains","child","nodeType","host","activeElt","activeElement","shadowRoot","joinClasses","as","createRange","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","bind","f","copyObj","obj","countColumn","startIndex","startValue","nextTab","_e","Delayed","id","time","handler","onTimeout","self","Date","ms","sel_dontScroll","sel_mouse","sel_move","findColumn","goal","col","skipped","spaceStrs","spaceStr","lst","nothing","createObj","inst","Object","create","nonASCIISingleCaseWordChar","isWordCharBasic","helper","extendingChars","isExtendingChar","skipExtendingChars","findFirst","pred","midF","bidiOther","getBidiPartAt","order","sticky","bidiOrdering","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","level","code","outerType","types","i$1","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","i$5","cur$1","type$4","i$6","end$1","replace$1","j$1","m","i$7","at","isRTL","j$2","nstart","getOrder","noHandlers","emitter","addEventListener","attachEvent","_handlers","getHandlers","removeEventListener","detachEvent","handlers","signalDOMEvent","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","cursorActivityHandlers","hasHandler","eventMixin","ctor","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_target","srcElement","e_button","which","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetWidth","hasBadBidiRects","txt","r0","getBoundingClientRect","splitLinesAuto","l","nl","rt","hasSelection","te","ownerDocument","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","modes","mimeModes","dependencies","resolveMode","spec","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","nstate","a1","a2","lineOracle","lastColumnPos","lastColumnValue","children","sz","getBetween","iter","getLines","updateLineHeight","diff","no","lineAtHeight","h","outer","lh","lineNumberFor","lineNumberFormatter","firstLineNumber","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","linelen","clipToLen","clipPosArray","skipTo","indentation","consume","caseInsensitive","cased","hideFirstChars","oracle","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","forceToEnd","st","modeGen","lineClasses","runMode","loop","o","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","styleClasses","highlightFrontier","modeFrontier","precise","minindent","minline","lim","indented","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","startAt","callBlankLine","readToken","copy","Token","takeToken","asArray","extractLineClasses","lineClass","flattenSpans","curStyle","addModeClass","mName","sawReadOnlySpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","stretchSpansOverChange","oldFirst","markedSpans","oldLast","isInsert","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansBefore","startsBefore","markedSpansAfter","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","detachMarkedSpans","detachLine","attachMarkedSpans","attachLine","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","toCmp","merged","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","p","found$1","findMaxLine","d","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","lastChild","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","attributes","displayText","trailingBefore","spaceBefore","special","specialChars","mustWrap","createDocumentFragment","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","part","buildCollapsedSpan","ignoreWidget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","foundBookmarks","endStyles","upto","tokenText","LineView","visualLineContinued","hidden","buildViewArray","nextPos","view","operationGroup","orphanDelayedCallbacks","signalLater","delayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","getLineContent","ext","built","background","updateLineBackground","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","markers","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","gutterSpecs","gutterWidth","alignable","isWidget","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","marginLeft","widgetHeight","parentStyle","gutters","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","data","paddingRight","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","barHeight","mapFromLineView","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","lineMeasure","updateExternalMeasurement","rect","hasHeights","prepared","varHeight","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","ensureLineHeights","place","nodeAndOffsetInLineMap","getUsefulRect","screen","logicalXDPI","deviceXDPI","normal","fromRange","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","maybeUpdateRectForZooming","rSpan","charWidth","nullRect","rtop","rbot","bot","bogus","singleCursorHeightPerLine","rbottom","measureCharInner","measureText","mStart","mEnd","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageScrollY","marginTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","preparedMeasure","get","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","textHeight","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","estHeight","posFromMouse","liberal","forRect","space","clientX","clientY","e$1","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","curFragment","cursors","selFragment","showCursorWhenSelecting","drawSelectionCursor","drawSelectionRange","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","wrapX","side","extent","iterateBidiSections","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","readOnly","selForContextMenu","receivedFocus","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","calculateScrollPos","snapMargin","screentop","docBottom","atTop","atBottom","newTop","gutterSpace","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","margin","cursorScrollMargin","scrollToCoords","scrollToCoordsRange","sPos","updateScrollTop","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","setScrollLeft","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","maybeDisable","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","op","updateInput","typing","changeObjs","cursorActivityCalled","selectionChanged","updateMaxLine","ops","ownsGroup","endOperation","endCb","group","fireCallbacksForOps","finishOperation","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","endOperations","scrollbarsClipped","marginBottom","borderRightWidth","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","doScroll","innerHeight","scrollNode","maybeScrollWindow","limit","changed","endCoords","scrollPos","startTop","startLeft","scrollPosIntoView","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","runInOp","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapWidth","adjustView","toUpdate","selSnapshot","active","anchorNode","extend","focusNode","focusOffset","selectionSnapshot","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","patchDisplay","snapshot","removeAllRanges","addRange","restoreSelection","selectionDiv","reportedViewFrom","reportedViewTo","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumInnerWidth","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","there","deepCopy","Range","normalizeSelection","mayTouch","selectionsMayTouch","prim","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","updateLine","linesFor","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","History","startGen","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","addChangeToHistory","selAfter","opId","hist","historyEventDelay","lastChangeEvent","pushSelectionToHistory","addSelectionToHistory","selectionEventCanBeMerged","clearRedo","existing","removeClearedSpans","explicitlyCleared","mergeOldSpans","getOldSpans","stretched","stretchCur","copyHistoryArray","newGroup","instantiateSel","event","newChanges","extendRange","posBefore","extendSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","setSelectionReplaceHistory","setSelectionNoUndo","NaN","filterSelectionChange","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","skipAtomic","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","parts","mk","newParts","dfrom","dto","removeReadOnlyRanges","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","returned","v","shiftDoc","distance","removed","recomputeMaxLength","checkWidthStart","retreatFrontier","changesHandler","changeHandler","makeChangeSingleDocInEditor","assign","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","this$1","oldH","nextMarkerId","TextMarker","cloneNode","isParent","SharedTextMarker","markTextShared","replacedWith","addToHistory","addMarkedSpan","clearOnEnter","clearHistory","withOp","visual","dHeight","findSharedMarkers","findMarks","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","constructor","getValue","lineSeparator","setValue","getLineNumber","getLineHandleVisualStart","extendSelectionsBy","addSelection","dup","newSel","hint","oldPrev","newPrev","computeReplacedSel","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","removeLineClass","addLineWidget","aboveVisible","removeLineWidget","realOpts","findMarksAt","getAllMarks","sepSize","copyHistory","linkedDoc","mFrom","mTo","subMark","copySharedMarkers","unlinkDoc","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","t","readTextFromFile","file","allowDropFileTypes","reader","onerror","readAsText","draggingText","text$1","getData","selected","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","resizeTimer","onResize","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","224","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","normalizeKeyName","alt","ctrl","normalizeKeyMap","keymap","keyname","getKeyMap","isModifierKey","addModifierNames","noShift","altKey","metaKey","shiftKey","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","basic","pcDefault","emacsy","macDefault","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","visualLineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","defaultTab","transposeChars","sels","openLine","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","keyMaps","extraKeys","lookupKeyForEditor","handleKeyBinding","lastStoppedKey","getField","handled","showCrossHair","onKeyPress","charCode","handleCharBinding","lastClick","lastDoubleClick","PastClick","onMouseDown","supportsTouch","clickInGutter","now","compare","clickRepeat","selectingText","handleMappedButton","contained","behavior","unit","addNew","moveOnDrag","configureMouse","dragDrop","moved","dragEnd","mouseMove","dragStart","preventScroll","e2","leftButtonStartDrag","ourRange","ourIndex","startSel","rangeForUnit","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","anchorLine","boundary","headIndex","usePart","bidiSimplify","editorSize","counter","curCount","leftButtonSelect","leftButtonDown","onContextMenu","findWordAt","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","theme","defaults","optionHandlers","dragDropChanged","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","pageX","pageY","frag","onDragOver","setData","effectAllowed","setDragImage","img","src","_top","onDragStart","registerEventHandlers","finishInit","initHooks","textRendering","how","aggressive","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","border","findPosH","origDir","lineDir","moveOnce","boundToLine","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","moveVisually","sawType","getHelper","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","nodeValue","curNode","previousSibling","dist$1","belongsToInput","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","screenReaderLabelChanged","label","removeAttribute","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","pollSelection","pollInterval","poll","scan","isInGutter","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","closing","extraLinebreak","addText","walk","cmText","markerID","isBlock","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","createField","textarea","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","deflt","notOnInit","newBreaks","integer","defineOptions","helpers","getDoc","addKeyMap","removeKeyMap","score","priority","insertSorted","modeSpec","newRanges","getTokenAt","getLineTokens","getHelpers","help","_global","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","amount","rtlMoveVisually","goalColumn","goals","startChar","scrollToRange","interpret","swapDoc","phrase","phraseText","phrases","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","addEditorMethods","dontDelegate","defineMIME","mime","fromTextArea","tabindex","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","addLegacyProps","version","factory","urlRE","modeConfig","codeDepth","gfmOverlay","codeBlock","ateSpace","difference","gitHubSpice","markdownConfig","taskLists","strikethrough","emoji","cmCfg","modeCfg","htmlMode","htmlModeMissing","highlightFormatting","maxBlockquoteDepth","fencedCodeBlockHighlighting","fencedCodeBlockDefaultMode","xml","tokenTypeOverrides","tokenTypes","header","list1","list2","list3","hr","image","imageAltText","imageMarker","formatting","linkInline","linkEmail","linkText","linkHref","em","strong","tokenType","hrRE","taskListRE","atxHeaderRE","allowAtxHeaderWithoutSpace","setextHeaderRE","textRE","fencedCodeRE","linkDefRE","punctuation","switchInline","inline","switchBlock","linkTitle","indentedCode","htmlBlock","exit","htmlState","tagStart","tokenize","isInText","inlineNormal","blockNormal","trailingSpaceNewLine","prevLine","thisLine","firstTokenOnLine","prevLineLineIsEmpty","prevLineIsIndentedCode","prevLineIsHr","prevLineIsList","maxNonCodeIndentation","listStack","lineIndentation","indentationDiff","allowsInlineContinuation","fencedCodeEnd","isHr","getType","setext","listType","taskList","fencedEndRE","localMode","findModeByName","mimes","localState","footnoteLink","md_inside","returnType","currListInd","hasExitedList","maxFencedEndInd","taskOpen","taskClosed","listMod","handleText","matchCh","regex","previousFormatting","formattingEscape","atts","leftFlanking","rightFlanking","setEm","setStrong","retType","endChar","returnState","linkRE","footnoteLinkInside","footnoteUrl","blockCommentStart","blockCommentEnd","closeBrackets","modeInfo","alias","findModeByMIME","findModeByExtension","findModeByFileName","filename","dot","htmlConfig","autoSelfClosers","implicitlyClosed","contextGrabbers","doNotIndent","allowUnquoted","allowMissing","xmlConfig","allowMissingTagName","editorConf","config_","setStyle","inText","chain","parser","inBlock","doctype","inTag","closure","baseState","tagName","isInAttribute","stringStartCol","terminator","startOfLine","noIndent","popContext","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","_stream","attrEqState","attrValueState","attrContinuedState","baseIndent","multilineTagIndentPastTag","multilineTagIndentFactor","alignCDATA","tagAfter","grabbers","configuration","skipAttribute","xmlCurrentTag","xmlCurrentContext","cx","tabAndIndentMarkdownList","shiftTabAndUnindentMarkdownList","marked","isMac","anchorToExternalRegex","bindings","toggleBold","toggleItalic","drawLink","toggleHeadingSmaller","toggleHeadingBigger","drawImage","toggleBlockquote","toggleOrderedList","toggleUnorderedList","toggleCodeBlock","togglePreview","toggleStrikethrough","toggleHeading1","toggleHeading2","toggleHeading3","cleanBlock","drawTable","drawHorizontalRule","toggleSideBySide","toggleFullScreen","shortcuts","isMobile","opera","fixShortcut","createToolbarDropdown","enableTooltips","createToolbarButton","childrenIndex","childElement","toolbarBuiltInButtons","enableActions","markup","actionName","tooltip","getBindingName","createTooltip","noDisable","classList","noMobile","classNameParts","iconClasses","classNameIndex","classNamePart","icon","iconClassIndex","iconClass","onclick","createSep","getState","stat","bold","italic","link","saved_overflow","editor","codemirror","sidebyside","onToggleFullScreen","maxHeight","removeProperty","setPreviewMaxHeight","toolbar_div","toolbarElements","fullscreen","toolbarButton","_toggleBlock","blockStyles","fenceCharsToInsert","fencing_line","token_state","code_type","line_num","firstTok","lastTok","fencedChars","block_start","block_end","cur_start","cur_end","tok","is_code","start_text","start_line","end_text","end_line","fence_chars","search_from","next_line","next_line_last_tok","no_sel_and_starting_of_line","sel_multi","start_line_sel","end_line_sel","repl_start","repl_end","_replaceSelection","insertFencingAtSelection","_toggleLine","_toggleHeading","startPoint","endPoint","_cleanBlock","url","promptURLs","promptTexts","insertTexts","drawUploadedImage","openBrowseFileWindow","afterImageUploaded","imageName","uploadedImage","updateStatusBar","imageTexts","sbOnUploaded","sbInit","table","horizontalRule","preview","useSideBySideListener","noFullscreenItems","gui","toolbar","statusbar","forEach","removeNoFullscreenClass","sideBySideFullscreen","addNoFullscreenClass","previewNormal","sideBySideRenderingFunction","newValue","previewRender","previewClass","isArray","startEnd","currHeadingLevel","listRegexp","whitespacesRegexp","repl","_toggle","untoggleOnly","char","_getChar","_checkChar","start_chars","end_chars","humanFileSize","bytes","units","u","toFixed","_mergeProperties","property","wordCount","default","timeFormat","locale","format","hour","minute","sbOnDragEnter","sbOnDrop","sbProgress","sizeUnits","errorMessages","noFileGiven","typeNotAllowed","fileTooLarge","importError","EasyMDE","autoDownloadFA","autoDownloadFontAwesome","styleSheets","href","showIcons","uploadImage","plainText","markdown","parsingConfig","autosave","errorCallback","errorMessage","imageMaxSize","imageAccept","unique_id","uniqueId","render","initialValue","foundSavedValue","imageUploadFunction","uploadImagesUsingCustomFunction","uploadImages","isLocalStorageAvailable","localStorage","setItem","removeItem","onSuccess","onError","names","uploadImageUsingCustomFunction","itemName","matchingClasses","markedOptions","renderingConfig","singleLineBreaks","breaks","codeSyntaxHighlighting","hljs","language","getLanguage","highlightAuto","setOptions","htmlText","sanitizerFunction","htmlDoc","DOMParser","parseFromString","listItems","listItem","listItemChild","HTMLInputElement","listStyleType","removeListStyleWhenCheckbox","linkString","fixedLinkString","addAnchorTargetBlank","_rendered","documentOnKeyDown","spellChecker","styleSelectedText","nativeSpellcheck","forceSync","easyMDEContainer","cmWrapper","createToolbar","createStatusbar","enabled","_autosave_timeout","submit_delay","handleImages","onWindowResize","sideBySide","createSideBySide","temp_cm","calcHeight","naturalWidth","naturalHeight","previewImagesInEditor","querySelectorAll","parentEl","hasAttribute","srcAttr","innerText","cleanup","easyMDE","binded","autosaveTimeoutId","loaded","getItem","getElementById","dd","Intl","DateTimeFormat","clearAutosavedValue","imageInput","click","onErrorSup","fillErrorMessage","imageUrl","formData","FormData","append","imageCSRFToken","request","upload","onprogress","lengthComputable","progress","total","imageUploadEndpoint","response","JSON","parse","error","filePath","location","statusText","filledErrorMessage","borderTopWidth","previewMaxHeight","syncSideBySidePreviewScroll","cScroll","pScroll","ratio","parseFloat","onscroll","items","toolbarData","toolbarGuideIcon","hideIcons","nonSeparatorIconsFollow","item","toolbarTips","multiple","accept","opacity","onUpdate","onActivity","isPreviewActive","isSideBySideActive","isFullscreenActive","sources","_class","isFunction","escapeRE","defaultOptions","fuzzyLink","fuzzyEmail","fuzzyIP","defaultSchemas","validate","http","src_auth","src_host_port_strict","src_path","no_http","src_domain","src_domain_root","src_port","src_host_terminator","mailto","src_email_name","src_host_strict","tlds_default","compile","__opts__","tlds","__tlds__","untpl","tpl","src_tlds","onCompile","__tlds_replaced__","src_xn","email_fuzzy","tpl_email_fuzzy","link_fuzzy","tpl_link_fuzzy","link_no_ip_fuzzy","tpl_link_no_ip_fuzzy","host_fuzzy_test","tpl_host_fuzzy_test","schemaError","__compiled__","__schemas__","compiled","createValidator","isString","slist","schema_test","src_ZPCc","schema_search","pretest","__index__","__text_cache__","resetScanCache","Match","__last_index__","schema","__schema__","createMatch","LinkifyIt","schemas","reduce","acc","definition","ml","tld_pos","testSchemaAt","keepOld","src_Any","src_Cc","src_Z","src_P","src_ZCc","src_pseudo_letter","src_ip4","src_host","tpl_host_fuzzy","tpl_host_no_ip_fuzzy","tpl_host_fuzzy_strict","tpl_host_port_fuzzy_strict","tpl_host_port_no_ip_fuzzy_strict","md","marker_str","marker_char","marker_len","_options","env","slf","nesting","attrJoin","renderToken","ruler","silent","marker_count","old_parent","old_line_max","auto_closed","bMarks","tShift","eMarks","sCount","blkIndent","skipSpaces","parentType","lineMax","renderer","rules","open_tag","close_tag","HTML_TAG_RE","HTML_OPEN_CLOSE_TAG_RE","_hasOwnProperty","has","object","isValidEntityCode","fromCodePoint","surrogate1","surrogate2","UNESCAPE_MD_RE","UNESCAPE_ALL_RE","DIGITAL_ENTITY_TEST_RE","entities","HTML_ESCAPE_TEST_RE","HTML_ESCAPE_REPLACE_RE","HTML_REPLACEMENTS","replaceUnsafeChar","REGEXP_ESCAPE_RE","UNICODE_PUNCT_RE","lib","mdurl","ucmicro","TypeError","unescapeMd","unescapeAll","escaped","entity","replaceEntityPattern","escapeHtml","arrayReplaceAt","newElements","isSpace","isWhiteSpace","isMdAsciiPunct","isPunctChar","normalizeReference","parseLinkLabel","parseLinkDestination","parseLinkTitle","disableNested","prevPos","labelEnd","posMax","skipToken","utils","Renderer","ParserCore","ParserBlock","ParserInline","punycode","zero","commonmark","BAD_PROTO_RE","GOOD_DATA_RE","validateLink","RECODE_HOSTNAME_FOR","normalizeLink","parsed","hostname","protocol","toASCII","er","encode","normalizeLinkText","toUnicode","decode","defaultChars","MarkdownIt","presetName","core","linkify","configure","presets","components","enableOnly","rules2","ruler2","enable","ignoreInvalid","disable","use","plugin","State","process","parseInline","inlineMode","renderInline","Ruler","_rules","getRules","hasEmptyLines","maxNesting","skipEmptyLines","tight","outTokens","Core","_rules2","pending","pushPending","html","xhtmlOut","langPrefix","typographer","quotes","default_rules","code_inline","renderAttrs","code_block","fence","tmpAttrs","tmpToken","langName","langAttrs","attrIndex","attrs","renderInlineAsText","hardbreak","softbreak","html_block","html_inline","nextToken","needLf","__rules__","__cache__","__find__","__compile__","chains","rule","altName","beforeName","ruleName","afterName","chainName","adjustTab","initial","lastLineEmpty","oldBMarks","oldBSCount","oldIndent","oldParentType","oldSCount","oldTShift","spaceAfterMarker","terminate","terminatorRules","isOutdented","oldLineMax","bsCount","mem","haveEndMarker","skipChars","skipSpacesBack","skipCharsBack","cnt","block_names","HTML_SEQUENCES","skipBulletListMarker","skipOrderedListMarker","contentStart","indentAfterMarker","isOrdered","itemLines","listLines","listTokIdx","markerCharCode","markerValue","oldListIndent","oldTight","posAfterMarker","prevEmptyEnd","isTerminatingParagraph","listIndent","markTightParagraphs","_endLine","destEndPos","destEndLineNo","references","StateBlock","indent_found","ddIndent","keepLastLF","lineIndent","queue","escapedSplit","isEscaped","columns","columnCount","aligns","tableLines","tbodyLines","isLinkClose","currentToken","nodes","htmlLinkLevel","fullUrl","urlText","links","blockTokens","NEWLINES_RE","NULL_RE","RARE_RE","SCOPED_ABBR_TEST_RE","SCOPED_ABBR_RE","SCOPED_ABBR","tm","replaceFn","replace_scoped","inlineTokens","inside_autolink","replace_rare","blkIdx","QUOTE_TEST_RE","QUOTE_RE","replaceAt","process_inlines","thisLevel","isLastPunctChar","isNextPunctChar","isLastWhiteSpace","isNextWhiteSpace","canOpen","canClose","isSingle","openQuote","closeQuote","OUTER","single","StateCore","EMAIL_RE","AUTOLINK_RE","linkMatch","emailMatch","matchStart","matchEnd","processDelimiters","delimiters","closerIdx","openerIdx","closer","opener","minOpenerIdx","newMinOpenerIdx","isOddMatch","lastJump","openersBottom","jump","tokens_meta","postProcess","startDelim","endDelim","scanned","scanDelims","can_open","can_close","DIGITAL_RE","NAMED_RE","ESCAPED","lc","isLetter","labelStart","parseReference","pmax","StateInline","pendingLevel","_prev_delimiters","token_meta","canSplitWord","left_flanking","right_flanking","loneMarkers","isTerminatorChar","meta","attrPush","attrData","attrSet","attrGet","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","_arrayLikeToArray","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","minLen","_unsupportedIterableToArray","createCommonjsModule","getDefaults","baseUrl","gfm","headerIds","headerPrefix","mangle","pedantic","sanitize","sanitizer","smartLists","smartypants","tokenizer","walkTokens","xhtml","changeDefaults","newDefaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","unescapeTest","unescape","_","caret","nonWordAndColonTest","originIndependentUrl","baseUrls","justDomain","domain","resolveUrl","rtrim","relativeBase","suffLen","currChar","getRegex","prot","decodeURIComponent","encodeURI","tableRow","cells","warn","defaults$1","rtrim$1","splitCells$1","_escape","findClosingBracket$1","outputLink","cap","Tokenizer_1","Tokenizer","_proto","newline","lastToken","trimRight","codeBlockStyle","fences","matchIndentToCode","indentToCode","matchIndentInNode","indentCodeCompensation","lang","heading","nptable","blockquote","bcurr","bnext","addBack","loose","istask","ischecked","bull","isordered","ordered","itemMatch","listItemStart","task","checked","def","lheading","paragraph","escape","inLink","inRawBlock","lastParenIndex","linkLen","_escapes","reflink","nolink","maskedSrc","prevChar","endReg","endAst","endUnd","middle","codespan","hasNonSpaceChars","hasSpaceCharsOnBothEnds","startsWith","endsWith","br","del","autolink","prevCapZero","_backpedal","inlineText","noopTest$1","edit$1","merge$1","_paragraph","_label","_title","_tag","_comment","reflinkSearch","_punctuation","_blockSkip","_overlapSkip","blockSkip","overlapSkip","_scheme","_email","_attribute","_href","_extended_email","defaults$2","block$1","inline$1","repeatString$1","random","Lexer_1","Lexer","lex","lexInline","Constructor","protoProps","staticProps","errMsg","l2","row","defaults$3","cleanUrl$1","escape$1","Renderer_1","_code","infostring","_html","slugger","slug","listitem","checkbox","tablerow","tablecell","_text","TextRenderer_1","TextRenderer","Slugger_1","Slugger","seen","serialize","getNextSafeSlug","originalSlug","isDryRun","occurenceAccumulator","dryrun","defaults$4","unescape$1","Parser_1","Parser","textRenderer","l3","cell","itemBody","merge$2","checkSanitizeDeprecation$1","escape$2","defaults$5","_tokens","extension","_loop","prevRenderer","_len","_key","_loop2","prevTokenizer","_len2","_key2","_step","_iterator","_step2","_iterator2","_step3","_iterator3","_step4","_iterator4","_cell","lexer","decodeCache","exclude","getDecodeCache","b1","b2","b3","b4","chr","componentChars","encodeCache","keepEscaped","nextCode","getEncodeCache","encodeURIComponent","auth","port","pathname","hash","Url","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","hostlessProtocol","slashedProtocol","slashesDenoteHost","lowerProto","hec","simplePath","proto","atSign","hostEnd","parseHost","ipv6Hostname","hostparts","newpart","validParts","notHost","bit","qm","maxInt","regexPunycode","regexNonASCII","regexSeparators","errors","stringFromCharCode","RangeError","mapDomain","encoded","ucs2decode","ucs2encode","digitToBasic","digit","flag","adapt","numPoints","firstTime","baseMinusTMin","inputLength","oldi","codePoint","baseMinusT","currentValue","basicLength","handledCPCount","handledCPCountPlusOne","q","qMinusT","dictionary","affData","wordsData","settings","dictionaryTable","compoundRules","compoundRuleCodes","replacementTable","memoized","path","_jlen","readDataFile","setFunc","_readFile","asyncLoad","then","setAffData","setup","setWordsData","_parseAFF","ONLYINCOMPOUND","_parseDIC","ruleText","expressionText","loadedCallback","dictionaryPath","getURL","__dirname","load","charset","async","promise","req","Promise","resolve","reject","overrideMimeType","fs","existsSync","readFileSync","numEntries","lineParts","_removeAffixComments","definitionParts","ruleType","ruleCode","combineable","entries","charactersToRemove","additionParts","charactersToAdd","continuationClasses","parseRuleCodes","regexToMatch","entry","_removeDicComments","addWord","ruleCodesArray","NEEDAFFIX","newWords","_applyRule","ii","_iilen","newWord","combineCode","combineRule","otherNewWords","iii","_iiilen","textCodes","FLAG","continuationRule","aWord","trimmedWord","checkExact","capitalizedWord","hasFlag","lowercaseWord","ruleCodes","COMPOUNDMIN","wordFlags","alphabet","suggest","memoizedLimit","replacementEntry","correctedWord","edits1","known_only","_edit","rv","ed1","weighted_corrections","ed1word","sorted_corrections","a_val","b_val","localeCompare","capitalization_scheme","working_limit","correct","Any","Cc","Cf","P","Z","MEME","ChatMeme","markdownIt","BaseMeme","Meme","Hooks","MemeSettings","QuickInsertPlugin","Handlebars","unregisterHelper","Boolean","owner","editable","$","SafeString","outerHTML","oldActivateListeners","FormApplication","activateListeners","each","_activateEditor","getProperty","dataset","editorOptions","saveCallback","_onEditorSave","callAll","makePreviewOnly","btn","ev","currentTarget","_onSubmit","activateRichTextFeatures","app","super","toggleSecretBlock","chooseImage","orig_text","secret","new_text","FilePicker","browse","_onDrop","game","insertIntoEditor","pack","packs","getEntity","CONFIG","collection","instance","_id","TextEditor","enrichHTML","secrets","documents","pluginBtn","btns","_sendChatMessage","_chatRecallMessageDown","_chatRecallMessageUp","emojiCode","ui","chat","processMessage","_remember","catch","notifications","_recall","PluginBase","QuickInsert","SearchContext","dependenciesLoaded","modules","loadDependencies","onRender","dep","import","Azzu","SettingsTypes","KeyBinding","eventIsForBinding","spawnCSS","onSubmit","journalLink","centering","targetRect","bodyRect","maxWidth","registerMenu","restricted","richText","Dialog","yes","reload","navSelector","contentSelector","submitOnClose","_getHeaderButtons","getSettingsData","expandObject","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","__esModule","toStringTag"],"mappings":"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","file":"index.js","sourcesContent":["// Use strict mode (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)\n\"use strict\";\n\n\n// Requires\nvar Typo = require(\"typo-js\");\n\n\n// Create function\nfunction CodeMirrorSpellChecker(options) {\n\t// Initialize\n\toptions = options || {};\n\n\n\t// Verify\n\tif(typeof options.codeMirrorInstance !== \"function\" || typeof options.codeMirrorInstance.defineMode !== \"function\") {\n\t\tconsole.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\");\n\t\treturn;\n\t}\n\n\n\t// Because some browsers don't support this functionality yet\n\tif(!String.prototype.includes) {\n\t\tString.prototype.includes = function() {\n\t\t\t\"use strict\";\n\t\t\treturn String.prototype.indexOf.apply(this, arguments) !== -1;\n\t\t};\n\t}\n\n\n\t// Define the new mode\n\toptions.codeMirrorInstance.defineMode(\"spell-checker\", function(config) {\n\t\t// Load AFF/DIC data\n\t\tif(!CodeMirrorSpellChecker.aff_loading) {\n\t\t\tCodeMirrorSpellChecker.aff_loading = true;\n\t\t\tvar xhr_aff = new XMLHttpRequest();\n\t\t\txhr_aff.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\", true);\n\t\t\txhr_aff.onload = function() {\n\t\t\t\tif(xhr_aff.readyState === 4 && xhr_aff.status === 200) {\n\t\t\t\t\tCodeMirrorSpellChecker.aff_data = xhr_aff.responseText;\n\t\t\t\t\tCodeMirrorSpellChecker.num_loaded++;\n\n\t\t\t\t\tif(CodeMirrorSpellChecker.num_loaded == 2) {\n\t\t\t\t\t\tCodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n\t\t\t\t\t\t\tplatform: \"any\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr_aff.send(null);\n\t\t}\n\n\t\tif(!CodeMirrorSpellChecker.dic_loading) {\n\t\t\tCodeMirrorSpellChecker.dic_loading = true;\n\t\t\tvar xhr_dic = new XMLHttpRequest();\n\t\t\txhr_dic.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\", true);\n\t\t\txhr_dic.onload = function() {\n\t\t\t\tif(xhr_dic.readyState === 4 && xhr_dic.status === 200) {\n\t\t\t\t\tCodeMirrorSpellChecker.dic_data = xhr_dic.responseText;\n\t\t\t\t\tCodeMirrorSpellChecker.num_loaded++;\n\n\t\t\t\t\tif(CodeMirrorSpellChecker.num_loaded == 2) {\n\t\t\t\t\t\tCodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n\t\t\t\t\t\t\tplatform: \"any\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr_dic.send(null);\n\t\t}\n\n\n\t\t// Define what separates a word\n\t\tvar rx_word = \"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \";\n\n\n\t\t// Create the overlay and such\n\t\tvar overlay = {\n\t\t\ttoken: function(stream) {\n\t\t\t\tvar ch = stream.peek();\n\t\t\t\tvar word = \"\";\n\n\t\t\t\tif(rx_word.includes(ch)) {\n\t\t\t\t\tstream.next();\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\twhile((ch = stream.peek()) != null && !rx_word.includes(ch)) {\n\t\t\t\t\tword += ch;\n\t\t\t\t\tstream.next();\n\t\t\t\t}\n\n\t\t\t\tif(CodeMirrorSpellChecker.typo && !CodeMirrorSpellChecker.typo.check(word))\n\t\t\t\t\treturn \"spell-error\"; // CSS class: cm-spell-error\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\tvar mode = options.codeMirrorInstance.getMode(\n\t\t\tconfig, config.backdrop || \"text/plain\"\n\t\t);\n\n\t\treturn options.codeMirrorInstance.overlayMode(mode, overlay, true);\n\t});\n}\n\n\n// Initialize data globally to reduce memory consumption\nCodeMirrorSpellChecker.num_loaded = 0;\nCodeMirrorSpellChecker.aff_loading = false;\nCodeMirrorSpellChecker.dic_loading = false;\nCodeMirrorSpellChecker.aff_data = \"\";\nCodeMirrorSpellChecker.dic_data = \"\";\nCodeMirrorSpellChecker.typo;\n\n\n// Export\nmodule.exports = CodeMirrorSpellChecker;","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Open simple dialogs on top of an editor. Relies on dialog.css.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  function dialogDiv(cm, template, bottom) {\n    var wrap = cm.getWrapperElement();\n    var dialog;\n    dialog = wrap.appendChild(document.createElement(\"div\"));\n    if (bottom)\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-bottom\";\n    else\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-top\";\n\n    if (typeof template == \"string\") {\n      dialog.innerHTML = template;\n    } else { // Assuming it's a detached DOM element.\n      dialog.appendChild(template);\n    }\n    CodeMirror.addClass(wrap, 'dialog-opened');\n    return dialog;\n  }\n\n  function closeNotification(cm, newVal) {\n    if (cm.state.currentNotificationClose)\n      cm.state.currentNotificationClose();\n    cm.state.currentNotificationClose = newVal;\n  }\n\n  CodeMirror.defineExtension(\"openDialog\", function(template, callback, options) {\n    if (!options) options = {};\n\n    closeNotification(this, null);\n\n    var dialog = dialogDiv(this, template, options.bottom);\n    var closed = false, me = this;\n    function close(newVal) {\n      if (typeof newVal == 'string') {\n        inp.value = newVal;\n      } else {\n        if (closed) return;\n        closed = true;\n        CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n        dialog.parentNode.removeChild(dialog);\n        me.focus();\n\n        if (options.onClose) options.onClose(dialog);\n      }\n    }\n\n    var inp = dialog.getElementsByTagName(\"input\")[0], button;\n    if (inp) {\n      inp.focus();\n\n      if (options.value) {\n        inp.value = options.value;\n        if (options.selectValueOnOpen !== false) {\n          inp.select();\n        }\n      }\n\n      if (options.onInput)\n        CodeMirror.on(inp, \"input\", function(e) { options.onInput(e, inp.value, close);});\n      if (options.onKeyUp)\n        CodeMirror.on(inp, \"keyup\", function(e) {options.onKeyUp(e, inp.value, close);});\n\n      CodeMirror.on(inp, \"keydown\", function(e) {\n        if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) { return; }\n        if (e.keyCode == 27 || (options.closeOnEnter !== false && e.keyCode == 13)) {\n          inp.blur();\n          CodeMirror.e_stop(e);\n          close();\n        }\n        if (e.keyCode == 13) callback(inp.value, e);\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(dialog, \"focusout\", function (evt) {\n        if (evt.relatedTarget !== null) close();\n      });\n    } else if (button = dialog.getElementsByTagName(\"button\")[0]) {\n      CodeMirror.on(button, \"click\", function() {\n        close();\n        me.focus();\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(button, \"blur\", close);\n\n      button.focus();\n    }\n    return close;\n  });\n\n  CodeMirror.defineExtension(\"openConfirm\", function(template, callbacks, options) {\n    closeNotification(this, null);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var buttons = dialog.getElementsByTagName(\"button\");\n    var closed = false, me = this, blurring = 1;\n    function close() {\n      if (closed) return;\n      closed = true;\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n      me.focus();\n    }\n    buttons[0].focus();\n    for (var i = 0; i < buttons.length; ++i) {\n      var b = buttons[i];\n      (function(callback) {\n        CodeMirror.on(b, \"click\", function(e) {\n          CodeMirror.e_preventDefault(e);\n          close();\n          if (callback) callback(me);\n        });\n      })(callbacks[i]);\n      CodeMirror.on(b, \"blur\", function() {\n        --blurring;\n        setTimeout(function() { if (blurring <= 0) close(); }, 200);\n      });\n      CodeMirror.on(b, \"focus\", function() { ++blurring; });\n    }\n  });\n\n  /*\n   * openNotification\n   * Opens a notification, that can be closed with an optional timer\n   * (default 5000ms timer) and always closes on click.\n   *\n   * If a notification is opened while another is opened, it will close the\n   * currently opened one and open the new one immediately.\n   */\n  CodeMirror.defineExtension(\"openNotification\", function(template, options) {\n    closeNotification(this, close);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var closed = false, doneTimer;\n    var duration = options && typeof options.duration !== \"undefined\" ? options.duration : 5000;\n\n    function close() {\n      if (closed) return;\n      closed = true;\n      clearTimeout(doneTimer);\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n    }\n\n    CodeMirror.on(dialog, 'click', function(e) {\n      CodeMirror.e_preventDefault(e);\n      close();\n    });\n\n    if (duration)\n      doneTimer = setTimeout(close, duration);\n\n    return close;\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n\n  CodeMirror.defineOption(\"autoRefresh\", false, function(cm, val) {\n    if (cm.state.autoRefresh) {\n      stopListening(cm, cm.state.autoRefresh)\n      cm.state.autoRefresh = null\n    }\n    if (val && cm.display.wrapper.offsetHeight == 0)\n      startListening(cm, cm.state.autoRefresh = {delay: val.delay || 250})\n  })\n\n  function startListening(cm, state) {\n    function check() {\n      if (cm.display.wrapper.offsetHeight) {\n        stopListening(cm, state)\n        if (cm.display.lastWrapHeight != cm.display.wrapper.clientHeight)\n          cm.refresh()\n      } else {\n        state.timeout = setTimeout(check, state.delay)\n      }\n    }\n    state.timeout = setTimeout(check, state.delay)\n    state.hurry = function() {\n      clearTimeout(state.timeout)\n      state.timeout = setTimeout(check, 50)\n    }\n    CodeMirror.on(window, \"mouseup\", state.hurry)\n    CodeMirror.on(window, \"keyup\", state.hurry)\n  }\n\n  function stopListening(_cm, state) {\n    clearTimeout(state.timeout)\n    CodeMirror.off(window, \"mouseup\", state.hurry)\n    CodeMirror.off(window, \"keyup\", state.hurry)\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"fullScreen\", false, function(cm, val, old) {\n    if (old == CodeMirror.Init) old = false;\n    if (!old == !val) return;\n    if (val) setFullscreen(cm);\n    else setNormal(cm);\n  });\n\n  function setFullscreen(cm) {\n    var wrap = cm.getWrapperElement();\n    cm.state.fullScreenRestore = {scrollTop: window.pageYOffset, scrollLeft: window.pageXOffset,\n                                  width: wrap.style.width, height: wrap.style.height};\n    wrap.style.width = \"\";\n    wrap.style.height = \"auto\";\n    wrap.className += \" CodeMirror-fullscreen\";\n    document.documentElement.style.overflow = \"hidden\";\n    cm.refresh();\n  }\n\n  function setNormal(cm) {\n    var wrap = cm.getWrapperElement();\n    wrap.className = wrap.className.replace(/\\s*CodeMirror-fullscreen\\b/, \"\");\n    document.documentElement.style.overflow = \"\";\n    var info = cm.state.fullScreenRestore;\n    wrap.style.width = info.width; wrap.style.height = info.height;\n    window.scrollTo(info.scrollLeft, info.scrollTop);\n    cm.refresh();\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  CodeMirror.defineOption(\"placeholder\", \"\", function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.on(\"blur\", onBlur);\n      cm.on(\"change\", onChange);\n      cm.on(\"swapDoc\", onChange);\n      CodeMirror.on(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose = function() { onComposition(cm) })\n      onChange(cm);\n    } else if (!val && prev) {\n      cm.off(\"blur\", onBlur);\n      cm.off(\"change\", onChange);\n      cm.off(\"swapDoc\", onChange);\n      CodeMirror.off(cm.getInputField(), \"compositionupdate\", cm.state.placeholderCompose)\n      clearPlaceholder(cm);\n      var wrapper = cm.getWrapperElement();\n      wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\");\n    }\n\n    if (val && !cm.hasFocus()) onBlur(cm);\n  });\n\n  function clearPlaceholder(cm) {\n    if (cm.state.placeholder) {\n      cm.state.placeholder.parentNode.removeChild(cm.state.placeholder);\n      cm.state.placeholder = null;\n    }\n  }\n  function setPlaceholder(cm) {\n    clearPlaceholder(cm);\n    var elt = cm.state.placeholder = document.createElement(\"pre\");\n    elt.style.cssText = \"height: 0; overflow: visible\";\n    elt.style.direction = cm.getOption(\"direction\");\n    elt.className = \"CodeMirror-placeholder CodeMirror-line-like\";\n    var placeHolder = cm.getOption(\"placeholder\")\n    if (typeof placeHolder == \"string\") placeHolder = document.createTextNode(placeHolder)\n    elt.appendChild(placeHolder)\n    cm.display.lineSpace.insertBefore(elt, cm.display.lineSpace.firstChild);\n  }\n\n  function onComposition(cm) {\n    setTimeout(function() {\n      var empty = false, input = cm.getInputField()\n      if (input.nodeName == \"TEXTAREA\")\n        empty = !input.value\n      else if (cm.lineCount() == 1)\n        empty = !/[^\\u200b]/.test(input.querySelector(\".CodeMirror-line\").textContent)\n      if (empty) setPlaceholder(cm)\n      else clearPlaceholder(cm)\n    }, 20)\n  }\n\n  function onBlur(cm) {\n    if (isEmpty(cm)) setPlaceholder(cm);\n  }\n  function onChange(cm) {\n    var wrapper = cm.getWrapperElement(), empty = isEmpty(cm);\n    wrapper.className = wrapper.className.replace(\" CodeMirror-empty\", \"\") + (empty ? \" CodeMirror-empty\" : \"\");\n\n    if (empty) setPlaceholder(cm);\n    else clearPlaceholder(cm);\n  }\n\n  function isEmpty(cm) {\n    return (cm.lineCount() === 1) && (cm.getLine(0) === \"\");\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var listRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]\\s|[*+-]\\s|(\\d+)([.)]))(\\s*)/,\n      emptyListRE = /^(\\s*)(>[> ]*|[*+-] \\[[x ]\\]|[*+-]|(\\d+)[.)])(\\s*)$/,\n      unorderedListRE = /[*+-]\\s/;\n\n  CodeMirror.commands.newlineAndIndentContinueMarkdownList = function(cm) {\n    if (cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n    var ranges = cm.listSelections(), replacements = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var pos = ranges[i].head;\n\n      // If we're not in Markdown mode, fall back to normal newlineAndIndent\n      var eolState = cm.getStateAfter(pos.line);\n      var inner = CodeMirror.innerMode(cm.getMode(), eolState);\n      if (inner.mode.name !== \"markdown\") {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      } else {\n        eolState = inner.state;\n      }\n\n      var inList = eolState.list !== false;\n      var inQuote = eolState.quote !== 0;\n\n      var line = cm.getLine(pos.line), match = listRE.exec(line);\n      var cursorBeforeBullet = /^\\s*$/.test(line.slice(0, pos.ch));\n      if (!ranges[i].empty() || (!inList && !inQuote) || !match || cursorBeforeBullet) {\n        cm.execCommand(\"newlineAndIndent\");\n        return;\n      }\n      if (emptyListRE.test(line)) {\n        var endOfQuote = inQuote && />\\s*$/.test(line)\n        var endOfList = !/>\\s*$/.test(line)\n        if (endOfQuote || endOfList) cm.replaceRange(\"\", {\n          line: pos.line, ch: 0\n        }, {\n          line: pos.line, ch: pos.ch + 1\n        });\n        replacements[i] = \"\\n\";\n      } else {\n        var indent = match[1], after = match[5];\n        var numbered = !(unorderedListRE.test(match[2]) || match[2].indexOf(\">\") >= 0);\n        var bullet = numbered ? (parseInt(match[3], 10) + 1) + match[4] : match[2].replace(\"x\", \" \");\n        replacements[i] = \"\\n\" + indent + bullet + after;\n\n        if (numbered) incrementRemainingMarkdownListNumbers(cm, pos);\n      }\n    }\n\n    cm.replaceSelections(replacements);\n  };\n\n  // Auto-updating Markdown list numbers when a new item is added to the\n  // middle of a list\n  function incrementRemainingMarkdownListNumbers(cm, pos) {\n    var startLine = pos.line, lookAhead = 0, skipCount = 0;\n    var startItem = listRE.exec(cm.getLine(startLine)), startIndent = startItem[1];\n\n    do {\n      lookAhead += 1;\n      var nextLineNumber = startLine + lookAhead;\n      var nextLine = cm.getLine(nextLineNumber), nextItem = listRE.exec(nextLine);\n\n      if (nextItem) {\n        var nextIndent = nextItem[1];\n        var newNumber = (parseInt(startItem[3], 10) + lookAhead - skipCount);\n        var nextNumber = (parseInt(nextItem[3], 10)), itemNumber = nextNumber;\n\n        if (startIndent === nextIndent && !isNaN(nextNumber)) {\n          if (newNumber === nextNumber) itemNumber = nextNumber + 1;\n          if (newNumber > nextNumber) itemNumber = newNumber + 1;\n          cm.replaceRange(\n            nextLine.replace(listRE, nextIndent + itemNumber + nextItem[4] + nextItem[5]),\n          {\n            line: nextLineNumber, ch: 0\n          }, {\n            line: nextLineNumber, ch: nextLine.length\n          });\n        } else {\n          if (startIndent.length > nextIndent.length) return;\n          // This doesn't run if the next line immediatley indents, as it is\n          // not clear of the users intention (new indented item or same level)\n          if ((startIndent.length < nextIndent.length) && (lookAhead === 1)) return;\n          skipCount += 1;\n        }\n      }\n    } while (nextItem);\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\n    (document.documentMode == null || document.documentMode < 8);\n\n  var Pos = CodeMirror.Pos;\n\n  var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\", \"<\": \">>\", \">\": \"<<\"};\n\n  function bracketRegex(config) {\n    return config && config.bracketRegex || /[(){}[\\]]/\n  }\n\n  function findMatchingBracket(cm, where, config) {\n    var line = cm.getLineHandle(where.line), pos = where.ch - 1;\n    var afterCursor = config && config.afterCursor\n    if (afterCursor == null)\n      afterCursor = /(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className)\n    var re = bracketRegex(config)\n\n    // A cursor is defined as between two characters, but in in vim command mode\n    // (i.e. not insert mode), the cursor is visually represented as a\n    // highlighted box on top of the 2nd character. Otherwise, we allow matches\n    // from before or after the cursor.\n    var match = (!afterCursor && pos >= 0 && re.test(line.text.charAt(pos)) && matching[line.text.charAt(pos)]) ||\n        re.test(line.text.charAt(pos + 1)) && matching[line.text.charAt(++pos)];\n    if (!match) return null;\n    var dir = match.charAt(1) == \">\" ? 1 : -1;\n    if (config && config.strict && (dir > 0) != (pos == where.ch)) return null;\n    var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\n\n    var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style || null, config);\n    if (found == null) return null;\n    return {from: Pos(where.line, pos), to: found && found.pos,\n            match: found && found.ch == match.charAt(0), forward: dir > 0};\n  }\n\n  // bracketRegex is used to specify which type of bracket to scan\n  // should be a regexp, e.g. /[[\\]]/\n  //\n  // Note: If \"where\" is on an open bracket, then this bracket is ignored.\n  //\n  // Returns false when no bracket was found, null when it reached\n  // maxScanLines and gave up\n  function scanForBracket(cm, where, dir, style, config) {\n    var maxScanLen = (config && config.maxScanLineLength) || 10000;\n    var maxScanLines = (config && config.maxScanLines) || 1000;\n\n    var stack = [];\n    var re = bracketRegex(config)\n    var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\n                          : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\n    for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\n      var line = cm.getLine(lineNo);\n      if (!line) continue;\n      var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\n      if (line.length > maxScanLen) continue;\n      if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\n      for (; pos != end; pos += dir) {\n        var ch = line.charAt(pos);\n        if (re.test(ch) && (style === undefined || cm.getTokenTypeAt(Pos(lineNo, pos + 1)) == style)) {\n          var match = matching[ch];\n          if (match && (match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\n          else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\n          else stack.pop();\n        }\n      }\n    }\n    return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\n  }\n\n  function matchBrackets(cm, autoclear, config) {\n    // Disable brace matching in long lines, since it'll cause hugely slow updates\n    var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000;\n    var marks = [], ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, config);\n      if (match && cm.getLine(match.from.line).length <= maxHighlightLen) {\n        var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\n        marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\n        if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\n          marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\n      }\n    }\n\n    if (marks.length) {\n      // Kludge to work around the IE bug from issue #1193, where text\n      // input stops going to the textare whever this fires.\n      if (ie_lt8 && cm.state.focused) cm.focus();\n\n      var clear = function() {\n        cm.operation(function() {\n          for (var i = 0; i < marks.length; i++) marks[i].clear();\n        });\n      };\n      if (autoclear) setTimeout(clear, 800);\n      else return clear;\n    }\n  }\n\n  function doMatchBrackets(cm) {\n    cm.operation(function() {\n      if (cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n      cm.state.matchBrackets.currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\n    });\n  }\n\n  CodeMirror.defineOption(\"matchBrackets\", false, function(cm, val, old) {\n    function clear(cm) {\n      if (cm.state.matchBrackets && cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n    }\n\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchBrackets);\n      cm.off(\"focus\", doMatchBrackets)\n      cm.off(\"blur\", clear)\n      clear(cm);\n    }\n    if (val) {\n      cm.state.matchBrackets = typeof val == \"object\" ? val : {};\n      cm.on(\"cursorActivity\", doMatchBrackets);\n      cm.on(\"focus\", doMatchBrackets)\n      cm.on(\"blur\", clear)\n    }\n  });\n\n  CodeMirror.defineExtension(\"matchBrackets\", function() {matchBrackets(this, true);});\n  CodeMirror.defineExtension(\"findMatchingBracket\", function(pos, config, oldConfig){\n    // Backwards-compatibility kludge\n    if (oldConfig || typeof config == \"boolean\") {\n      if (!oldConfig) {\n        config = config ? {strict: true} : null\n      } else {\n        oldConfig.strict = config\n        config = oldConfig\n      }\n    }\n    return findMatchingBracket(this, pos, config)\n  });\n  CodeMirror.defineExtension(\"scanForBracket\", function(pos, dir, style, config){\n    return scanForBracket(this, pos, dir, style, config);\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Utility function that allows modes to be combined. The mode given\n// as the base argument takes care of most of the normal mode\n// functionality, but a second (typically simple) mode is used, which\n// can override the style of text. Both modes get to parse all of the\n// text, but when both assign a non-null style to a piece of code, the\n// overlay wins, unless the combine argument was true and not overridden,\n// or state.overlay.combineTokens was true, in which case the styles are\n// combined.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.overlayMode = function(base, overlay, combine) {\n  return {\n    startState: function() {\n      return {\n        base: CodeMirror.startState(base),\n        overlay: CodeMirror.startState(overlay),\n        basePos: 0, baseCur: null,\n        overlayPos: 0, overlayCur: null,\n        streamSeen: null\n      };\n    },\n    copyState: function(state) {\n      return {\n        base: CodeMirror.copyState(base, state.base),\n        overlay: CodeMirror.copyState(overlay, state.overlay),\n        basePos: state.basePos, baseCur: null,\n        overlayPos: state.overlayPos, overlayCur: null\n      };\n    },\n\n    token: function(stream, state) {\n      if (stream != state.streamSeen ||\n          Math.min(state.basePos, state.overlayPos) < stream.start) {\n        state.streamSeen = stream;\n        state.basePos = state.overlayPos = stream.start;\n      }\n\n      if (stream.start == state.basePos) {\n        state.baseCur = base.token(stream, state.base);\n        state.basePos = stream.pos;\n      }\n      if (stream.start == state.overlayPos) {\n        stream.pos = stream.start;\n        state.overlayCur = overlay.token(stream, state.overlay);\n        state.overlayPos = stream.pos;\n      }\n      stream.pos = Math.min(state.basePos, state.overlayPos);\n\n      // state.overlay.combineTokens always takes precedence over combine,\n      // unless set to null\n      if (state.overlayCur == null) return state.baseCur;\n      else if (state.baseCur != null &&\n               state.overlay.combineTokens ||\n               combine && state.overlay.combineTokens == null)\n        return state.baseCur + \" \" + state.overlayCur;\n      else return state.overlayCur;\n    },\n\n    indent: base.indent && function(state, textAfter, line) {\n      return base.indent(state.base, textAfter, line);\n    },\n    electricChars: base.electricChars,\n\n    innerMode: function(state) { return {state: state.base, mode: base}; },\n\n    blankLine: function(state) {\n      var baseToken, overlayToken;\n      if (base.blankLine) baseToken = base.blankLine(state.base);\n      if (overlay.blankLine) overlayToken = overlay.blankLine(state.overlay);\n\n      return overlayToken == null ?\n        baseToken :\n        (combine && baseToken != null ? baseToken + \" \" + overlayToken : overlayToken);\n    }\n  };\n};\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n  var Pos = CodeMirror.Pos\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\")\n      + (regexp.global ? \"g\" : \"\")\n      + (regexp.multiline ? \"m\" : \"\")\n  }\n\n  function ensureFlags(regexp, flags) {\n    var current = regexpFlags(regexp), target = current\n    for (var i = 0; i < flags.length; i++) if (target.indexOf(flags.charAt(i)) == -1)\n      target += flags.charAt(i)\n    return current == target ? regexp : new RegExp(regexp.source, target)\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source)\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch\n      var string = doc.getLine(line), match = regexp.exec(string)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start)\n\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunk = 1\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        if (line > last) break\n        var curLine = doc.getLine(line++)\n        string = string == null ? curLine : string + \"\\n\" + curLine\n      }\n      chunk = chunk * 2\n      regexp.lastIndex = start.ch\n      var match = regexp.exec(string)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = start.line + before.length - 1, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp, endMargin) {\n    var match, from = 0\n    while (from <= string.length) {\n      regexp.lastIndex = from\n      var newMatch = regexp.exec(string)\n      if (!newMatch) break\n      var end = newMatch.index + newMatch[0].length\n      if (end > string.length - endMargin) break\n      if (!match || end > match.index + match[0].length)\n        match = newMatch\n      from = newMatch.index + 1\n    }\n    return match\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line)\n      var match = lastMatchIn(string, regexp, ch < 0 ? 0 : string.length - ch)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpBackward(doc, regexp, start)\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunkSize = 1, endMargin = doc.getLine(start.line).length - start.ch\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunkSize && line >= first; i++) {\n        var curLine = doc.getLine(line--)\n        string = string == null ? curLine : curLine + \"\\n\" + string\n      }\n      chunkSize *= 2\n\n      var match = lastMatchIn(string, regexp, endMargin)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = line + before.length, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  var doFold, noFold\n  if (String.prototype.normalize) {\n    doFold = function(str) { return str.normalize(\"NFD\").toLowerCase() }\n    noFold = function(str) { return str.normalize(\"NFD\") }\n  } else {\n    doFold = function(str) { return str.toLowerCase() }\n    noFold = function(str) { return str }\n  }\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min\n      var mid = (min + max) >> 1\n      var len = foldFunc(orig.slice(0, mid)).length\n      if (len == pos) return mid\n      else if (len > pos) max = mid\n      else min = mid + 1\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch), string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0])\n        if (found == -1) continue search\n        var start = adjustPos(orig, string, found, fold) + ch\n        return {from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)}\n      } else {\n        var cutFrom = string.length - lines[0].length\n        if (string.slice(cutFrom) != lines[0]) continue search\n        for (var i = 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search\n        var end = doc.getLine(line + lines.length - 1), endString = fold(end), lastLine = lines[lines.length - 1]\n        if (endString.slice(0, lastLine.length) != lastLine) continue search\n        return {from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n                to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line)\n      if (ch > -1) orig = orig.slice(0, ch)\n      var string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0])\n        if (found == -1) continue search\n        return {from: Pos(line, adjustPos(orig, string, found, fold)),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))}\n      } else {\n        var lastLine = lines[lines.length - 1]\n        if (string.slice(0, lastLine.length) != lastLine) continue search\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search\n        var top = doc.getLine(line + 1 - lines.length), topString = fold(top)\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search\n        return {from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n                to: Pos(line, adjustPos(orig, string, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false\n    this.doc = doc\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0)\n    this.pos = {from: pos, to: pos}\n\n    var caseFold\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold\n    } else { // Backwards compat for when caseFold was the 4th argument\n      caseFold = options\n      options = null\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false\n      this.matches = function(reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold)\n      }\n    } else {\n      query = ensureFlags(query, \"gm\")\n      if (!options || options.multiline !== false)\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos)\n        }\n      else\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos)\n        }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false)},\n    findPrevious: function() {return this.find(true)},\n\n    find: function(reverse) {\n      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to))\n\n      // Implements weird auto-growing behavior on null-matches for\n      // backwards-compatibility with the vim code (unfortunately)\n      while (result && CodeMirror.cmpPos(result.from, result.to) == 0) {\n        if (reverse) {\n          if (result.from.ch) result.from = Pos(result.from.line, result.from.ch - 1)\n          else if (result.from.line == this.doc.firstLine()) result = null\n          else result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)))\n        } else {\n          if (result.to.ch < this.doc.getLine(result.to.line).length) result.to = Pos(result.to.line, result.to.ch + 1)\n          else if (result.to.line == this.doc.lastLine()) result = null\n          else result = this.matches(reverse, Pos(result.to.line + 1, 0))\n        }\n      }\n\n      if (result) {\n        this.pos = result\n        this.atOccurrence = true\n        return this.pos.match || true\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0)\n        this.pos = {from: end, to: end}\n        return this.atOccurrence = false\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from},\n    to: function() {if (this.atOccurrence) return this.pos.to},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return\n      var lines = CodeMirror.splitLines(newText)\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin)\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0))\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold)\n  })\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold)\n  })\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = []\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold)\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break\n      ranges.push({anchor: cur.from(), head: cur.to()})\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0)\n  })\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Because sometimes you need to mark the selected *text*.\n//\n// Adds an option 'styleSelectedText' which, when enabled, gives\n// selected text the CSS class given as option value, or\n// \"CodeMirror-selectedtext\" when the value is not a string.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"styleSelectedText\", false, function(cm, val, old) {\n    var prev = old && old != CodeMirror.Init;\n    if (val && !prev) {\n      cm.state.markedSelection = [];\n      cm.state.markedSelectionStyle = typeof val == \"string\" ? val : \"CodeMirror-selectedtext\";\n      reset(cm);\n      cm.on(\"cursorActivity\", onCursorActivity);\n      cm.on(\"change\", onChange);\n    } else if (!val && prev) {\n      cm.off(\"cursorActivity\", onCursorActivity);\n      cm.off(\"change\", onChange);\n      clear(cm);\n      cm.state.markedSelection = cm.state.markedSelectionStyle = null;\n    }\n  });\n\n  function onCursorActivity(cm) {\n    if (cm.state.markedSelection)\n      cm.operation(function() { update(cm); });\n  }\n\n  function onChange(cm) {\n    if (cm.state.markedSelection && cm.state.markedSelection.length)\n      cm.operation(function() { clear(cm); });\n  }\n\n  var CHUNK_SIZE = 8;\n  var Pos = CodeMirror.Pos;\n  var cmp = CodeMirror.cmpPos;\n\n  function coverRange(cm, from, to, addAt) {\n    if (cmp(from, to) == 0) return;\n    var array = cm.state.markedSelection;\n    var cls = cm.state.markedSelectionStyle;\n    for (var line = from.line;;) {\n      var start = line == from.line ? from : Pos(line, 0);\n      var endLine = line + CHUNK_SIZE, atEnd = endLine >= to.line;\n      var end = atEnd ? to : Pos(endLine, 0);\n      var mark = cm.markText(start, end, {className: cls});\n      if (addAt == null) array.push(mark);\n      else array.splice(addAt++, 0, mark);\n      if (atEnd) break;\n      line = endLine;\n    }\n  }\n\n  function clear(cm) {\n    var array = cm.state.markedSelection;\n    for (var i = 0; i < array.length; ++i) array[i].clear();\n    array.length = 0;\n  }\n\n  function reset(cm) {\n    clear(cm);\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++)\n      coverRange(cm, ranges[i].from(), ranges[i].to());\n  }\n\n  function update(cm) {\n    if (!cm.somethingSelected()) return clear(cm);\n    if (cm.listSelections().length > 1) return reset(cm);\n\n    var from = cm.getCursor(\"start\"), to = cm.getCursor(\"end\");\n\n    var array = cm.state.markedSelection;\n    if (!array.length) return coverRange(cm, from, to);\n\n    var coverStart = array[0].find(), coverEnd = array[array.length - 1].find();\n    if (!coverStart || !coverEnd || to.line - from.line <= CHUNK_SIZE ||\n        cmp(from, coverEnd.to) >= 0 || cmp(to, coverStart.from) <= 0)\n      return reset(cm);\n\n    while (cmp(from, coverStart.from) > 0) {\n      array.shift().clear();\n      coverStart = array[0].find();\n    }\n    if (cmp(from, coverStart.from) < 0) {\n      if (coverStart.to.line - from.line < CHUNK_SIZE) {\n        array.shift().clear();\n        coverRange(cm, from, coverStart.to, 0);\n      } else {\n        coverRange(cm, from, coverStart.from, 0);\n      }\n    }\n\n    while (cmp(to, coverEnd.to) < 0) {\n      array.pop().clear();\n      coverEnd = array[array.length - 1].find();\n    }\n    if (cmp(to, coverEnd.to) > 0) {\n      if (to.line - coverEnd.from.line < CHUNK_SIZE) {\n        array.pop().clear();\n        coverRange(cm, coverEnd.from, to);\n      } else {\n        coverRange(cm, coverEnd.to, to);\n      }\n    }\n  }\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n/**\n * Supported keybindings:\n *   Too many to list. Refer to defaultKeymap below.\n *\n * Supported Ex commands:\n *   Refer to defaultExCommandMap below.\n *\n * Registers: unnamed, -, ., :, /, _, a-z, A-Z, 0-9\n *   (Does not respect the special case for number registers when delete\n *    operator is made with these commands: %, (, ),  , /, ?, n, N, {, } )\n *   TODO: Implement the remaining registers.\n *\n * Marks: a-z, A-Z, and 0-9\n *   TODO: Implement the remaining special marks. They have more complex\n *       behavior.\n *\n * Events:\n *  'vim-mode-change' - raised on the editor anytime the current mode changes,\n *                      Event object: {mode: \"visual\", subMode: \"linewise\"}\n *\n * Code structure:\n *  1. Default keymap\n *  2. Variable declarations and short basic helpers\n *  3. Instance (External API) implementation\n *  4. Internal state tracking objects (input state, counter) implementation\n *     and instantiation\n *  5. Key handler (the main command dispatcher) implementation\n *  6. Motion, operator, and action implementations\n *  7. Helper functions for the key handler, motions, operators, and actions\n *  8. Set up Vim to work as a keymap for CodeMirror.\n *  9. Ex command implementations.\n */\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"), require(\"../addon/search/searchcursor\"), require(\"../addon/dialog/dialog\"), require(\"../addon/edit/matchbrackets.js\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\", \"../addon/search/searchcursor\", \"../addon/dialog/dialog\", \"../addon/edit/matchbrackets\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  'use strict';\n\n  var defaultKeymap = [\n    // Key to key mapping. This goes first to make it possible to override\n    // existing mappings.\n    { keys: '<Left>', type: 'keyToKey', toKeys: 'h' },\n    { keys: '<Right>', type: 'keyToKey', toKeys: 'l' },\n    { keys: '<Up>', type: 'keyToKey', toKeys: 'k' },\n    { keys: '<Down>', type: 'keyToKey', toKeys: 'j' },\n    { keys: '<Space>', type: 'keyToKey', toKeys: 'l' },\n    { keys: '<BS>', type: 'keyToKey', toKeys: 'h', context: 'normal'},\n    { keys: '<Del>', type: 'keyToKey', toKeys: 'x', context: 'normal'},\n    { keys: '<C-Space>', type: 'keyToKey', toKeys: 'W' },\n    { keys: '<C-BS>', type: 'keyToKey', toKeys: 'B', context: 'normal' },\n    { keys: '<S-Space>', type: 'keyToKey', toKeys: 'w' },\n    { keys: '<S-BS>', type: 'keyToKey', toKeys: 'b', context: 'normal' },\n    { keys: '<C-n>', type: 'keyToKey', toKeys: 'j' },\n    { keys: '<C-p>', type: 'keyToKey', toKeys: 'k' },\n    { keys: '<C-[>', type: 'keyToKey', toKeys: '<Esc>' },\n    { keys: '<C-c>', type: 'keyToKey', toKeys: '<Esc>' },\n    { keys: '<C-[>', type: 'keyToKey', toKeys: '<Esc>', context: 'insert' },\n    { keys: '<C-c>', type: 'keyToKey', toKeys: '<Esc>', context: 'insert' },\n    { keys: 's', type: 'keyToKey', toKeys: 'cl', context: 'normal' },\n    { keys: 's', type: 'keyToKey', toKeys: 'c', context: 'visual'},\n    { keys: 'S', type: 'keyToKey', toKeys: 'cc', context: 'normal' },\n    { keys: 'S', type: 'keyToKey', toKeys: 'VdO', context: 'visual' },\n    { keys: '<Home>', type: 'keyToKey', toKeys: '0' },\n    { keys: '<End>', type: 'keyToKey', toKeys: '$' },\n    { keys: '<PageUp>', type: 'keyToKey', toKeys: '<C-b>' },\n    { keys: '<PageDown>', type: 'keyToKey', toKeys: '<C-f>' },\n    { keys: '<CR>', type: 'keyToKey', toKeys: 'j^', context: 'normal' },\n    { keys: '<Ins>', type: 'action', action: 'toggleOverwrite', context: 'insert' },\n    // Motions\n    { keys: 'H', type: 'motion', motion: 'moveToTopLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'M', type: 'motion', motion: 'moveToMiddleLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'L', type: 'motion', motion: 'moveToBottomLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'h', type: 'motion', motion: 'moveByCharacters', motionArgs: { forward: false }},\n    { keys: 'l', type: 'motion', motion: 'moveByCharacters', motionArgs: { forward: true }},\n    { keys: 'j', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, linewise: true }},\n    { keys: 'k', type: 'motion', motion: 'moveByLines', motionArgs: { forward: false, linewise: true }},\n    { keys: 'gj', type: 'motion', motion: 'moveByDisplayLines', motionArgs: { forward: true }},\n    { keys: 'gk', type: 'motion', motion: 'moveByDisplayLines', motionArgs: { forward: false }},\n    { keys: 'w', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: false }},\n    { keys: 'W', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: false, bigWord: true }},\n    { keys: 'e', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: true, inclusive: true }},\n    { keys: 'E', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: true, bigWord: true, inclusive: true }},\n    { keys: 'b', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false }},\n    { keys: 'B', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false, bigWord: true }},\n    { keys: 'ge', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: true, inclusive: true }},\n    { keys: 'gE', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: true, bigWord: true, inclusive: true }},\n    { keys: '{', type: 'motion', motion: 'moveByParagraph', motionArgs: { forward: false, toJumplist: true }},\n    { keys: '}', type: 'motion', motion: 'moveByParagraph', motionArgs: { forward: true, toJumplist: true }},\n    { keys: '(', type: 'motion', motion: 'moveBySentence', motionArgs: { forward: false }},\n    { keys: ')', type: 'motion', motion: 'moveBySentence', motionArgs: { forward: true }},\n    { keys: '<C-f>', type: 'motion', motion: 'moveByPage', motionArgs: { forward: true }},\n    { keys: '<C-b>', type: 'motion', motion: 'moveByPage', motionArgs: { forward: false }},\n    { keys: '<C-d>', type: 'motion', motion: 'moveByScroll', motionArgs: { forward: true, explicitRepeat: true }},\n    { keys: '<C-u>', type: 'motion', motion: 'moveByScroll', motionArgs: { forward: false, explicitRepeat: true }},\n    { keys: 'gg', type: 'motion', motion: 'moveToLineOrEdgeOfDocument', motionArgs: { forward: false, explicitRepeat: true, linewise: true, toJumplist: true }},\n    { keys: 'G', type: 'motion', motion: 'moveToLineOrEdgeOfDocument', motionArgs: { forward: true, explicitRepeat: true, linewise: true, toJumplist: true }},\n    { keys: '0', type: 'motion', motion: 'moveToStartOfLine' },\n    { keys: '^', type: 'motion', motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: '+', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, toFirstChar:true }},\n    { keys: '-', type: 'motion', motion: 'moveByLines', motionArgs: { forward: false, toFirstChar:true }},\n    { keys: '_', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, toFirstChar:true, repeatOffset:-1 }},\n    { keys: '$', type: 'motion', motion: 'moveToEol', motionArgs: { inclusive: true }},\n    { keys: '%', type: 'motion', motion: 'moveToMatchedSymbol', motionArgs: { inclusive: true, toJumplist: true }},\n    { keys: 'f<character>', type: 'motion', motion: 'moveToCharacter', motionArgs: { forward: true , inclusive: true }},\n    { keys: 'F<character>', type: 'motion', motion: 'moveToCharacter', motionArgs: { forward: false }},\n    { keys: 't<character>', type: 'motion', motion: 'moveTillCharacter', motionArgs: { forward: true, inclusive: true }},\n    { keys: 'T<character>', type: 'motion', motion: 'moveTillCharacter', motionArgs: { forward: false }},\n    { keys: ';', type: 'motion', motion: 'repeatLastCharacterSearch', motionArgs: { forward: true }},\n    { keys: ',', type: 'motion', motion: 'repeatLastCharacterSearch', motionArgs: { forward: false }},\n    { keys: '\\'<character>', type: 'motion', motion: 'goToMark', motionArgs: {toJumplist: true, linewise: true}},\n    { keys: '`<character>', type: 'motion', motion: 'goToMark', motionArgs: {toJumplist: true}},\n    { keys: ']`', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: true } },\n    { keys: '[`', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: false } },\n    { keys: ']\\'', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: true, linewise: true } },\n    { keys: '[\\'', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: false, linewise: true } },\n    // the next two aren't motions but must come before more general motion declarations\n    { keys: ']p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: true, isEdit: true, matchIndent: true}},\n    { keys: '[p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: false, isEdit: true, matchIndent: true}},\n    { keys: ']<character>', type: 'motion', motion: 'moveToSymbol', motionArgs: { forward: true, toJumplist: true}},\n    { keys: '[<character>', type: 'motion', motion: 'moveToSymbol', motionArgs: { forward: false, toJumplist: true}},\n    { keys: '|', type: 'motion', motion: 'moveToColumn'},\n    { keys: 'o', type: 'motion', motion: 'moveToOtherHighlightedEnd', context:'visual'},\n    { keys: 'O', type: 'motion', motion: 'moveToOtherHighlightedEnd', motionArgs: {sameLine: true}, context:'visual'},\n    // Operators\n    { keys: 'd', type: 'operator', operator: 'delete' },\n    { keys: 'y', type: 'operator', operator: 'yank' },\n    { keys: 'c', type: 'operator', operator: 'change' },\n    { keys: '=', type: 'operator', operator: 'indentAuto' },\n    { keys: '>', type: 'operator', operator: 'indent', operatorArgs: { indentRight: true }},\n    { keys: '<', type: 'operator', operator: 'indent', operatorArgs: { indentRight: false }},\n    { keys: 'g~', type: 'operator', operator: 'changeCase' },\n    { keys: 'gu', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: true}, isEdit: true },\n    { keys: 'gU', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: false}, isEdit: true },\n    { keys: 'n', type: 'motion', motion: 'findNext', motionArgs: { forward: true, toJumplist: true }},\n    { keys: 'N', type: 'motion', motion: 'findNext', motionArgs: { forward: false, toJumplist: true }},\n    { keys: 'gn', type: 'motion', motion: 'findAndSelectNextInclusive', motionArgs: { forward: true }},\n    { keys: 'gN', type: 'motion', motion: 'findAndSelectNextInclusive', motionArgs: { forward: false }},\n    // Operator-Motion dual commands\n    { keys: 'x', type: 'operatorMotion', operator: 'delete', motion: 'moveByCharacters', motionArgs: { forward: true }, operatorMotionArgs: { visualLine: false }},\n    { keys: 'X', type: 'operatorMotion', operator: 'delete', motion: 'moveByCharacters', motionArgs: { forward: false }, operatorMotionArgs: { visualLine: true }},\n    { keys: 'D', type: 'operatorMotion', operator: 'delete', motion: 'moveToEol', motionArgs: { inclusive: true }, context: 'normal'},\n    { keys: 'D', type: 'operator', operator: 'delete', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: 'Y', type: 'operatorMotion', operator: 'yank', motion: 'expandToLine', motionArgs: { linewise: true }, context: 'normal'},\n    { keys: 'Y', type: 'operator', operator: 'yank', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: 'C', type: 'operatorMotion', operator: 'change', motion: 'moveToEol', motionArgs: { inclusive: true }, context: 'normal'},\n    { keys: 'C', type: 'operator', operator: 'change', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: '~', type: 'operatorMotion', operator: 'changeCase', motion: 'moveByCharacters', motionArgs: { forward: true }, operatorArgs: { shouldMoveCursor: true }, context: 'normal'},\n    { keys: '~', type: 'operator', operator: 'changeCase', context: 'visual'},\n    { keys: '<C-w>', type: 'operatorMotion', operator: 'delete', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false }, context: 'insert' },\n    //ignore C-w in normal mode\n    { keys: '<C-w>', type: 'idle', context: 'normal' },\n    // Actions\n    { keys: '<C-i>', type: 'action', action: 'jumpListWalk', actionArgs: { forward: true }},\n    { keys: '<C-o>', type: 'action', action: 'jumpListWalk', actionArgs: { forward: false }},\n    { keys: '<C-e>', type: 'action', action: 'scroll', actionArgs: { forward: true, linewise: true }},\n    { keys: '<C-y>', type: 'action', action: 'scroll', actionArgs: { forward: false, linewise: true }},\n    { keys: 'a', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'charAfter' }, context: 'normal' },\n    { keys: 'A', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'eol' }, context: 'normal' },\n    { keys: 'A', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'endOfSelectedArea' }, context: 'visual' },\n    { keys: 'i', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'inplace' }, context: 'normal' },\n    { keys: 'gi', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'lastEdit' }, context: 'normal' },\n    { keys: 'I', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'firstNonBlank'}, context: 'normal' },\n    { keys: 'gI', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'bol'}, context: 'normal' },\n    { keys: 'I', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'startOfSelectedArea' }, context: 'visual' },\n    { keys: 'o', type: 'action', action: 'newLineAndEnterInsertMode', isEdit: true, interlaceInsertRepeat: true, actionArgs: { after: true }, context: 'normal' },\n    { keys: 'O', type: 'action', action: 'newLineAndEnterInsertMode', isEdit: true, interlaceInsertRepeat: true, actionArgs: { after: false }, context: 'normal' },\n    { keys: 'v', type: 'action', action: 'toggleVisualMode' },\n    { keys: 'V', type: 'action', action: 'toggleVisualMode', actionArgs: { linewise: true }},\n    { keys: '<C-v>', type: 'action', action: 'toggleVisualMode', actionArgs: { blockwise: true }},\n    { keys: '<C-q>', type: 'action', action: 'toggleVisualMode', actionArgs: { blockwise: true }},\n    { keys: 'gv', type: 'action', action: 'reselectLastSelection' },\n    { keys: 'J', type: 'action', action: 'joinLines', isEdit: true },\n    { keys: 'gJ', type: 'action', action: 'joinLines', actionArgs: { keepSpaces: true }, isEdit: true },\n    { keys: 'p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: true, isEdit: true }},\n    { keys: 'P', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: false, isEdit: true }},\n    { keys: 'r<character>', type: 'action', action: 'replace', isEdit: true },\n    { keys: '@<character>', type: 'action', action: 'replayMacro' },\n    { keys: 'q<character>', type: 'action', action: 'enterMacroRecordMode' },\n    // Handle Replace-mode as a special case of insert mode.\n    { keys: 'R', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { replace: true }, context: 'normal'},\n    { keys: 'R', type: 'operator', operator: 'change', operatorArgs: { linewise: true, fullLine: true }, context: 'visual', exitVisualBlock: true},\n    { keys: 'u', type: 'action', action: 'undo', context: 'normal' },\n    { keys: 'u', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: true}, context: 'visual', isEdit: true },\n    { keys: 'U', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: false}, context: 'visual', isEdit: true },\n    { keys: '<C-r>', type: 'action', action: 'redo' },\n    { keys: 'm<character>', type: 'action', action: 'setMark' },\n    { keys: '\"<character>', type: 'action', action: 'setRegister' },\n    { keys: 'zz', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'center' }},\n    { keys: 'z.', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'center' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: 'zt', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'top' }},\n    { keys: 'z<CR>', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'top' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: 'z-', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'bottom' }},\n    { keys: 'zb', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'bottom' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: '.', type: 'action', action: 'repeatLastEdit' },\n    { keys: '<C-a>', type: 'action', action: 'incrementNumberToken', isEdit: true, actionArgs: {increase: true, backtrack: false}},\n    { keys: '<C-x>', type: 'action', action: 'incrementNumberToken', isEdit: true, actionArgs: {increase: false, backtrack: false}},\n    { keys: '<C-t>', type: 'action', action: 'indent', actionArgs: { indentRight: true }, context: 'insert' },\n    { keys: '<C-d>', type: 'action', action: 'indent', actionArgs: { indentRight: false }, context: 'insert' },\n    // Text object motions\n    { keys: 'a<character>', type: 'motion', motion: 'textObjectManipulation' },\n    { keys: 'i<character>', type: 'motion', motion: 'textObjectManipulation', motionArgs: { textObjectInner: true }},\n    // Search\n    { keys: '/', type: 'search', searchArgs: { forward: true, querySrc: 'prompt', toJumplist: true }},\n    { keys: '?', type: 'search', searchArgs: { forward: false, querySrc: 'prompt', toJumplist: true }},\n    { keys: '*', type: 'search', searchArgs: { forward: true, querySrc: 'wordUnderCursor', wholeWordOnly: true, toJumplist: true }},\n    { keys: '#', type: 'search', searchArgs: { forward: false, querySrc: 'wordUnderCursor', wholeWordOnly: true, toJumplist: true }},\n    { keys: 'g*', type: 'search', searchArgs: { forward: true, querySrc: 'wordUnderCursor', toJumplist: true }},\n    { keys: 'g#', type: 'search', searchArgs: { forward: false, querySrc: 'wordUnderCursor', toJumplist: true }},\n    // Ex command\n    { keys: ':', type: 'ex' }\n  ];\n  var defaultKeymapLength = defaultKeymap.length;\n\n  /**\n   * Ex commands\n   * Care must be taken when adding to the default Ex command map. For any\n   * pair of commands that have a shared prefix, at least one of their\n   * shortNames must not match the prefix of the other command.\n   */\n  var defaultExCommandMap = [\n    { name: 'colorscheme', shortName: 'colo' },\n    { name: 'map' },\n    { name: 'imap', shortName: 'im' },\n    { name: 'nmap', shortName: 'nm' },\n    { name: 'vmap', shortName: 'vm' },\n    { name: 'unmap' },\n    { name: 'write', shortName: 'w' },\n    { name: 'undo', shortName: 'u' },\n    { name: 'redo', shortName: 'red' },\n    { name: 'set', shortName: 'se' },\n    { name: 'setlocal', shortName: 'setl' },\n    { name: 'setglobal', shortName: 'setg' },\n    { name: 'sort', shortName: 'sor' },\n    { name: 'substitute', shortName: 's', possiblyAsync: true },\n    { name: 'nohlsearch', shortName: 'noh' },\n    { name: 'yank', shortName: 'y' },\n    { name: 'delmarks', shortName: 'delm' },\n    { name: 'registers', shortName: 'reg', excludeFromCommandHistory: true },\n    { name: 'global', shortName: 'g' }\n  ];\n\n  var Pos = CodeMirror.Pos;\n\n  var Vim = function() {\n    function enterVimMode(cm) {\n      cm.setOption('disableInput', true);\n      cm.setOption('showCursorWhenSelecting', false);\n      CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n      cm.on('cursorActivity', onCursorActivity);\n      maybeInitVimState(cm);\n      CodeMirror.on(cm.getInputField(), 'paste', getOnPasteFn(cm));\n    }\n\n    function leaveVimMode(cm) {\n      cm.setOption('disableInput', false);\n      cm.off('cursorActivity', onCursorActivity);\n      CodeMirror.off(cm.getInputField(), 'paste', getOnPasteFn(cm));\n      cm.state.vim = null;\n    }\n\n    function detachVimMap(cm, next) {\n      if (this == CodeMirror.keyMap.vim) {\n        CodeMirror.rmClass(cm.getWrapperElement(), \"cm-fat-cursor\");\n        if (cm.getOption(\"inputStyle\") == \"contenteditable\" && document.body.style.caretColor != null) {\n          disableFatCursorMark(cm);\n          cm.getInputField().style.caretColor = \"\";\n        }\n      }\n\n      if (!next || next.attach != attachVimMap)\n        leaveVimMode(cm);\n    }\n    function attachVimMap(cm, prev) {\n      if (this == CodeMirror.keyMap.vim) {\n        CodeMirror.addClass(cm.getWrapperElement(), \"cm-fat-cursor\");\n        if (cm.getOption(\"inputStyle\") == \"contenteditable\" && document.body.style.caretColor != null) {\n          enableFatCursorMark(cm);\n          cm.getInputField().style.caretColor = \"transparent\";\n        }\n      }\n\n      if (!prev || prev.attach != attachVimMap)\n        enterVimMode(cm);\n    }\n\n    function updateFatCursorMark(cm) {\n      if (!cm.state.fatCursorMarks) return;\n      clearFatCursorMark(cm);\n      var ranges = cm.listSelections(), result = []\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.empty()) {\n          var lineLength = cm.getLine(range.anchor.line).length;\n          if (range.anchor.ch < lineLength) {\n            result.push(cm.markText(range.anchor, Pos(range.anchor.line, range.anchor.ch + 1),\n                                    {className: \"cm-fat-cursor-mark\"}));\n          } else {\n            result.push(cm.markText(Pos(range.anchor.line, lineLength - 1),\n                                    Pos(range.anchor.line, lineLength),\n                                    {className: \"cm-fat-cursor-mark\"}));\n          }\n        }\n      }\n      cm.state.fatCursorMarks = result;\n    }\n\n    function clearFatCursorMark(cm) {\n      var marks = cm.state.fatCursorMarks;\n      if (marks) for (var i = 0; i < marks.length; i++) marks[i].clear();\n    }\n\n    function enableFatCursorMark(cm) {\n      cm.state.fatCursorMarks = [];\n      updateFatCursorMark(cm)\n      cm.on(\"cursorActivity\", updateFatCursorMark)\n    }\n\n    function disableFatCursorMark(cm) {\n      clearFatCursorMark(cm);\n      cm.off(\"cursorActivity\", updateFatCursorMark);\n      // explicitly set fatCursorMarks to null because event listener above\n      // can be invoke after removing it, if off is called from operation\n      cm.state.fatCursorMarks = null;\n    }\n\n    // Deprecated, simply setting the keymap works again.\n    CodeMirror.defineOption('vimMode', false, function(cm, val, prev) {\n      if (val && cm.getOption(\"keyMap\") != \"vim\")\n        cm.setOption(\"keyMap\", \"vim\");\n      else if (!val && prev != CodeMirror.Init && /^vim/.test(cm.getOption(\"keyMap\")))\n        cm.setOption(\"keyMap\", \"default\");\n    });\n\n    function cmKey(key, cm) {\n      if (!cm) { return undefined; }\n      if (this[key]) { return this[key]; }\n      var vimKey = cmKeyToVimKey(key);\n      if (!vimKey) {\n        return false;\n      }\n      var cmd = CodeMirror.Vim.findKey(cm, vimKey);\n      if (typeof cmd == 'function') {\n        CodeMirror.signal(cm, 'vim-keypress', vimKey);\n      }\n      return cmd;\n    }\n\n    var modifiers = {'Shift': 'S', 'Ctrl': 'C', 'Alt': 'A', 'Cmd': 'D', 'Mod': 'A'};\n    var specialKeys = {Enter:'CR',Backspace:'BS',Delete:'Del',Insert:'Ins'};\n    function cmKeyToVimKey(key) {\n      if (key.charAt(0) == '\\'') {\n        // Keypress character binding of format \"'a'\"\n        return key.charAt(1);\n      }\n      var pieces = key.split(/-(?!$)/);\n      var lastPiece = pieces[pieces.length - 1];\n      if (pieces.length == 1 && pieces[0].length == 1) {\n        // No-modifier bindings use literal character bindings above. Skip.\n        return false;\n      } else if (pieces.length == 2 && pieces[0] == 'Shift' && lastPiece.length == 1) {\n        // Ignore Shift+char bindings as they should be handled by literal character.\n        return false;\n      }\n      var hasCharacter = false;\n      for (var i = 0; i < pieces.length; i++) {\n        var piece = pieces[i];\n        if (piece in modifiers) { pieces[i] = modifiers[piece]; }\n        else { hasCharacter = true; }\n        if (piece in specialKeys) { pieces[i] = specialKeys[piece]; }\n      }\n      if (!hasCharacter) {\n        // Vim does not support modifier only keys.\n        return false;\n      }\n      // TODO: Current bindings expect the character to be lower case, but\n      // it looks like vim key notation uses upper case.\n      if (isUpperCase(lastPiece)) {\n        pieces[pieces.length - 1] = lastPiece.toLowerCase();\n      }\n      return '<' + pieces.join('-') + '>';\n    }\n\n    function getOnPasteFn(cm) {\n      var vim = cm.state.vim;\n      if (!vim.onPasteFn) {\n        vim.onPasteFn = function() {\n          if (!vim.insertMode) {\n            cm.setCursor(offsetCursor(cm.getCursor(), 0, 1));\n            actions.enterInsertMode(cm, {}, vim);\n          }\n        };\n      }\n      return vim.onPasteFn;\n    }\n\n    var numberRegex = /[\\d]/;\n    var wordCharTest = [CodeMirror.isWordChar, function(ch) {\n      return ch && !CodeMirror.isWordChar(ch) && !/\\s/.test(ch);\n    }], bigWordCharTest = [function(ch) {\n      return /\\S/.test(ch);\n    }];\n    function makeKeyRange(start, size) {\n      var keys = [];\n      for (var i = start; i < start + size; i++) {\n        keys.push(String.fromCharCode(i));\n      }\n      return keys;\n    }\n    var upperCaseAlphabet = makeKeyRange(65, 26);\n    var lowerCaseAlphabet = makeKeyRange(97, 26);\n    var numbers = makeKeyRange(48, 10);\n    var validMarks = [].concat(upperCaseAlphabet, lowerCaseAlphabet, numbers, ['<', '>']);\n    var validRegisters = [].concat(upperCaseAlphabet, lowerCaseAlphabet, numbers, ['-', '\"', '.', ':', '_', '/']);\n\n    function isLine(cm, line) {\n      return line >= cm.firstLine() && line <= cm.lastLine();\n    }\n    function isLowerCase(k) {\n      return (/^[a-z]$/).test(k);\n    }\n    function isMatchableSymbol(k) {\n      return '()[]{}'.indexOf(k) != -1;\n    }\n    function isNumber(k) {\n      return numberRegex.test(k);\n    }\n    function isUpperCase(k) {\n      return (/^[A-Z]$/).test(k);\n    }\n    function isWhiteSpaceString(k) {\n      return (/^\\s*$/).test(k);\n    }\n    function isEndOfSentenceSymbol(k) {\n      return '.?!'.indexOf(k) != -1;\n    }\n    function inArray(val, arr) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i] == val) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    var options = {};\n    function defineOption(name, defaultValue, type, aliases, callback) {\n      if (defaultValue === undefined && !callback) {\n        throw Error('defaultValue is required unless callback is provided');\n      }\n      if (!type) { type = 'string'; }\n      options[name] = {\n        type: type,\n        defaultValue: defaultValue,\n        callback: callback\n      };\n      if (aliases) {\n        for (var i = 0; i < aliases.length; i++) {\n          options[aliases[i]] = options[name];\n        }\n      }\n      if (defaultValue) {\n        setOption(name, defaultValue);\n      }\n    }\n\n    function setOption(name, value, cm, cfg) {\n      var option = options[name];\n      cfg = cfg || {};\n      var scope = cfg.scope;\n      if (!option) {\n        return new Error('Unknown option: ' + name);\n      }\n      if (option.type == 'boolean') {\n        if (value && value !== true) {\n          return new Error('Invalid argument: ' + name + '=' + value);\n        } else if (value !== false) {\n          // Boolean options are set to true if value is not defined.\n          value = true;\n        }\n      }\n      if (option.callback) {\n        if (scope !== 'local') {\n          option.callback(value, undefined);\n        }\n        if (scope !== 'global' && cm) {\n          option.callback(value, cm);\n        }\n      } else {\n        if (scope !== 'local') {\n          option.value = option.type == 'boolean' ? !!value : value;\n        }\n        if (scope !== 'global' && cm) {\n          cm.state.vim.options[name] = {value: value};\n        }\n      }\n    }\n\n    function getOption(name, cm, cfg) {\n      var option = options[name];\n      cfg = cfg || {};\n      var scope = cfg.scope;\n      if (!option) {\n        return new Error('Unknown option: ' + name);\n      }\n      if (option.callback) {\n        var local = cm && option.callback(undefined, cm);\n        if (scope !== 'global' && local !== undefined) {\n          return local;\n        }\n        if (scope !== 'local') {\n          return option.callback();\n        }\n        return;\n      } else {\n        var local = (scope !== 'global') && (cm && cm.state.vim.options[name]);\n        return (local || (scope !== 'local') && option || {}).value;\n      }\n    }\n\n    defineOption('filetype', undefined, 'string', ['ft'], function(name, cm) {\n      // Option is local. Do nothing for global.\n      if (cm === undefined) {\n        return;\n      }\n      // The 'filetype' option proxies to the CodeMirror 'mode' option.\n      if (name === undefined) {\n        var mode = cm.getOption('mode');\n        return mode == 'null' ? '' : mode;\n      } else {\n        var mode = name == '' ? 'null' : name;\n        cm.setOption('mode', mode);\n      }\n    });\n\n    var createCircularJumpList = function() {\n      var size = 100;\n      var pointer = -1;\n      var head = 0;\n      var tail = 0;\n      var buffer = new Array(size);\n      function add(cm, oldCur, newCur) {\n        var current = pointer % size;\n        var curMark = buffer[current];\n        function useNextSlot(cursor) {\n          var next = ++pointer % size;\n          var trashMark = buffer[next];\n          if (trashMark) {\n            trashMark.clear();\n          }\n          buffer[next] = cm.setBookmark(cursor);\n        }\n        if (curMark) {\n          var markPos = curMark.find();\n          // avoid recording redundant cursor position\n          if (markPos && !cursorEqual(markPos, oldCur)) {\n            useNextSlot(oldCur);\n          }\n        } else {\n          useNextSlot(oldCur);\n        }\n        useNextSlot(newCur);\n        head = pointer;\n        tail = pointer - size + 1;\n        if (tail < 0) {\n          tail = 0;\n        }\n      }\n      function move(cm, offset) {\n        pointer += offset;\n        if (pointer > head) {\n          pointer = head;\n        } else if (pointer < tail) {\n          pointer = tail;\n        }\n        var mark = buffer[(size + pointer) % size];\n        // skip marks that are temporarily removed from text buffer\n        if (mark && !mark.find()) {\n          var inc = offset > 0 ? 1 : -1;\n          var newCur;\n          var oldCur = cm.getCursor();\n          do {\n            pointer += inc;\n            mark = buffer[(size + pointer) % size];\n            // skip marks that are the same as current position\n            if (mark &&\n                (newCur = mark.find()) &&\n                !cursorEqual(oldCur, newCur)) {\n              break;\n            }\n          } while (pointer < head && pointer > tail);\n        }\n        return mark;\n      }\n      function find(cm, offset) {\n        var oldPointer = pointer;\n        var mark = move(cm, offset);\n        pointer = oldPointer;\n        return mark && mark.find();\n      }\n      return {\n        cachedCursor: undefined, //used for # and * jumps\n        add: add,\n        find: find,\n        move: move\n      };\n    };\n\n    // Returns an object to track the changes associated insert mode.  It\n    // clones the object that is passed in, or creates an empty object one if\n    // none is provided.\n    var createInsertModeChanges = function(c) {\n      if (c) {\n        // Copy construction\n        return {\n          changes: c.changes,\n          expectCursorActivityForChange: c.expectCursorActivityForChange\n        };\n      }\n      return {\n        // Change list\n        changes: [],\n        // Set to true on change, false on cursorActivity.\n        expectCursorActivityForChange: false\n      };\n    };\n\n    function MacroModeState() {\n      this.latestRegister = undefined;\n      this.isPlaying = false;\n      this.isRecording = false;\n      this.replaySearchQueries = [];\n      this.onRecordingDone = undefined;\n      this.lastInsertModeChanges = createInsertModeChanges();\n    }\n    MacroModeState.prototype = {\n      exitMacroRecordMode: function() {\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.onRecordingDone) {\n          macroModeState.onRecordingDone(); // close dialog\n        }\n        macroModeState.onRecordingDone = undefined;\n        macroModeState.isRecording = false;\n      },\n      enterMacroRecordMode: function(cm, registerName) {\n        var register =\n            vimGlobalState.registerController.getRegister(registerName);\n        if (register) {\n          register.clear();\n          this.latestRegister = registerName;\n          if (cm.openDialog) {\n            this.onRecordingDone = cm.openDialog(\n                '(recording)['+registerName+']', null, {bottom:true});\n          }\n          this.isRecording = true;\n        }\n      }\n    };\n\n    function maybeInitVimState(cm) {\n      if (!cm.state.vim) {\n        // Store instance state in the CodeMirror object.\n        cm.state.vim = {\n          inputState: new InputState(),\n          // Vim's input state that triggered the last edit, used to repeat\n          // motions and operators with '.'.\n          lastEditInputState: undefined,\n          // Vim's action command before the last edit, used to repeat actions\n          // with '.' and insert mode repeat.\n          lastEditActionCommand: undefined,\n          // When using jk for navigation, if you move from a longer line to a\n          // shorter line, the cursor may clip to the end of the shorter line.\n          // If j is pressed again and cursor goes to the next line, the\n          // cursor should go back to its horizontal position on the longer\n          // line if it can. This is to keep track of the horizontal position.\n          lastHPos: -1,\n          // Doing the same with screen-position for gj/gk\n          lastHSPos: -1,\n          // The last motion command run. Cleared if a non-motion command gets\n          // executed in between.\n          lastMotion: null,\n          marks: {},\n          // Mark for rendering fake cursor for visual mode.\n          fakeCursor: null,\n          insertMode: false,\n          // Repeat count for changes made in insert mode, triggered by key\n          // sequences like 3,i. Only exists when insertMode is true.\n          insertModeRepeat: undefined,\n          visualMode: false,\n          // If we are in visual line mode. No effect if visualMode is false.\n          visualLine: false,\n          visualBlock: false,\n          lastSelection: null,\n          lastPastedText: null,\n          sel: {},\n          // Buffer-local/window-local values of vim options.\n          options: {}\n        };\n      }\n      return cm.state.vim;\n    }\n    var vimGlobalState;\n    function resetVimGlobalState() {\n      vimGlobalState = {\n        // The current search query.\n        searchQuery: null,\n        // Whether we are searching backwards.\n        searchIsReversed: false,\n        // Replace part of the last substituted pattern\n        lastSubstituteReplacePart: undefined,\n        jumpList: createCircularJumpList(),\n        macroModeState: new MacroModeState,\n        // Recording latest f, t, F or T motion command.\n        lastCharacterSearch: {increment:0, forward:true, selectedCharacter:''},\n        registerController: new RegisterController({}),\n        // search history buffer\n        searchHistoryController: new HistoryController(),\n        // ex Command history buffer\n        exCommandHistoryController : new HistoryController()\n      };\n      for (var optionName in options) {\n        var option = options[optionName];\n        option.value = option.defaultValue;\n      }\n    }\n\n    var lastInsertModeKeyTimer;\n    var vimApi= {\n      buildKeyMap: function() {\n        // TODO: Convert keymap into dictionary format for fast lookup.\n      },\n      // Testing hook, though it might be useful to expose the register\n      // controller anyways.\n      getRegisterController: function() {\n        return vimGlobalState.registerController;\n      },\n      // Testing hook.\n      resetVimGlobalState_: resetVimGlobalState,\n\n      // Testing hook.\n      getVimGlobalState_: function() {\n        return vimGlobalState;\n      },\n\n      // Testing hook.\n      maybeInitVimState_: maybeInitVimState,\n\n      suppressErrorLogging: false,\n\n      InsertModeKey: InsertModeKey,\n      map: function(lhs, rhs, ctx) {\n        // Add user defined key bindings.\n        exCommandDispatcher.map(lhs, rhs, ctx);\n      },\n      unmap: function(lhs, ctx) {\n        exCommandDispatcher.unmap(lhs, ctx);\n      },\n      // Non-recursive map function.\n      // NOTE: This will not create mappings to key maps that aren't present\n      // in the default key map. See TODO at bottom of function.\n      noremap: function(lhs, rhs, ctx) {\n        function toCtxArray(ctx) {\n          return ctx ? [ctx] : ['normal', 'insert', 'visual'];\n        }\n        var ctxsToMap = toCtxArray(ctx);\n        // Look through all actual defaults to find a map candidate.\n        var actualLength = defaultKeymap.length, origLength = defaultKeymapLength;\n        for (var i = actualLength - origLength;\n             i < actualLength && ctxsToMap.length;\n             i++) {\n          var mapping = defaultKeymap[i];\n          // Omit mappings that operate in the wrong context(s) and those of invalid type.\n          if (mapping.keys == rhs &&\n              (!ctx || !mapping.context || mapping.context === ctx) &&\n              mapping.type.substr(0, 2) !== 'ex' &&\n              mapping.type.substr(0, 3) !== 'key') {\n            // Make a shallow copy of the original keymap entry.\n            var newMapping = {};\n            for (var key in mapping) {\n              newMapping[key] = mapping[key];\n            }\n            // Modify it point to the new mapping with the proper context.\n            newMapping.keys = lhs;\n            if (ctx && !newMapping.context) {\n              newMapping.context = ctx;\n            }\n            // Add it to the keymap with a higher priority than the original.\n            this._mapCommand(newMapping);\n            // Record the mapped contexts as complete.\n            var mappedCtxs = toCtxArray(mapping.context);\n            ctxsToMap = ctxsToMap.filter(function(el) { return mappedCtxs.indexOf(el) === -1; });\n          }\n        }\n        // TODO: Create non-recursive keyToKey mappings for the unmapped contexts once those exist.\n      },\n      // Remove all user-defined mappings for the provided context.\n      mapclear: function(ctx) {\n        // Partition the existing keymap into user-defined and true defaults.\n        var actualLength = defaultKeymap.length,\n            origLength = defaultKeymapLength;\n        var userKeymap = defaultKeymap.slice(0, actualLength - origLength);\n        defaultKeymap = defaultKeymap.slice(actualLength - origLength);\n        if (ctx) {\n          // If a specific context is being cleared, we need to keep mappings\n          // from all other contexts.\n          for (var i = userKeymap.length - 1; i >= 0; i--) {\n            var mapping = userKeymap[i];\n            if (ctx !== mapping.context) {\n              if (mapping.context) {\n                this._mapCommand(mapping);\n              } else {\n                // `mapping` applies to all contexts so create keymap copies\n                // for each context except the one being cleared.\n                var contexts = ['normal', 'insert', 'visual'];\n                for (var j in contexts) {\n                  if (contexts[j] !== ctx) {\n                    var newMapping = {};\n                    for (var key in mapping) {\n                      newMapping[key] = mapping[key];\n                    }\n                    newMapping.context = contexts[j];\n                    this._mapCommand(newMapping);\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      // TODO: Expose setOption and getOption as instance methods. Need to decide how to namespace\n      // them, or somehow make them work with the existing CodeMirror setOption/getOption API.\n      setOption: setOption,\n      getOption: getOption,\n      defineOption: defineOption,\n      defineEx: function(name, prefix, func){\n        if (!prefix) {\n          prefix = name;\n        } else if (name.indexOf(prefix) !== 0) {\n          throw new Error('(Vim.defineEx) \"'+prefix+'\" is not a prefix of \"'+name+'\", command not registered');\n        }\n        exCommands[name]=func;\n        exCommandDispatcher.commandMap_[prefix]={name:name, shortName:prefix, type:'api'};\n      },\n      handleKey: function (cm, key, origin) {\n        var command = this.findKey(cm, key, origin);\n        if (typeof command === 'function') {\n          return command();\n        }\n      },\n      /**\n       * This is the outermost function called by CodeMirror, after keys have\n       * been mapped to their Vim equivalents.\n       *\n       * Finds a command based on the key (and cached keys if there is a\n       * multi-key sequence). Returns `undefined` if no key is matched, a noop\n       * function if a partial match is found (multi-key), and a function to\n       * execute the bound command if a a key is matched. The function always\n       * returns true.\n       */\n      findKey: function(cm, key, origin) {\n        var vim = maybeInitVimState(cm);\n        function handleMacroRecording() {\n          var macroModeState = vimGlobalState.macroModeState;\n          if (macroModeState.isRecording) {\n            if (key == 'q') {\n              macroModeState.exitMacroRecordMode();\n              clearInputState(cm);\n              return true;\n            }\n            if (origin != 'mapping') {\n              logKey(macroModeState, key);\n            }\n          }\n        }\n        function handleEsc() {\n          if (key == '<Esc>') {\n            // Clear input state and get back to normal mode.\n            clearInputState(cm);\n            if (vim.visualMode) {\n              exitVisualMode(cm);\n            } else if (vim.insertMode) {\n              exitInsertMode(cm);\n            }\n            return true;\n          }\n        }\n        function doKeyToKey(keys) {\n          // TODO: prevent infinite recursion.\n          var match;\n          while (keys) {\n            // Pull off one command key, which is either a single character\n            // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n            match = (/<\\w+-.+?>|<\\w+>|./).exec(keys);\n            key = match[0];\n            keys = keys.substring(match.index + key.length);\n            CodeMirror.Vim.handleKey(cm, key, 'mapping');\n          }\n        }\n\n        function handleKeyInsertMode() {\n          if (handleEsc()) { return true; }\n          var keys = vim.inputState.keyBuffer = vim.inputState.keyBuffer + key;\n          var keysAreChars = key.length == 1;\n          var match = commandDispatcher.matchCommand(keys, defaultKeymap, vim.inputState, 'insert');\n          // Need to check all key substrings in insert mode.\n          while (keys.length > 1 && match.type != 'full') {\n            var keys = vim.inputState.keyBuffer = keys.slice(1);\n            var thisMatch = commandDispatcher.matchCommand(keys, defaultKeymap, vim.inputState, 'insert');\n            if (thisMatch.type != 'none') { match = thisMatch; }\n          }\n          if (match.type == 'none') { clearInputState(cm); return false; }\n          else if (match.type == 'partial') {\n            if (lastInsertModeKeyTimer) { window.clearTimeout(lastInsertModeKeyTimer); }\n            lastInsertModeKeyTimer = window.setTimeout(\n              function() { if (vim.insertMode && vim.inputState.keyBuffer) { clearInputState(cm); } },\n              getOption('insertModeEscKeysTimeout'));\n            return !keysAreChars;\n          }\n\n          if (lastInsertModeKeyTimer) { window.clearTimeout(lastInsertModeKeyTimer); }\n          if (keysAreChars) {\n            var selections = cm.listSelections();\n            for (var i = 0; i < selections.length; i++) {\n              var here = selections[i].head;\n              cm.replaceRange('', offsetCursor(here, 0, -(keys.length - 1)), here, '+input');\n            }\n            vimGlobalState.macroModeState.lastInsertModeChanges.changes.pop();\n          }\n          clearInputState(cm);\n          return match.command;\n        }\n\n        function handleKeyNonInsertMode() {\n          if (handleMacroRecording() || handleEsc()) { return true; }\n\n          var keys = vim.inputState.keyBuffer = vim.inputState.keyBuffer + key;\n          if (/^[1-9]\\d*$/.test(keys)) { return true; }\n\n          var keysMatcher = /^(\\d*)(.*)$/.exec(keys);\n          if (!keysMatcher) { clearInputState(cm); return false; }\n          var context = vim.visualMode ? 'visual' :\n                                         'normal';\n          var match = commandDispatcher.matchCommand(keysMatcher[2] || keysMatcher[1], defaultKeymap, vim.inputState, context);\n          if (match.type == 'none') { clearInputState(cm); return false; }\n          else if (match.type == 'partial') { return true; }\n\n          vim.inputState.keyBuffer = '';\n          var keysMatcher = /^(\\d*)(.*)$/.exec(keys);\n          if (keysMatcher[1] && keysMatcher[1] != '0') {\n            vim.inputState.pushRepeatDigit(keysMatcher[1]);\n          }\n          return match.command;\n        }\n\n        var command;\n        if (vim.insertMode) { command = handleKeyInsertMode(); }\n        else { command = handleKeyNonInsertMode(); }\n        if (command === false) {\n          return !vim.insertMode && key.length === 1 ? function() { return true; } : undefined;\n        } else if (command === true) {\n          // TODO: Look into using CodeMirror's multi-key handling.\n          // Return no-op since we are caching the key. Counts as handled, but\n          // don't want act on it just yet.\n          return function() { return true; };\n        } else {\n          return function() {\n            return cm.operation(function() {\n              cm.curOp.isVimOp = true;\n              try {\n                if (command.type == 'keyToKey') {\n                  doKeyToKey(command.toKeys);\n                } else {\n                  commandDispatcher.processCommand(cm, vim, command);\n                }\n              } catch (e) {\n                // clear VIM state in case it's in a bad state.\n                cm.state.vim = undefined;\n                maybeInitVimState(cm);\n                if (!CodeMirror.Vim.suppressErrorLogging) {\n                  console['log'](e);\n                }\n                throw e;\n              }\n              return true;\n            });\n          };\n        }\n      },\n      handleEx: function(cm, input) {\n        exCommandDispatcher.processCommand(cm, input);\n      },\n\n      defineMotion: defineMotion,\n      defineAction: defineAction,\n      defineOperator: defineOperator,\n      mapCommand: mapCommand,\n      _mapCommand: _mapCommand,\n\n      defineRegister: defineRegister,\n\n      exitVisualMode: exitVisualMode,\n      exitInsertMode: exitInsertMode\n    };\n\n    // Represents the current input state.\n    function InputState() {\n      this.prefixRepeat = [];\n      this.motionRepeat = [];\n\n      this.operator = null;\n      this.operatorArgs = null;\n      this.motion = null;\n      this.motionArgs = null;\n      this.keyBuffer = []; // For matching multi-key commands.\n      this.registerName = null; // Defaults to the unnamed register.\n    }\n    InputState.prototype.pushRepeatDigit = function(n) {\n      if (!this.operator) {\n        this.prefixRepeat = this.prefixRepeat.concat(n);\n      } else {\n        this.motionRepeat = this.motionRepeat.concat(n);\n      }\n    };\n    InputState.prototype.getRepeat = function() {\n      var repeat = 0;\n      if (this.prefixRepeat.length > 0 || this.motionRepeat.length > 0) {\n        repeat = 1;\n        if (this.prefixRepeat.length > 0) {\n          repeat *= parseInt(this.prefixRepeat.join(''), 10);\n        }\n        if (this.motionRepeat.length > 0) {\n          repeat *= parseInt(this.motionRepeat.join(''), 10);\n        }\n      }\n      return repeat;\n    };\n\n    function clearInputState(cm, reason) {\n      cm.state.vim.inputState = new InputState();\n      CodeMirror.signal(cm, 'vim-command-done', reason);\n    }\n\n    /*\n     * Register stores information about copy and paste registers.  Besides\n     * text, a register must store whether it is linewise (i.e., when it is\n     * pasted, should it insert itself into a new line, or should the text be\n     * inserted at the cursor position.)\n     */\n    function Register(text, linewise, blockwise) {\n      this.clear();\n      this.keyBuffer = [text || ''];\n      this.insertModeChanges = [];\n      this.searchQueries = [];\n      this.linewise = !!linewise;\n      this.blockwise = !!blockwise;\n    }\n    Register.prototype = {\n      setText: function(text, linewise, blockwise) {\n        this.keyBuffer = [text || ''];\n        this.linewise = !!linewise;\n        this.blockwise = !!blockwise;\n      },\n      pushText: function(text, linewise) {\n        // if this register has ever been set to linewise, use linewise.\n        if (linewise) {\n          if (!this.linewise) {\n            this.keyBuffer.push('\\n');\n          }\n          this.linewise = true;\n        }\n        this.keyBuffer.push(text);\n      },\n      pushInsertModeChanges: function(changes) {\n        this.insertModeChanges.push(createInsertModeChanges(changes));\n      },\n      pushSearchQuery: function(query) {\n        this.searchQueries.push(query);\n      },\n      clear: function() {\n        this.keyBuffer = [];\n        this.insertModeChanges = [];\n        this.searchQueries = [];\n        this.linewise = false;\n      },\n      toString: function() {\n        return this.keyBuffer.join('');\n      }\n    };\n\n    /**\n     * Defines an external register.\n     *\n     * The name should be a single character that will be used to reference the register.\n     * The register should support setText, pushText, clear, and toString(). See Register\n     * for a reference implementation.\n     */\n    function defineRegister(name, register) {\n      var registers = vimGlobalState.registerController.registers;\n      if (!name || name.length != 1) {\n        throw Error('Register name must be 1 character');\n      }\n      if (registers[name]) {\n        throw Error('Register already defined ' + name);\n      }\n      registers[name] = register;\n      validRegisters.push(name);\n    }\n\n    /*\n     * vim registers allow you to keep many independent copy and paste buffers.\n     * See http://usevim.com/2012/04/13/registers/ for an introduction.\n     *\n     * RegisterController keeps the state of all the registers.  An initial\n     * state may be passed in.  The unnamed register '\"' will always be\n     * overridden.\n     */\n    function RegisterController(registers) {\n      this.registers = registers;\n      this.unnamedRegister = registers['\"'] = new Register();\n      registers['.'] = new Register();\n      registers[':'] = new Register();\n      registers['/'] = new Register();\n    }\n    RegisterController.prototype = {\n      pushText: function(registerName, operator, text, linewise, blockwise) {\n        // The black hole register, \"_, means delete/yank to nowhere.\n        if (registerName === '_') return;\n        if (linewise && text.charAt(text.length - 1) !== '\\n'){\n          text += '\\n';\n        }\n        // Lowercase and uppercase registers refer to the same register.\n        // Uppercase just means append.\n        var register = this.isValidRegister(registerName) ?\n            this.getRegister(registerName) : null;\n        // if no register/an invalid register was specified, things go to the\n        // default registers\n        if (!register) {\n          switch (operator) {\n            case 'yank':\n              // The 0 register contains the text from the most recent yank.\n              this.registers['0'] = new Register(text, linewise, blockwise);\n              break;\n            case 'delete':\n            case 'change':\n              if (text.indexOf('\\n') == -1) {\n                // Delete less than 1 line. Update the small delete register.\n                this.registers['-'] = new Register(text, linewise);\n              } else {\n                // Shift down the contents of the numbered registers and put the\n                // deleted text into register 1.\n                this.shiftNumericRegisters_();\n                this.registers['1'] = new Register(text, linewise);\n              }\n              break;\n          }\n          // Make sure the unnamed register is set to what just happened\n          this.unnamedRegister.setText(text, linewise, blockwise);\n          return;\n        }\n\n        // If we've gotten to this point, we've actually specified a register\n        var append = isUpperCase(registerName);\n        if (append) {\n          register.pushText(text, linewise);\n        } else {\n          register.setText(text, linewise, blockwise);\n        }\n        // The unnamed register always has the same value as the last used\n        // register.\n        this.unnamedRegister.setText(register.toString(), linewise);\n      },\n      // Gets the register named @name.  If one of @name doesn't already exist,\n      // create it.  If @name is invalid, return the unnamedRegister.\n      getRegister: function(name) {\n        if (!this.isValidRegister(name)) {\n          return this.unnamedRegister;\n        }\n        name = name.toLowerCase();\n        if (!this.registers[name]) {\n          this.registers[name] = new Register();\n        }\n        return this.registers[name];\n      },\n      isValidRegister: function(name) {\n        return name && inArray(name, validRegisters);\n      },\n      shiftNumericRegisters_: function() {\n        for (var i = 9; i >= 2; i--) {\n          this.registers[i] = this.getRegister('' + (i - 1));\n        }\n      }\n    };\n    function HistoryController() {\n        this.historyBuffer = [];\n        this.iterator = 0;\n        this.initialPrefix = null;\n    }\n    HistoryController.prototype = {\n      // the input argument here acts a user entered prefix for a small time\n      // until we start autocompletion in which case it is the autocompleted.\n      nextMatch: function (input, up) {\n        var historyBuffer = this.historyBuffer;\n        var dir = up ? -1 : 1;\n        if (this.initialPrefix === null) this.initialPrefix = input;\n        for (var i = this.iterator + dir; up ? i >= 0 : i < historyBuffer.length; i+= dir) {\n          var element = historyBuffer[i];\n          for (var j = 0; j <= element.length; j++) {\n            if (this.initialPrefix == element.substring(0, j)) {\n              this.iterator = i;\n              return element;\n            }\n          }\n        }\n        // should return the user input in case we reach the end of buffer.\n        if (i >= historyBuffer.length) {\n          this.iterator = historyBuffer.length;\n          return this.initialPrefix;\n        }\n        // return the last autocompleted query or exCommand as it is.\n        if (i < 0 ) return input;\n      },\n      pushInput: function(input) {\n        var index = this.historyBuffer.indexOf(input);\n        if (index > -1) this.historyBuffer.splice(index, 1);\n        if (input.length) this.historyBuffer.push(input);\n      },\n      reset: function() {\n        this.initialPrefix = null;\n        this.iterator = this.historyBuffer.length;\n      }\n    };\n    var commandDispatcher = {\n      matchCommand: function(keys, keyMap, inputState, context) {\n        var matches = commandMatches(keys, keyMap, context, inputState);\n        if (!matches.full && !matches.partial) {\n          return {type: 'none'};\n        } else if (!matches.full && matches.partial) {\n          return {type: 'partial'};\n        }\n\n        var bestMatch;\n        for (var i = 0; i < matches.full.length; i++) {\n          var match = matches.full[i];\n          if (!bestMatch) {\n            bestMatch = match;\n          }\n        }\n        if (bestMatch.keys.slice(-11) == '<character>') {\n          var character = lastChar(keys);\n          if (!character) return {type: 'none'};\n          inputState.selectedCharacter = character;\n        }\n        return {type: 'full', command: bestMatch};\n      },\n      processCommand: function(cm, vim, command) {\n        vim.inputState.repeatOverride = command.repeatOverride;\n        switch (command.type) {\n          case 'motion':\n            this.processMotion(cm, vim, command);\n            break;\n          case 'operator':\n            this.processOperator(cm, vim, command);\n            break;\n          case 'operatorMotion':\n            this.processOperatorMotion(cm, vim, command);\n            break;\n          case 'action':\n            this.processAction(cm, vim, command);\n            break;\n          case 'search':\n            this.processSearch(cm, vim, command);\n            break;\n          case 'ex':\n          case 'keyToEx':\n            this.processEx(cm, vim, command);\n            break;\n          default:\n            break;\n        }\n      },\n      processMotion: function(cm, vim, command) {\n        vim.inputState.motion = command.motion;\n        vim.inputState.motionArgs = copyArgs(command.motionArgs);\n        this.evalInput(cm, vim);\n      },\n      processOperator: function(cm, vim, command) {\n        var inputState = vim.inputState;\n        if (inputState.operator) {\n          if (inputState.operator == command.operator) {\n            // Typing an operator twice like 'dd' makes the operator operate\n            // linewise\n            inputState.motion = 'expandToLine';\n            inputState.motionArgs = { linewise: true };\n            this.evalInput(cm, vim);\n            return;\n          } else {\n            // 2 different operators in a row doesn't make sense.\n            clearInputState(cm);\n          }\n        }\n        inputState.operator = command.operator;\n        inputState.operatorArgs = copyArgs(command.operatorArgs);\n        if (command.exitVisualBlock) {\n            vim.visualBlock = false;\n            updateCmSelection(cm);\n        }\n        if (vim.visualMode) {\n          // Operating on a selection in visual mode. We don't need a motion.\n          this.evalInput(cm, vim);\n        }\n      },\n      processOperatorMotion: function(cm, vim, command) {\n        var visualMode = vim.visualMode;\n        var operatorMotionArgs = copyArgs(command.operatorMotionArgs);\n        if (operatorMotionArgs) {\n          // Operator motions may have special behavior in visual mode.\n          if (visualMode && operatorMotionArgs.visualLine) {\n            vim.visualLine = true;\n          }\n        }\n        this.processOperator(cm, vim, command);\n        if (!visualMode) {\n          this.processMotion(cm, vim, command);\n        }\n      },\n      processAction: function(cm, vim, command) {\n        var inputState = vim.inputState;\n        var repeat = inputState.getRepeat();\n        var repeatIsExplicit = !!repeat;\n        var actionArgs = copyArgs(command.actionArgs) || {};\n        if (inputState.selectedCharacter) {\n          actionArgs.selectedCharacter = inputState.selectedCharacter;\n        }\n        // Actions may or may not have motions and operators. Do these first.\n        if (command.operator) {\n          this.processOperator(cm, vim, command);\n        }\n        if (command.motion) {\n          this.processMotion(cm, vim, command);\n        }\n        if (command.motion || command.operator) {\n          this.evalInput(cm, vim);\n        }\n        actionArgs.repeat = repeat || 1;\n        actionArgs.repeatIsExplicit = repeatIsExplicit;\n        actionArgs.registerName = inputState.registerName;\n        clearInputState(cm);\n        vim.lastMotion = null;\n        if (command.isEdit) {\n          this.recordLastEdit(vim, inputState, command);\n        }\n        actions[command.action](cm, actionArgs, vim);\n      },\n      processSearch: function(cm, vim, command) {\n        if (!cm.getSearchCursor) {\n          // Search depends on SearchCursor.\n          return;\n        }\n        var forward = command.searchArgs.forward;\n        var wholeWordOnly = command.searchArgs.wholeWordOnly;\n        getSearchState(cm).setReversed(!forward);\n        var promptPrefix = (forward) ? '/' : '?';\n        var originalQuery = getSearchState(cm).getQuery();\n        var originalScrollPos = cm.getScrollInfo();\n        function handleQuery(query, ignoreCase, smartCase) {\n          vimGlobalState.searchHistoryController.pushInput(query);\n          vimGlobalState.searchHistoryController.reset();\n          try {\n            updateSearchQuery(cm, query, ignoreCase, smartCase);\n          } catch (e) {\n            showConfirm(cm, 'Invalid regex: ' + query);\n            clearInputState(cm);\n            return;\n          }\n          commandDispatcher.processMotion(cm, vim, {\n            type: 'motion',\n            motion: 'findNext',\n            motionArgs: { forward: true, toJumplist: command.searchArgs.toJumplist }\n          });\n        }\n        function onPromptClose(query) {\n          cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n          handleQuery(query, true /** ignoreCase */, true /** smartCase */);\n          var macroModeState = vimGlobalState.macroModeState;\n          if (macroModeState.isRecording) {\n            logSearchQuery(macroModeState, query);\n          }\n        }\n        function onPromptKeyUp(e, query, close) {\n          var keyName = CodeMirror.keyName(e), up, offset;\n          if (keyName == 'Up' || keyName == 'Down') {\n            up = keyName == 'Up' ? true : false;\n            offset = e.target ? e.target.selectionEnd : 0;\n            query = vimGlobalState.searchHistoryController.nextMatch(query, up) || '';\n            close(query);\n            if (offset && e.target) e.target.selectionEnd = e.target.selectionStart = Math.min(offset, e.target.value.length);\n          } else {\n            if ( keyName != 'Left' && keyName != 'Right' && keyName != 'Ctrl' && keyName != 'Alt' && keyName != 'Shift')\n              vimGlobalState.searchHistoryController.reset();\n          }\n          var parsedQuery;\n          try {\n            parsedQuery = updateSearchQuery(cm, query,\n                true /** ignoreCase */, true /** smartCase */);\n          } catch (e) {\n            // Swallow bad regexes for incremental search.\n          }\n          if (parsedQuery) {\n            cm.scrollIntoView(findNext(cm, !forward, parsedQuery), 30);\n          } else {\n            clearSearchHighlight(cm);\n            cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n          }\n        }\n        function onPromptKeyDown(e, query, close) {\n          var keyName = CodeMirror.keyName(e);\n          if (keyName == 'Esc' || keyName == 'Ctrl-C' || keyName == 'Ctrl-[' ||\n              (keyName == 'Backspace' && query == '')) {\n            vimGlobalState.searchHistoryController.pushInput(query);\n            vimGlobalState.searchHistoryController.reset();\n            updateSearchQuery(cm, originalQuery);\n            clearSearchHighlight(cm);\n            cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n            CodeMirror.e_stop(e);\n            clearInputState(cm);\n            close();\n            cm.focus();\n          } else if (keyName == 'Up' || keyName == 'Down') {\n            CodeMirror.e_stop(e);\n          } else if (keyName == 'Ctrl-U') {\n            // Ctrl-U clears input.\n            CodeMirror.e_stop(e);\n            close('');\n          }\n        }\n        switch (command.searchArgs.querySrc) {\n          case 'prompt':\n            var macroModeState = vimGlobalState.macroModeState;\n            if (macroModeState.isPlaying) {\n              var query = macroModeState.replaySearchQueries.shift();\n              handleQuery(query, true /** ignoreCase */, false /** smartCase */);\n            } else {\n              showPrompt(cm, {\n                  onClose: onPromptClose,\n                  prefix: promptPrefix,\n                  desc: searchPromptDesc,\n                  onKeyUp: onPromptKeyUp,\n                  onKeyDown: onPromptKeyDown\n              });\n            }\n            break;\n          case 'wordUnderCursor':\n            var word = expandWordUnderCursor(cm, false /** inclusive */,\n                true /** forward */, false /** bigWord */,\n                true /** noSymbol */);\n            var isKeyword = true;\n            if (!word) {\n              word = expandWordUnderCursor(cm, false /** inclusive */,\n                  true /** forward */, false /** bigWord */,\n                  false /** noSymbol */);\n              isKeyword = false;\n            }\n            if (!word) {\n              return;\n            }\n            var query = cm.getLine(word.start.line).substring(word.start.ch,\n                word.end.ch);\n            if (isKeyword && wholeWordOnly) {\n                query = '\\\\b' + query + '\\\\b';\n            } else {\n              query = escapeRegex(query);\n            }\n\n            // cachedCursor is used to save the old position of the cursor\n            // when * or # causes vim to seek for the nearest word and shift\n            // the cursor before entering the motion.\n            vimGlobalState.jumpList.cachedCursor = cm.getCursor();\n            cm.setCursor(word.start);\n\n            handleQuery(query, true /** ignoreCase */, false /** smartCase */);\n            break;\n        }\n      },\n      processEx: function(cm, vim, command) {\n        function onPromptClose(input) {\n          // Give the prompt some time to close so that if processCommand shows\n          // an error, the elements don't overlap.\n          vimGlobalState.exCommandHistoryController.pushInput(input);\n          vimGlobalState.exCommandHistoryController.reset();\n          exCommandDispatcher.processCommand(cm, input);\n        }\n        function onPromptKeyDown(e, input, close) {\n          var keyName = CodeMirror.keyName(e), up, offset;\n          if (keyName == 'Esc' || keyName == 'Ctrl-C' || keyName == 'Ctrl-[' ||\n              (keyName == 'Backspace' && input == '')) {\n            vimGlobalState.exCommandHistoryController.pushInput(input);\n            vimGlobalState.exCommandHistoryController.reset();\n            CodeMirror.e_stop(e);\n            clearInputState(cm);\n            close();\n            cm.focus();\n          }\n          if (keyName == 'Up' || keyName == 'Down') {\n            CodeMirror.e_stop(e);\n            up = keyName == 'Up' ? true : false;\n            offset = e.target ? e.target.selectionEnd : 0;\n            input = vimGlobalState.exCommandHistoryController.nextMatch(input, up) || '';\n            close(input);\n            if (offset && e.target) e.target.selectionEnd = e.target.selectionStart = Math.min(offset, e.target.value.length);\n          } else if (keyName == 'Ctrl-U') {\n            // Ctrl-U clears input.\n            CodeMirror.e_stop(e);\n            close('');\n          } else {\n            if ( keyName != 'Left' && keyName != 'Right' && keyName != 'Ctrl' && keyName != 'Alt' && keyName != 'Shift')\n              vimGlobalState.exCommandHistoryController.reset();\n          }\n        }\n        if (command.type == 'keyToEx') {\n          // Handle user defined Ex to Ex mappings\n          exCommandDispatcher.processCommand(cm, command.exArgs.input);\n        } else {\n          if (vim.visualMode) {\n            showPrompt(cm, { onClose: onPromptClose, prefix: ':', value: '\\'<,\\'>',\n                onKeyDown: onPromptKeyDown, selectValueOnOpen: false});\n          } else {\n            showPrompt(cm, { onClose: onPromptClose, prefix: ':',\n                onKeyDown: onPromptKeyDown});\n          }\n        }\n      },\n      evalInput: function(cm, vim) {\n        // If the motion command is set, execute both the operator and motion.\n        // Otherwise return.\n        var inputState = vim.inputState;\n        var motion = inputState.motion;\n        var motionArgs = inputState.motionArgs || {};\n        var operator = inputState.operator;\n        var operatorArgs = inputState.operatorArgs || {};\n        var registerName = inputState.registerName;\n        var sel = vim.sel;\n        // TODO: Make sure cm and vim selections are identical outside visual mode.\n        var origHead = copyCursor(vim.visualMode ? clipCursorToContent(cm, sel.head): cm.getCursor('head'));\n        var origAnchor = copyCursor(vim.visualMode ? clipCursorToContent(cm, sel.anchor) : cm.getCursor('anchor'));\n        var oldHead = copyCursor(origHead);\n        var oldAnchor = copyCursor(origAnchor);\n        var newHead, newAnchor;\n        var repeat;\n        if (operator) {\n          this.recordLastEdit(vim, inputState);\n        }\n        if (inputState.repeatOverride !== undefined) {\n          // If repeatOverride is specified, that takes precedence over the\n          // input state's repeat. Used by Ex mode and can be user defined.\n          repeat = inputState.repeatOverride;\n        } else {\n          repeat = inputState.getRepeat();\n        }\n        if (repeat > 0 && motionArgs.explicitRepeat) {\n          motionArgs.repeatIsExplicit = true;\n        } else if (motionArgs.noRepeat ||\n            (!motionArgs.explicitRepeat && repeat === 0)) {\n          repeat = 1;\n          motionArgs.repeatIsExplicit = false;\n        }\n        if (inputState.selectedCharacter) {\n          // If there is a character input, stick it in all of the arg arrays.\n          motionArgs.selectedCharacter = operatorArgs.selectedCharacter =\n              inputState.selectedCharacter;\n        }\n        motionArgs.repeat = repeat;\n        clearInputState(cm);\n        if (motion) {\n          var motionResult = motions[motion](cm, origHead, motionArgs, vim, inputState);\n          vim.lastMotion = motions[motion];\n          if (!motionResult) {\n            return;\n          }\n          if (motionArgs.toJumplist) {\n            var jumpList = vimGlobalState.jumpList;\n            // if the current motion is # or *, use cachedCursor\n            var cachedCursor = jumpList.cachedCursor;\n            if (cachedCursor) {\n              recordJumpPosition(cm, cachedCursor, motionResult);\n              delete jumpList.cachedCursor;\n            } else {\n              recordJumpPosition(cm, origHead, motionResult);\n            }\n          }\n          if (motionResult instanceof Array) {\n            newAnchor = motionResult[0];\n            newHead = motionResult[1];\n          } else {\n            newHead = motionResult;\n          }\n          // TODO: Handle null returns from motion commands better.\n          if (!newHead) {\n            newHead = copyCursor(origHead);\n          }\n          if (vim.visualMode) {\n            if (!(vim.visualBlock && newHead.ch === Infinity)) {\n              newHead = clipCursorToContent(cm, newHead);\n            }\n            if (newAnchor) {\n              newAnchor = clipCursorToContent(cm, newAnchor);\n            }\n            newAnchor = newAnchor || oldAnchor;\n            sel.anchor = newAnchor;\n            sel.head = newHead;\n            updateCmSelection(cm);\n            updateMark(cm, vim, '<',\n                cursorIsBefore(newAnchor, newHead) ? newAnchor\n                    : newHead);\n            updateMark(cm, vim, '>',\n                cursorIsBefore(newAnchor, newHead) ? newHead\n                    : newAnchor);\n          } else if (!operator) {\n            newHead = clipCursorToContent(cm, newHead);\n            cm.setCursor(newHead.line, newHead.ch);\n          }\n        }\n        if (operator) {\n          if (operatorArgs.lastSel) {\n            // Replaying a visual mode operation\n            newAnchor = oldAnchor;\n            var lastSel = operatorArgs.lastSel;\n            var lineOffset = Math.abs(lastSel.head.line - lastSel.anchor.line);\n            var chOffset = Math.abs(lastSel.head.ch - lastSel.anchor.ch);\n            if (lastSel.visualLine) {\n              // Linewise Visual mode: The same number of lines.\n              newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch);\n            } else if (lastSel.visualBlock) {\n              // Blockwise Visual mode: The same number of lines and columns.\n              newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch + chOffset);\n            } else if (lastSel.head.line == lastSel.anchor.line) {\n              // Normal Visual mode within one line: The same number of characters.\n              newHead = Pos(oldAnchor.line, oldAnchor.ch + chOffset);\n            } else {\n              // Normal Visual mode with several lines: The same number of lines, in the\n              // last line the same number of characters as in the last line the last time.\n              newHead = Pos(oldAnchor.line + lineOffset, oldAnchor.ch);\n            }\n            vim.visualMode = true;\n            vim.visualLine = lastSel.visualLine;\n            vim.visualBlock = lastSel.visualBlock;\n            sel = vim.sel = {\n              anchor: newAnchor,\n              head: newHead\n            };\n            updateCmSelection(cm);\n          } else if (vim.visualMode) {\n            operatorArgs.lastSel = {\n              anchor: copyCursor(sel.anchor),\n              head: copyCursor(sel.head),\n              visualBlock: vim.visualBlock,\n              visualLine: vim.visualLine\n            };\n          }\n          var curStart, curEnd, linewise, mode;\n          var cmSel;\n          if (vim.visualMode) {\n            // Init visual op\n            curStart = cursorMin(sel.head, sel.anchor);\n            curEnd = cursorMax(sel.head, sel.anchor);\n            linewise = vim.visualLine || operatorArgs.linewise;\n            mode = vim.visualBlock ? 'block' :\n                   linewise ? 'line' :\n                   'char';\n            cmSel = makeCmSelection(cm, {\n              anchor: curStart,\n              head: curEnd\n            }, mode);\n            if (linewise) {\n              var ranges = cmSel.ranges;\n              if (mode == 'block') {\n                // Linewise operators in visual block mode extend to end of line\n                for (var i = 0; i < ranges.length; i++) {\n                  ranges[i].head.ch = lineLength(cm, ranges[i].head.line);\n                }\n              } else if (mode == 'line') {\n                ranges[0].head = Pos(ranges[0].head.line + 1, 0);\n              }\n            }\n          } else {\n            // Init motion op\n            curStart = copyCursor(newAnchor || oldAnchor);\n            curEnd = copyCursor(newHead || oldHead);\n            if (cursorIsBefore(curEnd, curStart)) {\n              var tmp = curStart;\n              curStart = curEnd;\n              curEnd = tmp;\n            }\n            linewise = motionArgs.linewise || operatorArgs.linewise;\n            if (linewise) {\n              // Expand selection to entire line.\n              expandSelectionToLine(cm, curStart, curEnd);\n            } else if (motionArgs.forward) {\n              // Clip to trailing newlines only if the motion goes forward.\n              clipToLine(cm, curStart, curEnd);\n            }\n            mode = 'char';\n            var exclusive = !motionArgs.inclusive || linewise;\n            cmSel = makeCmSelection(cm, {\n              anchor: curStart,\n              head: curEnd\n            }, mode, exclusive);\n          }\n          cm.setSelections(cmSel.ranges, cmSel.primary);\n          vim.lastMotion = null;\n          operatorArgs.repeat = repeat; // For indent in visual mode.\n          operatorArgs.registerName = registerName;\n          // Keep track of linewise as it affects how paste and change behave.\n          operatorArgs.linewise = linewise;\n          var operatorMoveTo = operators[operator](\n            cm, operatorArgs, cmSel.ranges, oldAnchor, newHead);\n          if (vim.visualMode) {\n            exitVisualMode(cm, operatorMoveTo != null);\n          }\n          if (operatorMoveTo) {\n            cm.setCursor(operatorMoveTo);\n          }\n        }\n      },\n      recordLastEdit: function(vim, inputState, actionCommand) {\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.isPlaying) { return; }\n        vim.lastEditInputState = inputState;\n        vim.lastEditActionCommand = actionCommand;\n        macroModeState.lastInsertModeChanges.changes = [];\n        macroModeState.lastInsertModeChanges.expectCursorActivityForChange = false;\n        macroModeState.lastInsertModeChanges.visualBlock = vim.visualBlock ? vim.sel.head.line - vim.sel.anchor.line : 0;\n      }\n    };\n\n    /**\n     * typedef {Object{line:number,ch:number}} Cursor An object containing the\n     *     position of the cursor.\n     */\n    // All of the functions below return Cursor objects.\n    var motions = {\n      moveToTopLine: function(cm, _head, motionArgs) {\n        var line = getUserVisibleLines(cm).top + motionArgs.repeat -1;\n        return Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      moveToMiddleLine: function(cm) {\n        var range = getUserVisibleLines(cm);\n        var line = Math.floor((range.top + range.bottom) * 0.5);\n        return Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      moveToBottomLine: function(cm, _head, motionArgs) {\n        var line = getUserVisibleLines(cm).bottom - motionArgs.repeat +1;\n        return Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      expandToLine: function(_cm, head, motionArgs) {\n        // Expands forward to end of line, and then to next line if repeat is\n        // >1. Does not handle backward motion!\n        var cur = head;\n        return Pos(cur.line + motionArgs.repeat - 1, Infinity);\n      },\n      findNext: function(cm, _head, motionArgs) {\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n        if (!query) {\n          return;\n        }\n        var prev = !motionArgs.forward;\n        // If search is initiated with ? instead of /, negate direction.\n        prev = (state.isReversed()) ? !prev : prev;\n        highlightSearchMatches(cm, query);\n        return findNext(cm, prev/** prev */, query, motionArgs.repeat);\n      },\n      /**\n       * Find and select the next occurrence of the search query. If the cursor is currently\n       * within a match, then find and select the current match. Otherwise, find the next occurrence in the\n       * appropriate direction.\n       *\n       * This differs from `findNext` in the following ways:\n       *\n       * 1. Instead of only returning the \"from\", this returns a \"from\", \"to\" range.\n       * 2. If the cursor is currently inside a search match, this selects the current match\n       *    instead of the next match.\n       * 3. If there is no associated operator, this will turn on visual mode.\n       */\n      findAndSelectNextInclusive: function(cm, _head, motionArgs, vim, prevInputState) {\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n\n        if (!query) {\n          return;\n        }\n\n        var prev = !motionArgs.forward;\n        prev = (state.isReversed()) ? !prev : prev;\n\n        // next: [from, to] | null\n        var next = findNextFromAndToInclusive(cm, prev, query, motionArgs.repeat, vim);\n\n        // No matches.\n        if (!next) {\n          return;\n        }\n\n        // If there's an operator that will be executed, return the selection.\n        if (prevInputState.operator) {\n          return next;\n        }\n\n        // At this point, we know that there is no accompanying operator -- let's\n        // deal with visual mode in order to select an appropriate match.\n\n        var from = next[0];\n        // For whatever reason, when we use the \"to\" as returned by searchcursor.js directly,\n        // the resulting selection is extended by 1 char. Let's shrink it so that only the\n        // match is selected.\n        var to = Pos(next[1].line, next[1].ch - 1);\n\n        if (vim.visualMode) {\n          // If we were in visualLine or visualBlock mode, get out of it.\n          if (vim.visualLine || vim.visualBlock) {\n            vim.visualLine = false;\n            vim.visualBlock = false;\n            CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: \"\"});\n          }\n\n          // If we're currently in visual mode, we should extend the selection to include\n          // the search result.\n          var anchor = vim.sel.anchor;\n          if (anchor) {\n            if (state.isReversed()) {\n              if (motionArgs.forward) {\n                return [anchor, from];\n              }\n\n              return [anchor, to];\n            } else {\n              if (motionArgs.forward) {\n                return [anchor, to];\n              }\n\n              return [anchor, from];\n            }\n          }\n        } else {\n          // Let's turn visual mode on.\n          vim.visualMode = true;\n          vim.visualLine = false;\n          vim.visualBlock = false;\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: \"\"});\n        }\n\n        return prev ? [to, from] : [from, to];\n      },\n      goToMark: function(cm, _head, motionArgs, vim) {\n        var pos = getMarkPos(cm, vim, motionArgs.selectedCharacter);\n        if (pos) {\n          return motionArgs.linewise ? { line: pos.line, ch: findFirstNonWhiteSpaceCharacter(cm.getLine(pos.line)) } : pos;\n        }\n        return null;\n      },\n      moveToOtherHighlightedEnd: function(cm, _head, motionArgs, vim) {\n        if (vim.visualBlock && motionArgs.sameLine) {\n          var sel = vim.sel;\n          return [\n            clipCursorToContent(cm, Pos(sel.anchor.line, sel.head.ch)),\n            clipCursorToContent(cm, Pos(sel.head.line, sel.anchor.ch))\n          ];\n        } else {\n          return ([vim.sel.head, vim.sel.anchor]);\n        }\n      },\n      jumpToMark: function(cm, head, motionArgs, vim) {\n        var best = head;\n        for (var i = 0; i < motionArgs.repeat; i++) {\n          var cursor = best;\n          for (var key in vim.marks) {\n            if (!isLowerCase(key)) {\n              continue;\n            }\n            var mark = vim.marks[key].find();\n            var isWrongDirection = (motionArgs.forward) ?\n              cursorIsBefore(mark, cursor) : cursorIsBefore(cursor, mark);\n\n            if (isWrongDirection) {\n              continue;\n            }\n            if (motionArgs.linewise && (mark.line == cursor.line)) {\n              continue;\n            }\n\n            var equal = cursorEqual(cursor, best);\n            var between = (motionArgs.forward) ?\n              cursorIsBetween(cursor, mark, best) :\n              cursorIsBetween(best, mark, cursor);\n\n            if (equal || between) {\n              best = mark;\n            }\n          }\n        }\n\n        if (motionArgs.linewise) {\n          // Vim places the cursor on the first non-whitespace character of\n          // the line if there is one, else it places the cursor at the end\n          // of the line, regardless of whether a mark was found.\n          best = Pos(best.line, findFirstNonWhiteSpaceCharacter(cm.getLine(best.line)));\n        }\n        return best;\n      },\n      moveByCharacters: function(_cm, head, motionArgs) {\n        var cur = head;\n        var repeat = motionArgs.repeat;\n        var ch = motionArgs.forward ? cur.ch + repeat : cur.ch - repeat;\n        return Pos(cur.line, ch);\n      },\n      moveByLines: function(cm, head, motionArgs, vim) {\n        var cur = head;\n        var endCh = cur.ch;\n        // Depending what our last motion was, we may want to do different\n        // things. If our last motion was moving vertically, we want to\n        // preserve the HPos from our last horizontal move.  If our last motion\n        // was going to the end of a line, moving vertically we should go to\n        // the end of the line, etc.\n        switch (vim.lastMotion) {\n          case this.moveByLines:\n          case this.moveByDisplayLines:\n          case this.moveByScroll:\n          case this.moveToColumn:\n          case this.moveToEol:\n            endCh = vim.lastHPos;\n            break;\n          default:\n            vim.lastHPos = endCh;\n        }\n        var repeat = motionArgs.repeat+(motionArgs.repeatOffset||0);\n        var line = motionArgs.forward ? cur.line + repeat : cur.line - repeat;\n        var first = cm.firstLine();\n        var last = cm.lastLine();\n        var posV = cm.findPosV(cur, (motionArgs.forward ? repeat : -repeat), 'line', vim.lastHSPos);\n        var hasMarkedText = motionArgs.forward ? posV.line > line : posV.line < line;\n        if (hasMarkedText) {\n          line = posV.line;\n          endCh = posV.ch;\n        }\n        // Vim go to line begin or line end when cursor at first/last line and\n        // move to previous/next line is triggered.\n        if (line < first && cur.line == first){\n          return this.moveToStartOfLine(cm, head, motionArgs, vim);\n        } else if (line > last && cur.line == last){\n            return moveToEol(cm, head, motionArgs, vim, true);\n        }\n        if (motionArgs.toFirstChar){\n          endCh=findFirstNonWhiteSpaceCharacter(cm.getLine(line));\n          vim.lastHPos = endCh;\n        }\n        vim.lastHSPos = cm.charCoords(Pos(line, endCh),'div').left;\n        return Pos(line, endCh);\n      },\n      moveByDisplayLines: function(cm, head, motionArgs, vim) {\n        var cur = head;\n        switch (vim.lastMotion) {\n          case this.moveByDisplayLines:\n          case this.moveByScroll:\n          case this.moveByLines:\n          case this.moveToColumn:\n          case this.moveToEol:\n            break;\n          default:\n            vim.lastHSPos = cm.charCoords(cur,'div').left;\n        }\n        var repeat = motionArgs.repeat;\n        var res=cm.findPosV(cur,(motionArgs.forward ? repeat : -repeat),'line',vim.lastHSPos);\n        if (res.hitSide) {\n          if (motionArgs.forward) {\n            var lastCharCoords = cm.charCoords(res, 'div');\n            var goalCoords = { top: lastCharCoords.top + 8, left: vim.lastHSPos };\n            var res = cm.coordsChar(goalCoords, 'div');\n          } else {\n            var resCoords = cm.charCoords(Pos(cm.firstLine(), 0), 'div');\n            resCoords.left = vim.lastHSPos;\n            res = cm.coordsChar(resCoords, 'div');\n          }\n        }\n        vim.lastHPos = res.ch;\n        return res;\n      },\n      moveByPage: function(cm, head, motionArgs) {\n        // CodeMirror only exposes functions that move the cursor page down, so\n        // doing this bad hack to move the cursor and move it back. evalInput\n        // will move the cursor to where it should be in the end.\n        var curStart = head;\n        var repeat = motionArgs.repeat;\n        return cm.findPosV(curStart, (motionArgs.forward ? repeat : -repeat), 'page');\n      },\n      moveByParagraph: function(cm, head, motionArgs) {\n        var dir = motionArgs.forward ? 1 : -1;\n        return findParagraph(cm, head, motionArgs.repeat, dir);\n      },\n      moveBySentence: function(cm, head, motionArgs) {\n        var dir = motionArgs.forward ? 1 : -1;\n        return findSentence(cm, head, motionArgs.repeat, dir);\n      },\n      moveByScroll: function(cm, head, motionArgs, vim) {\n        var scrollbox = cm.getScrollInfo();\n        var curEnd = null;\n        var repeat = motionArgs.repeat;\n        if (!repeat) {\n          repeat = scrollbox.clientHeight / (2 * cm.defaultTextHeight());\n        }\n        var orig = cm.charCoords(head, 'local');\n        motionArgs.repeat = repeat;\n        var curEnd = motions.moveByDisplayLines(cm, head, motionArgs, vim);\n        if (!curEnd) {\n          return null;\n        }\n        var dest = cm.charCoords(curEnd, 'local');\n        cm.scrollTo(null, scrollbox.top + dest.top - orig.top);\n        return curEnd;\n      },\n      moveByWords: function(cm, head, motionArgs) {\n        return moveToWord(cm, head, motionArgs.repeat, !!motionArgs.forward,\n            !!motionArgs.wordEnd, !!motionArgs.bigWord);\n      },\n      moveTillCharacter: function(cm, _head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        var curEnd = moveToCharacter(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter);\n        var increment = motionArgs.forward ? -1 : 1;\n        recordLastCharacterSearch(increment, motionArgs);\n        if (!curEnd) return null;\n        curEnd.ch += increment;\n        return curEnd;\n      },\n      moveToCharacter: function(cm, head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        recordLastCharacterSearch(0, motionArgs);\n        return moveToCharacter(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter) || head;\n      },\n      moveToSymbol: function(cm, head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        return findSymbol(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter) || head;\n      },\n      moveToColumn: function(cm, head, motionArgs, vim) {\n        var repeat = motionArgs.repeat;\n        // repeat is equivalent to which column we want to move to!\n        vim.lastHPos = repeat - 1;\n        vim.lastHSPos = cm.charCoords(head,'div').left;\n        return moveToColumn(cm, repeat);\n      },\n      moveToEol: function(cm, head, motionArgs, vim) {\n        return moveToEol(cm, head, motionArgs, vim, false);\n      },\n      moveToFirstNonWhiteSpaceCharacter: function(cm, head) {\n        // Go to the start of the line where the text begins, or the end for\n        // whitespace-only lines\n        var cursor = head;\n        return Pos(cursor.line,\n                   findFirstNonWhiteSpaceCharacter(cm.getLine(cursor.line)));\n      },\n      moveToMatchedSymbol: function(cm, head) {\n        var cursor = head;\n        var line = cursor.line;\n        var ch = cursor.ch;\n        var lineText = cm.getLine(line);\n        var symbol;\n        for (; ch < lineText.length; ch++) {\n          symbol = lineText.charAt(ch);\n          if (symbol && isMatchableSymbol(symbol)) {\n            var style = cm.getTokenTypeAt(Pos(line, ch + 1));\n            if (style !== \"string\" && style !== \"comment\") {\n              break;\n            }\n          }\n        }\n        if (ch < lineText.length) {\n          // Only include angle brackets in analysis if they are being matched.\n          var re = (ch === '<' || ch === '>') ? /[(){}[\\]<>]/ : /[(){}[\\]]/;\n          var matched = cm.findMatchingBracket(Pos(line, ch), {bracketRegex: re});\n          return matched.to;\n        } else {\n          return cursor;\n        }\n      },\n      moveToStartOfLine: function(_cm, head) {\n        return Pos(head.line, 0);\n      },\n      moveToLineOrEdgeOfDocument: function(cm, _head, motionArgs) {\n        var lineNum = motionArgs.forward ? cm.lastLine() : cm.firstLine();\n        if (motionArgs.repeatIsExplicit) {\n          lineNum = motionArgs.repeat - cm.getOption('firstLineNumber');\n        }\n        return Pos(lineNum,\n                   findFirstNonWhiteSpaceCharacter(cm.getLine(lineNum)));\n      },\n      textObjectManipulation: function(cm, head, motionArgs, vim) {\n        // TODO: lots of possible exceptions that can be thrown here. Try da(\n        //     outside of a () block.\n        var mirroredPairs = {'(': ')', ')': '(',\n                             '{': '}', '}': '{',\n                             '[': ']', ']': '[',\n                             '<': '>', '>': '<'};\n        var selfPaired = {'\\'': true, '\"': true, '`': true};\n\n        var character = motionArgs.selectedCharacter;\n        // 'b' refers to  '()' block.\n        // 'B' refers to  '{}' block.\n        if (character == 'b') {\n          character = '(';\n        } else if (character == 'B') {\n          character = '{';\n        }\n\n        // Inclusive is the difference between a and i\n        // TODO: Instead of using the additional text object map to perform text\n        //     object operations, merge the map into the defaultKeyMap and use\n        //     motionArgs to define behavior. Define separate entries for 'aw',\n        //     'iw', 'a[', 'i[', etc.\n        var inclusive = !motionArgs.textObjectInner;\n\n        var tmp;\n        if (mirroredPairs[character]) {\n          tmp = selectCompanionObject(cm, head, character, inclusive);\n        } else if (selfPaired[character]) {\n          tmp = findBeginningAndEnd(cm, head, character, inclusive);\n        } else if (character === 'W') {\n          tmp = expandWordUnderCursor(cm, inclusive, true /** forward */,\n                                                     true /** bigWord */);\n        } else if (character === 'w') {\n          tmp = expandWordUnderCursor(cm, inclusive, true /** forward */,\n                                                     false /** bigWord */);\n        } else if (character === 'p') {\n          tmp = findParagraph(cm, head, motionArgs.repeat, 0, inclusive);\n          motionArgs.linewise = true;\n          if (vim.visualMode) {\n            if (!vim.visualLine) { vim.visualLine = true; }\n          } else {\n            var operatorArgs = vim.inputState.operatorArgs;\n            if (operatorArgs) { operatorArgs.linewise = true; }\n            tmp.end.line--;\n          }\n        } else if (character === 't') {\n          tmp = expandTagUnderCursor(cm, head, inclusive);\n        } else {\n          // No text object defined for this, don't move.\n          return null;\n        }\n\n        if (!cm.state.vim.visualMode) {\n          return [tmp.start, tmp.end];\n        } else {\n          return expandSelection(cm, tmp.start, tmp.end);\n        }\n      },\n\n      repeatLastCharacterSearch: function(cm, head, motionArgs) {\n        var lastSearch = vimGlobalState.lastCharacterSearch;\n        var repeat = motionArgs.repeat;\n        var forward = motionArgs.forward === lastSearch.forward;\n        var increment = (lastSearch.increment ? 1 : 0) * (forward ? -1 : 1);\n        cm.moveH(-increment, 'char');\n        motionArgs.inclusive = forward ? true : false;\n        var curEnd = moveToCharacter(cm, repeat, forward, lastSearch.selectedCharacter);\n        if (!curEnd) {\n          cm.moveH(increment, 'char');\n          return head;\n        }\n        curEnd.ch += increment;\n        return curEnd;\n      }\n    };\n\n    function defineMotion(name, fn) {\n      motions[name] = fn;\n    }\n\n    function fillArray(val, times) {\n      var arr = [];\n      for (var i = 0; i < times; i++) {\n        arr.push(val);\n      }\n      return arr;\n    }\n    /**\n     * An operator acts on a text selection. It receives the list of selections\n     * as input. The corresponding CodeMirror selection is guaranteed to\n    * match the input selection.\n     */\n    var operators = {\n      change: function(cm, args, ranges) {\n        var finalHead, text;\n        var vim = cm.state.vim;\n        var anchor = ranges[0].anchor,\n            head = ranges[0].head;\n        if (!vim.visualMode) {\n          text = cm.getRange(anchor, head);\n          var lastState = vim.lastEditInputState || {};\n          if (lastState.motion == \"moveByWords\" && !isWhiteSpaceString(text)) {\n            // Exclude trailing whitespace if the range is not all whitespace.\n            var match = (/\\s+$/).exec(text);\n            if (match && lastState.motionArgs && lastState.motionArgs.forward) {\n              head = offsetCursor(head, 0, - match[0].length);\n              text = text.slice(0, - match[0].length);\n            }\n          }\n          var prevLineEnd = new Pos(anchor.line - 1, Number.MAX_VALUE);\n          var wasLastLine = cm.firstLine() == cm.lastLine();\n          if (head.line > cm.lastLine() && args.linewise && !wasLastLine) {\n            cm.replaceRange('', prevLineEnd, head);\n          } else {\n            cm.replaceRange('', anchor, head);\n          }\n          if (args.linewise) {\n            // Push the next line back down, if there is a next line.\n            if (!wasLastLine) {\n              cm.setCursor(prevLineEnd);\n              CodeMirror.commands.newlineAndIndent(cm);\n            }\n            // make sure cursor ends up at the end of the line.\n            anchor.ch = Number.MAX_VALUE;\n          }\n          finalHead = anchor;\n        } else if (args.fullLine) {\n            head.ch = Number.MAX_VALUE;\n            head.line--;\n            cm.setSelection(anchor, head)\n            text = cm.getSelection();\n            cm.replaceSelection(\"\");\n            finalHead = anchor;\n        } else {\n          text = cm.getSelection();\n          var replacement = fillArray('', ranges.length);\n          cm.replaceSelections(replacement);\n          finalHead = cursorMin(ranges[0].head, ranges[0].anchor);\n        }\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'change', text,\n            args.linewise, ranges.length > 1);\n        actions.enterInsertMode(cm, {head: finalHead}, cm.state.vim);\n      },\n      // delete is a javascript keyword.\n      'delete': function(cm, args, ranges) {\n        var finalHead, text;\n        var vim = cm.state.vim;\n        if (!vim.visualBlock) {\n          var anchor = ranges[0].anchor,\n              head = ranges[0].head;\n          if (args.linewise &&\n              head.line != cm.firstLine() &&\n              anchor.line == cm.lastLine() &&\n              anchor.line == head.line - 1) {\n            // Special case for dd on last line (and first line).\n            if (anchor.line == cm.firstLine()) {\n              anchor.ch = 0;\n            } else {\n              anchor = Pos(anchor.line - 1, lineLength(cm, anchor.line - 1));\n            }\n          }\n          text = cm.getRange(anchor, head);\n          cm.replaceRange('', anchor, head);\n          finalHead = anchor;\n          if (args.linewise) {\n            finalHead = motions.moveToFirstNonWhiteSpaceCharacter(cm, anchor);\n          }\n        } else {\n          text = cm.getSelection();\n          var replacement = fillArray('', ranges.length);\n          cm.replaceSelections(replacement);\n          finalHead = ranges[0].anchor;\n        }\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'delete', text,\n            args.linewise, vim.visualBlock);\n        return clipCursorToContent(cm, finalHead);\n      },\n      indent: function(cm, args, ranges) {\n        var vim = cm.state.vim;\n        var startLine = ranges[0].anchor.line;\n        var endLine = vim.visualBlock ?\n          ranges[ranges.length - 1].anchor.line :\n          ranges[0].head.line;\n        // In visual mode, n> shifts the selection right n times, instead of\n        // shifting n lines right once.\n        var repeat = (vim.visualMode) ? args.repeat : 1;\n        if (args.linewise) {\n          // The only way to delete a newline is to delete until the start of\n          // the next line, so in linewise mode evalInput will include the next\n          // line. We don't want this in indent, so we go back a line.\n          endLine--;\n        }\n        for (var i = startLine; i <= endLine; i++) {\n          for (var j = 0; j < repeat; j++) {\n            cm.indentLine(i, args.indentRight);\n          }\n        }\n        return motions.moveToFirstNonWhiteSpaceCharacter(cm, ranges[0].anchor);\n      },\n      indentAuto: function(cm, _args, ranges) {\n        cm.execCommand(\"indentAuto\");\n        return motions.moveToFirstNonWhiteSpaceCharacter(cm, ranges[0].anchor);\n      },\n      changeCase: function(cm, args, ranges, oldAnchor, newHead) {\n        var selections = cm.getSelections();\n        var swapped = [];\n        var toLower = args.toLower;\n        for (var j = 0; j < selections.length; j++) {\n          var toSwap = selections[j];\n          var text = '';\n          if (toLower === true) {\n            text = toSwap.toLowerCase();\n          } else if (toLower === false) {\n            text = toSwap.toUpperCase();\n          } else {\n            for (var i = 0; i < toSwap.length; i++) {\n              var character = toSwap.charAt(i);\n              text += isUpperCase(character) ? character.toLowerCase() :\n                  character.toUpperCase();\n            }\n          }\n          swapped.push(text);\n        }\n        cm.replaceSelections(swapped);\n        if (args.shouldMoveCursor){\n          return newHead;\n        } else if (!cm.state.vim.visualMode && args.linewise && ranges[0].anchor.line + 1 == ranges[0].head.line) {\n          return motions.moveToFirstNonWhiteSpaceCharacter(cm, oldAnchor);\n        } else if (args.linewise){\n          return oldAnchor;\n        } else {\n          return cursorMin(ranges[0].anchor, ranges[0].head);\n        }\n      },\n      yank: function(cm, args, ranges, oldAnchor) {\n        var vim = cm.state.vim;\n        var text = cm.getSelection();\n        var endPos = vim.visualMode\n          ? cursorMin(vim.sel.anchor, vim.sel.head, ranges[0].head, ranges[0].anchor)\n          : oldAnchor;\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'yank',\n            text, args.linewise, vim.visualBlock);\n        return endPos;\n      }\n    };\n\n    function defineOperator(name, fn) {\n      operators[name] = fn;\n    }\n\n    var actions = {\n      jumpListWalk: function(cm, actionArgs, vim) {\n        if (vim.visualMode) {\n          return;\n        }\n        var repeat = actionArgs.repeat;\n        var forward = actionArgs.forward;\n        var jumpList = vimGlobalState.jumpList;\n\n        var mark = jumpList.move(cm, forward ? repeat : -repeat);\n        var markPos = mark ? mark.find() : undefined;\n        markPos = markPos ? markPos : cm.getCursor();\n        cm.setCursor(markPos);\n      },\n      scroll: function(cm, actionArgs, vim) {\n        if (vim.visualMode) {\n          return;\n        }\n        var repeat = actionArgs.repeat || 1;\n        var lineHeight = cm.defaultTextHeight();\n        var top = cm.getScrollInfo().top;\n        var delta = lineHeight * repeat;\n        var newPos = actionArgs.forward ? top + delta : top - delta;\n        var cursor = copyCursor(cm.getCursor());\n        var cursorCoords = cm.charCoords(cursor, 'local');\n        if (actionArgs.forward) {\n          if (newPos > cursorCoords.top) {\n             cursor.line += (newPos - cursorCoords.top) / lineHeight;\n             cursor.line = Math.ceil(cursor.line);\n             cm.setCursor(cursor);\n             cursorCoords = cm.charCoords(cursor, 'local');\n             cm.scrollTo(null, cursorCoords.top);\n          } else {\n             // Cursor stays within bounds.  Just reposition the scroll window.\n             cm.scrollTo(null, newPos);\n          }\n        } else {\n          var newBottom = newPos + cm.getScrollInfo().clientHeight;\n          if (newBottom < cursorCoords.bottom) {\n             cursor.line -= (cursorCoords.bottom - newBottom) / lineHeight;\n             cursor.line = Math.floor(cursor.line);\n             cm.setCursor(cursor);\n             cursorCoords = cm.charCoords(cursor, 'local');\n             cm.scrollTo(\n                 null, cursorCoords.bottom - cm.getScrollInfo().clientHeight);\n          } else {\n             // Cursor stays within bounds.  Just reposition the scroll window.\n             cm.scrollTo(null, newPos);\n          }\n        }\n      },\n      scrollToCursor: function(cm, actionArgs) {\n        var lineNum = cm.getCursor().line;\n        var charCoords = cm.charCoords(Pos(lineNum, 0), 'local');\n        var height = cm.getScrollInfo().clientHeight;\n        var y = charCoords.top;\n        var lineHeight = charCoords.bottom - y;\n        switch (actionArgs.position) {\n          case 'center': y = y - (height / 2) + lineHeight;\n            break;\n          case 'bottom': y = y - height + lineHeight;\n            break;\n        }\n        cm.scrollTo(null, y);\n      },\n      replayMacro: function(cm, actionArgs, vim) {\n        var registerName = actionArgs.selectedCharacter;\n        var repeat = actionArgs.repeat;\n        var macroModeState = vimGlobalState.macroModeState;\n        if (registerName == '@') {\n          registerName = macroModeState.latestRegister;\n        } else {\n          macroModeState.latestRegister = registerName;\n        }\n        while(repeat--){\n          executeMacroRegister(cm, vim, macroModeState, registerName);\n        }\n      },\n      enterMacroRecordMode: function(cm, actionArgs) {\n        var macroModeState = vimGlobalState.macroModeState;\n        var registerName = actionArgs.selectedCharacter;\n        if (vimGlobalState.registerController.isValidRegister(registerName)) {\n          macroModeState.enterMacroRecordMode(cm, registerName);\n        }\n      },\n      toggleOverwrite: function(cm) {\n        if (!cm.state.overwrite) {\n          cm.toggleOverwrite(true);\n          cm.setOption('keyMap', 'vim-replace');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"replace\"});\n        } else {\n          cm.toggleOverwrite(false);\n          cm.setOption('keyMap', 'vim-insert');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"insert\"});\n        }\n      },\n      enterInsertMode: function(cm, actionArgs, vim) {\n        if (cm.getOption('readOnly')) { return; }\n        vim.insertMode = true;\n        vim.insertModeRepeat = actionArgs && actionArgs.repeat || 1;\n        var insertAt = (actionArgs) ? actionArgs.insertAt : null;\n        var sel = vim.sel;\n        var head = actionArgs.head || cm.getCursor('head');\n        var height = cm.listSelections().length;\n        if (insertAt == 'eol') {\n          head = Pos(head.line, lineLength(cm, head.line));\n        } else if (insertAt == 'bol') {\n          head = Pos(head.line, 0);\n        } else if (insertAt == 'charAfter') {\n          head = offsetCursor(head, 0, 1);\n        } else if (insertAt == 'firstNonBlank') {\n          head = motions.moveToFirstNonWhiteSpaceCharacter(cm, head);\n        } else if (insertAt == 'startOfSelectedArea') {\n          if (!vim.visualMode)\n              return;\n          if (!vim.visualBlock) {\n            if (sel.head.line < sel.anchor.line) {\n              head = sel.head;\n            } else {\n              head = Pos(sel.anchor.line, 0);\n            }\n          } else {\n            head = Pos(\n                Math.min(sel.head.line, sel.anchor.line),\n                Math.min(sel.head.ch, sel.anchor.ch));\n            height = Math.abs(sel.head.line - sel.anchor.line) + 1;\n          }\n        } else if (insertAt == 'endOfSelectedArea') {\n            if (!vim.visualMode)\n              return;\n          if (!vim.visualBlock) {\n            if (sel.head.line >= sel.anchor.line) {\n              head = offsetCursor(sel.head, 0, 1);\n            } else {\n              head = Pos(sel.anchor.line, 0);\n            }\n          } else {\n            head = Pos(\n                Math.min(sel.head.line, sel.anchor.line),\n                Math.max(sel.head.ch + 1, sel.anchor.ch));\n            height = Math.abs(sel.head.line - sel.anchor.line) + 1;\n          }\n        } else if (insertAt == 'inplace') {\n          if (vim.visualMode){\n            return;\n          }\n        } else if (insertAt == 'lastEdit') {\n          head = getLastEditPos(cm) || head;\n        }\n        cm.setOption('disableInput', false);\n        if (actionArgs && actionArgs.replace) {\n          // Handle Replace-mode as a special case of insert mode.\n          cm.toggleOverwrite(true);\n          cm.setOption('keyMap', 'vim-replace');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"replace\"});\n        } else {\n          cm.toggleOverwrite(false);\n          cm.setOption('keyMap', 'vim-insert');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"insert\"});\n        }\n        if (!vimGlobalState.macroModeState.isPlaying) {\n          // Only record if not replaying.\n          cm.on('change', onChange);\n          CodeMirror.on(cm.getInputField(), 'keydown', onKeyEventTargetKeyDown);\n        }\n        if (vim.visualMode) {\n          exitVisualMode(cm);\n        }\n        selectForInsert(cm, head, height);\n      },\n      toggleVisualMode: function(cm, actionArgs, vim) {\n        var repeat = actionArgs.repeat;\n        var anchor = cm.getCursor();\n        var head;\n        // TODO: The repeat should actually select number of characters/lines\n        //     equal to the repeat times the size of the previous visual\n        //     operation.\n        if (!vim.visualMode) {\n          // Entering visual mode\n          vim.visualMode = true;\n          vim.visualLine = !!actionArgs.linewise;\n          vim.visualBlock = !!actionArgs.blockwise;\n          head = clipCursorToContent(\n              cm, Pos(anchor.line, anchor.ch + repeat - 1));\n          vim.sel = {\n            anchor: anchor,\n            head: head\n          };\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: vim.visualLine ? \"linewise\" : vim.visualBlock ? \"blockwise\" : \"\"});\n          updateCmSelection(cm);\n          updateMark(cm, vim, '<', cursorMin(anchor, head));\n          updateMark(cm, vim, '>', cursorMax(anchor, head));\n        } else if (vim.visualLine ^ actionArgs.linewise ||\n            vim.visualBlock ^ actionArgs.blockwise) {\n          // Toggling between modes\n          vim.visualLine = !!actionArgs.linewise;\n          vim.visualBlock = !!actionArgs.blockwise;\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: vim.visualLine ? \"linewise\" : vim.visualBlock ? \"blockwise\" : \"\"});\n          updateCmSelection(cm);\n        } else {\n          exitVisualMode(cm);\n        }\n      },\n      reselectLastSelection: function(cm, _actionArgs, vim) {\n        var lastSelection = vim.lastSelection;\n        if (vim.visualMode) {\n          updateLastSelection(cm, vim);\n        }\n        if (lastSelection) {\n          var anchor = lastSelection.anchorMark.find();\n          var head = lastSelection.headMark.find();\n          if (!anchor || !head) {\n            // If the marks have been destroyed due to edits, do nothing.\n            return;\n          }\n          vim.sel = {\n            anchor: anchor,\n            head: head\n          };\n          vim.visualMode = true;\n          vim.visualLine = lastSelection.visualLine;\n          vim.visualBlock = lastSelection.visualBlock;\n          updateCmSelection(cm);\n          updateMark(cm, vim, '<', cursorMin(anchor, head));\n          updateMark(cm, vim, '>', cursorMax(anchor, head));\n          CodeMirror.signal(cm, 'vim-mode-change', {\n            mode: 'visual',\n            subMode: vim.visualLine ? 'linewise' :\n                     vim.visualBlock ? 'blockwise' : ''});\n        }\n      },\n      joinLines: function(cm, actionArgs, vim) {\n        var curStart, curEnd;\n        if (vim.visualMode) {\n          curStart = cm.getCursor('anchor');\n          curEnd = cm.getCursor('head');\n          if (cursorIsBefore(curEnd, curStart)) {\n            var tmp = curEnd;\n            curEnd = curStart;\n            curStart = tmp;\n          }\n          curEnd.ch = lineLength(cm, curEnd.line) - 1;\n        } else {\n          // Repeat is the number of lines to join. Minimum 2 lines.\n          var repeat = Math.max(actionArgs.repeat, 2);\n          curStart = cm.getCursor();\n          curEnd = clipCursorToContent(cm, Pos(curStart.line + repeat - 1,\n                                               Infinity));\n        }\n        var finalCh = 0;\n        for (var i = curStart.line; i < curEnd.line; i++) {\n          finalCh = lineLength(cm, curStart.line);\n          var tmp = Pos(curStart.line + 1,\n                        lineLength(cm, curStart.line + 1));\n          var text = cm.getRange(curStart, tmp);\n          text = actionArgs.keepSpaces\n            ? text.replace(/\\n\\r?/g, '')\n            : text.replace(/\\n\\s*/g, ' ');\n          cm.replaceRange(text, curStart, tmp);\n        }\n        var curFinalPos = Pos(curStart.line, finalCh);\n        if (vim.visualMode) {\n          exitVisualMode(cm, false);\n        }\n        cm.setCursor(curFinalPos);\n      },\n      newLineAndEnterInsertMode: function(cm, actionArgs, vim) {\n        vim.insertMode = true;\n        var insertAt = copyCursor(cm.getCursor());\n        if (insertAt.line === cm.firstLine() && !actionArgs.after) {\n          // Special case for inserting newline before start of document.\n          cm.replaceRange('\\n', Pos(cm.firstLine(), 0));\n          cm.setCursor(cm.firstLine(), 0);\n        } else {\n          insertAt.line = (actionArgs.after) ? insertAt.line :\n              insertAt.line - 1;\n          insertAt.ch = lineLength(cm, insertAt.line);\n          cm.setCursor(insertAt);\n          var newlineFn = CodeMirror.commands.newlineAndIndentContinueComment ||\n              CodeMirror.commands.newlineAndIndent;\n          newlineFn(cm);\n        }\n        this.enterInsertMode(cm, { repeat: actionArgs.repeat }, vim);\n      },\n      paste: function(cm, actionArgs, vim) {\n        var cur = copyCursor(cm.getCursor());\n        var register = vimGlobalState.registerController.getRegister(\n            actionArgs.registerName);\n        var text = register.toString();\n        if (!text) {\n          return;\n        }\n        if (actionArgs.matchIndent) {\n          var tabSize = cm.getOption(\"tabSize\");\n          // length that considers tabs and tabSize\n          var whitespaceLength = function(str) {\n            var tabs = (str.split(\"\\t\").length - 1);\n            var spaces = (str.split(\" \").length - 1);\n            return tabs * tabSize + spaces * 1;\n          };\n          var currentLine = cm.getLine(cm.getCursor().line);\n          var indent = whitespaceLength(currentLine.match(/^\\s*/)[0]);\n          // chomp last newline b/c don't want it to match /^\\s*/gm\n          var chompedText = text.replace(/\\n$/, '');\n          var wasChomped = text !== chompedText;\n          var firstIndent = whitespaceLength(text.match(/^\\s*/)[0]);\n          var text = chompedText.replace(/^\\s*/gm, function(wspace) {\n            var newIndent = indent + (whitespaceLength(wspace) - firstIndent);\n            if (newIndent < 0) {\n              return \"\";\n            }\n            else if (cm.getOption(\"indentWithTabs\")) {\n              var quotient = Math.floor(newIndent / tabSize);\n              return Array(quotient + 1).join('\\t');\n            }\n            else {\n              return Array(newIndent + 1).join(' ');\n            }\n          });\n          text += wasChomped ? \"\\n\" : \"\";\n        }\n        if (actionArgs.repeat > 1) {\n          var text = Array(actionArgs.repeat + 1).join(text);\n        }\n        var linewise = register.linewise;\n        var blockwise = register.blockwise;\n        if (blockwise) {\n          text = text.split('\\n');\n          if (linewise) {\n              text.pop();\n          }\n          for (var i = 0; i < text.length; i++) {\n            text[i] = (text[i] == '') ? ' ' : text[i];\n          }\n          cur.ch += actionArgs.after ? 1 : 0;\n          cur.ch = Math.min(lineLength(cm, cur.line), cur.ch);\n        } else if (linewise) {\n          if(vim.visualMode) {\n            text = vim.visualLine ? text.slice(0, -1) : '\\n' + text.slice(0, text.length - 1) + '\\n';\n          } else if (actionArgs.after) {\n            // Move the newline at the end to the start instead, and paste just\n            // before the newline character of the line we are on right now.\n            text = '\\n' + text.slice(0, text.length - 1);\n            cur.ch = lineLength(cm, cur.line);\n          } else {\n            cur.ch = 0;\n          }\n        } else {\n          cur.ch += actionArgs.after ? 1 : 0;\n        }\n        var curPosFinal;\n        var idx;\n        if (vim.visualMode) {\n          //  save the pasted text for reselection if the need arises\n          vim.lastPastedText = text;\n          var lastSelectionCurEnd;\n          var selectedArea = getSelectedAreaRange(cm, vim);\n          var selectionStart = selectedArea[0];\n          var selectionEnd = selectedArea[1];\n          var selectedText = cm.getSelection();\n          var selections = cm.listSelections();\n          var emptyStrings = new Array(selections.length).join('1').split('1');\n          // save the curEnd marker before it get cleared due to cm.replaceRange.\n          if (vim.lastSelection) {\n            lastSelectionCurEnd = vim.lastSelection.headMark.find();\n          }\n          // push the previously selected text to unnamed register\n          vimGlobalState.registerController.unnamedRegister.setText(selectedText);\n          if (blockwise) {\n            // first delete the selected text\n            cm.replaceSelections(emptyStrings);\n            // Set new selections as per the block length of the yanked text\n            selectionEnd = Pos(selectionStart.line + text.length-1, selectionStart.ch);\n            cm.setCursor(selectionStart);\n            selectBlock(cm, selectionEnd);\n            cm.replaceSelections(text);\n            curPosFinal = selectionStart;\n          } else if (vim.visualBlock) {\n            cm.replaceSelections(emptyStrings);\n            cm.setCursor(selectionStart);\n            cm.replaceRange(text, selectionStart, selectionStart);\n            curPosFinal = selectionStart;\n          } else {\n            cm.replaceRange(text, selectionStart, selectionEnd);\n            curPosFinal = cm.posFromIndex(cm.indexFromPos(selectionStart) + text.length - 1);\n          }\n          // restore the the curEnd marker\n          if(lastSelectionCurEnd) {\n            vim.lastSelection.headMark = cm.setBookmark(lastSelectionCurEnd);\n          }\n          if (linewise) {\n            curPosFinal.ch=0;\n          }\n        } else {\n          if (blockwise) {\n            cm.setCursor(cur);\n            for (var i = 0; i < text.length; i++) {\n              var line = cur.line+i;\n              if (line > cm.lastLine()) {\n                cm.replaceRange('\\n',  Pos(line, 0));\n              }\n              var lastCh = lineLength(cm, line);\n              if (lastCh < cur.ch) {\n                extendLineToColumn(cm, line, cur.ch);\n              }\n            }\n            cm.setCursor(cur);\n            selectBlock(cm, Pos(cur.line + text.length-1, cur.ch));\n            cm.replaceSelections(text);\n            curPosFinal = cur;\n          } else {\n            cm.replaceRange(text, cur);\n            // Now fine tune the cursor to where we want it.\n            if (linewise && actionArgs.after) {\n              curPosFinal = Pos(\n              cur.line + 1,\n              findFirstNonWhiteSpaceCharacter(cm.getLine(cur.line + 1)));\n            } else if (linewise && !actionArgs.after) {\n              curPosFinal = Pos(\n                cur.line,\n                findFirstNonWhiteSpaceCharacter(cm.getLine(cur.line)));\n            } else if (!linewise && actionArgs.after) {\n              idx = cm.indexFromPos(cur);\n              curPosFinal = cm.posFromIndex(idx + text.length - 1);\n            } else {\n              idx = cm.indexFromPos(cur);\n              curPosFinal = cm.posFromIndex(idx + text.length);\n            }\n          }\n        }\n        if (vim.visualMode) {\n          exitVisualMode(cm, false);\n        }\n        cm.setCursor(curPosFinal);\n      },\n      undo: function(cm, actionArgs) {\n        cm.operation(function() {\n          repeatFn(cm, CodeMirror.commands.undo, actionArgs.repeat)();\n          cm.setCursor(cm.getCursor('anchor'));\n        });\n      },\n      redo: function(cm, actionArgs) {\n        repeatFn(cm, CodeMirror.commands.redo, actionArgs.repeat)();\n      },\n      setRegister: function(_cm, actionArgs, vim) {\n        vim.inputState.registerName = actionArgs.selectedCharacter;\n      },\n      setMark: function(cm, actionArgs, vim) {\n        var markName = actionArgs.selectedCharacter;\n        updateMark(cm, vim, markName, cm.getCursor());\n      },\n      replace: function(cm, actionArgs, vim) {\n        var replaceWith = actionArgs.selectedCharacter;\n        var curStart = cm.getCursor();\n        var replaceTo;\n        var curEnd;\n        var selections = cm.listSelections();\n        if (vim.visualMode) {\n          curStart = cm.getCursor('start');\n          curEnd = cm.getCursor('end');\n        } else {\n          var line = cm.getLine(curStart.line);\n          replaceTo = curStart.ch + actionArgs.repeat;\n          if (replaceTo > line.length) {\n            replaceTo=line.length;\n          }\n          curEnd = Pos(curStart.line, replaceTo);\n        }\n        if (replaceWith=='\\n') {\n          if (!vim.visualMode) cm.replaceRange('', curStart, curEnd);\n          // special case, where vim help says to replace by just one line-break\n          (CodeMirror.commands.newlineAndIndentContinueComment || CodeMirror.commands.newlineAndIndent)(cm);\n        } else {\n          var replaceWithStr = cm.getRange(curStart, curEnd);\n          //replace all characters in range by selected, but keep linebreaks\n          replaceWithStr = replaceWithStr.replace(/[^\\n]/g, replaceWith);\n          if (vim.visualBlock) {\n            // Tabs are split in visua block before replacing\n            var spaces = new Array(cm.getOption(\"tabSize\")+1).join(' ');\n            replaceWithStr = cm.getSelection();\n            replaceWithStr = replaceWithStr.replace(/\\t/g, spaces).replace(/[^\\n]/g, replaceWith).split('\\n');\n            cm.replaceSelections(replaceWithStr);\n          } else {\n            cm.replaceRange(replaceWithStr, curStart, curEnd);\n          }\n          if (vim.visualMode) {\n            curStart = cursorIsBefore(selections[0].anchor, selections[0].head) ?\n                         selections[0].anchor : selections[0].head;\n            cm.setCursor(curStart);\n            exitVisualMode(cm, false);\n          } else {\n            cm.setCursor(offsetCursor(curEnd, 0, -1));\n          }\n        }\n      },\n      incrementNumberToken: function(cm, actionArgs) {\n        var cur = cm.getCursor();\n        var lineStr = cm.getLine(cur.line);\n        var re = /(-?)(?:(0x)([\\da-f]+)|(0b|0|)(\\d+))/gi;\n        var match;\n        var start;\n        var end;\n        var numberStr;\n        while ((match = re.exec(lineStr)) !== null) {\n          start = match.index;\n          end = start + match[0].length;\n          if (cur.ch < end)break;\n        }\n        if (!actionArgs.backtrack && (end <= cur.ch))return;\n        if (match) {\n          var baseStr = match[2] || match[4]\n          var digits = match[3] || match[5]\n          var increment = actionArgs.increase ? 1 : -1;\n          var base = {'0b': 2, '0': 8, '': 10, '0x': 16}[baseStr.toLowerCase()];\n          var number = parseInt(match[1] + digits, base) + (increment * actionArgs.repeat);\n          numberStr = number.toString(base);\n          var zeroPadding = baseStr ? new Array(digits.length - numberStr.length + 1 + match[1].length).join('0') : ''\n          if (numberStr.charAt(0) === '-') {\n            numberStr = '-' + baseStr + zeroPadding + numberStr.substr(1);\n          } else {\n            numberStr = baseStr + zeroPadding + numberStr;\n          }\n          var from = Pos(cur.line, start);\n          var to = Pos(cur.line, end);\n          cm.replaceRange(numberStr, from, to);\n        } else {\n          return;\n        }\n        cm.setCursor(Pos(cur.line, start + numberStr.length - 1));\n      },\n      repeatLastEdit: function(cm, actionArgs, vim) {\n        var lastEditInputState = vim.lastEditInputState;\n        if (!lastEditInputState) { return; }\n        var repeat = actionArgs.repeat;\n        if (repeat && actionArgs.repeatIsExplicit) {\n          vim.lastEditInputState.repeatOverride = repeat;\n        } else {\n          repeat = vim.lastEditInputState.repeatOverride || repeat;\n        }\n        repeatLastEdit(cm, vim, repeat, false /** repeatForInsert */);\n      },\n      indent: function(cm, actionArgs) {\n        cm.indentLine(cm.getCursor().line, actionArgs.indentRight);\n      },\n      exitInsertMode: exitInsertMode\n    };\n\n    function defineAction(name, fn) {\n      actions[name] = fn;\n    }\n\n    /*\n     * Below are miscellaneous utility functions used by vim.js\n     */\n\n    /**\n     * Clips cursor to ensure that line is within the buffer's range\n     * If includeLineBreak is true, then allow cur.ch == lineLength.\n     */\n    function clipCursorToContent(cm, cur) {\n      var vim = cm.state.vim;\n      var includeLineBreak = vim.insertMode || vim.visualMode;\n      var line = Math.min(Math.max(cm.firstLine(), cur.line), cm.lastLine() );\n      var maxCh = lineLength(cm, line) - 1 + !!includeLineBreak;\n      var ch = Math.min(Math.max(0, cur.ch), maxCh);\n      return Pos(line, ch);\n    }\n    function copyArgs(args) {\n      var ret = {};\n      for (var prop in args) {\n        if (args.hasOwnProperty(prop)) {\n          ret[prop] = args[prop];\n        }\n      }\n      return ret;\n    }\n    function offsetCursor(cur, offsetLine, offsetCh) {\n      if (typeof offsetLine === 'object') {\n        offsetCh = offsetLine.ch;\n        offsetLine = offsetLine.line;\n      }\n      return Pos(cur.line + offsetLine, cur.ch + offsetCh);\n    }\n    function commandMatches(keys, keyMap, context, inputState) {\n      // Partial matches are not applied. They inform the key handler\n      // that the current key sequence is a subsequence of a valid key\n      // sequence, so that the key buffer is not cleared.\n      var match, partial = [], full = [];\n      for (var i = 0; i < keyMap.length; i++) {\n        var command = keyMap[i];\n        if (context == 'insert' && command.context != 'insert' ||\n            command.context && command.context != context ||\n            inputState.operator && command.type == 'action' ||\n            !(match = commandMatch(keys, command.keys))) { continue; }\n        if (match == 'partial') { partial.push(command); }\n        if (match == 'full') { full.push(command); }\n      }\n      return {\n        partial: partial.length && partial,\n        full: full.length && full\n      };\n    }\n    function commandMatch(pressed, mapped) {\n      if (mapped.slice(-11) == '<character>') {\n        // Last character matches anything.\n        var prefixLen = mapped.length - 11;\n        var pressedPrefix = pressed.slice(0, prefixLen);\n        var mappedPrefix = mapped.slice(0, prefixLen);\n        return pressedPrefix == mappedPrefix && pressed.length > prefixLen ? 'full' :\n               mappedPrefix.indexOf(pressedPrefix) == 0 ? 'partial' : false;\n      } else {\n        return pressed == mapped ? 'full' :\n               mapped.indexOf(pressed) == 0 ? 'partial' : false;\n      }\n    }\n    function lastChar(keys) {\n      var match = /^.*(<[^>]+>)$/.exec(keys);\n      var selectedCharacter = match ? match[1] : keys.slice(-1);\n      if (selectedCharacter.length > 1){\n        switch(selectedCharacter){\n          case '<CR>':\n            selectedCharacter='\\n';\n            break;\n          case '<Space>':\n            selectedCharacter=' ';\n            break;\n          default:\n            selectedCharacter='';\n            break;\n        }\n      }\n      return selectedCharacter;\n    }\n    function repeatFn(cm, fn, repeat) {\n      return function() {\n        for (var i = 0; i < repeat; i++) {\n          fn(cm);\n        }\n      };\n    }\n    function copyCursor(cur) {\n      return Pos(cur.line, cur.ch);\n    }\n    function cursorEqual(cur1, cur2) {\n      return cur1.ch == cur2.ch && cur1.line == cur2.line;\n    }\n    function cursorIsBefore(cur1, cur2) {\n      if (cur1.line < cur2.line) {\n        return true;\n      }\n      if (cur1.line == cur2.line && cur1.ch < cur2.ch) {\n        return true;\n      }\n      return false;\n    }\n    function cursorMin(cur1, cur2) {\n      if (arguments.length > 2) {\n        cur2 = cursorMin.apply(undefined, Array.prototype.slice.call(arguments, 1));\n      }\n      return cursorIsBefore(cur1, cur2) ? cur1 : cur2;\n    }\n    function cursorMax(cur1, cur2) {\n      if (arguments.length > 2) {\n        cur2 = cursorMax.apply(undefined, Array.prototype.slice.call(arguments, 1));\n      }\n      return cursorIsBefore(cur1, cur2) ? cur2 : cur1;\n    }\n    function cursorIsBetween(cur1, cur2, cur3) {\n      // returns true if cur2 is between cur1 and cur3.\n      var cur1before2 = cursorIsBefore(cur1, cur2);\n      var cur2before3 = cursorIsBefore(cur2, cur3);\n      return cur1before2 && cur2before3;\n    }\n    function lineLength(cm, lineNum) {\n      return cm.getLine(lineNum).length;\n    }\n    function trim(s) {\n      if (s.trim) {\n        return s.trim();\n      }\n      return s.replace(/^\\s+|\\s+$/g, '');\n    }\n    function escapeRegex(s) {\n      return s.replace(/([.?*+$\\[\\]\\/\\\\(){}|\\-])/g, '\\\\$1');\n    }\n    function extendLineToColumn(cm, lineNum, column) {\n      var endCh = lineLength(cm, lineNum);\n      var spaces = new Array(column-endCh+1).join(' ');\n      cm.setCursor(Pos(lineNum, endCh));\n      cm.replaceRange(spaces, cm.getCursor());\n    }\n    // This functions selects a rectangular block\n    // of text with selectionEnd as any of its corner\n    // Height of block:\n    // Difference in selectionEnd.line and first/last selection.line\n    // Width of the block:\n    // Distance between selectionEnd.ch and any(first considered here) selection.ch\n    function selectBlock(cm, selectionEnd) {\n      var selections = [], ranges = cm.listSelections();\n      var head = copyCursor(cm.clipPos(selectionEnd));\n      var isClipped = !cursorEqual(selectionEnd, head);\n      var curHead = cm.getCursor('head');\n      var primIndex = getIndex(ranges, curHead);\n      var wasClipped = cursorEqual(ranges[primIndex].head, ranges[primIndex].anchor);\n      var max = ranges.length - 1;\n      var index = max - primIndex > primIndex ? max : 0;\n      var base = ranges[index].anchor;\n\n      var firstLine = Math.min(base.line, head.line);\n      var lastLine = Math.max(base.line, head.line);\n      var baseCh = base.ch, headCh = head.ch;\n\n      var dir = ranges[index].head.ch - baseCh;\n      var newDir = headCh - baseCh;\n      if (dir > 0 && newDir <= 0) {\n        baseCh++;\n        if (!isClipped) { headCh--; }\n      } else if (dir < 0 && newDir >= 0) {\n        baseCh--;\n        if (!wasClipped) { headCh++; }\n      } else if (dir < 0 && newDir == -1) {\n        baseCh--;\n        headCh++;\n      }\n      for (var line = firstLine; line <= lastLine; line++) {\n        var range = {anchor: new Pos(line, baseCh), head: new Pos(line, headCh)};\n        selections.push(range);\n      }\n      cm.setSelections(selections);\n      selectionEnd.ch = headCh;\n      base.ch = baseCh;\n      return base;\n    }\n    function selectForInsert(cm, head, height) {\n      var sel = [];\n      for (var i = 0; i < height; i++) {\n        var lineHead = offsetCursor(head, i, 0);\n        sel.push({anchor: lineHead, head: lineHead});\n      }\n      cm.setSelections(sel, 0);\n    }\n    // getIndex returns the index of the cursor in the selections.\n    function getIndex(ranges, cursor, end) {\n      for (var i = 0; i < ranges.length; i++) {\n        var atAnchor = end != 'head' && cursorEqual(ranges[i].anchor, cursor);\n        var atHead = end != 'anchor' && cursorEqual(ranges[i].head, cursor);\n        if (atAnchor || atHead) {\n          return i;\n        }\n      }\n      return -1;\n    }\n    function getSelectedAreaRange(cm, vim) {\n      var lastSelection = vim.lastSelection;\n      var getCurrentSelectedAreaRange = function() {\n        var selections = cm.listSelections();\n        var start =  selections[0];\n        var end = selections[selections.length-1];\n        var selectionStart = cursorIsBefore(start.anchor, start.head) ? start.anchor : start.head;\n        var selectionEnd = cursorIsBefore(end.anchor, end.head) ? end.head : end.anchor;\n        return [selectionStart, selectionEnd];\n      };\n      var getLastSelectedAreaRange = function() {\n        var selectionStart = cm.getCursor();\n        var selectionEnd = cm.getCursor();\n        var block = lastSelection.visualBlock;\n        if (block) {\n          var width = block.width;\n          var height = block.height;\n          selectionEnd = Pos(selectionStart.line + height, selectionStart.ch + width);\n          var selections = [];\n          // selectBlock creates a 'proper' rectangular block.\n          // We do not want that in all cases, so we manually set selections.\n          for (var i = selectionStart.line; i < selectionEnd.line; i++) {\n            var anchor = Pos(i, selectionStart.ch);\n            var head = Pos(i, selectionEnd.ch);\n            var range = {anchor: anchor, head: head};\n            selections.push(range);\n          }\n          cm.setSelections(selections);\n        } else {\n          var start = lastSelection.anchorMark.find();\n          var end = lastSelection.headMark.find();\n          var line = end.line - start.line;\n          var ch = end.ch - start.ch;\n          selectionEnd = {line: selectionEnd.line + line, ch: line ? selectionEnd.ch : ch + selectionEnd.ch};\n          if (lastSelection.visualLine) {\n            selectionStart = Pos(selectionStart.line, 0);\n            selectionEnd = Pos(selectionEnd.line, lineLength(cm, selectionEnd.line));\n          }\n          cm.setSelection(selectionStart, selectionEnd);\n        }\n        return [selectionStart, selectionEnd];\n      };\n      if (!vim.visualMode) {\n      // In case of replaying the action.\n        return getLastSelectedAreaRange();\n      } else {\n        return getCurrentSelectedAreaRange();\n      }\n    }\n    // Updates the previous selection with the current selection's values. This\n    // should only be called in visual mode.\n    function updateLastSelection(cm, vim) {\n      var anchor = vim.sel.anchor;\n      var head = vim.sel.head;\n      // To accommodate the effect of lastPastedText in the last selection\n      if (vim.lastPastedText) {\n        head = cm.posFromIndex(cm.indexFromPos(anchor) + vim.lastPastedText.length);\n        vim.lastPastedText = null;\n      }\n      vim.lastSelection = {'anchorMark': cm.setBookmark(anchor),\n                           'headMark': cm.setBookmark(head),\n                           'anchor': copyCursor(anchor),\n                           'head': copyCursor(head),\n                           'visualMode': vim.visualMode,\n                           'visualLine': vim.visualLine,\n                           'visualBlock': vim.visualBlock};\n    }\n    function expandSelection(cm, start, end) {\n      var sel = cm.state.vim.sel;\n      var head = sel.head;\n      var anchor = sel.anchor;\n      var tmp;\n      if (cursorIsBefore(end, start)) {\n        tmp = end;\n        end = start;\n        start = tmp;\n      }\n      if (cursorIsBefore(head, anchor)) {\n        head = cursorMin(start, head);\n        anchor = cursorMax(anchor, end);\n      } else {\n        anchor = cursorMin(start, anchor);\n        head = cursorMax(head, end);\n        head = offsetCursor(head, 0, -1);\n        if (head.ch == -1 && head.line != cm.firstLine()) {\n          head = Pos(head.line - 1, lineLength(cm, head.line - 1));\n        }\n      }\n      return [anchor, head];\n    }\n    /**\n     * Updates the CodeMirror selection to match the provided vim selection.\n     * If no arguments are given, it uses the current vim selection state.\n     */\n    function updateCmSelection(cm, sel, mode) {\n      var vim = cm.state.vim;\n      sel = sel || vim.sel;\n      var mode = mode ||\n        vim.visualLine ? 'line' : vim.visualBlock ? 'block' : 'char';\n      var cmSel = makeCmSelection(cm, sel, mode);\n      cm.setSelections(cmSel.ranges, cmSel.primary);\n      updateFakeCursor(cm);\n    }\n    function makeCmSelection(cm, sel, mode, exclusive) {\n      var head = copyCursor(sel.head);\n      var anchor = copyCursor(sel.anchor);\n      if (mode == 'char') {\n        var headOffset = !exclusive && !cursorIsBefore(sel.head, sel.anchor) ? 1 : 0;\n        var anchorOffset = cursorIsBefore(sel.head, sel.anchor) ? 1 : 0;\n        head = offsetCursor(sel.head, 0, headOffset);\n        anchor = offsetCursor(sel.anchor, 0, anchorOffset);\n        return {\n          ranges: [{anchor: anchor, head: head}],\n          primary: 0\n        };\n      } else if (mode == 'line') {\n        if (!cursorIsBefore(sel.head, sel.anchor)) {\n          anchor.ch = 0;\n\n          var lastLine = cm.lastLine();\n          if (head.line > lastLine) {\n            head.line = lastLine;\n          }\n          head.ch = lineLength(cm, head.line);\n        } else {\n          head.ch = 0;\n          anchor.ch = lineLength(cm, anchor.line);\n        }\n        return {\n          ranges: [{anchor: anchor, head: head}],\n          primary: 0\n        };\n      } else if (mode == 'block') {\n        var top = Math.min(anchor.line, head.line),\n            left = Math.min(anchor.ch, head.ch),\n            bottom = Math.max(anchor.line, head.line),\n            right = Math.max(anchor.ch, head.ch) + 1;\n        var height = bottom - top + 1;\n        var primary = head.line == top ? 0 : height - 1;\n        var ranges = [];\n        for (var i = 0; i < height; i++) {\n          ranges.push({\n            anchor: Pos(top + i, left),\n            head: Pos(top + i, right)\n          });\n        }\n        return {\n          ranges: ranges,\n          primary: primary\n        };\n      }\n    }\n    function getHead(cm) {\n      var cur = cm.getCursor('head');\n      if (cm.getSelection().length == 1) {\n        // Small corner case when only 1 character is selected. The \"real\"\n        // head is the left of head and anchor.\n        cur = cursorMin(cur, cm.getCursor('anchor'));\n      }\n      return cur;\n    }\n\n    /**\n     * If moveHead is set to false, the CodeMirror selection will not be\n     * touched. The caller assumes the responsibility of putting the cursor\n    * in the right place.\n     */\n    function exitVisualMode(cm, moveHead) {\n      var vim = cm.state.vim;\n      if (moveHead !== false) {\n        cm.setCursor(clipCursorToContent(cm, vim.sel.head));\n      }\n      updateLastSelection(cm, vim);\n      vim.visualMode = false;\n      vim.visualLine = false;\n      vim.visualBlock = false;\n      if (!vim.insertMode) CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n      clearFakeCursor(vim);\n    }\n\n    // Remove any trailing newlines from the selection. For\n    // example, with the caret at the start of the last word on the line,\n    // 'dw' should word, but not the newline, while 'w' should advance the\n    // caret to the first character of the next line.\n    function clipToLine(cm, curStart, curEnd) {\n      var selection = cm.getRange(curStart, curEnd);\n      // Only clip if the selection ends with trailing newline + whitespace\n      if (/\\n\\s*$/.test(selection)) {\n        var lines = selection.split('\\n');\n        // We know this is all whitespace.\n        lines.pop();\n\n        // Cases:\n        // 1. Last word is an empty line - do not clip the trailing '\\n'\n        // 2. Last word is not an empty line - clip the trailing '\\n'\n        var line;\n        // Find the line containing the last word, and clip all whitespace up\n        // to it.\n        for (var line = lines.pop(); lines.length > 0 && line && isWhiteSpaceString(line); line = lines.pop()) {\n          curEnd.line--;\n          curEnd.ch = 0;\n        }\n        // If the last word is not an empty line, clip an additional newline\n        if (line) {\n          curEnd.line--;\n          curEnd.ch = lineLength(cm, curEnd.line);\n        } else {\n          curEnd.ch = 0;\n        }\n      }\n    }\n\n    // Expand the selection to line ends.\n    function expandSelectionToLine(_cm, curStart, curEnd) {\n      curStart.ch = 0;\n      curEnd.ch = 0;\n      curEnd.line++;\n    }\n\n    function findFirstNonWhiteSpaceCharacter(text) {\n      if (!text) {\n        return 0;\n      }\n      var firstNonWS = text.search(/\\S/);\n      return firstNonWS == -1 ? text.length : firstNonWS;\n    }\n\n    function expandWordUnderCursor(cm, inclusive, _forward, bigWord, noSymbol) {\n      var cur = getHead(cm);\n      var line = cm.getLine(cur.line);\n      var idx = cur.ch;\n\n      // Seek to first word or non-whitespace character, depending on if\n      // noSymbol is true.\n      var test = noSymbol ? wordCharTest[0] : bigWordCharTest [0];\n      while (!test(line.charAt(idx))) {\n        idx++;\n        if (idx >= line.length) { return null; }\n      }\n\n      if (bigWord) {\n        test = bigWordCharTest[0];\n      } else {\n        test = wordCharTest[0];\n        if (!test(line.charAt(idx))) {\n          test = wordCharTest[1];\n        }\n      }\n\n      var end = idx, start = idx;\n      while (test(line.charAt(end)) && end < line.length) { end++; }\n      while (test(line.charAt(start)) && start >= 0) { start--; }\n      start++;\n\n      if (inclusive) {\n        // If present, include all whitespace after word.\n        // Otherwise, include all whitespace before word, except indentation.\n        var wordEnd = end;\n        while (/\\s/.test(line.charAt(end)) && end < line.length) { end++; }\n        if (wordEnd == end) {\n          var wordStart = start;\n          while (/\\s/.test(line.charAt(start - 1)) && start > 0) { start--; }\n          if (!start) { start = wordStart; }\n        }\n      }\n      return { start: Pos(cur.line, start), end: Pos(cur.line, end) };\n    }\n\n    /**\n     * Depends on the following:\n     *\n     * - editor mode should be htmlmixedmode / xml\n     * - mode/xml/xml.js should be loaded\n     * - addon/fold/xml-fold.js should be loaded\n     *\n     * If any of the above requirements are not true, this function noops.\n     *\n     * This is _NOT_ a 100% accurate implementation of vim tag text objects.\n     * The following caveats apply (based off cursory testing, I'm sure there\n     * are other discrepancies):\n     *\n     * - Does not work inside comments:\n     *   ```\n     *   <!-- <div>broken</div> -->\n     *   ```\n     * - Does not work when tags have different cases:\n     *   ```\n     *   <div>broken</DIV>\n     *   ```\n     * - Does not work when cursor is inside a broken tag:\n     *   ```\n     *   <div><brok><en></div>\n     *   ```\n     */\n    function expandTagUnderCursor(cm, head, inclusive) {\n      var cur = head;\n      if (!CodeMirror.findMatchingTag || !CodeMirror.findEnclosingTag) {\n        return { start: cur, end: cur };\n      }\n\n      var tags = CodeMirror.findMatchingTag(cm, head) || CodeMirror.findEnclosingTag(cm, head);\n      if (!tags || !tags.open || !tags.close) {\n        return { start: cur, end: cur };\n      }\n\n      if (inclusive) {\n        return { start: tags.open.from, end: tags.close.to };\n      }\n      return { start: tags.open.to, end: tags.close.from };\n    }\n\n    function recordJumpPosition(cm, oldCur, newCur) {\n      if (!cursorEqual(oldCur, newCur)) {\n        vimGlobalState.jumpList.add(cm, oldCur, newCur);\n      }\n    }\n\n    function recordLastCharacterSearch(increment, args) {\n        vimGlobalState.lastCharacterSearch.increment = increment;\n        vimGlobalState.lastCharacterSearch.forward = args.forward;\n        vimGlobalState.lastCharacterSearch.selectedCharacter = args.selectedCharacter;\n    }\n\n    var symbolToMode = {\n        '(': 'bracket', ')': 'bracket', '{': 'bracket', '}': 'bracket',\n        '[': 'section', ']': 'section',\n        '*': 'comment', '/': 'comment',\n        'm': 'method', 'M': 'method',\n        '#': 'preprocess'\n    };\n    var findSymbolModes = {\n      bracket: {\n        isComplete: function(state) {\n          if (state.nextCh === state.symb) {\n            state.depth++;\n            if (state.depth >= 1)return true;\n          } else if (state.nextCh === state.reverseSymb) {\n            state.depth--;\n          }\n          return false;\n        }\n      },\n      section: {\n        init: function(state) {\n          state.curMoveThrough = true;\n          state.symb = (state.forward ? ']' : '[') === state.symb ? '{' : '}';\n        },\n        isComplete: function(state) {\n          return state.index === 0 && state.nextCh === state.symb;\n        }\n      },\n      comment: {\n        isComplete: function(state) {\n          var found = state.lastCh === '*' && state.nextCh === '/';\n          state.lastCh = state.nextCh;\n          return found;\n        }\n      },\n      // TODO: The original Vim implementation only operates on level 1 and 2.\n      // The current implementation doesn't check for code block level and\n      // therefore it operates on any levels.\n      method: {\n        init: function(state) {\n          state.symb = (state.symb === 'm' ? '{' : '}');\n          state.reverseSymb = state.symb === '{' ? '}' : '{';\n        },\n        isComplete: function(state) {\n          if (state.nextCh === state.symb)return true;\n          return false;\n        }\n      },\n      preprocess: {\n        init: function(state) {\n          state.index = 0;\n        },\n        isComplete: function(state) {\n          if (state.nextCh === '#') {\n            var token = state.lineText.match(/#(\\w+)/)[1];\n            if (token === 'endif') {\n              if (state.forward && state.depth === 0) {\n                return true;\n              }\n              state.depth++;\n            } else if (token === 'if') {\n              if (!state.forward && state.depth === 0) {\n                return true;\n              }\n              state.depth--;\n            }\n            if (token === 'else' && state.depth === 0)return true;\n          }\n          return false;\n        }\n      }\n    };\n    function findSymbol(cm, repeat, forward, symb) {\n      var cur = copyCursor(cm.getCursor());\n      var increment = forward ? 1 : -1;\n      var endLine = forward ? cm.lineCount() : -1;\n      var curCh = cur.ch;\n      var line = cur.line;\n      var lineText = cm.getLine(line);\n      var state = {\n        lineText: lineText,\n        nextCh: lineText.charAt(curCh),\n        lastCh: null,\n        index: curCh,\n        symb: symb,\n        reverseSymb: (forward ?  { ')': '(', '}': '{' } : { '(': ')', '{': '}' })[symb],\n        forward: forward,\n        depth: 0,\n        curMoveThrough: false\n      };\n      var mode = symbolToMode[symb];\n      if (!mode)return cur;\n      var init = findSymbolModes[mode].init;\n      var isComplete = findSymbolModes[mode].isComplete;\n      if (init) { init(state); }\n      while (line !== endLine && repeat) {\n        state.index += increment;\n        state.nextCh = state.lineText.charAt(state.index);\n        if (!state.nextCh) {\n          line += increment;\n          state.lineText = cm.getLine(line) || '';\n          if (increment > 0) {\n            state.index = 0;\n          } else {\n            var lineLen = state.lineText.length;\n            state.index = (lineLen > 0) ? (lineLen-1) : 0;\n          }\n          state.nextCh = state.lineText.charAt(state.index);\n        }\n        if (isComplete(state)) {\n          cur.line = line;\n          cur.ch = state.index;\n          repeat--;\n        }\n      }\n      if (state.nextCh || state.curMoveThrough) {\n        return Pos(line, state.index);\n      }\n      return cur;\n    }\n\n    /*\n     * Returns the boundaries of the next word. If the cursor in the middle of\n     * the word, then returns the boundaries of the current word, starting at\n     * the cursor. If the cursor is at the start/end of a word, and we are going\n     * forward/backward, respectively, find the boundaries of the next word.\n     *\n     * @param {CodeMirror} cm CodeMirror object.\n     * @param {Cursor} cur The cursor position.\n     * @param {boolean} forward True to search forward. False to search\n     *     backward.\n     * @param {boolean} bigWord True if punctuation count as part of the word.\n     *     False if only [a-zA-Z0-9] characters count as part of the word.\n     * @param {boolean} emptyLineIsWord True if empty lines should be treated\n     *     as words.\n     * @return {Object{from:number, to:number, line: number}} The boundaries of\n     *     the word, or null if there are no more words.\n     */\n    function findWord(cm, cur, forward, bigWord, emptyLineIsWord) {\n      var lineNum = cur.line;\n      var pos = cur.ch;\n      var line = cm.getLine(lineNum);\n      var dir = forward ? 1 : -1;\n      var charTests = bigWord ? bigWordCharTest: wordCharTest;\n\n      if (emptyLineIsWord && line == '') {\n        lineNum += dir;\n        line = cm.getLine(lineNum);\n        if (!isLine(cm, lineNum)) {\n          return null;\n        }\n        pos = (forward) ? 0 : line.length;\n      }\n\n      while (true) {\n        if (emptyLineIsWord && line == '') {\n          return { from: 0, to: 0, line: lineNum };\n        }\n        var stop = (dir > 0) ? line.length : -1;\n        var wordStart = stop, wordEnd = stop;\n        // Find bounds of next word.\n        while (pos != stop) {\n          var foundWord = false;\n          for (var i = 0; i < charTests.length && !foundWord; ++i) {\n            if (charTests[i](line.charAt(pos))) {\n              wordStart = pos;\n              // Advance to end of word.\n              while (pos != stop && charTests[i](line.charAt(pos))) {\n                pos += dir;\n              }\n              wordEnd = pos;\n              foundWord = wordStart != wordEnd;\n              if (wordStart == cur.ch && lineNum == cur.line &&\n                  wordEnd == wordStart + dir) {\n                // We started at the end of a word. Find the next one.\n                continue;\n              } else {\n                return {\n                  from: Math.min(wordStart, wordEnd + 1),\n                  to: Math.max(wordStart, wordEnd),\n                  line: lineNum };\n              }\n            }\n          }\n          if (!foundWord) {\n            pos += dir;\n          }\n        }\n        // Advance to next/prev line.\n        lineNum += dir;\n        if (!isLine(cm, lineNum)) {\n          return null;\n        }\n        line = cm.getLine(lineNum);\n        pos = (dir > 0) ? 0 : line.length;\n      }\n    }\n\n    /**\n     * @param {CodeMirror} cm CodeMirror object.\n     * @param {Pos} cur The position to start from.\n     * @param {int} repeat Number of words to move past.\n     * @param {boolean} forward True to search forward. False to search\n     *     backward.\n     * @param {boolean} wordEnd True to move to end of word. False to move to\n     *     beginning of word.\n     * @param {boolean} bigWord True if punctuation count as part of the word.\n     *     False if only alphabet characters count as part of the word.\n     * @return {Cursor} The position the cursor should move to.\n     */\n    function moveToWord(cm, cur, repeat, forward, wordEnd, bigWord) {\n      var curStart = copyCursor(cur);\n      var words = [];\n      if (forward && !wordEnd || !forward && wordEnd) {\n        repeat++;\n      }\n      // For 'e', empty lines are not considered words, go figure.\n      var emptyLineIsWord = !(forward && wordEnd);\n      for (var i = 0; i < repeat; i++) {\n        var word = findWord(cm, cur, forward, bigWord, emptyLineIsWord);\n        if (!word) {\n          var eodCh = lineLength(cm, cm.lastLine());\n          words.push(forward\n              ? {line: cm.lastLine(), from: eodCh, to: eodCh}\n              : {line: 0, from: 0, to: 0});\n          break;\n        }\n        words.push(word);\n        cur = Pos(word.line, forward ? (word.to - 1) : word.from);\n      }\n      var shortCircuit = words.length != repeat;\n      var firstWord = words[0];\n      var lastWord = words.pop();\n      if (forward && !wordEnd) {\n        // w\n        if (!shortCircuit && (firstWord.from != curStart.ch || firstWord.line != curStart.line)) {\n          // We did not start in the middle of a word. Discard the extra word at the end.\n          lastWord = words.pop();\n        }\n        return Pos(lastWord.line, lastWord.from);\n      } else if (forward && wordEnd) {\n        return Pos(lastWord.line, lastWord.to - 1);\n      } else if (!forward && wordEnd) {\n        // ge\n        if (!shortCircuit && (firstWord.to != curStart.ch || firstWord.line != curStart.line)) {\n          // We did not start in the middle of a word. Discard the extra word at the end.\n          lastWord = words.pop();\n        }\n        return Pos(lastWord.line, lastWord.to);\n      } else {\n        // b\n        return Pos(lastWord.line, lastWord.from);\n      }\n    }\n\n    function moveToEol(cm, head, motionArgs, vim, keepHPos) {\n      var cur = head;\n      var retval= Pos(cur.line + motionArgs.repeat - 1, Infinity);\n      var end=cm.clipPos(retval);\n      end.ch--;\n      if (!keepHPos) {\n        vim.lastHPos = Infinity;\n        vim.lastHSPos = cm.charCoords(end,'div').left;\n      }\n      return retval;\n    }\n\n    function moveToCharacter(cm, repeat, forward, character) {\n      var cur = cm.getCursor();\n      var start = cur.ch;\n      var idx;\n      for (var i = 0; i < repeat; i ++) {\n        var line = cm.getLine(cur.line);\n        idx = charIdxInLine(start, line, character, forward, true);\n        if (idx == -1) {\n          return null;\n        }\n        start = idx;\n      }\n      return Pos(cm.getCursor().line, idx);\n    }\n\n    function moveToColumn(cm, repeat) {\n      // repeat is always >= 1, so repeat - 1 always corresponds\n      // to the column we want to go to.\n      var line = cm.getCursor().line;\n      return clipCursorToContent(cm, Pos(line, repeat - 1));\n    }\n\n    function updateMark(cm, vim, markName, pos) {\n      if (!inArray(markName, validMarks)) {\n        return;\n      }\n      if (vim.marks[markName]) {\n        vim.marks[markName].clear();\n      }\n      vim.marks[markName] = cm.setBookmark(pos);\n    }\n\n    function charIdxInLine(start, line, character, forward, includeChar) {\n      // Search for char in line.\n      // motion_options: {forward, includeChar}\n      // If includeChar = true, include it too.\n      // If forward = true, search forward, else search backwards.\n      // If char is not found on this line, do nothing\n      var idx;\n      if (forward) {\n        idx = line.indexOf(character, start + 1);\n        if (idx != -1 && !includeChar) {\n          idx -= 1;\n        }\n      } else {\n        idx = line.lastIndexOf(character, start - 1);\n        if (idx != -1 && !includeChar) {\n          idx += 1;\n        }\n      }\n      return idx;\n    }\n\n    function findParagraph(cm, head, repeat, dir, inclusive) {\n      var line = head.line;\n      var min = cm.firstLine();\n      var max = cm.lastLine();\n      var start, end, i = line;\n      function isEmpty(i) { return !cm.getLine(i); }\n      function isBoundary(i, dir, any) {\n        if (any) { return isEmpty(i) != isEmpty(i + dir); }\n        return !isEmpty(i) && isEmpty(i + dir);\n      }\n      if (dir) {\n        while (min <= i && i <= max && repeat > 0) {\n          if (isBoundary(i, dir)) { repeat--; }\n          i += dir;\n        }\n        return new Pos(i, 0);\n      }\n\n      var vim = cm.state.vim;\n      if (vim.visualLine && isBoundary(line, 1, true)) {\n        var anchor = vim.sel.anchor;\n        if (isBoundary(anchor.line, -1, true)) {\n          if (!inclusive || anchor.line != line) {\n            line += 1;\n          }\n        }\n      }\n      var startState = isEmpty(line);\n      for (i = line; i <= max && repeat; i++) {\n        if (isBoundary(i, 1, true)) {\n          if (!inclusive || isEmpty(i) != startState) {\n            repeat--;\n          }\n        }\n      }\n      end = new Pos(i, 0);\n      // select boundary before paragraph for the last one\n      if (i > max && !startState) { startState = true; }\n      else { inclusive = false; }\n      for (i = line; i > min; i--) {\n        if (!inclusive || isEmpty(i) == startState || i == line) {\n          if (isBoundary(i, -1, true)) { break; }\n        }\n      }\n      start = new Pos(i, 0);\n      return { start: start, end: end };\n    }\n\n    function findSentence(cm, cur, repeat, dir) {\n\n      /*\n        Takes an index object\n        {\n          line: the line string,\n          ln: line number,\n          pos: index in line,\n          dir: direction of traversal (-1 or 1)\n        }\n        and modifies the line, ln, and pos members to represent the\n        next valid position or sets them to null if there are\n        no more valid positions.\n       */\n      function nextChar(cm, idx) {\n        if (idx.pos + idx.dir < 0 || idx.pos + idx.dir >= idx.line.length) {\n          idx.ln += idx.dir;\n          if (!isLine(cm, idx.ln)) {\n            idx.line = null;\n            idx.ln = null;\n            idx.pos = null;\n            return;\n          }\n          idx.line = cm.getLine(idx.ln);\n          idx.pos = (idx.dir > 0) ? 0 : idx.line.length - 1;\n        }\n        else {\n          idx.pos += idx.dir;\n        }\n      }\n\n      /*\n        Performs one iteration of traversal in forward direction\n        Returns an index object of the new location\n       */\n      function forward(cm, ln, pos, dir) {\n        var line = cm.getLine(ln);\n        var stop = (line === \"\");\n\n        var curr = {\n          line: line,\n          ln: ln,\n          pos: pos,\n          dir: dir,\n        }\n\n        var last_valid = {\n          ln: curr.ln,\n          pos: curr.pos,\n        }\n\n        var skip_empty_lines = (curr.line === \"\");\n\n        // Move one step to skip character we start on\n        nextChar(cm, curr);\n\n        while (curr.line !== null) {\n          last_valid.ln = curr.ln;\n          last_valid.pos = curr.pos;\n\n          if (curr.line === \"\" && !skip_empty_lines) {\n            return { ln: curr.ln, pos: curr.pos, };\n          }\n          else if (stop && curr.line !== \"\" && !isWhiteSpaceString(curr.line[curr.pos])) {\n            return { ln: curr.ln, pos: curr.pos, };\n          }\n          else if (isEndOfSentenceSymbol(curr.line[curr.pos])\n            && !stop\n            && (curr.pos === curr.line.length - 1\n              || isWhiteSpaceString(curr.line[curr.pos + 1]))) {\n            stop = true;\n          }\n\n          nextChar(cm, curr);\n        }\n\n        /*\n          Set the position to the last non whitespace character on the last\n          valid line in the case that we reach the end of the document.\n        */\n        var line = cm.getLine(last_valid.ln);\n        last_valid.pos = 0;\n        for(var i = line.length - 1; i >= 0; --i) {\n          if (!isWhiteSpaceString(line[i])) {\n            last_valid.pos = i;\n            break;\n          }\n        }\n\n        return last_valid;\n\n      }\n\n      /*\n        Performs one iteration of traversal in reverse direction\n        Returns an index object of the new location\n       */\n      function reverse(cm, ln, pos, dir) {\n        var line = cm.getLine(ln);\n\n        var curr = {\n          line: line,\n          ln: ln,\n          pos: pos,\n          dir: dir,\n        }\n\n        var last_valid = {\n          ln: curr.ln,\n          pos: null,\n        };\n\n        var skip_empty_lines = (curr.line === \"\");\n\n        // Move one step to skip character we start on\n        nextChar(cm, curr);\n\n        while (curr.line !== null) {\n\n          if (curr.line === \"\" && !skip_empty_lines) {\n            if (last_valid.pos !== null) {\n              return last_valid;\n            }\n            else {\n              return { ln: curr.ln, pos: curr.pos };\n            }\n          }\n          else if (isEndOfSentenceSymbol(curr.line[curr.pos])\n              && last_valid.pos !== null\n              && !(curr.ln === last_valid.ln && curr.pos + 1 === last_valid.pos)) {\n            return last_valid;\n          }\n          else if (curr.line !== \"\" && !isWhiteSpaceString(curr.line[curr.pos])) {\n            skip_empty_lines = false;\n            last_valid = { ln: curr.ln, pos: curr.pos }\n          }\n\n          nextChar(cm, curr);\n        }\n\n        /*\n          Set the position to the first non whitespace character on the last\n          valid line in the case that we reach the beginning of the document.\n        */\n        var line = cm.getLine(last_valid.ln);\n        last_valid.pos = 0;\n        for(var i = 0; i < line.length; ++i) {\n          if (!isWhiteSpaceString(line[i])) {\n            last_valid.pos = i;\n            break;\n          }\n        }\n        return last_valid;\n      }\n\n      var curr_index = {\n        ln: cur.line,\n        pos: cur.ch,\n      };\n\n      while (repeat > 0) {\n        if (dir < 0) {\n          curr_index = reverse(cm, curr_index.ln, curr_index.pos, dir);\n        }\n        else {\n          curr_index = forward(cm, curr_index.ln, curr_index.pos, dir);\n        }\n        repeat--;\n      }\n\n      return Pos(curr_index.ln, curr_index.pos);\n    }\n\n    // TODO: perhaps this finagling of start and end positions belongs\n    // in codemirror/replaceRange?\n    function selectCompanionObject(cm, head, symb, inclusive) {\n      var cur = head, start, end;\n\n      var bracketRegexp = ({\n        '(': /[()]/, ')': /[()]/,\n        '[': /[[\\]]/, ']': /[[\\]]/,\n        '{': /[{}]/, '}': /[{}]/,\n        '<': /[<>]/, '>': /[<>]/})[symb];\n      var openSym = ({\n        '(': '(', ')': '(',\n        '[': '[', ']': '[',\n        '{': '{', '}': '{',\n        '<': '<', '>': '<'})[symb];\n      var curChar = cm.getLine(cur.line).charAt(cur.ch);\n      // Due to the behavior of scanForBracket, we need to add an offset if the\n      // cursor is on a matching open bracket.\n      var offset = curChar === openSym ? 1 : 0;\n\n      start = cm.scanForBracket(Pos(cur.line, cur.ch + offset), -1, undefined, {'bracketRegex': bracketRegexp});\n      end = cm.scanForBracket(Pos(cur.line, cur.ch + offset), 1, undefined, {'bracketRegex': bracketRegexp});\n\n      if (!start || !end) {\n        return { start: cur, end: cur };\n      }\n\n      start = start.pos;\n      end = end.pos;\n\n      if ((start.line == end.line && start.ch > end.ch)\n          || (start.line > end.line)) {\n        var tmp = start;\n        start = end;\n        end = tmp;\n      }\n\n      if (inclusive) {\n        end.ch += 1;\n      } else {\n        start.ch += 1;\n      }\n\n      return { start: start, end: end };\n    }\n\n    // Takes in a symbol and a cursor and tries to simulate text objects that\n    // have identical opening and closing symbols\n    // TODO support across multiple lines\n    function findBeginningAndEnd(cm, head, symb, inclusive) {\n      var cur = copyCursor(head);\n      var line = cm.getLine(cur.line);\n      var chars = line.split('');\n      var start, end, i, len;\n      var firstIndex = chars.indexOf(symb);\n\n      // the decision tree is to always look backwards for the beginning first,\n      // but if the cursor is in front of the first instance of the symb,\n      // then move the cursor forward\n      if (cur.ch < firstIndex) {\n        cur.ch = firstIndex;\n        // Why is this line even here???\n        // cm.setCursor(cur.line, firstIndex+1);\n      }\n      // otherwise if the cursor is currently on the closing symbol\n      else if (firstIndex < cur.ch && chars[cur.ch] == symb) {\n        end = cur.ch; // assign end to the current cursor\n        --cur.ch; // make sure to look backwards\n      }\n\n      // if we're currently on the symbol, we've got a start\n      if (chars[cur.ch] == symb && !end) {\n        start = cur.ch + 1; // assign start to ahead of the cursor\n      } else {\n        // go backwards to find the start\n        for (i = cur.ch; i > -1 && !start; i--) {\n          if (chars[i] == symb) {\n            start = i + 1;\n          }\n        }\n      }\n\n      // look forwards for the end symbol\n      if (start && !end) {\n        for (i = start, len = chars.length; i < len && !end; i++) {\n          if (chars[i] == symb) {\n            end = i;\n          }\n        }\n      }\n\n      // nothing found\n      if (!start || !end) {\n        return { start: cur, end: cur };\n      }\n\n      // include the symbols\n      if (inclusive) {\n        --start; ++end;\n      }\n\n      return {\n        start: Pos(cur.line, start),\n        end: Pos(cur.line, end)\n      };\n    }\n\n    // Search functions\n    defineOption('pcre', true, 'boolean');\n    function SearchState() {}\n    SearchState.prototype = {\n      getQuery: function() {\n        return vimGlobalState.query;\n      },\n      setQuery: function(query) {\n        vimGlobalState.query = query;\n      },\n      getOverlay: function() {\n        return this.searchOverlay;\n      },\n      setOverlay: function(overlay) {\n        this.searchOverlay = overlay;\n      },\n      isReversed: function() {\n        return vimGlobalState.isReversed;\n      },\n      setReversed: function(reversed) {\n        vimGlobalState.isReversed = reversed;\n      },\n      getScrollbarAnnotate: function() {\n        return this.annotate;\n      },\n      setScrollbarAnnotate: function(annotate) {\n        this.annotate = annotate;\n      }\n    };\n    function getSearchState(cm) {\n      var vim = cm.state.vim;\n      return vim.searchState_ || (vim.searchState_ = new SearchState());\n    }\n    function dialog(cm, template, shortText, onClose, options) {\n      if (cm.openDialog) {\n        cm.openDialog(template, onClose, { bottom: true, value: options.value,\n            onKeyDown: options.onKeyDown, onKeyUp: options.onKeyUp,\n            selectValueOnOpen: false});\n      }\n      else {\n        onClose(prompt(shortText, ''));\n      }\n    }\n    function splitBySlash(argString) {\n      return splitBySeparator(argString, '/');\n    }\n\n    function findUnescapedSlashes(argString) {\n      return findUnescapedSeparators(argString, '/');\n    }\n\n    function splitBySeparator(argString, separator) {\n      var slashes = findUnescapedSeparators(argString, separator) || [];\n      if (!slashes.length) return [];\n      var tokens = [];\n      // in case of strings like foo/bar\n      if (slashes[0] !== 0) return;\n      for (var i = 0; i < slashes.length; i++) {\n        if (typeof slashes[i] == 'number')\n          tokens.push(argString.substring(slashes[i] + 1, slashes[i+1]));\n      }\n      return tokens;\n    }\n\n    function findUnescapedSeparators(str, separator) {\n      if (!separator)\n        separator = '/';\n\n      var escapeNextChar = false;\n      var slashes = [];\n      for (var i = 0; i < str.length; i++) {\n        var c = str.charAt(i);\n        if (!escapeNextChar && c == separator) {\n          slashes.push(i);\n        }\n        escapeNextChar = !escapeNextChar && (c == '\\\\');\n      }\n      return slashes;\n    }\n\n    // Translates a search string from ex (vim) syntax into javascript form.\n    function translateRegex(str) {\n      // When these match, add a '\\' if unescaped or remove one if escaped.\n      var specials = '|(){';\n      // Remove, but never add, a '\\' for these.\n      var unescape = '}';\n      var escapeNextChar = false;\n      var out = [];\n      for (var i = -1; i < str.length; i++) {\n        var c = str.charAt(i) || '';\n        var n = str.charAt(i+1) || '';\n        var specialComesNext = (n && specials.indexOf(n) != -1);\n        if (escapeNextChar) {\n          if (c !== '\\\\' || !specialComesNext) {\n            out.push(c);\n          }\n          escapeNextChar = false;\n        } else {\n          if (c === '\\\\') {\n            escapeNextChar = true;\n            // Treat the unescape list as special for removing, but not adding '\\'.\n            if (n && unescape.indexOf(n) != -1) {\n              specialComesNext = true;\n            }\n            // Not passing this test means removing a '\\'.\n            if (!specialComesNext || n === '\\\\') {\n              out.push(c);\n            }\n          } else {\n            out.push(c);\n            if (specialComesNext && n !== '\\\\') {\n              out.push('\\\\');\n            }\n          }\n        }\n      }\n      return out.join('');\n    }\n\n    // Translates the replace part of a search and replace from ex (vim) syntax into\n    // javascript form.  Similar to translateRegex, but additionally fixes back references\n    // (translates '\\[0..9]' to '$[0..9]') and follows different rules for escaping '$'.\n    var charUnescapes = {'\\\\n': '\\n', '\\\\r': '\\r', '\\\\t': '\\t'};\n    function translateRegexReplace(str) {\n      var escapeNextChar = false;\n      var out = [];\n      for (var i = -1; i < str.length; i++) {\n        var c = str.charAt(i) || '';\n        var n = str.charAt(i+1) || '';\n        if (charUnescapes[c + n]) {\n          out.push(charUnescapes[c+n]);\n          i++;\n        } else if (escapeNextChar) {\n          // At any point in the loop, escapeNextChar is true if the previous\n          // character was a '\\' and was not escaped.\n          out.push(c);\n          escapeNextChar = false;\n        } else {\n          if (c === '\\\\') {\n            escapeNextChar = true;\n            if ((isNumber(n) || n === '$')) {\n              out.push('$');\n            } else if (n !== '/' && n !== '\\\\') {\n              out.push('\\\\');\n            }\n          } else {\n            if (c === '$') {\n              out.push('$');\n            }\n            out.push(c);\n            if (n === '/') {\n              out.push('\\\\');\n            }\n          }\n        }\n      }\n      return out.join('');\n    }\n\n    // Unescape \\ and / in the replace part, for PCRE mode.\n    var unescapes = {'\\\\/': '/', '\\\\\\\\': '\\\\', '\\\\n': '\\n', '\\\\r': '\\r', '\\\\t': '\\t', '\\\\&':'&'};\n    function unescapeRegexReplace(str) {\n      var stream = new CodeMirror.StringStream(str);\n      var output = [];\n      while (!stream.eol()) {\n        // Search for \\.\n        while (stream.peek() && stream.peek() != '\\\\') {\n          output.push(stream.next());\n        }\n        var matched = false;\n        for (var matcher in unescapes) {\n          if (stream.match(matcher, true)) {\n            matched = true;\n            output.push(unescapes[matcher]);\n            break;\n          }\n        }\n        if (!matched) {\n          // Don't change anything\n          output.push(stream.next());\n        }\n      }\n      return output.join('');\n    }\n\n    /**\n     * Extract the regular expression from the query and return a Regexp object.\n     * Returns null if the query is blank.\n     * If ignoreCase is passed in, the Regexp object will have the 'i' flag set.\n     * If smartCase is passed in, and the query contains upper case letters,\n     *   then ignoreCase is overridden, and the 'i' flag will not be set.\n     * If the query contains the /i in the flag part of the regular expression,\n     *   then both ignoreCase and smartCase are ignored, and 'i' will be passed\n     *   through to the Regex object.\n     */\n    function parseQuery(query, ignoreCase, smartCase) {\n      // First update the last search register\n      var lastSearchRegister = vimGlobalState.registerController.getRegister('/');\n      lastSearchRegister.setText(query);\n      // Check if the query is already a regex.\n      if (query instanceof RegExp) { return query; }\n      // First try to extract regex + flags from the input. If no flags found,\n      // extract just the regex. IE does not accept flags directly defined in\n      // the regex string in the form /regex/flags\n      var slashes = findUnescapedSlashes(query);\n      var regexPart;\n      var forceIgnoreCase;\n      if (!slashes.length) {\n        // Query looks like 'regexp'\n        regexPart = query;\n      } else {\n        // Query looks like 'regexp/...'\n        regexPart = query.substring(0, slashes[0]);\n        var flagsPart = query.substring(slashes[0]);\n        forceIgnoreCase = (flagsPart.indexOf('i') != -1);\n      }\n      if (!regexPart) {\n        return null;\n      }\n      if (!getOption('pcre')) {\n        regexPart = translateRegex(regexPart);\n      }\n      if (smartCase) {\n        ignoreCase = (/^[^A-Z]*$/).test(regexPart);\n      }\n      var regexp = new RegExp(regexPart,\n          (ignoreCase || forceIgnoreCase) ? 'i' : undefined);\n      return regexp;\n    }\n    function showConfirm(cm, text) {\n      if (cm.openNotification) {\n        cm.openNotification('<span style=\"color: red\">' + text + '</span>',\n                            {bottom: true, duration: 5000});\n      } else {\n        alert(text);\n      }\n    }\n    function makePrompt(prefix, desc) {\n      var raw = '<span style=\"font-family: monospace; white-space: pre\">' +\n          (prefix || \"\") + '<input type=\"text\" autocorrect=\"off\" ' +\n          'autocapitalize=\"off\" spellcheck=\"false\"></span>';\n      if (desc)\n        raw += ' <span style=\"color: #888\">' + desc + '</span>';\n      return raw;\n    }\n    var searchPromptDesc = '(Javascript regexp)';\n    function showPrompt(cm, options) {\n      var shortText = (options.prefix || '') + ' ' + (options.desc || '');\n      var prompt = makePrompt(options.prefix, options.desc);\n      dialog(cm, prompt, shortText, options.onClose, options);\n    }\n    function regexEqual(r1, r2) {\n      if (r1 instanceof RegExp && r2 instanceof RegExp) {\n          var props = ['global', 'multiline', 'ignoreCase', 'source'];\n          for (var i = 0; i < props.length; i++) {\n              var prop = props[i];\n              if (r1[prop] !== r2[prop]) {\n                  return false;\n              }\n          }\n          return true;\n      }\n      return false;\n    }\n    // Returns true if the query is valid.\n    function updateSearchQuery(cm, rawQuery, ignoreCase, smartCase) {\n      if (!rawQuery) {\n        return;\n      }\n      var state = getSearchState(cm);\n      var query = parseQuery(rawQuery, !!ignoreCase, !!smartCase);\n      if (!query) {\n        return;\n      }\n      highlightSearchMatches(cm, query);\n      if (regexEqual(query, state.getQuery())) {\n        return query;\n      }\n      state.setQuery(query);\n      return query;\n    }\n    function searchOverlay(query) {\n      if (query.source.charAt(0) == '^') {\n        var matchSol = true;\n      }\n      return {\n        token: function(stream) {\n          if (matchSol && !stream.sol()) {\n            stream.skipToEnd();\n            return;\n          }\n          var match = stream.match(query, false);\n          if (match) {\n            if (match[0].length == 0) {\n              // Matched empty string, skip to next.\n              stream.next();\n              return 'searching';\n            }\n            if (!stream.sol()) {\n              // Backtrack 1 to match \\b\n              stream.backUp(1);\n              if (!query.exec(stream.next() + match[0])) {\n                stream.next();\n                return null;\n              }\n            }\n            stream.match(query);\n            return 'searching';\n          }\n          while (!stream.eol()) {\n            stream.next();\n            if (stream.match(query, false)) break;\n          }\n        },\n        query: query\n      };\n    }\n    var highlightTimeout = 0;\n    function highlightSearchMatches(cm, query) {\n      clearTimeout(highlightTimeout);\n      highlightTimeout = setTimeout(function() {\n        var searchState = getSearchState(cm);\n        var overlay = searchState.getOverlay();\n        if (!overlay || query != overlay.query) {\n          if (overlay) {\n            cm.removeOverlay(overlay);\n          }\n          overlay = searchOverlay(query);\n          cm.addOverlay(overlay);\n          if (cm.showMatchesOnScrollbar) {\n            if (searchState.getScrollbarAnnotate()) {\n              searchState.getScrollbarAnnotate().clear();\n            }\n            searchState.setScrollbarAnnotate(cm.showMatchesOnScrollbar(query));\n          }\n          searchState.setOverlay(overlay);\n        }\n      }, 50);\n    }\n    function findNext(cm, prev, query, repeat) {\n      if (repeat === undefined) { repeat = 1; }\n      return cm.operation(function() {\n        var pos = cm.getCursor();\n        var cursor = cm.getSearchCursor(query, pos);\n        for (var i = 0; i < repeat; i++) {\n          var found = cursor.find(prev);\n          if (i == 0 && found && cursorEqual(cursor.from(), pos)) { found = cursor.find(prev); }\n          if (!found) {\n            // SearchCursor may have returned null because it hit EOF, wrap\n            // around and try again.\n            cursor = cm.getSearchCursor(query,\n                (prev) ? Pos(cm.lastLine()) : Pos(cm.firstLine(), 0) );\n            if (!cursor.find(prev)) {\n              return;\n            }\n          }\n        }\n        return cursor.from();\n      });\n    }\n    /**\n     * Pretty much the same as `findNext`, except for the following differences:\n     *\n     * 1. Before starting the search, move to the previous search. This way if our cursor is\n     * already inside a match, we should return the current match.\n     * 2. Rather than only returning the cursor's from, we return the cursor's from and to as a tuple.\n     */\n    function findNextFromAndToInclusive(cm, prev, query, repeat, vim) {\n      if (repeat === undefined) { repeat = 1; }\n      return cm.operation(function() {\n        var pos = cm.getCursor();\n        var cursor = cm.getSearchCursor(query, pos);\n\n        // Go back one result to ensure that if the cursor is currently a match, we keep it.\n        var found = cursor.find(!prev);\n\n        // If we haven't moved, go back one more (similar to if i==0 logic in findNext).\n        if (!vim.visualMode && found && cursorEqual(cursor.from(), pos)) {\n          cursor.find(!prev);\n        }\n\n        for (var i = 0; i < repeat; i++) {\n          found = cursor.find(prev);\n          if (!found) {\n            // SearchCursor may have returned null because it hit EOF, wrap\n            // around and try again.\n            cursor = cm.getSearchCursor(query,\n                (prev) ? Pos(cm.lastLine()) : Pos(cm.firstLine(), 0) );\n            if (!cursor.find(prev)) {\n              return;\n            }\n          }\n        }\n        return [cursor.from(), cursor.to()];\n      });\n    }\n    function clearSearchHighlight(cm) {\n      var state = getSearchState(cm);\n      cm.removeOverlay(getSearchState(cm).getOverlay());\n      state.setOverlay(null);\n      if (state.getScrollbarAnnotate()) {\n        state.getScrollbarAnnotate().clear();\n        state.setScrollbarAnnotate(null);\n      }\n    }\n    /**\n     * Check if pos is in the specified range, INCLUSIVE.\n     * Range can be specified with 1 or 2 arguments.\n     * If the first range argument is an array, treat it as an array of line\n     * numbers. Match pos against any of the lines.\n     * If the first range argument is a number,\n     *   if there is only 1 range argument, check if pos has the same line\n     *       number\n     *   if there are 2 range arguments, then check if pos is in between the two\n     *       range arguments.\n     */\n    function isInRange(pos, start, end) {\n      if (typeof pos != 'number') {\n        // Assume it is a cursor position. Get the line number.\n        pos = pos.line;\n      }\n      if (start instanceof Array) {\n        return inArray(pos, start);\n      } else {\n        if (end) {\n          return (pos >= start && pos <= end);\n        } else {\n          return pos == start;\n        }\n      }\n    }\n    function getUserVisibleLines(cm) {\n      var scrollInfo = cm.getScrollInfo();\n      var occludeToleranceTop = 6;\n      var occludeToleranceBottom = 10;\n      var from = cm.coordsChar({left:0, top: occludeToleranceTop + scrollInfo.top}, 'local');\n      var bottomY = scrollInfo.clientHeight - occludeToleranceBottom + scrollInfo.top;\n      var to = cm.coordsChar({left:0, top: bottomY}, 'local');\n      return {top: from.line, bottom: to.line};\n    }\n\n    function getMarkPos(cm, vim, markName) {\n      if (markName == '\\'' || markName == '`') {\n        return vimGlobalState.jumpList.find(cm, -1) || Pos(0, 0);\n      } else if (markName == '.') {\n        return getLastEditPos(cm);\n      }\n\n      var mark = vim.marks[markName];\n      return mark && mark.find();\n    }\n\n    function getLastEditPos(cm) {\n      var done = cm.doc.history.done;\n      for (var i = done.length; i--;) {\n        if (done[i].changes) {\n          return copyCursor(done[i].changes[0].to);\n        }\n      }\n    }\n\n    var ExCommandDispatcher = function() {\n      this.buildCommandMap_();\n    };\n    ExCommandDispatcher.prototype = {\n      processCommand: function(cm, input, opt_params) {\n        var that = this;\n        cm.operation(function () {\n          cm.curOp.isVimOp = true;\n          that._processCommand(cm, input, opt_params);\n        });\n      },\n      _processCommand: function(cm, input, opt_params) {\n        var vim = cm.state.vim;\n        var commandHistoryRegister = vimGlobalState.registerController.getRegister(':');\n        var previousCommand = commandHistoryRegister.toString();\n        if (vim.visualMode) {\n          exitVisualMode(cm);\n        }\n        var inputStream = new CodeMirror.StringStream(input);\n        // update \": with the latest command whether valid or invalid\n        commandHistoryRegister.setText(input);\n        var params = opt_params || {};\n        params.input = input;\n        try {\n          this.parseInput_(cm, inputStream, params);\n        } catch(e) {\n          showConfirm(cm, e);\n          throw e;\n        }\n        var command;\n        var commandName;\n        if (!params.commandName) {\n          // If only a line range is defined, move to the line.\n          if (params.line !== undefined) {\n            commandName = 'move';\n          }\n        } else {\n          command = this.matchCommand_(params.commandName);\n          if (command) {\n            commandName = command.name;\n            if (command.excludeFromCommandHistory) {\n              commandHistoryRegister.setText(previousCommand);\n            }\n            this.parseCommandArgs_(inputStream, params, command);\n            if (command.type == 'exToKey') {\n              // Handle Ex to Key mapping.\n              for (var i = 0; i < command.toKeys.length; i++) {\n                CodeMirror.Vim.handleKey(cm, command.toKeys[i], 'mapping');\n              }\n              return;\n            } else if (command.type == 'exToEx') {\n              // Handle Ex to Ex mapping.\n              this.processCommand(cm, command.toInput);\n              return;\n            }\n          }\n        }\n        if (!commandName) {\n          showConfirm(cm, 'Not an editor command \":' + input + '\"');\n          return;\n        }\n        try {\n          exCommands[commandName](cm, params);\n          // Possibly asynchronous commands (e.g. substitute, which might have a\n          // user confirmation), are responsible for calling the callback when\n          // done. All others have it taken care of for them here.\n          if ((!command || !command.possiblyAsync) && params.callback) {\n            params.callback();\n          }\n        } catch(e) {\n          showConfirm(cm, e);\n          throw e;\n        }\n      },\n      parseInput_: function(cm, inputStream, result) {\n        inputStream.eatWhile(':');\n        // Parse range.\n        if (inputStream.eat('%')) {\n          result.line = cm.firstLine();\n          result.lineEnd = cm.lastLine();\n        } else {\n          result.line = this.parseLineSpec_(cm, inputStream);\n          if (result.line !== undefined && inputStream.eat(',')) {\n            result.lineEnd = this.parseLineSpec_(cm, inputStream);\n          }\n        }\n\n        // Parse command name.\n        var commandMatch = inputStream.match(/^(\\w+|!!|@@|[!#&*<=>@~])/);\n        if (commandMatch) {\n          result.commandName = commandMatch[1];\n        } else {\n          result.commandName = inputStream.match(/.*/)[0];\n        }\n\n        return result;\n      },\n      parseLineSpec_: function(cm, inputStream) {\n        var numberMatch = inputStream.match(/^(\\d+)/);\n        if (numberMatch) {\n          // Absolute line number plus offset (N+M or N-M) is probably a typo,\n          // not something the user actually wanted. (NB: vim does allow this.)\n          return parseInt(numberMatch[1], 10) - 1;\n        }\n        switch (inputStream.next()) {\n          case '.':\n            return this.parseLineSpecOffset_(inputStream, cm.getCursor().line);\n          case '$':\n            return this.parseLineSpecOffset_(inputStream, cm.lastLine());\n          case '\\'':\n            var markName = inputStream.next();\n            var markPos = getMarkPos(cm, cm.state.vim, markName);\n            if (!markPos) throw new Error('Mark not set');\n            return this.parseLineSpecOffset_(inputStream, markPos.line);\n          case '-':\n          case '+':\n            inputStream.backUp(1);\n            // Offset is relative to current line if not otherwise specified.\n            return this.parseLineSpecOffset_(inputStream, cm.getCursor().line);\n          default:\n            inputStream.backUp(1);\n            return undefined;\n        }\n      },\n      parseLineSpecOffset_: function(inputStream, line) {\n        var offsetMatch = inputStream.match(/^([+-])?(\\d+)/);\n        if (offsetMatch) {\n          var offset = parseInt(offsetMatch[2], 10);\n          if (offsetMatch[1] == \"-\") {\n            line -= offset;\n          } else {\n            line += offset;\n          }\n        }\n        return line;\n      },\n      parseCommandArgs_: function(inputStream, params, command) {\n        if (inputStream.eol()) {\n          return;\n        }\n        params.argString = inputStream.match(/.*/)[0];\n        // Parse command-line arguments\n        var delim = command.argDelimiter || /\\s+/;\n        var args = trim(params.argString).split(delim);\n        if (args.length && args[0]) {\n          params.args = args;\n        }\n      },\n      matchCommand_: function(commandName) {\n        // Return the command in the command map that matches the shortest\n        // prefix of the passed in command name. The match is guaranteed to be\n        // unambiguous if the defaultExCommandMap's shortNames are set up\n        // correctly. (see @code{defaultExCommandMap}).\n        for (var i = commandName.length; i > 0; i--) {\n          var prefix = commandName.substring(0, i);\n          if (this.commandMap_[prefix]) {\n            var command = this.commandMap_[prefix];\n            if (command.name.indexOf(commandName) === 0) {\n              return command;\n            }\n          }\n        }\n        return null;\n      },\n      buildCommandMap_: function() {\n        this.commandMap_ = {};\n        for (var i = 0; i < defaultExCommandMap.length; i++) {\n          var command = defaultExCommandMap[i];\n          var key = command.shortName || command.name;\n          this.commandMap_[key] = command;\n        }\n      },\n      map: function(lhs, rhs, ctx) {\n        if (lhs != ':' && lhs.charAt(0) == ':') {\n          if (ctx) { throw Error('Mode not supported for ex mappings'); }\n          var commandName = lhs.substring(1);\n          if (rhs != ':' && rhs.charAt(0) == ':') {\n            // Ex to Ex mapping\n            this.commandMap_[commandName] = {\n              name: commandName,\n              type: 'exToEx',\n              toInput: rhs.substring(1),\n              user: true\n            };\n          } else {\n            // Ex to key mapping\n            this.commandMap_[commandName] = {\n              name: commandName,\n              type: 'exToKey',\n              toKeys: rhs,\n              user: true\n            };\n          }\n        } else {\n          if (rhs != ':' && rhs.charAt(0) == ':') {\n            // Key to Ex mapping.\n            var mapping = {\n              keys: lhs,\n              type: 'keyToEx',\n              exArgs: { input: rhs.substring(1) }\n            };\n            if (ctx) { mapping.context = ctx; }\n            defaultKeymap.unshift(mapping);\n          } else {\n            // Key to key mapping\n            var mapping = {\n              keys: lhs,\n              type: 'keyToKey',\n              toKeys: rhs\n            };\n            if (ctx) { mapping.context = ctx; }\n            defaultKeymap.unshift(mapping);\n          }\n        }\n      },\n      unmap: function(lhs, ctx) {\n        if (lhs != ':' && lhs.charAt(0) == ':') {\n          // Ex to Ex or Ex to key mapping\n          if (ctx) { throw Error('Mode not supported for ex mappings'); }\n          var commandName = lhs.substring(1);\n          if (this.commandMap_[commandName] && this.commandMap_[commandName].user) {\n            delete this.commandMap_[commandName];\n            return;\n          }\n        } else {\n          // Key to Ex or key to key mapping\n          var keys = lhs;\n          for (var i = 0; i < defaultKeymap.length; i++) {\n            if (keys == defaultKeymap[i].keys\n                && defaultKeymap[i].context === ctx) {\n              defaultKeymap.splice(i, 1);\n              return;\n            }\n          }\n        }\n        throw Error('No such mapping.');\n      }\n    };\n\n    var exCommands = {\n      colorscheme: function(cm, params) {\n        if (!params.args || params.args.length < 1) {\n          showConfirm(cm, cm.getOption('theme'));\n          return;\n        }\n        cm.setOption('theme', params.args[0]);\n      },\n      map: function(cm, params, ctx) {\n        var mapArgs = params.args;\n        if (!mapArgs || mapArgs.length < 2) {\n          if (cm) {\n            showConfirm(cm, 'Invalid mapping: ' + params.input);\n          }\n          return;\n        }\n        exCommandDispatcher.map(mapArgs[0], mapArgs[1], ctx);\n      },\n      imap: function(cm, params) { this.map(cm, params, 'insert'); },\n      nmap: function(cm, params) { this.map(cm, params, 'normal'); },\n      vmap: function(cm, params) { this.map(cm, params, 'visual'); },\n      unmap: function(cm, params, ctx) {\n        var mapArgs = params.args;\n        if (!mapArgs || mapArgs.length < 1) {\n          if (cm) {\n            showConfirm(cm, 'No such mapping: ' + params.input);\n          }\n          return;\n        }\n        exCommandDispatcher.unmap(mapArgs[0], ctx);\n      },\n      move: function(cm, params) {\n        commandDispatcher.processCommand(cm, cm.state.vim, {\n            type: 'motion',\n            motion: 'moveToLineOrEdgeOfDocument',\n            motionArgs: { forward: false, explicitRepeat: true,\n              linewise: true },\n            repeatOverride: params.line+1});\n      },\n      set: function(cm, params) {\n        var setArgs = params.args;\n        // Options passed through to the setOption/getOption calls. May be passed in by the\n        // local/global versions of the set command\n        var setCfg = params.setCfg || {};\n        if (!setArgs || setArgs.length < 1) {\n          if (cm) {\n            showConfirm(cm, 'Invalid mapping: ' + params.input);\n          }\n          return;\n        }\n        var expr = setArgs[0].split('=');\n        var optionName = expr[0];\n        var value = expr[1];\n        var forceGet = false;\n\n        if (optionName.charAt(optionName.length - 1) == '?') {\n          // If post-fixed with ?, then the set is actually a get.\n          if (value) { throw Error('Trailing characters: ' + params.argString); }\n          optionName = optionName.substring(0, optionName.length - 1);\n          forceGet = true;\n        }\n        if (value === undefined && optionName.substring(0, 2) == 'no') {\n          // To set boolean options to false, the option name is prefixed with\n          // 'no'.\n          optionName = optionName.substring(2);\n          value = false;\n        }\n\n        var optionIsBoolean = options[optionName] && options[optionName].type == 'boolean';\n        if (optionIsBoolean && value == undefined) {\n          // Calling set with a boolean option sets it to true.\n          value = true;\n        }\n        // If no value is provided, then we assume this is a get.\n        if (!optionIsBoolean && value === undefined || forceGet) {\n          var oldValue = getOption(optionName, cm, setCfg);\n          if (oldValue instanceof Error) {\n            showConfirm(cm, oldValue.message);\n          } else if (oldValue === true || oldValue === false) {\n            showConfirm(cm, ' ' + (oldValue ? '' : 'no') + optionName);\n          } else {\n            showConfirm(cm, '  ' + optionName + '=' + oldValue);\n          }\n        } else {\n          var setOptionReturn = setOption(optionName, value, cm, setCfg);\n          if (setOptionReturn instanceof Error) {\n            showConfirm(cm, setOptionReturn.message);\n          }\n        }\n      },\n      setlocal: function (cm, params) {\n        // setCfg is passed through to setOption\n        params.setCfg = {scope: 'local'};\n        this.set(cm, params);\n      },\n      setglobal: function (cm, params) {\n        // setCfg is passed through to setOption\n        params.setCfg = {scope: 'global'};\n        this.set(cm, params);\n      },\n      registers: function(cm, params) {\n        var regArgs = params.args;\n        var registers = vimGlobalState.registerController.registers;\n        var regInfo = '----------Registers----------<br><br>';\n        if (!regArgs) {\n          for (var registerName in registers) {\n            var text = registers[registerName].toString();\n            if (text.length) {\n              regInfo += '\"' + registerName + '    ' + text + '<br>';\n            }\n          }\n        } else {\n          var registerName;\n          regArgs = regArgs.join('');\n          for (var i = 0; i < regArgs.length; i++) {\n            registerName = regArgs.charAt(i);\n            if (!vimGlobalState.registerController.isValidRegister(registerName)) {\n              continue;\n            }\n            var register = registers[registerName] || new Register();\n            regInfo += '\"' + registerName + '    ' + register.toString() + '<br>';\n          }\n        }\n        showConfirm(cm, regInfo);\n      },\n      sort: function(cm, params) {\n        var reverse, ignoreCase, unique, number, pattern;\n        function parseArgs() {\n          if (params.argString) {\n            var args = new CodeMirror.StringStream(params.argString);\n            if (args.eat('!')) { reverse = true; }\n            if (args.eol()) { return; }\n            if (!args.eatSpace()) { return 'Invalid arguments'; }\n            var opts = args.match(/([dinuox]+)?\\s*(\\/.+\\/)?\\s*/);\n            if (!opts && !args.eol()) { return 'Invalid arguments'; }\n            if (opts[1]) {\n              ignoreCase = opts[1].indexOf('i') != -1;\n              unique = opts[1].indexOf('u') != -1;\n              var decimal = opts[1].indexOf('d') != -1 || opts[1].indexOf('n') != -1 && 1;\n              var hex = opts[1].indexOf('x') != -1 && 1;\n              var octal = opts[1].indexOf('o') != -1 && 1;\n              if (decimal + hex + octal > 1) { return 'Invalid arguments'; }\n              number = decimal && 'decimal' || hex && 'hex' || octal && 'octal';\n            }\n            if (opts[2]) {\n              pattern = new RegExp(opts[2].substr(1, opts[2].length - 2), ignoreCase ? 'i' : '');\n            }\n          }\n        }\n        var err = parseArgs();\n        if (err) {\n          showConfirm(cm, err + ': ' + params.argString);\n          return;\n        }\n        var lineStart = params.line || cm.firstLine();\n        var lineEnd = params.lineEnd || params.line || cm.lastLine();\n        if (lineStart == lineEnd) { return; }\n        var curStart = Pos(lineStart, 0);\n        var curEnd = Pos(lineEnd, lineLength(cm, lineEnd));\n        var text = cm.getRange(curStart, curEnd).split('\\n');\n        var numberRegex = pattern ? pattern :\n           (number == 'decimal') ? /(-?)([\\d]+)/ :\n           (number == 'hex') ? /(-?)(?:0x)?([0-9a-f]+)/i :\n           (number == 'octal') ? /([0-7]+)/ : null;\n        var radix = (number == 'decimal') ? 10 : (number == 'hex') ? 16 : (number == 'octal') ? 8 : null;\n        var numPart = [], textPart = [];\n        if (number || pattern) {\n          for (var i = 0; i < text.length; i++) {\n            var matchPart = pattern ? text[i].match(pattern) : null;\n            if (matchPart && matchPart[0] != '') {\n              numPart.push(matchPart);\n            } else if (!pattern && numberRegex.exec(text[i])) {\n              numPart.push(text[i]);\n            } else {\n              textPart.push(text[i]);\n            }\n          }\n        } else {\n          textPart = text;\n        }\n        function compareFn(a, b) {\n          if (reverse) { var tmp; tmp = a; a = b; b = tmp; }\n          if (ignoreCase) { a = a.toLowerCase(); b = b.toLowerCase(); }\n          var anum = number && numberRegex.exec(a);\n          var bnum = number && numberRegex.exec(b);\n          if (!anum) { return a < b ? -1 : 1; }\n          anum = parseInt((anum[1] + anum[2]).toLowerCase(), radix);\n          bnum = parseInt((bnum[1] + bnum[2]).toLowerCase(), radix);\n          return anum - bnum;\n        }\n        function comparePatternFn(a, b) {\n          if (reverse) { var tmp; tmp = a; a = b; b = tmp; }\n          if (ignoreCase) { a[0] = a[0].toLowerCase(); b[0] = b[0].toLowerCase(); }\n          return (a[0] < b[0]) ? -1 : 1;\n        }\n        numPart.sort(pattern ? comparePatternFn : compareFn);\n        if (pattern) {\n          for (var i = 0; i < numPart.length; i++) {\n            numPart[i] = numPart[i].input;\n          }\n        } else if (!number) { textPart.sort(compareFn); }\n        text = (!reverse) ? textPart.concat(numPart) : numPart.concat(textPart);\n        if (unique) { // Remove duplicate lines\n          var textOld = text;\n          var lastLine;\n          text = [];\n          for (var i = 0; i < textOld.length; i++) {\n            if (textOld[i] != lastLine) {\n              text.push(textOld[i]);\n            }\n            lastLine = textOld[i];\n          }\n        }\n        cm.replaceRange(text.join('\\n'), curStart, curEnd);\n      },\n      global: function(cm, params) {\n        // a global command is of the form\n        // :[range]g/pattern/[cmd]\n        // argString holds the string /pattern/[cmd]\n        var argString = params.argString;\n        if (!argString) {\n          showConfirm(cm, 'Regular Expression missing from global');\n          return;\n        }\n        // range is specified here\n        var lineStart = (params.line !== undefined) ? params.line : cm.firstLine();\n        var lineEnd = params.lineEnd || params.line || cm.lastLine();\n        // get the tokens from argString\n        var tokens = splitBySlash(argString);\n        var regexPart = argString, cmd;\n        if (tokens.length) {\n          regexPart = tokens[0];\n          cmd = tokens.slice(1, tokens.length).join('/');\n        }\n        if (regexPart) {\n          // If regex part is empty, then use the previous query. Otherwise\n          // use the regex part as the new query.\n          try {\n           updateSearchQuery(cm, regexPart, true /** ignoreCase */,\n             true /** smartCase */);\n          } catch (e) {\n           showConfirm(cm, 'Invalid regex: ' + regexPart);\n           return;\n          }\n        }\n        // now that we have the regexPart, search for regex matches in the\n        // specified range of lines\n        var query = getSearchState(cm).getQuery();\n        var matchedLines = [], content = '';\n        for (var i = lineStart; i <= lineEnd; i++) {\n          var matched = query.test(cm.getLine(i));\n          if (matched) {\n            matchedLines.push(i+1);\n            content+= cm.getLine(i) + '<br>';\n          }\n        }\n        // if there is no [cmd], just display the list of matched lines\n        if (!cmd) {\n          showConfirm(cm, content);\n          return;\n        }\n        var index = 0;\n        var nextCommand = function() {\n          if (index < matchedLines.length) {\n            var command = matchedLines[index] + cmd;\n            exCommandDispatcher.processCommand(cm, command, {\n              callback: nextCommand\n            });\n          }\n          index++;\n        };\n        nextCommand();\n      },\n      substitute: function(cm, params) {\n        if (!cm.getSearchCursor) {\n          throw new Error('Search feature not available. Requires searchcursor.js or ' +\n              'any other getSearchCursor implementation.');\n        }\n        var argString = params.argString;\n        var tokens = argString ? splitBySeparator(argString, argString[0]) : [];\n        var regexPart, replacePart = '', trailing, flagsPart, count;\n        var confirm = false; // Whether to confirm each replace.\n        var global = false; // True to replace all instances on a line, false to replace only 1.\n        if (tokens.length) {\n          regexPart = tokens[0];\n          if (getOption('pcre') && regexPart !== '') {\n              regexPart = new RegExp(regexPart).source; //normalize not escaped characters\n          }\n          replacePart = tokens[1];\n          if (regexPart && regexPart[regexPart.length - 1] === '$') {\n            regexPart = regexPart.slice(0, regexPart.length - 1) + '\\\\n';\n            replacePart = replacePart ? replacePart + '\\n' : '\\n';\n          }\n          if (replacePart !== undefined) {\n            if (getOption('pcre')) {\n              replacePart = unescapeRegexReplace(replacePart.replace(/([^\\\\])&/g,\"$1$$&\"));\n            } else {\n              replacePart = translateRegexReplace(replacePart);\n            }\n            vimGlobalState.lastSubstituteReplacePart = replacePart;\n          }\n          trailing = tokens[2] ? tokens[2].split(' ') : [];\n        } else {\n          // either the argString is empty or its of the form ' hello/world'\n          // actually splitBySlash returns a list of tokens\n          // only if the string starts with a '/'\n          if (argString && argString.length) {\n            showConfirm(cm, 'Substitutions should be of the form ' +\n                ':s/pattern/replace/');\n            return;\n          }\n        }\n        // After the 3rd slash, we can have flags followed by a space followed\n        // by count.\n        if (trailing) {\n          flagsPart = trailing[0];\n          count = parseInt(trailing[1]);\n          if (flagsPart) {\n            if (flagsPart.indexOf('c') != -1) {\n              confirm = true;\n              flagsPart.replace('c', '');\n            }\n            if (flagsPart.indexOf('g') != -1) {\n              global = true;\n              flagsPart.replace('g', '');\n            }\n            if (getOption('pcre')) {\n               regexPart = regexPart + '/' + flagsPart;\n            } else {\n               regexPart = regexPart.replace(/\\//g, \"\\\\/\") + '/' + flagsPart;\n            }\n          }\n        }\n        if (regexPart) {\n          // If regex part is empty, then use the previous query. Otherwise use\n          // the regex part as the new query.\n          try {\n            updateSearchQuery(cm, regexPart, true /** ignoreCase */,\n              true /** smartCase */);\n          } catch (e) {\n            showConfirm(cm, 'Invalid regex: ' + regexPart);\n            return;\n          }\n        }\n        replacePart = replacePart || vimGlobalState.lastSubstituteReplacePart;\n        if (replacePart === undefined) {\n          showConfirm(cm, 'No previous substitute regular expression');\n          return;\n        }\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n        var lineStart = (params.line !== undefined) ? params.line : cm.getCursor().line;\n        var lineEnd = params.lineEnd || lineStart;\n        if (lineStart == cm.firstLine() && lineEnd == cm.lastLine()) {\n          lineEnd = Infinity;\n        }\n        if (count) {\n          lineStart = lineEnd;\n          lineEnd = lineStart + count - 1;\n        }\n        var startPos = clipCursorToContent(cm, Pos(lineStart, 0));\n        var cursor = cm.getSearchCursor(query, startPos);\n        doReplace(cm, confirm, global, lineStart, lineEnd, cursor, query, replacePart, params.callback);\n      },\n      redo: CodeMirror.commands.redo,\n      undo: CodeMirror.commands.undo,\n      write: function(cm) {\n        if (CodeMirror.commands.save) {\n          // If a save command is defined, call it.\n          CodeMirror.commands.save(cm);\n        } else if (cm.save) {\n          // Saves to text area if no save command is defined and cm.save() is available.\n          cm.save();\n        }\n      },\n      nohlsearch: function(cm) {\n        clearSearchHighlight(cm);\n      },\n      yank: function (cm) {\n        var cur = copyCursor(cm.getCursor());\n        var line = cur.line;\n        var lineText = cm.getLine(line);\n        vimGlobalState.registerController.pushText(\n          '0', 'yank', lineText, true, true);\n      },\n      delmarks: function(cm, params) {\n        if (!params.argString || !trim(params.argString)) {\n          showConfirm(cm, 'Argument required');\n          return;\n        }\n\n        var state = cm.state.vim;\n        var stream = new CodeMirror.StringStream(trim(params.argString));\n        while (!stream.eol()) {\n          stream.eatSpace();\n\n          // Record the streams position at the beginning of the loop for use\n          // in error messages.\n          var count = stream.pos;\n\n          if (!stream.match(/[a-zA-Z]/, false)) {\n            showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n            return;\n          }\n\n          var sym = stream.next();\n          // Check if this symbol is part of a range\n          if (stream.match('-', true)) {\n            // This symbol is part of a range.\n\n            // The range must terminate at an alphabetic character.\n            if (!stream.match(/[a-zA-Z]/, false)) {\n              showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n              return;\n            }\n\n            var startMark = sym;\n            var finishMark = stream.next();\n            // The range must terminate at an alphabetic character which\n            // shares the same case as the start of the range.\n            if (isLowerCase(startMark) && isLowerCase(finishMark) ||\n                isUpperCase(startMark) && isUpperCase(finishMark)) {\n              var start = startMark.charCodeAt(0);\n              var finish = finishMark.charCodeAt(0);\n              if (start >= finish) {\n                showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n                return;\n              }\n\n              // Because marks are always ASCII values, and we have\n              // determined that they are the same case, we can use\n              // their char codes to iterate through the defined range.\n              for (var j = 0; j <= finish - start; j++) {\n                var mark = String.fromCharCode(start + j);\n                delete state.marks[mark];\n              }\n            } else {\n              showConfirm(cm, 'Invalid argument: ' + startMark + '-');\n              return;\n            }\n          } else {\n            // This symbol is a valid mark, and is not part of a range.\n            delete state.marks[sym];\n          }\n        }\n      }\n    };\n\n    var exCommandDispatcher = new ExCommandDispatcher();\n\n    /**\n    * @param {CodeMirror} cm CodeMirror instance we are in.\n    * @param {boolean} confirm Whether to confirm each replace.\n    * @param {Cursor} lineStart Line to start replacing from.\n    * @param {Cursor} lineEnd Line to stop replacing at.\n    * @param {RegExp} query Query for performing matches with.\n    * @param {string} replaceWith Text to replace matches with. May contain $1,\n    *     $2, etc for replacing captured groups using Javascript replace.\n    * @param {function()} callback A callback for when the replace is done.\n    */\n    function doReplace(cm, confirm, global, lineStart, lineEnd, searchCursor, query,\n        replaceWith, callback) {\n      // Set up all the functions.\n      cm.state.vim.exMode = true;\n      var done = false;\n      var lastPos = searchCursor.from();\n      function replaceAll() {\n        cm.operation(function() {\n          while (!done) {\n            replace();\n            next();\n          }\n          stop();\n        });\n      }\n      function replace() {\n        var text = cm.getRange(searchCursor.from(), searchCursor.to());\n        var newText = text.replace(query, replaceWith);\n        searchCursor.replace(newText);\n      }\n      function next() {\n        // The below only loops to skip over multiple occurrences on the same\n        // line when 'global' is not true.\n        while(searchCursor.findNext() &&\n              isInRange(searchCursor.from(), lineStart, lineEnd)) {\n          if (!global && lastPos && searchCursor.from().line == lastPos.line) {\n            continue;\n          }\n          cm.scrollIntoView(searchCursor.from(), 30);\n          cm.setSelection(searchCursor.from(), searchCursor.to());\n          lastPos = searchCursor.from();\n          done = false;\n          return;\n        }\n        done = true;\n      }\n      function stop(close) {\n        if (close) { close(); }\n        cm.focus();\n        if (lastPos) {\n          cm.setCursor(lastPos);\n          var vim = cm.state.vim;\n          vim.exMode = false;\n          vim.lastHPos = vim.lastHSPos = lastPos.ch;\n        }\n        if (callback) { callback(); }\n      }\n      function onPromptKeyDown(e, _value, close) {\n        // Swallow all keys.\n        CodeMirror.e_stop(e);\n        var keyName = CodeMirror.keyName(e);\n        switch (keyName) {\n          case 'Y':\n            replace(); next(); break;\n          case 'N':\n            next(); break;\n          case 'A':\n            // replaceAll contains a call to close of its own. We don't want it\n            // to fire too early or multiple times.\n            var savedCallback = callback;\n            callback = undefined;\n            cm.operation(replaceAll);\n            callback = savedCallback;\n            break;\n          case 'L':\n            replace();\n            // fall through and exit.\n          case 'Q':\n          case 'Esc':\n          case 'Ctrl-C':\n          case 'Ctrl-[':\n            stop(close);\n            break;\n        }\n        if (done) { stop(close); }\n        return true;\n      }\n\n      // Actually do replace.\n      next();\n      if (done) {\n        showConfirm(cm, 'No matches for ' + query.source);\n        return;\n      }\n      if (!confirm) {\n        replaceAll();\n        if (callback) { callback(); }\n        return;\n      }\n      showPrompt(cm, {\n        prefix: 'replace with <strong>' + replaceWith + '</strong> (y/n/a/q/l)',\n        onKeyDown: onPromptKeyDown\n      });\n    }\n\n    CodeMirror.keyMap.vim = {\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    function exitInsertMode(cm) {\n      var vim = cm.state.vim;\n      var macroModeState = vimGlobalState.macroModeState;\n      var insertModeChangeRegister = vimGlobalState.registerController.getRegister('.');\n      var isPlaying = macroModeState.isPlaying;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      if (!isPlaying) {\n        cm.off('change', onChange);\n        CodeMirror.off(cm.getInputField(), 'keydown', onKeyEventTargetKeyDown);\n      }\n      if (!isPlaying && vim.insertModeRepeat > 1) {\n        // Perform insert mode repeat for commands like 3,a and 3,o.\n        repeatLastEdit(cm, vim, vim.insertModeRepeat - 1,\n            true /** repeatForInsert */);\n        vim.lastEditInputState.repeatOverride = vim.insertModeRepeat;\n      }\n      delete vim.insertModeRepeat;\n      vim.insertMode = false;\n      cm.setCursor(cm.getCursor().line, cm.getCursor().ch-1);\n      cm.setOption('keyMap', 'vim');\n      cm.setOption('disableInput', true);\n      cm.toggleOverwrite(false); // exit replace mode if we were in it.\n      // update the \". register before exiting insert mode\n      insertModeChangeRegister.setText(lastChange.changes.join(''));\n      CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n      if (macroModeState.isRecording) {\n        logInsertModeChange(macroModeState);\n      }\n    }\n\n    function _mapCommand(command) {\n      defaultKeymap.unshift(command);\n    }\n\n    function mapCommand(keys, type, name, args, extra) {\n      var command = {keys: keys, type: type};\n      command[type] = name;\n      command[type + \"Args\"] = args;\n      for (var key in extra)\n        command[key] = extra[key];\n      _mapCommand(command);\n    }\n\n    // The timeout in milliseconds for the two-character ESC keymap should be\n    // adjusted according to your typing speed to prevent false positives.\n    defineOption('insertModeEscKeysTimeout', 200, 'number');\n\n    CodeMirror.keyMap['vim-insert'] = {\n      // TODO: override navigation keys so that Esc will cancel automatic\n      // indentation from o, O, i_<CR>\n      fallthrough: ['default'],\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    CodeMirror.keyMap['vim-replace'] = {\n      'Backspace': 'goCharLeft',\n      fallthrough: ['vim-insert'],\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    function executeMacroRegister(cm, vim, macroModeState, registerName) {\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (registerName == ':') {\n        // Read-only register containing last Ex command.\n        if (register.keyBuffer[0]) {\n          exCommandDispatcher.processCommand(cm, register.keyBuffer[0]);\n        }\n        macroModeState.isPlaying = false;\n        return;\n      }\n      var keyBuffer = register.keyBuffer;\n      var imc = 0;\n      macroModeState.isPlaying = true;\n      macroModeState.replaySearchQueries = register.searchQueries.slice(0);\n      for (var i = 0; i < keyBuffer.length; i++) {\n        var text = keyBuffer[i];\n        var match, key;\n        while (text) {\n          // Pull off one command key, which is either a single character\n          // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n          match = (/<\\w+-.+?>|<\\w+>|./).exec(text);\n          key = match[0];\n          text = text.substring(match.index + key.length);\n          CodeMirror.Vim.handleKey(cm, key, 'macro');\n          if (vim.insertMode) {\n            var changes = register.insertModeChanges[imc++].changes;\n            vimGlobalState.macroModeState.lastInsertModeChanges.changes =\n                changes;\n            repeatInsertModeChanges(cm, changes, 1);\n            exitInsertMode(cm);\n          }\n        }\n      }\n      macroModeState.isPlaying = false;\n    }\n\n    function logKey(macroModeState, key) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register) {\n        register.pushText(key);\n      }\n    }\n\n    function logInsertModeChange(macroModeState) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register && register.pushInsertModeChanges) {\n        register.pushInsertModeChanges(macroModeState.lastInsertModeChanges);\n      }\n    }\n\n    function logSearchQuery(macroModeState, query) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register && register.pushSearchQuery) {\n        register.pushSearchQuery(query);\n      }\n    }\n\n    /**\n     * Listens for changes made in insert mode.\n     * Should only be active in insert mode.\n     */\n    function onChange(cm, changeObj) {\n      var macroModeState = vimGlobalState.macroModeState;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      if (!macroModeState.isPlaying) {\n        while(changeObj) {\n          lastChange.expectCursorActivityForChange = true;\n          if (lastChange.ignoreCount > 1) {\n            lastChange.ignoreCount--;\n          } else if (changeObj.origin == '+input' || changeObj.origin == 'paste'\n              || changeObj.origin === undefined /* only in testing */) {\n            var selectionCount = cm.listSelections().length;\n            if (selectionCount > 1)\n              lastChange.ignoreCount = selectionCount;\n            var text = changeObj.text.join('\\n');\n            if (lastChange.maybeReset) {\n              lastChange.changes = [];\n              lastChange.maybeReset = false;\n            }\n            if (text) {\n              if (cm.state.overwrite && !/\\n/.test(text)) {\n                lastChange.changes.push([text]);\n              } else {\n                lastChange.changes.push(text);\n              }\n            }\n          }\n          // Change objects may be chained with next.\n          changeObj = changeObj.next;\n        }\n      }\n    }\n\n    /**\n    * Listens for any kind of cursor activity on CodeMirror.\n    */\n    function onCursorActivity(cm) {\n      var vim = cm.state.vim;\n      if (vim.insertMode) {\n        // Tracking cursor activity in insert mode (for macro support).\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.isPlaying) { return; }\n        var lastChange = macroModeState.lastInsertModeChanges;\n        if (lastChange.expectCursorActivityForChange) {\n          lastChange.expectCursorActivityForChange = false;\n        } else {\n          // Cursor moved outside the context of an edit. Reset the change.\n          lastChange.maybeReset = true;\n        }\n      } else if (!cm.curOp.isVimOp) {\n        handleExternalSelection(cm, vim);\n      }\n      if (vim.visualMode) {\n        updateFakeCursor(cm);\n      }\n    }\n    /**\n     * Keeps track of a fake cursor to support visual mode cursor behavior.\n     */\n    function updateFakeCursor(cm) {\n      var className = 'cm-animate-fat-cursor';\n      var vim = cm.state.vim;\n      var from = clipCursorToContent(cm, copyCursor(vim.sel.head));\n      var to = offsetCursor(from, 0, 1);\n      clearFakeCursor(vim);\n      // In visual mode, the cursor may be positioned over EOL.\n      if (from.ch == cm.getLine(from.line).length) {\n        var widget = document.createElement(\"span\");\n        widget.textContent = \"\\u00a0\";\n        widget.className = className;\n        vim.fakeCursorBookmark = cm.setBookmark(from, {widget: widget});\n      } else {\n        vim.fakeCursor = cm.markText(from, to, {className: className});\n      }\n    }\n    function clearFakeCursor(vim) {\n      if (vim.fakeCursor) {\n        vim.fakeCursor.clear();\n        vim.fakeCursor = null;\n      }\n      if (vim.fakeCursorBookmark) {\n        vim.fakeCursorBookmark.clear();\n        vim.fakeCursorBookmark = null;\n      }\n    }\n    function handleExternalSelection(cm, vim) {\n      var anchor = cm.getCursor('anchor');\n      var head = cm.getCursor('head');\n      // Enter or exit visual mode to match mouse selection.\n      if (vim.visualMode && !cm.somethingSelected()) {\n        exitVisualMode(cm, false);\n      } else if (!vim.visualMode && !vim.insertMode && cm.somethingSelected()) {\n        vim.visualMode = true;\n        vim.visualLine = false;\n        CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\"});\n      }\n      if (vim.visualMode) {\n        // Bind CodeMirror selection model to vim selection model.\n        // Mouse selections are considered visual characterwise.\n        var headOffset = !cursorIsBefore(head, anchor) ? -1 : 0;\n        var anchorOffset = cursorIsBefore(head, anchor) ? -1 : 0;\n        head = offsetCursor(head, 0, headOffset);\n        anchor = offsetCursor(anchor, 0, anchorOffset);\n        vim.sel = {\n          anchor: anchor,\n          head: head\n        };\n        updateMark(cm, vim, '<', cursorMin(head, anchor));\n        updateMark(cm, vim, '>', cursorMax(head, anchor));\n      } else if (!vim.insertMode) {\n        // Reset lastHPos if selection was modified by something outside of vim mode e.g. by mouse.\n        vim.lastHPos = cm.getCursor().ch;\n      }\n    }\n\n    /** Wrapper for special keys pressed in insert mode */\n    function InsertModeKey(keyName) {\n      this.keyName = keyName;\n    }\n\n    /**\n    * Handles raw key down events from the text area.\n    * - Should only be active in insert mode.\n    * - For recording deletes in insert mode.\n    */\n    function onKeyEventTargetKeyDown(e) {\n      var macroModeState = vimGlobalState.macroModeState;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      var keyName = CodeMirror.keyName(e);\n      if (!keyName) { return; }\n      function onKeyFound() {\n        if (lastChange.maybeReset) {\n          lastChange.changes = [];\n          lastChange.maybeReset = false;\n        }\n        lastChange.changes.push(new InsertModeKey(keyName));\n        return true;\n      }\n      if (keyName.indexOf('Delete') != -1 || keyName.indexOf('Backspace') != -1) {\n        CodeMirror.lookupKey(keyName, 'vim-insert', onKeyFound);\n      }\n    }\n\n    /**\n     * Repeats the last edit, which includes exactly 1 command and at most 1\n     * insert. Operator and motion commands are read from lastEditInputState,\n     * while action commands are read from lastEditActionCommand.\n     *\n     * If repeatForInsert is true, then the function was called by\n     * exitInsertMode to repeat the insert mode changes the user just made. The\n     * corresponding enterInsertMode call was made with a count.\n     */\n    function repeatLastEdit(cm, vim, repeat, repeatForInsert) {\n      var macroModeState = vimGlobalState.macroModeState;\n      macroModeState.isPlaying = true;\n      var isAction = !!vim.lastEditActionCommand;\n      var cachedInputState = vim.inputState;\n      function repeatCommand() {\n        if (isAction) {\n          commandDispatcher.processAction(cm, vim, vim.lastEditActionCommand);\n        } else {\n          commandDispatcher.evalInput(cm, vim);\n        }\n      }\n      function repeatInsert(repeat) {\n        if (macroModeState.lastInsertModeChanges.changes.length > 0) {\n          // For some reason, repeat cw in desktop VIM does not repeat\n          // insert mode changes. Will conform to that behavior.\n          repeat = !vim.lastEditActionCommand ? 1 : repeat;\n          var changeObject = macroModeState.lastInsertModeChanges;\n          repeatInsertModeChanges(cm, changeObject.changes, repeat);\n        }\n      }\n      vim.inputState = vim.lastEditInputState;\n      if (isAction && vim.lastEditActionCommand.interlaceInsertRepeat) {\n        // o and O repeat have to be interlaced with insert repeats so that the\n        // insertions appear on separate lines instead of the last line.\n        for (var i = 0; i < repeat; i++) {\n          repeatCommand();\n          repeatInsert(1);\n        }\n      } else {\n        if (!repeatForInsert) {\n          // Hack to get the cursor to end up at the right place. If I is\n          // repeated in insert mode repeat, cursor will be 1 insert\n          // change set left of where it should be.\n          repeatCommand();\n        }\n        repeatInsert(repeat);\n      }\n      vim.inputState = cachedInputState;\n      if (vim.insertMode && !repeatForInsert) {\n        // Don't exit insert mode twice. If repeatForInsert is set, then we\n        // were called by an exitInsertMode call lower on the stack.\n        exitInsertMode(cm);\n      }\n      macroModeState.isPlaying = false;\n    }\n\n    function repeatInsertModeChanges(cm, changes, repeat) {\n      function keyHandler(binding) {\n        if (typeof binding == 'string') {\n          CodeMirror.commands[binding](cm);\n        } else {\n          binding(cm);\n        }\n        return true;\n      }\n      var head = cm.getCursor('head');\n      var visualBlock = vimGlobalState.macroModeState.lastInsertModeChanges.visualBlock;\n      if (visualBlock) {\n        // Set up block selection again for repeating the changes.\n        selectForInsert(cm, head, visualBlock + 1);\n        repeat = cm.listSelections().length;\n        cm.setCursor(head);\n      }\n      for (var i = 0; i < repeat; i++) {\n        if (visualBlock) {\n          cm.setCursor(offsetCursor(head, i, 0));\n        }\n        for (var j = 0; j < changes.length; j++) {\n          var change = changes[j];\n          if (change instanceof InsertModeKey) {\n            CodeMirror.lookupKey(change.keyName, 'vim-insert', keyHandler);\n          } else if (typeof change == \"string\") {\n            var cur = cm.getCursor();\n            cm.replaceRange(change, cur, cur);\n          } else {\n            var start = cm.getCursor();\n            var end = offsetCursor(start, 0, change[0].length);\n            cm.replaceRange(change[0], start, end);\n          }\n        }\n      }\n      if (visualBlock) {\n        cm.setCursor(offsetCursor(head, 0, 1));\n      }\n    }\n\n    resetVimGlobalState();\n    return vimApi;\n  };\n  // Initialize Vim and make it available as an API.\n  CodeMirror.Vim = Vim();\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 50;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); at += isRTL; }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n  // Add a span to a line.\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css || attributes) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    for (var i = 0; i < lineView.rest.length; i++)\n      { if (lineView.rest[i] == line)\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n      { if (lineNo(lineView.rest[i$1]) > lineN)\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n      { height += widgetHeight(lineObj.widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e$1) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        { drawSelectionCursor(cm, range.head, curFragment); }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () {\n        if (!cm.hasFocus()) { onBlur(cm); }\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      onBlur(cm);\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;\n    var screenw = displayWidth(cm) - display.gutters.offsetWidth;\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId           // Unique ID\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n        snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm)\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {\n      var this$1 = this;\n\n      this.history = new History(this.history.maxGeneration);\n      linkedDocs(this, function (doc) { return doc.history = this$1.history; }, true);\n    },\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var markAsReadAndPasteIfAllFilesAreRead = function () {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(\n                              text.filter(function (t) { return t != null; }).join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n      var readTextFromFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return\n        }\n        var reader = new FileReader;\n        reader.onerror = function () { return markAsReadAndPasteIfAllFilesAreRead(); };\n        reader.onload = function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return\n          }\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < files.length; i++) { readTextFromFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e$1){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 224: \"Mod\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") { dir = -dir; }\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"codepoint\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if ((webkit && !safari) || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    delayBlurEvent(cm);\n    setTimeout(function () { return display.input.focus(); }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e$1) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200c\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = (val === '') ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(function () {\n        if (this$1.hasFocus() && !this$1.state.focused) { onFocus(this$1); }\n      }, 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) { onContextMenu(cm, e); }\n    });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\"))\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n  // doesn't cross line boundaries), \"word\" (across next word), or\n  // \"group\" (to the start of next group of word or\n  // non-word-non-whitespace chars). The visually param controls\n  // whether, in right-to-left text, direction 1 means to move towards\n  // the next index in the string, or towards the character to the right\n  // of the current position. The resulting position will have a\n  // hitSide=true property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n    function findNextLine() {\n      var l = pos.line + lineDir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (unit == \"codepoint\") {\n        var ch = lineObj.text.charCodeAt(pos.ch + (unit > 0 ? 0 : -1));\n        if (isNaN(ch)) { next = null; }\n        else { next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (ch >= 0xD800 && ch < 0xDC00 ? 2 : 1))),\n                            -dir); }\n      } else if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\" || unit == \"codepoint\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) { return true }\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) { break }\n      }\n      return false\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = document.activeElement == this.div;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || document.activeElement != this.div)\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n    if (this.selectionInEditor())\n      { this.pollSelection(); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n    this.textarea.readOnly = !!val;\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, */) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.58.2\";\n\n  return CodeMirror;\n\n})));\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../markdown/markdown\"), require(\"../../addon/mode/overlay\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../markdown/markdown\", \"../../addon/mode/overlay\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nvar urlRE = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?]))/i\n\nCodeMirror.defineMode(\"gfm\", function(config, modeConfig) {\n  var codeDepth = 0;\n  function blankLine(state) {\n    state.code = false;\n    return null;\n  }\n  var gfmOverlay = {\n    startState: function() {\n      return {\n        code: false,\n        codeBlock: false,\n        ateSpace: false\n      };\n    },\n    copyState: function(s) {\n      return {\n        code: s.code,\n        codeBlock: s.codeBlock,\n        ateSpace: s.ateSpace\n      };\n    },\n    token: function(stream, state) {\n      state.combineTokens = null;\n\n      // Hack to prevent formatting override inside code blocks (block and inline)\n      if (state.codeBlock) {\n        if (stream.match(/^```+/)) {\n          state.codeBlock = false;\n          return null;\n        }\n        stream.skipToEnd();\n        return null;\n      }\n      if (stream.sol()) {\n        state.code = false;\n      }\n      if (stream.sol() && stream.match(/^```+/)) {\n        stream.skipToEnd();\n        state.codeBlock = true;\n        return null;\n      }\n      // If this block is changed, it may need to be updated in Markdown mode\n      if (stream.peek() === '`') {\n        stream.next();\n        var before = stream.pos;\n        stream.eatWhile('`');\n        var difference = 1 + stream.pos - before;\n        if (!state.code) {\n          codeDepth = difference;\n          state.code = true;\n        } else {\n          if (difference === codeDepth) { // Must be exact\n            state.code = false;\n          }\n        }\n        return null;\n      } else if (state.code) {\n        stream.next();\n        return null;\n      }\n      // Check if space. If so, links can be formatted later on\n      if (stream.eatSpace()) {\n        state.ateSpace = true;\n        return null;\n      }\n      if (stream.sol() || state.ateSpace) {\n        state.ateSpace = false;\n        if (modeConfig.gitHubSpice !== false) {\n          if(stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/)) {\n            // User/Project@SHA\n            // User@SHA\n            // SHA\n            state.combineTokens = true;\n            return \"link\";\n          } else if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/)) {\n            // User/Project#Num\n            // User#Num\n            // #Num\n            state.combineTokens = true;\n            return \"link\";\n          }\n        }\n      }\n      if (stream.match(urlRE) &&\n          stream.string.slice(stream.start - 2, stream.start) != \"](\" &&\n          (stream.start == 0 || /\\W/.test(stream.string.charAt(stream.start - 1)))) {\n        // URLs\n        // Taken from http://daringfireball.net/2010/07/improved_regex_for_matching_urls\n        // And then (issue #1160) simplified to make it not crash the Chrome Regexp engine\n        // And then limited url schemes to the CommonMark list, so foo:bar isn't matched as a URL\n        state.combineTokens = true;\n        return \"link\";\n      }\n      stream.next();\n      return null;\n    },\n    blankLine: blankLine\n  };\n\n  var markdownConfig = {\n    taskLists: true,\n    strikethrough: true,\n    emoji: true\n  };\n  for (var attr in modeConfig) {\n    markdownConfig[attr] = modeConfig[attr];\n  }\n  markdownConfig.name = \"markdown\";\n  return CodeMirror.overlayMode(CodeMirror.getMode(config, markdownConfig), gfmOverlay);\n\n}, \"markdown\");\n\n  CodeMirror.defineMIME(\"text/x-gfm\", \"gfm\");\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../xml/xml\"), require(\"../meta\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../xml/xml\", \"../meta\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"markdown\", function(cmCfg, modeCfg) {\n\n  var htmlMode = CodeMirror.getMode(cmCfg, \"text/html\");\n  var htmlModeMissing = htmlMode.name == \"null\"\n\n  function getMode(name) {\n    if (CodeMirror.findModeByName) {\n      var found = CodeMirror.findModeByName(name);\n      if (found) name = found.mime || found.mimes[0];\n    }\n    var mode = CodeMirror.getMode(cmCfg, name);\n    return mode.name == \"null\" ? null : mode;\n  }\n\n  // Should characters that affect highlighting be highlighted separate?\n  // Does not include characters that will be output (such as `1.` and `-` for lists)\n  if (modeCfg.highlightFormatting === undefined)\n    modeCfg.highlightFormatting = false;\n\n  // Maximum number of nested blockquotes. Set to 0 for infinite nesting.\n  // Excess `>` will emit `error` token.\n  if (modeCfg.maxBlockquoteDepth === undefined)\n    modeCfg.maxBlockquoteDepth = 0;\n\n  // Turn on task lists? (\"- [ ] \" and \"- [x] \")\n  if (modeCfg.taskLists === undefined) modeCfg.taskLists = false;\n\n  // Turn on strikethrough syntax\n  if (modeCfg.strikethrough === undefined)\n    modeCfg.strikethrough = false;\n\n  if (modeCfg.emoji === undefined)\n    modeCfg.emoji = false;\n\n  if (modeCfg.fencedCodeBlockHighlighting === undefined)\n    modeCfg.fencedCodeBlockHighlighting = true;\n\n  if (modeCfg.fencedCodeBlockDefaultMode === undefined)\n    modeCfg.fencedCodeBlockDefaultMode = 'text/plain';\n\n  if (modeCfg.xml === undefined)\n    modeCfg.xml = true;\n\n  // Allow token types to be overridden by user-provided token types.\n  if (modeCfg.tokenTypeOverrides === undefined)\n    modeCfg.tokenTypeOverrides = {};\n\n  var tokenTypes = {\n    header: \"header\",\n    code: \"comment\",\n    quote: \"quote\",\n    list1: \"variable-2\",\n    list2: \"variable-3\",\n    list3: \"keyword\",\n    hr: \"hr\",\n    image: \"image\",\n    imageAltText: \"image-alt-text\",\n    imageMarker: \"image-marker\",\n    formatting: \"formatting\",\n    linkInline: \"link\",\n    linkEmail: \"link\",\n    linkText: \"link\",\n    linkHref: \"string\",\n    em: \"em\",\n    strong: \"strong\",\n    strikethrough: \"strikethrough\",\n    emoji: \"builtin\"\n  };\n\n  for (var tokenType in tokenTypes) {\n    if (tokenTypes.hasOwnProperty(tokenType) && modeCfg.tokenTypeOverrides[tokenType]) {\n      tokenTypes[tokenType] = modeCfg.tokenTypeOverrides[tokenType];\n    }\n  }\n\n  var hrRE = /^([*\\-_])(?:\\s*\\1){2,}\\s*$/\n  ,   listRE = /^(?:[*\\-+]|^[0-9]+([.)]))\\s+/\n  ,   taskListRE = /^\\[(x| )\\](?=\\s)/i // Must follow listRE\n  ,   atxHeaderRE = modeCfg.allowAtxHeaderWithoutSpace ? /^(#+)/ : /^(#+)(?: |$)/\n  ,   setextHeaderRE = /^ {0,3}(?:\\={1,}|-{2,})\\s*$/\n  ,   textRE = /^[^#!\\[\\]*_\\\\<>` \"'(~:]+/\n  ,   fencedCodeRE = /^(~~~+|```+)[ \\t]*([\\w\\/+#-]*)[^\\n`]*$/\n  ,   linkDefRE = /^\\s*\\[[^\\]]+?\\]:.*$/ // naive link-definition\n  ,   punctuation = /[!\"#$%&'()*+,\\-.\\/:;<=>?@\\[\\\\\\]^_`{|}~\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E42\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC9\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDF3C-\\uDF3E]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]/\n  ,   expandedTab = \"    \" // CommonMark specifies tab as 4 spaces\n\n  function switchInline(stream, state, f) {\n    state.f = state.inline = f;\n    return f(stream, state);\n  }\n\n  function switchBlock(stream, state, f) {\n    state.f = state.block = f;\n    return f(stream, state);\n  }\n\n  function lineIsEmpty(line) {\n    return !line || !/\\S/.test(line.string)\n  }\n\n  // Blocks\n\n  function blankLine(state) {\n    // Reset linkTitle state\n    state.linkTitle = false;\n    state.linkHref = false;\n    state.linkText = false;\n    // Reset EM state\n    state.em = false;\n    // Reset STRONG state\n    state.strong = false;\n    // Reset strikethrough state\n    state.strikethrough = false;\n    // Reset state.quote\n    state.quote = 0;\n    // Reset state.indentedCode\n    state.indentedCode = false;\n    if (state.f == htmlBlock) {\n      var exit = htmlModeMissing\n      if (!exit) {\n        var inner = CodeMirror.innerMode(htmlMode, state.htmlState)\n        exit = inner.mode.name == \"xml\" && inner.state.tagStart === null &&\n          (!inner.state.context && inner.state.tokenize.isInText)\n      }\n      if (exit) {\n        state.f = inlineNormal;\n        state.block = blockNormal;\n        state.htmlState = null;\n      }\n    }\n    // Reset state.trailingSpace\n    state.trailingSpace = 0;\n    state.trailingSpaceNewLine = false;\n    // Mark this line as blank\n    state.prevLine = state.thisLine\n    state.thisLine = {stream: null}\n    return null;\n  }\n\n  function blockNormal(stream, state) {\n    var firstTokenOnLine = stream.column() === state.indentation;\n    var prevLineLineIsEmpty = lineIsEmpty(state.prevLine.stream);\n    var prevLineIsIndentedCode = state.indentedCode;\n    var prevLineIsHr = state.prevLine.hr;\n    var prevLineIsList = state.list !== false;\n    var maxNonCodeIndentation = (state.listStack[state.listStack.length - 1] || 0) + 3;\n\n    state.indentedCode = false;\n\n    var lineIndentation = state.indentation;\n    // compute once per line (on first token)\n    if (state.indentationDiff === null) {\n      state.indentationDiff = state.indentation;\n      if (prevLineIsList) {\n        state.list = null;\n        // While this list item's marker's indentation is less than the deepest\n        //  list item's content's indentation,pop the deepest list item\n        //  indentation off the stack, and update block indentation state\n        while (lineIndentation < state.listStack[state.listStack.length - 1]) {\n          state.listStack.pop();\n          if (state.listStack.length) {\n            state.indentation = state.listStack[state.listStack.length - 1];\n          // less than the first list's indent -> the line is no longer a list\n          } else {\n            state.list = false;\n          }\n        }\n        if (state.list !== false) {\n          state.indentationDiff = lineIndentation - state.listStack[state.listStack.length - 1]\n        }\n      }\n    }\n\n    // not comprehensive (currently only for setext detection purposes)\n    var allowsInlineContinuation = (\n        !prevLineLineIsEmpty && !prevLineIsHr && !state.prevLine.header &&\n        (!prevLineIsList || !prevLineIsIndentedCode) &&\n        !state.prevLine.fencedCodeEnd\n    );\n\n    var isHr = (state.list === false || prevLineIsHr || prevLineLineIsEmpty) &&\n      state.indentation <= maxNonCodeIndentation && stream.match(hrRE);\n\n    var match = null;\n    if (state.indentationDiff >= 4 && (prevLineIsIndentedCode || state.prevLine.fencedCodeEnd ||\n         state.prevLine.header || prevLineLineIsEmpty)) {\n      stream.skipToEnd();\n      state.indentedCode = true;\n      return tokenTypes.code;\n    } else if (stream.eatSpace()) {\n      return null;\n    } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(atxHeaderRE)) && match[1].length <= 6) {\n      state.quote = 0;\n      state.header = match[1].length;\n      state.thisLine.header = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      state.f = state.inline;\n      return getType(state);\n    } else if (state.indentation <= maxNonCodeIndentation && stream.eat('>')) {\n      state.quote = firstTokenOnLine ? 1 : state.quote + 1;\n      if (modeCfg.highlightFormatting) state.formatting = \"quote\";\n      stream.eatSpace();\n      return getType(state);\n    } else if (!isHr && !state.setext && firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(listRE))) {\n      var listType = match[1] ? \"ol\" : \"ul\";\n\n      state.indentation = lineIndentation + stream.current().length;\n      state.list = true;\n      state.quote = 0;\n\n      // Add this list item's content's indentation to the stack\n      state.listStack.push(state.indentation);\n      // Reset inline styles which shouldn't propagate aross list items\n      state.em = false;\n      state.strong = false;\n      state.code = false;\n      state.strikethrough = false;\n\n      if (modeCfg.taskLists && stream.match(taskListRE, false)) {\n        state.taskList = true;\n      }\n      state.f = state.inline;\n      if (modeCfg.highlightFormatting) state.formatting = [\"list\", \"list-\" + listType];\n      return getType(state);\n    } else if (firstTokenOnLine && state.indentation <= maxNonCodeIndentation && (match = stream.match(fencedCodeRE, true))) {\n      state.quote = 0;\n      state.fencedEndRE = new RegExp(match[1] + \"+ *$\");\n      // try switching mode\n      state.localMode = modeCfg.fencedCodeBlockHighlighting && getMode(match[2] || modeCfg.fencedCodeBlockDefaultMode );\n      if (state.localMode) state.localState = CodeMirror.startState(state.localMode);\n      state.f = state.block = local;\n      if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n      state.code = -1\n      return getType(state);\n    // SETEXT has lowest block-scope precedence after HR, so check it after\n    //  the others (code, blockquote, list...)\n    } else if (\n      // if setext set, indicates line after ---/===\n      state.setext || (\n        // line before ---/===\n        (!allowsInlineContinuation || !prevLineIsList) && !state.quote && state.list === false &&\n        !state.code && !isHr && !linkDefRE.test(stream.string) &&\n        (match = stream.lookAhead(1)) && (match = match.match(setextHeaderRE))\n      )\n    ) {\n      if ( !state.setext ) {\n        state.header = match[0].charAt(0) == '=' ? 1 : 2;\n        state.setext = state.header;\n      } else {\n        state.header = state.setext;\n        // has no effect on type so we can reset it now\n        state.setext = 0;\n        stream.skipToEnd();\n        if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      }\n      state.thisLine.header = true;\n      state.f = state.inline;\n      return getType(state);\n    } else if (isHr) {\n      stream.skipToEnd();\n      state.hr = true;\n      state.thisLine.hr = true;\n      return tokenTypes.hr;\n    } else if (stream.peek() === '[') {\n      return switchInline(stream, state, footnoteLink);\n    }\n\n    return switchInline(stream, state, state.inline);\n  }\n\n  function htmlBlock(stream, state) {\n    var style = htmlMode.token(stream, state.htmlState);\n    if (!htmlModeMissing) {\n      var inner = CodeMirror.innerMode(htmlMode, state.htmlState)\n      if ((inner.mode.name == \"xml\" && inner.state.tagStart === null &&\n           (!inner.state.context && inner.state.tokenize.isInText)) ||\n          (state.md_inside && stream.current().indexOf(\">\") > -1)) {\n        state.f = inlineNormal;\n        state.block = blockNormal;\n        state.htmlState = null;\n      }\n    }\n    return style;\n  }\n\n  function local(stream, state) {\n    var currListInd = state.listStack[state.listStack.length - 1] || 0;\n    var hasExitedList = state.indentation < currListInd;\n    var maxFencedEndInd = currListInd + 3;\n    if (state.fencedEndRE && state.indentation <= maxFencedEndInd && (hasExitedList || stream.match(state.fencedEndRE))) {\n      if (modeCfg.highlightFormatting) state.formatting = \"code-block\";\n      var returnType;\n      if (!hasExitedList) returnType = getType(state)\n      state.localMode = state.localState = null;\n      state.block = blockNormal;\n      state.f = inlineNormal;\n      state.fencedEndRE = null;\n      state.code = 0\n      state.thisLine.fencedCodeEnd = true;\n      if (hasExitedList) return switchBlock(stream, state, state.block);\n      return returnType;\n    } else if (state.localMode) {\n      return state.localMode.token(stream, state.localState);\n    } else {\n      stream.skipToEnd();\n      return tokenTypes.code;\n    }\n  }\n\n  // Inline\n  function getType(state) {\n    var styles = [];\n\n    if (state.formatting) {\n      styles.push(tokenTypes.formatting);\n\n      if (typeof state.formatting === \"string\") state.formatting = [state.formatting];\n\n      for (var i = 0; i < state.formatting.length; i++) {\n        styles.push(tokenTypes.formatting + \"-\" + state.formatting[i]);\n\n        if (state.formatting[i] === \"header\") {\n          styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.header);\n        }\n\n        // Add `formatting-quote` and `formatting-quote-#` for blockquotes\n        // Add `error` instead if the maximum blockquote nesting depth is passed\n        if (state.formatting[i] === \"quote\") {\n          if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n            styles.push(tokenTypes.formatting + \"-\" + state.formatting[i] + \"-\" + state.quote);\n          } else {\n            styles.push(\"error\");\n          }\n        }\n      }\n    }\n\n    if (state.taskOpen) {\n      styles.push(\"meta\");\n      return styles.length ? styles.join(' ') : null;\n    }\n    if (state.taskClosed) {\n      styles.push(\"property\");\n      return styles.length ? styles.join(' ') : null;\n    }\n\n    if (state.linkHref) {\n      styles.push(tokenTypes.linkHref, \"url\");\n    } else { // Only apply inline styles to non-url text\n      if (state.strong) { styles.push(tokenTypes.strong); }\n      if (state.em) { styles.push(tokenTypes.em); }\n      if (state.strikethrough) { styles.push(tokenTypes.strikethrough); }\n      if (state.emoji) { styles.push(tokenTypes.emoji); }\n      if (state.linkText) { styles.push(tokenTypes.linkText); }\n      if (state.code) { styles.push(tokenTypes.code); }\n      if (state.image) { styles.push(tokenTypes.image); }\n      if (state.imageAltText) { styles.push(tokenTypes.imageAltText, \"link\"); }\n      if (state.imageMarker) { styles.push(tokenTypes.imageMarker); }\n    }\n\n    if (state.header) { styles.push(tokenTypes.header, tokenTypes.header + \"-\" + state.header); }\n\n    if (state.quote) {\n      styles.push(tokenTypes.quote);\n\n      // Add `quote-#` where the maximum for `#` is modeCfg.maxBlockquoteDepth\n      if (!modeCfg.maxBlockquoteDepth || modeCfg.maxBlockquoteDepth >= state.quote) {\n        styles.push(tokenTypes.quote + \"-\" + state.quote);\n      } else {\n        styles.push(tokenTypes.quote + \"-\" + modeCfg.maxBlockquoteDepth);\n      }\n    }\n\n    if (state.list !== false) {\n      var listMod = (state.listStack.length - 1) % 3;\n      if (!listMod) {\n        styles.push(tokenTypes.list1);\n      } else if (listMod === 1) {\n        styles.push(tokenTypes.list2);\n      } else {\n        styles.push(tokenTypes.list3);\n      }\n    }\n\n    if (state.trailingSpaceNewLine) {\n      styles.push(\"trailing-space-new-line\");\n    } else if (state.trailingSpace) {\n      styles.push(\"trailing-space-\" + (state.trailingSpace % 2 ? \"a\" : \"b\"));\n    }\n\n    return styles.length ? styles.join(' ') : null;\n  }\n\n  function handleText(stream, state) {\n    if (stream.match(textRE, true)) {\n      return getType(state);\n    }\n    return undefined;\n  }\n\n  function inlineNormal(stream, state) {\n    var style = state.text(stream, state);\n    if (typeof style !== 'undefined')\n      return style;\n\n    if (state.list) { // List marker (*, +, -, 1., etc)\n      state.list = null;\n      return getType(state);\n    }\n\n    if (state.taskList) {\n      var taskOpen = stream.match(taskListRE, true)[1] === \" \";\n      if (taskOpen) state.taskOpen = true;\n      else state.taskClosed = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"task\";\n      state.taskList = false;\n      return getType(state);\n    }\n\n    state.taskOpen = false;\n    state.taskClosed = false;\n\n    if (state.header && stream.match(/^#+$/, true)) {\n      if (modeCfg.highlightFormatting) state.formatting = \"header\";\n      return getType(state);\n    }\n\n    var ch = stream.next();\n\n    // Matches link titles present on next line\n    if (state.linkTitle) {\n      state.linkTitle = false;\n      var matchCh = ch;\n      if (ch === '(') {\n        matchCh = ')';\n      }\n      matchCh = (matchCh+'').replace(/([.?*+^\\[\\]\\\\(){}|-])/g, \"\\\\$1\");\n      var regex = '^\\\\s*(?:[^' + matchCh + '\\\\\\\\]+|\\\\\\\\\\\\\\\\|\\\\\\\\.)' + matchCh;\n      if (stream.match(new RegExp(regex), true)) {\n        return tokenTypes.linkHref;\n      }\n    }\n\n    // If this block is changed, it may need to be updated in GFM mode\n    if (ch === '`') {\n      var previousFormatting = state.formatting;\n      if (modeCfg.highlightFormatting) state.formatting = \"code\";\n      stream.eatWhile('`');\n      var count = stream.current().length\n      if (state.code == 0 && (!state.quote || count == 1)) {\n        state.code = count\n        return getType(state)\n      } else if (count == state.code) { // Must be exact\n        var t = getType(state)\n        state.code = 0\n        return t\n      } else {\n        state.formatting = previousFormatting\n        return getType(state)\n      }\n    } else if (state.code) {\n      return getType(state);\n    }\n\n    if (ch === '\\\\') {\n      stream.next();\n      if (modeCfg.highlightFormatting) {\n        var type = getType(state);\n        var formattingEscape = tokenTypes.formatting + \"-escape\";\n        return type ? type + \" \" + formattingEscape : formattingEscape;\n      }\n    }\n\n    if (ch === '!' && stream.match(/\\[[^\\]]*\\] ?(?:\\(|\\[)/, false)) {\n      state.imageMarker = true;\n      state.image = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      return getType(state);\n    }\n\n    if (ch === '[' && state.imageMarker && stream.match(/[^\\]]*\\](\\(.*?\\)| ?\\[.*?\\])/, false)) {\n      state.imageMarker = false;\n      state.imageAltText = true\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      return getType(state);\n    }\n\n    if (ch === ']' && state.imageAltText) {\n      if (modeCfg.highlightFormatting) state.formatting = \"image\";\n      var type = getType(state);\n      state.imageAltText = false;\n      state.image = false;\n      state.inline = state.f = linkHref;\n      return type;\n    }\n\n    if (ch === '[' && !state.image) {\n      if (state.linkText && stream.match(/^.*?\\]/)) return getType(state)\n      state.linkText = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      return getType(state);\n    }\n\n    if (ch === ']' && state.linkText) {\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      state.linkText = false;\n      state.inline = state.f = stream.match(/\\(.*?\\)| ?\\[.*?\\]/, false) ? linkHref : inlineNormal\n      return type;\n    }\n\n    if (ch === '<' && stream.match(/^(https?|ftps?):\\/\\/(?:[^\\\\>]|\\\\.)+>/, false)) {\n      state.f = state.inline = linkInline;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkInline;\n    }\n\n    if (ch === '<' && stream.match(/^[^> \\\\]+@(?:[^\\\\>]|\\\\.)+>/, false)) {\n      state.f = state.inline = linkInline;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkEmail;\n    }\n\n    if (modeCfg.xml && ch === '<' && stream.match(/^(!--|\\?|!\\[CDATA\\[|[a-z][a-z0-9-]*(?:\\s+[a-z_:.\\-]+(?:\\s*=\\s*[^>]+)?)*\\s*(?:>|$))/i, false)) {\n      var end = stream.string.indexOf(\">\", stream.pos);\n      if (end != -1) {\n        var atts = stream.string.substring(stream.start, end);\n        if (/markdown\\s*=\\s*('|\"){0,1}1('|\"){0,1}/.test(atts)) state.md_inside = true;\n      }\n      stream.backUp(1);\n      state.htmlState = CodeMirror.startState(htmlMode);\n      return switchBlock(stream, state, htmlBlock);\n    }\n\n    if (modeCfg.xml && ch === '<' && stream.match(/^\\/\\w*?>/)) {\n      state.md_inside = false;\n      return \"tag\";\n    } else if (ch === \"*\" || ch === \"_\") {\n      var len = 1, before = stream.pos == 1 ? \" \" : stream.string.charAt(stream.pos - 2)\n      while (len < 3 && stream.eat(ch)) len++\n      var after = stream.peek() || \" \"\n      // See http://spec.commonmark.org/0.27/#emphasis-and-strong-emphasis\n      var leftFlanking = !/\\s/.test(after) && (!punctuation.test(after) || /\\s/.test(before) || punctuation.test(before))\n      var rightFlanking = !/\\s/.test(before) && (!punctuation.test(before) || /\\s/.test(after) || punctuation.test(after))\n      var setEm = null, setStrong = null\n      if (len % 2) { // Em\n        if (!state.em && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before)))\n          setEm = true\n        else if (state.em == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after)))\n          setEm = false\n      }\n      if (len > 1) { // Strong\n        if (!state.strong && leftFlanking && (ch === \"*\" || !rightFlanking || punctuation.test(before)))\n          setStrong = true\n        else if (state.strong == ch && rightFlanking && (ch === \"*\" || !leftFlanking || punctuation.test(after)))\n          setStrong = false\n      }\n      if (setStrong != null || setEm != null) {\n        if (modeCfg.highlightFormatting) state.formatting = setEm == null ? \"strong\" : setStrong == null ? \"em\" : \"strong em\"\n        if (setEm === true) state.em = ch\n        if (setStrong === true) state.strong = ch\n        var t = getType(state)\n        if (setEm === false) state.em = false\n        if (setStrong === false) state.strong = false\n        return t\n      }\n    } else if (ch === ' ') {\n      if (stream.eat('*') || stream.eat('_')) { // Probably surrounded by spaces\n        if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n          return getType(state);\n        } else { // Not surrounded by spaces, back up pointer\n          stream.backUp(1);\n        }\n      }\n    }\n\n    if (modeCfg.strikethrough) {\n      if (ch === '~' && stream.eatWhile(ch)) {\n        if (state.strikethrough) {// Remove strikethrough\n          if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n          var t = getType(state);\n          state.strikethrough = false;\n          return t;\n        } else if (stream.match(/^[^\\s]/, false)) {// Add strikethrough\n          state.strikethrough = true;\n          if (modeCfg.highlightFormatting) state.formatting = \"strikethrough\";\n          return getType(state);\n        }\n      } else if (ch === ' ') {\n        if (stream.match(/^~~/, true)) { // Probably surrounded by space\n          if (stream.peek() === ' ') { // Surrounded by spaces, ignore\n            return getType(state);\n          } else { // Not surrounded by spaces, back up pointer\n            stream.backUp(2);\n          }\n        }\n      }\n    }\n\n    if (modeCfg.emoji && ch === \":\" && stream.match(/^(?:[a-z_\\d+][a-z_\\d+-]*|\\-[a-z_\\d+][a-z_\\d+-]*):/)) {\n      state.emoji = true;\n      if (modeCfg.highlightFormatting) state.formatting = \"emoji\";\n      var retType = getType(state);\n      state.emoji = false;\n      return retType;\n    }\n\n    if (ch === ' ') {\n      if (stream.match(/^ +$/, false)) {\n        state.trailingSpace++;\n      } else if (state.trailingSpace) {\n        state.trailingSpaceNewLine = true;\n      }\n    }\n\n    return getType(state);\n  }\n\n  function linkInline(stream, state) {\n    var ch = stream.next();\n\n    if (ch === \">\") {\n      state.f = state.inline = inlineNormal;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var type = getType(state);\n      if (type){\n        type += \" \";\n      } else {\n        type = \"\";\n      }\n      return type + tokenTypes.linkInline;\n    }\n\n    stream.match(/^[^>]+/, true);\n\n    return tokenTypes.linkInline;\n  }\n\n  function linkHref(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    var ch = stream.next();\n    if (ch === '(' || ch === '[') {\n      state.f = state.inline = getLinkHrefInside(ch === \"(\" ? \")\" : \"]\");\n      if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n      state.linkHref = true;\n      return getType(state);\n    }\n    return 'error';\n  }\n\n  var linkRE = {\n    \")\": /^(?:[^\\\\\\(\\)]|\\\\.|\\((?:[^\\\\\\(\\)]|\\\\.)*\\))*?(?=\\))/,\n    \"]\": /^(?:[^\\\\\\[\\]]|\\\\.|\\[(?:[^\\\\\\[\\]]|\\\\.)*\\])*?(?=\\])/\n  }\n\n  function getLinkHrefInside(endChar) {\n    return function(stream, state) {\n      var ch = stream.next();\n\n      if (ch === endChar) {\n        state.f = state.inline = inlineNormal;\n        if (modeCfg.highlightFormatting) state.formatting = \"link-string\";\n        var returnState = getType(state);\n        state.linkHref = false;\n        return returnState;\n      }\n\n      stream.match(linkRE[endChar])\n      state.linkHref = true;\n      return getType(state);\n    };\n  }\n\n  function footnoteLink(stream, state) {\n    if (stream.match(/^([^\\]\\\\]|\\\\.)*\\]:/, false)) {\n      state.f = footnoteLinkInside;\n      stream.next(); // Consume [\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      state.linkText = true;\n      return getType(state);\n    }\n    return switchInline(stream, state, inlineNormal);\n  }\n\n  function footnoteLinkInside(stream, state) {\n    if (stream.match(/^\\]:/, true)) {\n      state.f = state.inline = footnoteUrl;\n      if (modeCfg.highlightFormatting) state.formatting = \"link\";\n      var returnType = getType(state);\n      state.linkText = false;\n      return returnType;\n    }\n\n    stream.match(/^([^\\]\\\\]|\\\\.)+/, true);\n\n    return tokenTypes.linkText;\n  }\n\n  function footnoteUrl(stream, state) {\n    // Check if space, and return NULL if so (to avoid marking the space)\n    if(stream.eatSpace()){\n      return null;\n    }\n    // Match URL\n    stream.match(/^[^\\s]+/, true);\n    // Check for link title\n    if (stream.peek() === undefined) { // End of line, set flag to check next line\n      state.linkTitle = true;\n    } else { // More content on line, check if link title\n      stream.match(/^(?:\\s+(?:\"(?:[^\"\\\\]|\\\\\\\\|\\\\.)+\"|'(?:[^'\\\\]|\\\\\\\\|\\\\.)+'|\\((?:[^)\\\\]|\\\\\\\\|\\\\.)+\\)))?/, true);\n    }\n    state.f = state.inline = inlineNormal;\n    return tokenTypes.linkHref + \" url\";\n  }\n\n  var mode = {\n    startState: function() {\n      return {\n        f: blockNormal,\n\n        prevLine: {stream: null},\n        thisLine: {stream: null},\n\n        block: blockNormal,\n        htmlState: null,\n        indentation: 0,\n\n        inline: inlineNormal,\n        text: handleText,\n\n        formatting: false,\n        linkText: false,\n        linkHref: false,\n        linkTitle: false,\n        code: 0,\n        em: false,\n        strong: false,\n        header: 0,\n        setext: 0,\n        hr: false,\n        taskList: false,\n        list: false,\n        listStack: [],\n        quote: 0,\n        trailingSpace: 0,\n        trailingSpaceNewLine: false,\n        strikethrough: false,\n        emoji: false,\n        fencedEndRE: null\n      };\n    },\n\n    copyState: function(s) {\n      return {\n        f: s.f,\n\n        prevLine: s.prevLine,\n        thisLine: s.thisLine,\n\n        block: s.block,\n        htmlState: s.htmlState && CodeMirror.copyState(htmlMode, s.htmlState),\n        indentation: s.indentation,\n\n        localMode: s.localMode,\n        localState: s.localMode ? CodeMirror.copyState(s.localMode, s.localState) : null,\n\n        inline: s.inline,\n        text: s.text,\n        formatting: false,\n        linkText: s.linkText,\n        linkTitle: s.linkTitle,\n        linkHref: s.linkHref,\n        code: s.code,\n        em: s.em,\n        strong: s.strong,\n        strikethrough: s.strikethrough,\n        emoji: s.emoji,\n        header: s.header,\n        setext: s.setext,\n        hr: s.hr,\n        taskList: s.taskList,\n        list: s.list,\n        listStack: s.listStack.slice(0),\n        quote: s.quote,\n        indentedCode: s.indentedCode,\n        trailingSpace: s.trailingSpace,\n        trailingSpaceNewLine: s.trailingSpaceNewLine,\n        md_inside: s.md_inside,\n        fencedEndRE: s.fencedEndRE\n      };\n    },\n\n    token: function(stream, state) {\n\n      // Reset state.formatting\n      state.formatting = false;\n\n      if (stream != state.thisLine.stream) {\n        state.header = 0;\n        state.hr = false;\n\n        if (stream.match(/^\\s*$/, true)) {\n          blankLine(state);\n          return null;\n        }\n\n        state.prevLine = state.thisLine\n        state.thisLine = {stream: stream}\n\n        // Reset state.taskList\n        state.taskList = false;\n\n        // Reset state.trailingSpace\n        state.trailingSpace = 0;\n        state.trailingSpaceNewLine = false;\n\n        if (!state.localState) {\n          state.f = state.block;\n          if (state.f != htmlBlock) {\n            var indentation = stream.match(/^\\s*/, true)[0].replace(/\\t/g, expandedTab).length;\n            state.indentation = indentation;\n            state.indentationDiff = null;\n            if (indentation > 0) return null;\n          }\n        }\n      }\n      return state.f(stream, state);\n    },\n\n    innerMode: function(state) {\n      if (state.block == htmlBlock) return {state: state.htmlState, mode: htmlMode};\n      if (state.localState) return {state: state.localState, mode: state.localMode};\n      return {state: state, mode: mode};\n    },\n\n    indent: function(state, textAfter, line) {\n      if (state.block == htmlBlock && htmlMode.indent) return htmlMode.indent(state.htmlState, textAfter, line)\n      if (state.localState && state.localMode.indent) return state.localMode.indent(state.localState, textAfter, line)\n      return CodeMirror.Pass\n    },\n\n    blankLine: blankLine,\n\n    getType: getType,\n\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n    fold: \"markdown\"\n  };\n  return mode;\n}, \"xml\");\n\nCodeMirror.defineMIME(\"text/markdown\", \"markdown\");\n\nCodeMirror.defineMIME(\"text/x-markdown\", \"markdown\");\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.modeInfo = [\n    {name: \"APL\", mime: \"text/apl\", mode: \"apl\", ext: [\"dyalog\", \"apl\"]},\n    {name: \"PGP\", mimes: [\"application/pgp\", \"application/pgp-encrypted\", \"application/pgp-keys\", \"application/pgp-signature\"], mode: \"asciiarmor\", ext: [\"asc\", \"pgp\", \"sig\"]},\n    {name: \"ASN.1\", mime: \"text/x-ttcn-asn\", mode: \"asn.1\", ext: [\"asn\", \"asn1\"]},\n    {name: \"Asterisk\", mime: \"text/x-asterisk\", mode: \"asterisk\", file: /^extensions\\.conf$/i},\n    {name: \"Brainfuck\", mime: \"text/x-brainfuck\", mode: \"brainfuck\", ext: [\"b\", \"bf\"]},\n    {name: \"C\", mime: \"text/x-csrc\", mode: \"clike\", ext: [\"c\", \"h\", \"ino\"]},\n    {name: \"C++\", mime: \"text/x-c++src\", mode: \"clike\", ext: [\"cpp\", \"c++\", \"cc\", \"cxx\", \"hpp\", \"h++\", \"hh\", \"hxx\"], alias: [\"cpp\"]},\n    {name: \"Cobol\", mime: \"text/x-cobol\", mode: \"cobol\", ext: [\"cob\", \"cpy\"]},\n    {name: \"C#\", mime: \"text/x-csharp\", mode: \"clike\", ext: [\"cs\"], alias: [\"csharp\", \"cs\"]},\n    {name: \"Clojure\", mime: \"text/x-clojure\", mode: \"clojure\", ext: [\"clj\", \"cljc\", \"cljx\"]},\n    {name: \"ClojureScript\", mime: \"text/x-clojurescript\", mode: \"clojure\", ext: [\"cljs\"]},\n    {name: \"Closure Stylesheets (GSS)\", mime: \"text/x-gss\", mode: \"css\", ext: [\"gss\"]},\n    {name: \"CMake\", mime: \"text/x-cmake\", mode: \"cmake\", ext: [\"cmake\", \"cmake.in\"], file: /^CMakeLists\\.txt$/},\n    {name: \"CoffeeScript\", mimes: [\"application/vnd.coffeescript\", \"text/coffeescript\", \"text/x-coffeescript\"], mode: \"coffeescript\", ext: [\"coffee\"], alias: [\"coffee\", \"coffee-script\"]},\n    {name: \"Common Lisp\", mime: \"text/x-common-lisp\", mode: \"commonlisp\", ext: [\"cl\", \"lisp\", \"el\"], alias: [\"lisp\"]},\n    {name: \"Cypher\", mime: \"application/x-cypher-query\", mode: \"cypher\", ext: [\"cyp\", \"cypher\"]},\n    {name: \"Cython\", mime: \"text/x-cython\", mode: \"python\", ext: [\"pyx\", \"pxd\", \"pxi\"]},\n    {name: \"Crystal\", mime: \"text/x-crystal\", mode: \"crystal\", ext: [\"cr\"]},\n    {name: \"CSS\", mime: \"text/css\", mode: \"css\", ext: [\"css\"]},\n    {name: \"CQL\", mime: \"text/x-cassandra\", mode: \"sql\", ext: [\"cql\"]},\n    {name: \"D\", mime: \"text/x-d\", mode: \"d\", ext: [\"d\"]},\n    {name: \"Dart\", mimes: [\"application/dart\", \"text/x-dart\"], mode: \"dart\", ext: [\"dart\"]},\n    {name: \"diff\", mime: \"text/x-diff\", mode: \"diff\", ext: [\"diff\", \"patch\"]},\n    {name: \"Django\", mime: \"text/x-django\", mode: \"django\"},\n    {name: \"Dockerfile\", mime: \"text/x-dockerfile\", mode: \"dockerfile\", file: /^Dockerfile$/},\n    {name: \"DTD\", mime: \"application/xml-dtd\", mode: \"dtd\", ext: [\"dtd\"]},\n    {name: \"Dylan\", mime: \"text/x-dylan\", mode: \"dylan\", ext: [\"dylan\", \"dyl\", \"intr\"]},\n    {name: \"EBNF\", mime: \"text/x-ebnf\", mode: \"ebnf\"},\n    {name: \"ECL\", mime: \"text/x-ecl\", mode: \"ecl\", ext: [\"ecl\"]},\n    {name: \"edn\", mime: \"application/edn\", mode: \"clojure\", ext: [\"edn\"]},\n    {name: \"Eiffel\", mime: \"text/x-eiffel\", mode: \"eiffel\", ext: [\"e\"]},\n    {name: \"Elm\", mime: \"text/x-elm\", mode: \"elm\", ext: [\"elm\"]},\n    {name: \"Embedded Javascript\", mime: \"application/x-ejs\", mode: \"htmlembedded\", ext: [\"ejs\"]},\n    {name: \"Embedded Ruby\", mime: \"application/x-erb\", mode: \"htmlembedded\", ext: [\"erb\"]},\n    {name: \"Erlang\", mime: \"text/x-erlang\", mode: \"erlang\", ext: [\"erl\"]},\n    {name: \"Esper\", mime: \"text/x-esper\", mode: \"sql\"},\n    {name: \"Factor\", mime: \"text/x-factor\", mode: \"factor\", ext: [\"factor\"]},\n    {name: \"FCL\", mime: \"text/x-fcl\", mode: \"fcl\"},\n    {name: \"Forth\", mime: \"text/x-forth\", mode: \"forth\", ext: [\"forth\", \"fth\", \"4th\"]},\n    {name: \"Fortran\", mime: \"text/x-fortran\", mode: \"fortran\", ext: [\"f\", \"for\", \"f77\", \"f90\", \"f95\"]},\n    {name: \"F#\", mime: \"text/x-fsharp\", mode: \"mllike\", ext: [\"fs\"], alias: [\"fsharp\"]},\n    {name: \"Gas\", mime: \"text/x-gas\", mode: \"gas\", ext: [\"s\"]},\n    {name: \"Gherkin\", mime: \"text/x-feature\", mode: \"gherkin\", ext: [\"feature\"]},\n    {name: \"GitHub Flavored Markdown\", mime: \"text/x-gfm\", mode: \"gfm\", file: /^(readme|contributing|history)\\.md$/i},\n    {name: \"Go\", mime: \"text/x-go\", mode: \"go\", ext: [\"go\"]},\n    {name: \"Groovy\", mime: \"text/x-groovy\", mode: \"groovy\", ext: [\"groovy\", \"gradle\"], file: /^Jenkinsfile$/},\n    {name: \"HAML\", mime: \"text/x-haml\", mode: \"haml\", ext: [\"haml\"]},\n    {name: \"Haskell\", mime: \"text/x-haskell\", mode: \"haskell\", ext: [\"hs\"]},\n    {name: \"Haskell (Literate)\", mime: \"text/x-literate-haskell\", mode: \"haskell-literate\", ext: [\"lhs\"]},\n    {name: \"Haxe\", mime: \"text/x-haxe\", mode: \"haxe\", ext: [\"hx\"]},\n    {name: \"HXML\", mime: \"text/x-hxml\", mode: \"haxe\", ext: [\"hxml\"]},\n    {name: \"ASP.NET\", mime: \"application/x-aspx\", mode: \"htmlembedded\", ext: [\"aspx\"], alias: [\"asp\", \"aspx\"]},\n    {name: \"HTML\", mime: \"text/html\", mode: \"htmlmixed\", ext: [\"html\", \"htm\", \"handlebars\", \"hbs\"], alias: [\"xhtml\"]},\n    {name: \"HTTP\", mime: \"message/http\", mode: \"http\"},\n    {name: \"IDL\", mime: \"text/x-idl\", mode: \"idl\", ext: [\"pro\"]},\n    {name: \"Pug\", mime: \"text/x-pug\", mode: \"pug\", ext: [\"jade\", \"pug\"], alias: [\"jade\"]},\n    {name: \"Java\", mime: \"text/x-java\", mode: \"clike\", ext: [\"java\"]},\n    {name: \"Java Server Pages\", mime: \"application/x-jsp\", mode: \"htmlembedded\", ext: [\"jsp\"], alias: [\"jsp\"]},\n    {name: \"JavaScript\", mimes: [\"text/javascript\", \"text/ecmascript\", \"application/javascript\", \"application/x-javascript\", \"application/ecmascript\"],\n     mode: \"javascript\", ext: [\"js\"], alias: [\"ecmascript\", \"js\", \"node\"]},\n    {name: \"JSON\", mimes: [\"application/json\", \"application/x-json\"], mode: \"javascript\", ext: [\"json\", \"map\"], alias: [\"json5\"]},\n    {name: \"JSON-LD\", mime: \"application/ld+json\", mode: \"javascript\", ext: [\"jsonld\"], alias: [\"jsonld\"]},\n    {name: \"JSX\", mime: \"text/jsx\", mode: \"jsx\", ext: [\"jsx\"]},\n    {name: \"Jinja2\", mime: \"text/jinja2\", mode: \"jinja2\", ext: [\"j2\", \"jinja\", \"jinja2\"]},\n    {name: \"Julia\", mime: \"text/x-julia\", mode: \"julia\", ext: [\"jl\"]},\n    {name: \"Kotlin\", mime: \"text/x-kotlin\", mode: \"clike\", ext: [\"kt\"]},\n    {name: \"LESS\", mime: \"text/x-less\", mode: \"css\", ext: [\"less\"]},\n    {name: \"LiveScript\", mime: \"text/x-livescript\", mode: \"livescript\", ext: [\"ls\"], alias: [\"ls\"]},\n    {name: \"Lua\", mime: \"text/x-lua\", mode: \"lua\", ext: [\"lua\"]},\n    {name: \"Markdown\", mime: \"text/x-markdown\", mode: \"markdown\", ext: [\"markdown\", \"md\", \"mkd\"]},\n    {name: \"mIRC\", mime: \"text/mirc\", mode: \"mirc\"},\n    {name: \"MariaDB SQL\", mime: \"text/x-mariadb\", mode: \"sql\"},\n    {name: \"Mathematica\", mime: \"text/x-mathematica\", mode: \"mathematica\", ext: [\"m\", \"nb\", \"wl\", \"wls\"]},\n    {name: \"Modelica\", mime: \"text/x-modelica\", mode: \"modelica\", ext: [\"mo\"]},\n    {name: \"MUMPS\", mime: \"text/x-mumps\", mode: \"mumps\", ext: [\"mps\"]},\n    {name: \"MS SQL\", mime: \"text/x-mssql\", mode: \"sql\"},\n    {name: \"mbox\", mime: \"application/mbox\", mode: \"mbox\", ext: [\"mbox\"]},\n    {name: \"MySQL\", mime: \"text/x-mysql\", mode: \"sql\"},\n    {name: \"Nginx\", mime: \"text/x-nginx-conf\", mode: \"nginx\", file: /nginx.*\\.conf$/i},\n    {name: \"NSIS\", mime: \"text/x-nsis\", mode: \"nsis\", ext: [\"nsh\", \"nsi\"]},\n    {name: \"NTriples\", mimes: [\"application/n-triples\", \"application/n-quads\", \"text/n-triples\"],\n     mode: \"ntriples\", ext: [\"nt\", \"nq\"]},\n    {name: \"Objective-C\", mime: \"text/x-objectivec\", mode: \"clike\", ext: [\"m\"], alias: [\"objective-c\", \"objc\"]},\n    {name: \"Objective-C++\", mime: \"text/x-objectivec++\", mode: \"clike\", ext: [\"mm\"], alias: [\"objective-c++\", \"objc++\"]},\n    {name: \"OCaml\", mime: \"text/x-ocaml\", mode: \"mllike\", ext: [\"ml\", \"mli\", \"mll\", \"mly\"]},\n    {name: \"Octave\", mime: \"text/x-octave\", mode: \"octave\", ext: [\"m\"]},\n    {name: \"Oz\", mime: \"text/x-oz\", mode: \"oz\", ext: [\"oz\"]},\n    {name: \"Pascal\", mime: \"text/x-pascal\", mode: \"pascal\", ext: [\"p\", \"pas\"]},\n    {name: \"PEG.js\", mime: \"null\", mode: \"pegjs\", ext: [\"jsonld\"]},\n    {name: \"Perl\", mime: \"text/x-perl\", mode: \"perl\", ext: [\"pl\", \"pm\"]},\n    {name: \"PHP\", mimes: [\"text/x-php\", \"application/x-httpd-php\", \"application/x-httpd-php-open\"], mode: \"php\", ext: [\"php\", \"php3\", \"php4\", \"php5\", \"php7\", \"phtml\"]},\n    {name: \"Pig\", mime: \"text/x-pig\", mode: \"pig\", ext: [\"pig\"]},\n    {name: \"Plain Text\", mime: \"text/plain\", mode: \"null\", ext: [\"txt\", \"text\", \"conf\", \"def\", \"list\", \"log\"]},\n    {name: \"PLSQL\", mime: \"text/x-plsql\", mode: \"sql\", ext: [\"pls\"]},\n    {name: \"PostgreSQL\", mime: \"text/x-pgsql\", mode: \"sql\"},\n    {name: \"PowerShell\", mime: \"application/x-powershell\", mode: \"powershell\", ext: [\"ps1\", \"psd1\", \"psm1\"]},\n    {name: \"Properties files\", mime: \"text/x-properties\", mode: \"properties\", ext: [\"properties\", \"ini\", \"in\"], alias: [\"ini\", \"properties\"]},\n    {name: \"ProtoBuf\", mime: \"text/x-protobuf\", mode: \"protobuf\", ext: [\"proto\"]},\n    {name: \"Python\", mime: \"text/x-python\", mode: \"python\", ext: [\"BUILD\", \"bzl\", \"py\", \"pyw\"], file: /^(BUCK|BUILD)$/},\n    {name: \"Puppet\", mime: \"text/x-puppet\", mode: \"puppet\", ext: [\"pp\"]},\n    {name: \"Q\", mime: \"text/x-q\", mode: \"q\", ext: [\"q\"]},\n    {name: \"R\", mime: \"text/x-rsrc\", mode: \"r\", ext: [\"r\", \"R\"], alias: [\"rscript\"]},\n    {name: \"reStructuredText\", mime: \"text/x-rst\", mode: \"rst\", ext: [\"rst\"], alias: [\"rst\"]},\n    {name: \"RPM Changes\", mime: \"text/x-rpm-changes\", mode: \"rpm\"},\n    {name: \"RPM Spec\", mime: \"text/x-rpm-spec\", mode: \"rpm\", ext: [\"spec\"]},\n    {name: \"Ruby\", mime: \"text/x-ruby\", mode: \"ruby\", ext: [\"rb\"], alias: [\"jruby\", \"macruby\", \"rake\", \"rb\", \"rbx\"]},\n    {name: \"Rust\", mime: \"text/x-rustsrc\", mode: \"rust\", ext: [\"rs\"]},\n    {name: \"SAS\", mime: \"text/x-sas\", mode: \"sas\", ext: [\"sas\"]},\n    {name: \"Sass\", mime: \"text/x-sass\", mode: \"sass\", ext: [\"sass\"]},\n    {name: \"Scala\", mime: \"text/x-scala\", mode: \"clike\", ext: [\"scala\"]},\n    {name: \"Scheme\", mime: \"text/x-scheme\", mode: \"scheme\", ext: [\"scm\", \"ss\"]},\n    {name: \"SCSS\", mime: \"text/x-scss\", mode: \"css\", ext: [\"scss\"]},\n    {name: \"Shell\", mimes: [\"text/x-sh\", \"application/x-sh\"], mode: \"shell\", ext: [\"sh\", \"ksh\", \"bash\"], alias: [\"bash\", \"sh\", \"zsh\"], file: /^PKGBUILD$/},\n    {name: \"Sieve\", mime: \"application/sieve\", mode: \"sieve\", ext: [\"siv\", \"sieve\"]},\n    {name: \"Slim\", mimes: [\"text/x-slim\", \"application/x-slim\"], mode: \"slim\", ext: [\"slim\"]},\n    {name: \"Smalltalk\", mime: \"text/x-stsrc\", mode: \"smalltalk\", ext: [\"st\"]},\n    {name: \"Smarty\", mime: \"text/x-smarty\", mode: \"smarty\", ext: [\"tpl\"]},\n    {name: \"Solr\", mime: \"text/x-solr\", mode: \"solr\"},\n    {name: \"SML\", mime: \"text/x-sml\", mode: \"mllike\", ext: [\"sml\", \"sig\", \"fun\", \"smackspec\"]},\n    {name: \"Soy\", mime: \"text/x-soy\", mode: \"soy\", ext: [\"soy\"], alias: [\"closure template\"]},\n    {name: \"SPARQL\", mime: \"application/sparql-query\", mode: \"sparql\", ext: [\"rq\", \"sparql\"], alias: [\"sparul\"]},\n    {name: \"Spreadsheet\", mime: \"text/x-spreadsheet\", mode: \"spreadsheet\", alias: [\"excel\", \"formula\"]},\n    {name: \"SQL\", mime: \"text/x-sql\", mode: \"sql\", ext: [\"sql\"]},\n    {name: \"SQLite\", mime: \"text/x-sqlite\", mode: \"sql\"},\n    {name: \"Squirrel\", mime: \"text/x-squirrel\", mode: \"clike\", ext: [\"nut\"]},\n    {name: \"Stylus\", mime: \"text/x-styl\", mode: \"stylus\", ext: [\"styl\"]},\n    {name: \"Swift\", mime: \"text/x-swift\", mode: \"swift\", ext: [\"swift\"]},\n    {name: \"sTeX\", mime: \"text/x-stex\", mode: \"stex\"},\n    {name: \"LaTeX\", mime: \"text/x-latex\", mode: \"stex\", ext: [\"text\", \"ltx\", \"tex\"], alias: [\"tex\"]},\n    {name: \"SystemVerilog\", mime: \"text/x-systemverilog\", mode: \"verilog\", ext: [\"v\", \"sv\", \"svh\"]},\n    {name: \"Tcl\", mime: \"text/x-tcl\", mode: \"tcl\", ext: [\"tcl\"]},\n    {name: \"Textile\", mime: \"text/x-textile\", mode: \"textile\", ext: [\"textile\"]},\n    {name: \"TiddlyWiki\", mime: \"text/x-tiddlywiki\", mode: \"tiddlywiki\"},\n    {name: \"Tiki wiki\", mime: \"text/tiki\", mode: \"tiki\"},\n    {name: \"TOML\", mime: \"text/x-toml\", mode: \"toml\", ext: [\"toml\"]},\n    {name: \"Tornado\", mime: \"text/x-tornado\", mode: \"tornado\"},\n    {name: \"troff\", mime: \"text/troff\", mode: \"troff\", ext: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"]},\n    {name: \"TTCN\", mime: \"text/x-ttcn\", mode: \"ttcn\", ext: [\"ttcn\", \"ttcn3\", \"ttcnpp\"]},\n    {name: \"TTCN_CFG\", mime: \"text/x-ttcn-cfg\", mode: \"ttcn-cfg\", ext: [\"cfg\"]},\n    {name: \"Turtle\", mime: \"text/turtle\", mode: \"turtle\", ext: [\"ttl\"]},\n    {name: \"TypeScript\", mime: \"application/typescript\", mode: \"javascript\", ext: [\"ts\"], alias: [\"ts\"]},\n    {name: \"TypeScript-JSX\", mime: \"text/typescript-jsx\", mode: \"jsx\", ext: [\"tsx\"], alias: [\"tsx\"]},\n    {name: \"Twig\", mime: \"text/x-twig\", mode: \"twig\"},\n    {name: \"Web IDL\", mime: \"text/x-webidl\", mode: \"webidl\", ext: [\"webidl\"]},\n    {name: \"VB.NET\", mime: \"text/x-vb\", mode: \"vb\", ext: [\"vb\"]},\n    {name: \"VBScript\", mime: \"text/vbscript\", mode: \"vbscript\", ext: [\"vbs\"]},\n    {name: \"Velocity\", mime: \"text/velocity\", mode: \"velocity\", ext: [\"vtl\"]},\n    {name: \"Verilog\", mime: \"text/x-verilog\", mode: \"verilog\", ext: [\"v\"]},\n    {name: \"VHDL\", mime: \"text/x-vhdl\", mode: \"vhdl\", ext: [\"vhd\", \"vhdl\"]},\n    {name: \"Vue.js Component\", mimes: [\"script/x-vue\", \"text/x-vue\"], mode: \"vue\", ext: [\"vue\"]},\n    {name: \"XML\", mimes: [\"application/xml\", \"text/xml\"], mode: \"xml\", ext: [\"xml\", \"xsl\", \"xsd\", \"svg\"], alias: [\"rss\", \"wsdl\", \"xsd\"]},\n    {name: \"XQuery\", mime: \"application/xquery\", mode: \"xquery\", ext: [\"xy\", \"xquery\"]},\n    {name: \"Yacas\", mime: \"text/x-yacas\", mode: \"yacas\", ext: [\"ys\"]},\n    {name: \"YAML\", mimes: [\"text/x-yaml\", \"text/yaml\"], mode: \"yaml\", ext: [\"yaml\", \"yml\"], alias: [\"yml\"]},\n    {name: \"Z80\", mime: \"text/x-z80\", mode: \"z80\", ext: [\"z80\"]},\n    {name: \"mscgen\", mime: \"text/x-mscgen\", mode: \"mscgen\", ext: [\"mscgen\", \"mscin\", \"msc\"]},\n    {name: \"xu\", mime: \"text/x-xu\", mode: \"mscgen\", ext: [\"xu\"]},\n    {name: \"msgenny\", mime: \"text/x-msgenny\", mode: \"mscgen\", ext: [\"msgenny\"]},\n    {name: \"WebAssembly\", mime: \"text/webassembly\", mode: \"wast\", ext: [\"wat\", \"wast\"]},\n  ];\n  // Ensure all modes have a mime property for backwards compatibility\n  for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n    var info = CodeMirror.modeInfo[i];\n    if (info.mimes) info.mime = info.mimes[0];\n  }\n\n  CodeMirror.findModeByMIME = function(mime) {\n    mime = mime.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.mime == mime) return info;\n      if (info.mimes) for (var j = 0; j < info.mimes.length; j++)\n        if (info.mimes[j] == mime) return info;\n    }\n    if (/\\+xml$/.test(mime)) return CodeMirror.findModeByMIME(\"application/xml\")\n    if (/\\+json$/.test(mime)) return CodeMirror.findModeByMIME(\"application/json\")\n  };\n\n  CodeMirror.findModeByExtension = function(ext) {\n    ext = ext.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.ext) for (var j = 0; j < info.ext.length; j++)\n        if (info.ext[j] == ext) return info;\n    }\n  };\n\n  CodeMirror.findModeByFileName = function(filename) {\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.file && info.file.test(filename)) return info;\n    }\n    var dot = filename.lastIndexOf(\".\");\n    var ext = dot > -1 && filename.substring(dot + 1, filename.length);\n    if (ext) return CodeMirror.findModeByExtension(ext);\n  };\n\n  CodeMirror.findModeByName = function(name) {\n    name = name.toLowerCase();\n    for (var i = 0; i < CodeMirror.modeInfo.length; i++) {\n      var info = CodeMirror.modeInfo[i];\n      if (info.name.toLowerCase() == name) return info;\n      if (info.alias) for (var j = 0; j < info.alias.length; j++)\n        if (info.alias[j].toLowerCase() == name) return info;\n    }\n  };\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nvar htmlConfig = {\n  autoSelfClosers: {'area': true, 'base': true, 'br': true, 'col': true, 'command': true,\n                    'embed': true, 'frame': true, 'hr': true, 'img': true, 'input': true,\n                    'keygen': true, 'link': true, 'meta': true, 'param': true, 'source': true,\n                    'track': true, 'wbr': true, 'menuitem': true},\n  implicitlyClosed: {'dd': true, 'li': true, 'optgroup': true, 'option': true, 'p': true,\n                     'rp': true, 'rt': true, 'tbody': true, 'td': true, 'tfoot': true,\n                     'th': true, 'tr': true},\n  contextGrabbers: {\n    'dd': {'dd': true, 'dt': true},\n    'dt': {'dd': true, 'dt': true},\n    'li': {'li': true},\n    'option': {'option': true, 'optgroup': true},\n    'optgroup': {'optgroup': true},\n    'p': {'address': true, 'article': true, 'aside': true, 'blockquote': true, 'dir': true,\n          'div': true, 'dl': true, 'fieldset': true, 'footer': true, 'form': true,\n          'h1': true, 'h2': true, 'h3': true, 'h4': true, 'h5': true, 'h6': true,\n          'header': true, 'hgroup': true, 'hr': true, 'menu': true, 'nav': true, 'ol': true,\n          'p': true, 'pre': true, 'section': true, 'table': true, 'ul': true},\n    'rp': {'rp': true, 'rt': true},\n    'rt': {'rp': true, 'rt': true},\n    'tbody': {'tbody': true, 'tfoot': true},\n    'td': {'td': true, 'th': true},\n    'tfoot': {'tbody': true},\n    'th': {'td': true, 'th': true},\n    'thead': {'tbody': true, 'tfoot': true},\n    'tr': {'tr': true}\n  },\n  doNotIndent: {\"pre\": true},\n  allowUnquoted: true,\n  allowMissing: true,\n  caseFold: true\n}\n\nvar xmlConfig = {\n  autoSelfClosers: {},\n  implicitlyClosed: {},\n  contextGrabbers: {},\n  doNotIndent: {},\n  allowUnquoted: false,\n  allowMissing: false,\n  allowMissingTagName: false,\n  caseFold: false\n}\n\nCodeMirror.defineMode(\"xml\", function(editorConf, config_) {\n  var indentUnit = editorConf.indentUnit\n  var config = {}\n  var defaults = config_.htmlMode ? htmlConfig : xmlConfig\n  for (var prop in defaults) config[prop] = defaults[prop]\n  for (var prop in config_) config[prop] = config_[prop]\n\n  // Return variables for tokenizers\n  var type, setStyle;\n\n  function inText(stream, state) {\n    function chain(parser) {\n      state.tokenize = parser;\n      return parser(stream, state);\n    }\n\n    var ch = stream.next();\n    if (ch == \"<\") {\n      if (stream.eat(\"!\")) {\n        if (stream.eat(\"[\")) {\n          if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));\n          else return null;\n        } else if (stream.match(\"--\")) {\n          return chain(inBlock(\"comment\", \"-->\"));\n        } else if (stream.match(\"DOCTYPE\", true, true)) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          return chain(doctype(1));\n        } else {\n          return null;\n        }\n      } else if (stream.eat(\"?\")) {\n        stream.eatWhile(/[\\w\\._\\-]/);\n        state.tokenize = inBlock(\"meta\", \"?>\");\n        return \"meta\";\n      } else {\n        type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n        state.tokenize = inTag;\n        return \"tag bracket\";\n      }\n    } else if (ch == \"&\") {\n      var ok;\n      if (stream.eat(\"#\")) {\n        if (stream.eat(\"x\")) {\n          ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n        } else {\n          ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n        }\n      } else {\n        ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n      }\n      return ok ? \"atom\" : \"error\";\n    } else {\n      stream.eatWhile(/[^&<]/);\n      return null;\n    }\n  }\n  inText.isInText = true;\n\n  function inTag(stream, state) {\n    var ch = stream.next();\n    if (ch == \">\" || (ch == \"/\" && stream.eat(\">\"))) {\n      state.tokenize = inText;\n      type = ch == \">\" ? \"endTag\" : \"selfcloseTag\";\n      return \"tag bracket\";\n    } else if (ch == \"=\") {\n      type = \"equals\";\n      return null;\n    } else if (ch == \"<\") {\n      state.tokenize = inText;\n      state.state = baseState;\n      state.tagName = state.tagStart = null;\n      var next = state.tokenize(stream, state);\n      return next ? next + \" tag error\" : \"tag error\";\n    } else if (/[\\'\\\"]/.test(ch)) {\n      state.tokenize = inAttribute(ch);\n      state.stringStartCol = stream.column();\n      return state.tokenize(stream, state);\n    } else {\n      stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n      return \"word\";\n    }\n  }\n\n  function inAttribute(quote) {\n    var closure = function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.next() == quote) {\n          state.tokenize = inTag;\n          break;\n        }\n      }\n      return \"string\";\n    };\n    closure.isInAttribute = true;\n    return closure;\n  }\n\n  function inBlock(style, terminator) {\n    return function(stream, state) {\n      while (!stream.eol()) {\n        if (stream.match(terminator)) {\n          state.tokenize = inText;\n          break;\n        }\n        stream.next();\n      }\n      return style;\n    }\n  }\n\n  function doctype(depth) {\n    return function(stream, state) {\n      var ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == \"<\") {\n          state.tokenize = doctype(depth + 1);\n          return state.tokenize(stream, state);\n        } else if (ch == \">\") {\n          if (depth == 1) {\n            state.tokenize = inText;\n            break;\n          } else {\n            state.tokenize = doctype(depth - 1);\n            return state.tokenize(stream, state);\n          }\n        }\n      }\n      return \"meta\";\n    };\n  }\n\n  function Context(state, tagName, startOfLine) {\n    this.prev = state.context;\n    this.tagName = tagName;\n    this.indent = state.indented;\n    this.startOfLine = startOfLine;\n    if (config.doNotIndent.hasOwnProperty(tagName) || (state.context && state.context.noIndent))\n      this.noIndent = true;\n  }\n  function popContext(state) {\n    if (state.context) state.context = state.context.prev;\n  }\n  function maybePopContext(state, nextTagName) {\n    var parentTagName;\n    while (true) {\n      if (!state.context) {\n        return;\n      }\n      parentTagName = state.context.tagName;\n      if (!config.contextGrabbers.hasOwnProperty(parentTagName) ||\n          !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n        return;\n      }\n      popContext(state);\n    }\n  }\n\n  function baseState(type, stream, state) {\n    if (type == \"openTag\") {\n      state.tagStart = stream.column();\n      return tagNameState;\n    } else if (type == \"closeTag\") {\n      return closeTagNameState;\n    } else {\n      return baseState;\n    }\n  }\n  function tagNameState(type, stream, state) {\n    if (type == \"word\") {\n      state.tagName = stream.current();\n      setStyle = \"tag\";\n      return attrState;\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return attrState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return tagNameState;\n    }\n  }\n  function closeTagNameState(type, stream, state) {\n    if (type == \"word\") {\n      var tagName = stream.current();\n      if (state.context && state.context.tagName != tagName &&\n          config.implicitlyClosed.hasOwnProperty(state.context.tagName))\n        popContext(state);\n      if ((state.context && state.context.tagName == tagName) || config.matchClosing === false) {\n        setStyle = \"tag\";\n        return closeState;\n      } else {\n        setStyle = \"tag error\";\n        return closeStateErr;\n      }\n    } else if (config.allowMissingTagName && type == \"endTag\") {\n      setStyle = \"tag bracket\";\n      return closeState(type, stream, state);\n    } else {\n      setStyle = \"error\";\n      return closeStateErr;\n    }\n  }\n\n  function closeState(type, _stream, state) {\n    if (type != \"endTag\") {\n      setStyle = \"error\";\n      return closeState;\n    }\n    popContext(state);\n    return baseState;\n  }\n  function closeStateErr(type, stream, state) {\n    setStyle = \"error\";\n    return closeState(type, stream, state);\n  }\n\n  function attrState(type, _stream, state) {\n    if (type == \"word\") {\n      setStyle = \"attribute\";\n      return attrEqState;\n    } else if (type == \"endTag\" || type == \"selfcloseTag\") {\n      var tagName = state.tagName, tagStart = state.tagStart;\n      state.tagName = state.tagStart = null;\n      if (type == \"selfcloseTag\" ||\n          config.autoSelfClosers.hasOwnProperty(tagName)) {\n        maybePopContext(state, tagName);\n      } else {\n        maybePopContext(state, tagName);\n        state.context = new Context(state, tagName, tagStart == state.indented);\n      }\n      return baseState;\n    }\n    setStyle = \"error\";\n    return attrState;\n  }\n  function attrEqState(type, stream, state) {\n    if (type == \"equals\") return attrValueState;\n    if (!config.allowMissing) setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrValueState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    if (type == \"word\" && config.allowUnquoted) {setStyle = \"string\"; return attrState;}\n    setStyle = \"error\";\n    return attrState(type, stream, state);\n  }\n  function attrContinuedState(type, stream, state) {\n    if (type == \"string\") return attrContinuedState;\n    return attrState(type, stream, state);\n  }\n\n  return {\n    startState: function(baseIndent) {\n      var state = {tokenize: inText,\n                   state: baseState,\n                   indented: baseIndent || 0,\n                   tagName: null, tagStart: null,\n                   context: null}\n      if (baseIndent != null) state.baseIndent = baseIndent\n      return state\n    },\n\n    token: function(stream, state) {\n      if (!state.tagName && stream.sol())\n        state.indented = stream.indentation();\n\n      if (stream.eatSpace()) return null;\n      type = null;\n      var style = state.tokenize(stream, state);\n      if ((style || type) && style != \"comment\") {\n        setStyle = null;\n        state.state = state.state(type || style, stream, state);\n        if (setStyle)\n          style = setStyle == \"error\" ? style + \" error\" : setStyle;\n      }\n      return style;\n    },\n\n    indent: function(state, textAfter, fullLine) {\n      var context = state.context;\n      // Indent multi-line strings (e.g. css).\n      if (state.tokenize.isInAttribute) {\n        if (state.tagStart == state.indented)\n          return state.stringStartCol + 1;\n        else\n          return state.indented + indentUnit;\n      }\n      if (context && context.noIndent) return CodeMirror.Pass;\n      if (state.tokenize != inTag && state.tokenize != inText)\n        return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n      // Indent the starts of attribute names.\n      if (state.tagName) {\n        if (config.multilineTagIndentPastTag !== false)\n          return state.tagStart + state.tagName.length + 2;\n        else\n          return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n      }\n      if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n      var tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n      if (tagAfter && tagAfter[1]) { // Closing tag spotted\n        while (context) {\n          if (context.tagName == tagAfter[2]) {\n            context = context.prev;\n            break;\n          } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n            context = context.prev;\n          } else {\n            break;\n          }\n        }\n      } else if (tagAfter) { // Opening tag spotted\n        while (context) {\n          var grabbers = config.contextGrabbers[context.tagName];\n          if (grabbers && grabbers.hasOwnProperty(tagAfter[2]))\n            context = context.prev;\n          else\n            break;\n        }\n      }\n      while (context && context.prev && !context.startOfLine)\n        context = context.prev;\n      if (context) return context.indent + indentUnit;\n      else return state.baseIndent || 0;\n    },\n\n    electricInput: /<\\/[\\s\\w:]+>$/,\n    blockCommentStart: \"<!--\",\n    blockCommentEnd: \"-->\",\n\n    configuration: config.htmlMode ? \"html\" : \"xml\",\n    helperType: config.htmlMode ? \"html\" : \"xml\",\n\n    skipAttribute: function(state) {\n      if (state.state == attrValueState)\n        state.state = attrState\n    },\n\n    xmlCurrentTag: function(state) {\n      return state.tagName ? {name: state.tagName, close: state.type == \"closeTag\"} : null\n    },\n\n    xmlCurrentContext: function(state) {\n      var context = []\n      for (var cx = state.context; cx; cx = cx.prev)\n        if (cx.tagName) context.push(cx.tagName)\n      return context.reverse()\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/xml\", \"xml\");\nCodeMirror.defineMIME(\"application/xml\", \"xml\");\nif (!CodeMirror.mimeModes.hasOwnProperty(\"text/html\"))\n  CodeMirror.defineMIME(\"text/html\", {name: \"xml\", htmlMode: true});\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\nvar CodeMirror = require('codemirror');\n\nCodeMirror.commands.tabAndIndentMarkdownList = function (cm) {\n    var ranges = cm.listSelections();\n    var pos = ranges[0].head;\n    var eolState = cm.getStateAfter(pos.line);\n    var inList = eolState.list !== false;\n\n    if (inList) {\n        cm.execCommand('indentMore');\n        return;\n    }\n\n    if (cm.options.indentWithTabs) {\n        cm.execCommand('insertTab');\n    }\n    else {\n        var spaces = Array(cm.options.tabSize + 1).join(' ');\n        cm.replaceSelection(spaces);\n    }\n};\n\nCodeMirror.commands.shiftTabAndUnindentMarkdownList = function (cm) {\n    var ranges = cm.listSelections();\n    var pos = ranges[0].head;\n    var eolState = cm.getStateAfter(pos.line);\n    var inList = eolState.list !== false;\n\n    if (inList) {\n        cm.execCommand('indentLess');\n        return;\n    }\n\n    if (cm.options.indentWithTabs) {\n        cm.execCommand('insertTab');\n    }\n    else {\n        var spaces = Array(cm.options.tabSize + 1).join(' ');\n        cm.replaceSelection(spaces);\n    }\n};\n","'use strict';\nvar CodeMirror = require('codemirror');\nrequire('codemirror/addon/edit/continuelist.js');\nrequire('./codemirror/tablist');\nrequire('codemirror/addon/display/fullscreen.js');\nrequire('codemirror/mode/markdown/markdown.js');\nrequire('codemirror/addon/mode/overlay.js');\nrequire('codemirror/addon/display/placeholder.js');\nrequire('codemirror/addon/display/autorefresh.js');\nrequire('codemirror/addon/selection/mark-selection.js');\nrequire('codemirror/addon/search/searchcursor.js');\nrequire('codemirror/mode/gfm/gfm.js');\nrequire('codemirror/mode/xml/xml.js');\nvar CodeMirrorSpellChecker = require('codemirror-spell-checker');\nvar marked = require('marked/lib/marked');\n\n\n// Some variables\nvar isMac = /Mac/.test(navigator.platform);\nvar anchorToExternalRegex = new RegExp(/(<a.*?https?:\\/\\/.*?[^a]>)+?/g);\n\n// Mapping of actions that can be bound to keyboard shortcuts or toolbar buttons\nvar bindings = {\n    'toggleBold': toggleBold,\n    'toggleItalic': toggleItalic,\n    'drawLink': drawLink,\n    'toggleHeadingSmaller': toggleHeadingSmaller,\n    'toggleHeadingBigger': toggleHeadingBigger,\n    'drawImage': drawImage,\n    'toggleBlockquote': toggleBlockquote,\n    'toggleOrderedList': toggleOrderedList,\n    'toggleUnorderedList': toggleUnorderedList,\n    'toggleCodeBlock': toggleCodeBlock,\n    'togglePreview': togglePreview,\n    'toggleStrikethrough': toggleStrikethrough,\n    'toggleHeading1': toggleHeading1,\n    'toggleHeading2': toggleHeading2,\n    'toggleHeading3': toggleHeading3,\n    'cleanBlock': cleanBlock,\n    'drawTable': drawTable,\n    'drawHorizontalRule': drawHorizontalRule,\n    'undo': undo,\n    'redo': redo,\n    'toggleSideBySide': toggleSideBySide,\n    'toggleFullScreen': toggleFullScreen,\n};\n\nvar shortcuts = {\n    'toggleBold': 'Cmd-B',\n    'toggleItalic': 'Cmd-I',\n    'drawLink': 'Cmd-K',\n    'toggleHeadingSmaller': 'Cmd-H',\n    'toggleHeadingBigger': 'Shift-Cmd-H',\n    'cleanBlock': 'Cmd-E',\n    'drawImage': 'Cmd-Alt-I',\n    'toggleBlockquote': 'Cmd-\\'',\n    'toggleOrderedList': 'Cmd-Alt-L',\n    'toggleUnorderedList': 'Cmd-L',\n    'toggleCodeBlock': 'Cmd-Alt-C',\n    'togglePreview': 'Cmd-P',\n    'toggleSideBySide': 'F9',\n    'toggleFullScreen': 'F11',\n};\n\nvar getBindingName = function (f) {\n    for (var key in bindings) {\n        if (bindings[key] === f) {\n            return key;\n        }\n    }\n    return null;\n};\n\nvar isMobile = function () {\n    var check = false;\n    (function (a) {\n        if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4))) check = true;\n    })(navigator.userAgent || navigator.vendor || window.opera);\n    return check;\n};\n\n/**\n * Modify HTML to add 'target=\"_blank\"' to links so they open in new tabs by default.\n * @param {string} htmlText - HTML to be modified.\n * @return {string} The modified HTML text.\n */\nfunction addAnchorTargetBlank(htmlText) {\n    var match;\n    while ((match = anchorToExternalRegex.exec(htmlText)) !== null) {\n        // With only one capture group in the RegExp, we can safely take the first index from the match.\n        var linkString = match[0];\n\n        if (linkString.indexOf('target=') === -1) {\n            var fixedLinkString = linkString.replace(/>$/, ' target=\"_blank\">');\n            htmlText = htmlText.replace(linkString, fixedLinkString);\n        }\n    }\n    return htmlText;\n}\n\n/**\n * Modify HTML to remove the list-style when rendering checkboxes.\n * @param {string} htmlText - HTML to be modified.\n * @return {string} The modified HTML text.\n */\nfunction removeListStyleWhenCheckbox(htmlText) {\n\n    var parser = new DOMParser();\n    var htmlDoc = parser.parseFromString(htmlText, 'text/html');\n    var listItems = htmlDoc.getElementsByTagName('li');\n\n    for (var i = 0; i < listItems.length; i++) {\n        var listItem = listItems[i];\n\n        for (var j = 0; j < listItem.children.length; j++) {\n            var listItemChild = listItem.children[j];\n\n            if (listItemChild instanceof HTMLInputElement && listItemChild.type === 'checkbox') {\n                // From Github: margin: 0 .2em .25em -1.6em;\n                listItem.style.marginLeft = '-1.5em';\n                listItem.style.listStyleType = 'none';\n            }\n        }\n    }\n\n    return htmlDoc.documentElement.innerHTML;\n}\n\n/**\n * Fix shortcut. Mac use Command, others use Ctrl.\n */\nfunction fixShortcut(name) {\n    if (isMac) {\n        name = name.replace('Ctrl', 'Cmd');\n    } else {\n        name = name.replace('Cmd', 'Ctrl');\n    }\n    return name;\n}\n\n/**\n * Create dropdown block\n */\nfunction createToolbarDropdown(options, enableTooltips, shortcuts, parent) {\n    var el = createToolbarButton(options, false, enableTooltips, shortcuts, 'button', parent);\n    el.className += ' easymde-dropdown';\n    var content = document.createElement('div');\n    content.className = 'easymde-dropdown-content';\n    for (var childrenIndex = 0; childrenIndex < options.children.length; childrenIndex++) {\n\n        var child = options.children[childrenIndex];\n        var childElement;\n\n        if (typeof child === 'string' && child in toolbarBuiltInButtons) {\n            childElement = createToolbarButton(toolbarBuiltInButtons[child], true, enableTooltips, shortcuts, 'button', parent);\n        } else {\n            childElement = createToolbarButton(child, true, enableTooltips, shortcuts, 'button', parent);\n        }\n\n        content.appendChild(childElement);\n    }\n    el.appendChild(content);\n    return el;\n}\n\n/**\n * Create button element for toolbar.\n */\nfunction createToolbarButton(options, enableActions, enableTooltips, shortcuts, markup, parent) {\n    options = options || {};\n    var el = document.createElement(markup);\n    el.className = options.name;\n    el.setAttribute('type', markup);\n    enableTooltips = (enableTooltips == undefined) ? true : enableTooltips;\n\n    // Properly hande custom shortcuts\n    if (options.name && options.name in shortcuts) {\n        bindings[options.name] = options.action;\n    }\n\n    if (options.title && enableTooltips) {\n        el.title = createTooltip(options.title, options.action, shortcuts);\n\n        if (isMac) {\n            el.title = el.title.replace('Ctrl', '');\n            el.title = el.title.replace('Alt', '');\n        }\n    }\n\n    if (options.noDisable) {\n        el.classList.add('no-disable');\n    }\n\n    if (options.noMobile) {\n        el.classList.add('no-mobile');\n    }\n\n    // Prevent errors if there is no class name in custom options\n    var classNameParts = [];\n    if(typeof options.className !== 'undefined') {\n        classNameParts = options.className.split(' ');\n    }\n\n    // Provide backwards compatibility with simple-markdown-editor by adding custom classes to the button.\n    var iconClasses = [];\n    for (var classNameIndex = 0; classNameIndex < classNameParts.length; classNameIndex++) {\n        var classNamePart = classNameParts[classNameIndex];\n        // Split icon classes from the button.\n        // Regex will detect \"fa\", \"fas\", \"fa-something\" and \"fa-some-icon-1\", but not \"fanfare\".\n        if (classNamePart.match(/^fa([srlb]|(-[\\w-]*)|$)/)) {\n            iconClasses.push(classNamePart);\n        } else {\n            el.classList.add(classNamePart);\n        }\n    }\n\n    el.tabIndex = -1;\n\n    // Create icon element and append as a child to the button\n    var icon = document.createElement('i');\n    for (var iconClassIndex = 0; iconClassIndex < iconClasses.length; iconClassIndex++) {\n        var iconClass = iconClasses[iconClassIndex];\n        icon.classList.add(iconClass);\n    }\n    el.appendChild(icon);\n\n    // If there is a custom icon markup set, use that\n    if (typeof options.icon !== 'undefined') {\n        el.innerHTML = options.icon;\n    }\n\n    if (options.action && enableActions) {\n        if (typeof options.action === 'function') {\n            el.onclick = function (e) {\n                e.preventDefault();\n                options.action(parent);\n            };\n        } else if (typeof options.action === 'string') {\n            el.onclick = function (e) {\n                e.preventDefault();\n                window.open(options.action, '_blank');\n            };\n        }\n    }\n\n    return el;\n}\n\nfunction createSep() {\n    var el = document.createElement('i');\n    el.className = 'separator';\n    el.innerHTML = '|';\n    return el;\n}\n\nfunction createTooltip(title, action, shortcuts) {\n    var actionName;\n    var tooltip = title;\n\n    if (action) {\n        actionName = getBindingName(action);\n        if (shortcuts[actionName]) {\n            tooltip += ' (' + fixShortcut(shortcuts[actionName]) + ')';\n        }\n    }\n\n    return tooltip;\n}\n\n/**\n * The state of CodeMirror at the given position.\n */\nfunction getState(cm, pos) {\n    pos = pos || cm.getCursor('start');\n    var stat = cm.getTokenAt(pos);\n    if (!stat.type) return {};\n\n    var types = stat.type.split(' ');\n\n    var ret = {},\n        data, text;\n    for (var i = 0; i < types.length; i++) {\n        data = types[i];\n        if (data === 'strong') {\n            ret.bold = true;\n        } else if (data === 'variable-2') {\n            text = cm.getLine(pos.line);\n            if (/^\\s*\\d+\\.\\s/.test(text)) {\n                ret['ordered-list'] = true;\n            } else {\n                ret['unordered-list'] = true;\n            }\n        } else if (data === 'atom') {\n            ret.quote = true;\n        } else if (data === 'em') {\n            ret.italic = true;\n        } else if (data === 'quote') {\n            ret.quote = true;\n        } else if (data === 'strikethrough') {\n            ret.strikethrough = true;\n        } else if (data === 'comment') {\n            ret.code = true;\n        } else if (data === 'link') {\n            ret.link = true;\n        } else if (data === 'tag') {\n            ret.image = true;\n        } else if (data.match(/^header(-[1-6])?$/)) {\n            ret[data.replace('header', 'heading')] = true;\n        }\n    }\n    return ret;\n}\n\n\n// Saved overflow setting\nvar saved_overflow = '';\n\n/**\n * Toggle full screen of the editor.\n */\nfunction toggleFullScreen(editor) {\n    // Set fullscreen\n    var cm = editor.codemirror;\n    cm.setOption('fullScreen', !cm.getOption('fullScreen'));\n\n\n    // Prevent scrolling on body during fullscreen active\n    if (cm.getOption('fullScreen')) {\n        saved_overflow = document.body.style.overflow;\n        document.body.style.overflow = 'hidden';\n    } else {\n        document.body.style.overflow = saved_overflow;\n    }\n\n\n    // Hide side by side if needed\n    var sidebyside = cm.getWrapperElement().nextSibling;\n    if (/editor-preview-active-side/.test(sidebyside.className))\n        toggleSideBySide(editor);\n\n    if (editor.options.onToggleFullScreen) {\n        editor.options.onToggleFullScreen(cm.getOption('fullScreen') || false);\n    }\n\n    // Remove or set maxHeight\n    if (typeof editor.options.maxHeight !== 'undefined') {\n        if (cm.getOption('fullScreen')) {\n            cm.getScrollerElement().style.removeProperty('height');\n            sidebyside.style.removeProperty('height');\n        } else {\n            cm.getScrollerElement().style.height = editor.options.maxHeight;\n            editor.setPreviewMaxHeight();\n        }\n    }\n\n\n    // Update toolbar class\n    if (!/fullscreen/.test(editor.toolbar_div.className)) {\n        editor.toolbar_div.className += ' fullscreen';\n    } else {\n        editor.toolbar_div.className = editor.toolbar_div.className.replace(/\\s*fullscreen\\b/, '');\n    }\n\n\n    // Update toolbar button\n    if (editor.toolbarElements && editor.toolbarElements.fullscreen) {\n        var toolbarButton = editor.toolbarElements.fullscreen;\n\n        if (!/active/.test(toolbarButton.className)) {\n            toolbarButton.className += ' active';\n        } else {\n            toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n        }\n    }\n}\n\n\n/**\n * Action for toggling bold.\n */\nfunction toggleBold(editor) {\n    _toggleBlock(editor, 'bold', editor.options.blockStyles.bold);\n}\n\n\n/**\n * Action for toggling italic.\n */\nfunction toggleItalic(editor) {\n    _toggleBlock(editor, 'italic', editor.options.blockStyles.italic);\n}\n\n\n/**\n * Action for toggling strikethrough.\n */\nfunction toggleStrikethrough(editor) {\n    _toggleBlock(editor, 'strikethrough', '~~');\n}\n\n/**\n * Action for toggling code block.\n */\nfunction toggleCodeBlock(editor) {\n    var fenceCharsToInsert = editor.options.blockStyles.code;\n\n    function fencing_line(line) {\n        /* return true, if this is a ``` or ~~~ line */\n        if (typeof line !== 'object') {\n            throw 'fencing_line() takes a \\'line\\' object (not a line number, or line text).  Got: ' + typeof line + ': ' + line;\n        }\n        return line.styles && line.styles[2] && line.styles[2].indexOf('formatting-code-block') !== -1;\n    }\n\n    function token_state(token) {\n        // base goes an extra level deep when mode backdrops are used, e.g. spellchecker on\n        return token.state.base.base || token.state.base;\n    }\n\n    function code_type(cm, line_num, line, firstTok, lastTok) {\n        /*\n         * Return \"single\", \"indented\", \"fenced\" or false\n         *\n         * cm and line_num are required.  Others are optional for efficiency\n         *   To check in the middle of a line, pass in firstTok yourself.\n         */\n        line = line || cm.getLineHandle(line_num);\n        firstTok = firstTok || cm.getTokenAt({\n            line: line_num,\n            ch: 1,\n        });\n        lastTok = lastTok || (!!line.text && cm.getTokenAt({\n            line: line_num,\n            ch: line.text.length - 1,\n        }));\n        var types = firstTok.type ? firstTok.type.split(' ') : [];\n        if (lastTok && token_state(lastTok).indentedCode) {\n            // have to check last char, since first chars of first line aren\"t marked as indented\n            return 'indented';\n        } else if (types.indexOf('comment') === -1) {\n            // has to be after \"indented\" check, since first chars of first indented line aren\"t marked as such\n            return false;\n        } else if (token_state(firstTok).fencedChars || token_state(lastTok).fencedChars || fencing_line(line)) {\n            return 'fenced';\n        } else {\n            return 'single';\n        }\n    }\n\n    function insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert) {\n        var start_line_sel = cur_start.line + 1,\n            end_line_sel = cur_end.line + 1,\n            sel_multi = cur_start.line !== cur_end.line,\n            repl_start = fenceCharsToInsert + '\\n',\n            repl_end = '\\n' + fenceCharsToInsert;\n        if (sel_multi) {\n            end_line_sel++;\n        }\n        // handle last char including \\n or not\n        if (sel_multi && cur_end.ch === 0) {\n            repl_end = fenceCharsToInsert + '\\n';\n            end_line_sel--;\n        }\n        _replaceSelection(cm, false, [repl_start, repl_end]);\n        cm.setSelection({\n            line: start_line_sel,\n            ch: 0,\n        }, {\n            line: end_line_sel,\n            ch: 0,\n        });\n    }\n\n    var cm = editor.codemirror,\n        cur_start = cm.getCursor('start'),\n        cur_end = cm.getCursor('end'),\n        tok = cm.getTokenAt({\n            line: cur_start.line,\n            ch: cur_start.ch || 1,\n        }), // avoid ch 0 which is a cursor pos but not token\n        line = cm.getLineHandle(cur_start.line),\n        is_code = code_type(cm, cur_start.line, line, tok);\n    var block_start, block_end, lineCount;\n\n    if (is_code === 'single') {\n        // similar to some EasyMDE _toggleBlock logic\n        var start = line.text.slice(0, cur_start.ch).replace('`', ''),\n            end = line.text.slice(cur_start.ch).replace('`', '');\n        cm.replaceRange(start + end, {\n            line: cur_start.line,\n            ch: 0,\n        }, {\n            line: cur_start.line,\n            ch: 99999999999999,\n        });\n        cur_start.ch--;\n        if (cur_start !== cur_end) {\n            cur_end.ch--;\n        }\n        cm.setSelection(cur_start, cur_end);\n        cm.focus();\n    } else if (is_code === 'fenced') {\n        if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n            // use selection\n\n            // find the fenced line so we know what type it is (tilde, backticks, number of them)\n            for (block_start = cur_start.line; block_start >= 0; block_start--) {\n                line = cm.getLineHandle(block_start);\n                if (fencing_line(line)) {\n                    break;\n                }\n            }\n            var fencedTok = cm.getTokenAt({\n                line: block_start,\n                ch: 1,\n            });\n            var fence_chars = token_state(fencedTok).fencedChars;\n            var start_text, start_line;\n            var end_text, end_line;\n            // check for selection going up against fenced lines, in which case we don't want to add more fencing\n            if (fencing_line(cm.getLineHandle(cur_start.line))) {\n                start_text = '';\n                start_line = cur_start.line;\n            } else if (fencing_line(cm.getLineHandle(cur_start.line - 1))) {\n                start_text = '';\n                start_line = cur_start.line - 1;\n            } else {\n                start_text = fence_chars + '\\n';\n                start_line = cur_start.line;\n            }\n            if (fencing_line(cm.getLineHandle(cur_end.line))) {\n                end_text = '';\n                end_line = cur_end.line;\n                if (cur_end.ch === 0) {\n                    end_line += 1;\n                }\n            } else if (cur_end.ch !== 0 && fencing_line(cm.getLineHandle(cur_end.line + 1))) {\n                end_text = '';\n                end_line = cur_end.line + 1;\n            } else {\n                end_text = fence_chars + '\\n';\n                end_line = cur_end.line + 1;\n            }\n            if (cur_end.ch === 0) {\n                // full last line selected, putting cursor at beginning of next\n                end_line -= 1;\n            }\n            cm.operation(function () {\n                // end line first, so that line numbers don't change\n                cm.replaceRange(end_text, {\n                    line: end_line,\n                    ch: 0,\n                }, {\n                    line: end_line + (end_text ? 0 : 1),\n                    ch: 0,\n                });\n                cm.replaceRange(start_text, {\n                    line: start_line,\n                    ch: 0,\n                }, {\n                    line: start_line + (start_text ? 0 : 1),\n                    ch: 0,\n                });\n            });\n            cm.setSelection({\n                line: start_line + (start_text ? 1 : 0),\n                ch: 0,\n            }, {\n                line: end_line + (start_text ? 1 : -1),\n                ch: 0,\n            });\n            cm.focus();\n        } else {\n            // no selection, search for ends of this fenced block\n            var search_from = cur_start.line;\n            if (fencing_line(cm.getLineHandle(cur_start.line))) { // gets a little tricky if cursor is right on a fenced line\n                if (code_type(cm, cur_start.line + 1) === 'fenced') {\n                    block_start = cur_start.line;\n                    search_from = cur_start.line + 1; // for searching for \"end\"\n                } else {\n                    block_end = cur_start.line;\n                    search_from = cur_start.line - 1; // for searching for \"start\"\n                }\n            }\n            if (block_start === undefined) {\n                for (block_start = search_from; block_start >= 0; block_start--) {\n                    line = cm.getLineHandle(block_start);\n                    if (fencing_line(line)) {\n                        break;\n                    }\n                }\n            }\n            if (block_end === undefined) {\n                lineCount = cm.lineCount();\n                for (block_end = search_from; block_end < lineCount; block_end++) {\n                    line = cm.getLineHandle(block_end);\n                    if (fencing_line(line)) {\n                        break;\n                    }\n                }\n            }\n            cm.operation(function () {\n                cm.replaceRange('', {\n                    line: block_start,\n                    ch: 0,\n                }, {\n                    line: block_start + 1,\n                    ch: 0,\n                });\n                cm.replaceRange('', {\n                    line: block_end - 1,\n                    ch: 0,\n                }, {\n                    line: block_end,\n                    ch: 0,\n                });\n            });\n            cm.focus();\n        }\n    } else if (is_code === 'indented') {\n        if (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n            // use selection\n            block_start = cur_start.line;\n            block_end = cur_end.line;\n            if (cur_end.ch === 0) {\n                block_end--;\n            }\n        } else {\n            // no selection, search for ends of this indented block\n            for (block_start = cur_start.line; block_start >= 0; block_start--) {\n                line = cm.getLineHandle(block_start);\n                if (line.text.match(/^\\s*$/)) {\n                    // empty or all whitespace - keep going\n                    continue;\n                } else {\n                    if (code_type(cm, block_start, line) !== 'indented') {\n                        block_start += 1;\n                        break;\n                    }\n                }\n            }\n            lineCount = cm.lineCount();\n            for (block_end = cur_start.line; block_end < lineCount; block_end++) {\n                line = cm.getLineHandle(block_end);\n                if (line.text.match(/^\\s*$/)) {\n                    // empty or all whitespace - keep going\n                    continue;\n                } else {\n                    if (code_type(cm, block_end, line) !== 'indented') {\n                        block_end -= 1;\n                        break;\n                    }\n                }\n            }\n        }\n        // if we are going to un-indent based on a selected set of lines, and the next line is indented too, we need to\n        // insert a blank line so that the next line(s) continue to be indented code\n        var next_line = cm.getLineHandle(block_end + 1),\n            next_line_last_tok = next_line && cm.getTokenAt({\n                line: block_end + 1,\n                ch: next_line.text.length - 1,\n            }),\n            next_line_indented = next_line_last_tok && token_state(next_line_last_tok).indentedCode;\n        if (next_line_indented) {\n            cm.replaceRange('\\n', {\n                line: block_end + 1,\n                ch: 0,\n            });\n        }\n\n        for (var i = block_start; i <= block_end; i++) {\n            cm.indentLine(i, 'subtract'); // TODO: this doesn't get tracked in the history, so can't be undone :(\n        }\n        cm.focus();\n    } else {\n        // insert code formatting\n        var no_sel_and_starting_of_line = (cur_start.line === cur_end.line && cur_start.ch === cur_end.ch && cur_start.ch === 0);\n        var sel_multi = cur_start.line !== cur_end.line;\n        if (no_sel_and_starting_of_line || sel_multi) {\n            insertFencingAtSelection(cm, cur_start, cur_end, fenceCharsToInsert);\n        } else {\n            _replaceSelection(cm, false, ['`', '`']);\n        }\n    }\n}\n\n/**\n * Action for toggling blockquote.\n */\nfunction toggleBlockquote(editor) {\n    var cm = editor.codemirror;\n    _toggleLine(cm, 'quote');\n}\n\n/**\n * Action for toggling heading size: normal -> h1 -> h2 -> h3 -> h4 -> h5 -> h6 -> normal\n */\nfunction toggleHeadingSmaller(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, 'smaller');\n}\n\n/**\n * Action for toggling heading size: normal -> h6 -> h5 -> h4 -> h3 -> h2 -> h1 -> normal\n */\nfunction toggleHeadingBigger(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, 'bigger');\n}\n\n/**\n * Action for toggling heading size 1\n */\nfunction toggleHeading1(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, undefined, 1);\n}\n\n/**\n * Action for toggling heading size 2\n */\nfunction toggleHeading2(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, undefined, 2);\n}\n\n/**\n * Action for toggling heading size 3\n */\nfunction toggleHeading3(editor) {\n    var cm = editor.codemirror;\n    _toggleHeading(cm, undefined, 3);\n}\n\n\n/**\n * Action for toggling ul.\n */\nfunction toggleUnorderedList(editor) {\n    var cm = editor.codemirror;\n    _toggleLine(cm, 'unordered-list');\n}\n\n\n/**\n * Action for toggling ol.\n */\nfunction toggleOrderedList(editor) {\n    var cm = editor.codemirror;\n    _toggleLine(cm, 'ordered-list');\n}\n\n/**\n * Action for clean block (remove headline, list, blockquote code, markers)\n */\nfunction cleanBlock(editor) {\n    var cm = editor.codemirror;\n    _cleanBlock(cm);\n}\n\n/**\n * Action for drawing a link.\n */\nfunction drawLink(editor) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    var url = 'https://';\n    if (options.promptURLs) {\n        url = prompt(options.promptTexts.link, 'https://');\n        if (!url) {\n            return false;\n        }\n    }\n    _replaceSelection(cm, stat.link, options.insertTexts.link, url);\n}\n\n/**\n * Action for drawing an img.\n */\nfunction drawImage(editor) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    var url = 'https://';\n    if (options.promptURLs) {\n        url = prompt(options.promptTexts.image, 'https://');\n        if (!url) {\n            return false;\n        }\n    }\n    _replaceSelection(cm, stat.image, options.insertTexts.image, url);\n}\n\n/**\n * Action for opening the browse-file window to upload an image to a server.\n * @param editor {EasyMDE} The EasyMDE object\n */\nfunction drawUploadedImage(editor) {\n    // TODO: Draw the image template with a fake url? ie: '![](importing foo.png...)'\n    editor.openBrowseFileWindow();\n}\n\n/**\n * Action executed after an image have been successfully imported on the server.\n * @param editor {EasyMDE} The EasyMDE object\n * @param url {string} The url of the uploaded image\n */\nfunction afterImageUploaded(editor, url) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    var imageName = url.substr(url.lastIndexOf('/') + 1);\n    _replaceSelection(cm, stat.image, options.insertTexts.uploadedImage, url);\n    // show uploaded image filename for 1000ms\n    editor.updateStatusBar('upload-image', editor.options.imageTexts.sbOnUploaded.replace('#image_name#', imageName));\n    setTimeout(function () {\n        editor.updateStatusBar('upload-image', editor.options.imageTexts.sbInit);\n    }, 1000);\n}\n\n/**\n * Action for drawing a table.\n */\nfunction drawTable(editor) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    _replaceSelection(cm, stat.table, options.insertTexts.table);\n}\n\n/**\n * Action for drawing a horizontal rule.\n */\nfunction drawHorizontalRule(editor) {\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n    var options = editor.options;\n    _replaceSelection(cm, stat.image, options.insertTexts.horizontalRule);\n}\n\n\n/**\n * Undo action.\n */\nfunction undo(editor) {\n    var cm = editor.codemirror;\n    cm.undo();\n    cm.focus();\n}\n\n\n/**\n * Redo action.\n */\nfunction redo(editor) {\n    var cm = editor.codemirror;\n    cm.redo();\n    cm.focus();\n}\n\n\n/**\n * Toggle side by side preview\n */\nfunction toggleSideBySide(editor) {\n    var cm = editor.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.nextSibling;\n    var toolbarButton = editor.toolbarElements && editor.toolbarElements['side-by-side'];\n    var useSideBySideListener = false;\n\n    var noFullscreenItems = [\n        wrapper.parentNode, // easyMDEContainer\n        editor.gui.toolbar,\n        wrapper,\n        preview,\n        editor.gui.statusbar,\n    ];\n\n    function addNoFullscreenClass(el) {\n        el.className += ' sided--no-fullscreen';\n    }\n\n    function removeNoFullscreenClass(el) {\n        el.className = el.className.replace(\n            /\\s*sided--no-fullscreen\\s*/g, ''\n        );\n    }\n\n    if (/editor-preview-active-side/.test(preview.className)) {\n        if (cm.getOption('sideBySideNoFullscreen')) {\n            cm.setOption('sideBySideNoFullscreen', false);\n            noFullscreenItems.forEach(function (el) {\n                removeNoFullscreenClass(el);\n            });\n        }\n        preview.className = preview.className.replace(\n            /\\s*editor-preview-active-side\\s*/g, ''\n        );\n        if (toolbarButton) toolbarButton.className = toolbarButton.className.replace(/\\s*active\\s*/g, '');\n        wrapper.className = wrapper.className.replace(/\\s*CodeMirror-sided\\s*/g, ' ');\n    } else {\n        // When the preview button is clicked for the first time,\n        // give some time for the transition from editor.css to fire and the view to slide from right to left,\n        // instead of just appearing.\n        setTimeout(function () {\n            if (!cm.getOption('fullScreen')) {\n                if (editor.options.sideBySideFullscreen === false) {\n                    cm.setOption('sideBySideNoFullscreen', true);\n                    noFullscreenItems.forEach(function(el) {\n                        addNoFullscreenClass(el);\n                    });\n                } else {\n                    toggleFullScreen(editor);\n                }\n            }\n            preview.className += ' editor-preview-active-side';\n        }, 1);\n        if (toolbarButton) toolbarButton.className += ' active';\n        wrapper.className += ' CodeMirror-sided';\n        useSideBySideListener = true;\n    }\n\n    // Hide normal preview if active\n    var previewNormal = wrapper.lastChild;\n    if (/editor-preview-active/.test(previewNormal.className)) {\n        previewNormal.className = previewNormal.className.replace(\n            /\\s*editor-preview-active\\s*/g, ''\n        );\n        var toolbar = editor.toolbarElements.preview;\n        var toolbar_div = editor.toolbar_div;\n        toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n        toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n    }\n\n    var sideBySideRenderingFunction = function () {\n        var newValue = editor.options.previewRender(editor.value(), preview);\n        if (newValue != null) {\n            preview.innerHTML = newValue;\n        }\n    };\n\n    if (!cm.sideBySideRenderingFunction) {\n        cm.sideBySideRenderingFunction = sideBySideRenderingFunction;\n    }\n\n    if (useSideBySideListener) {\n        var newValue = editor.options.previewRender(editor.value(), preview);\n        if (newValue != null) {\n            preview.innerHTML = newValue;\n        }\n        cm.on('update', cm.sideBySideRenderingFunction);\n    } else {\n        cm.off('update', cm.sideBySideRenderingFunction);\n    }\n\n    // Refresh to fix selection being off (#309)\n    cm.refresh();\n}\n\n\n/**\n * Preview action.\n */\nfunction togglePreview(editor) {\n    var cm = editor.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var toolbar_div = editor.toolbar_div;\n    var toolbar = editor.options.toolbar ? editor.toolbarElements.preview : false;\n    var preview = wrapper.lastChild;\n\n    // Turn off side by side if needed\n    var sidebyside = cm.getWrapperElement().nextSibling;\n    if (/editor-preview-active-side/.test(sidebyside.className))\n        toggleSideBySide(editor);\n\n    if (!preview || !/editor-preview-full/.test(preview.className)) {\n\n        preview = document.createElement('div');\n        preview.className = 'editor-preview-full';\n\n        if (editor.options.previewClass) {\n\n            if (Array.isArray(editor.options.previewClass)) {\n                for (var i = 0; i < editor.options.previewClass.length; i++) {\n                    preview.className += (' ' + editor.options.previewClass[i]);\n                }\n\n            } else if (typeof editor.options.previewClass === 'string') {\n                preview.className += (' ' + editor.options.previewClass);\n            }\n        }\n\n        wrapper.appendChild(preview);\n    }\n\n    if (/editor-preview-active/.test(preview.className)) {\n        preview.className = preview.className.replace(\n            /\\s*editor-preview-active\\s*/g, ''\n        );\n        if (toolbar) {\n            toolbar.className = toolbar.className.replace(/\\s*active\\s*/g, '');\n            toolbar_div.className = toolbar_div.className.replace(/\\s*disabled-for-preview*/g, '');\n        }\n    } else {\n        // When the preview button is clicked for the first time,\n        // give some time for the transition from editor.css to fire and the view to slide from right to left,\n        // instead of just appearing.\n        setTimeout(function () {\n            preview.className += ' editor-preview-active';\n        }, 1);\n        if (toolbar) {\n            toolbar.className += ' active';\n            toolbar_div.className += ' disabled-for-preview';\n        }\n    }\n    preview.innerHTML = editor.options.previewRender(editor.value(), preview);\n\n}\n\nfunction _replaceSelection(cm, active, startEnd, url) {\n    if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n        return;\n\n    var text;\n    var start = startEnd[0];\n    var end = startEnd[1];\n    var startPoint = {},\n        endPoint = {};\n    Object.assign(startPoint, cm.getCursor('start'));\n    Object.assign(endPoint, cm.getCursor('end'));\n    if (url) {\n        start = start.replace('#url#', url);  // url is in start for upload-image\n        end = end.replace('#url#', url);\n    }\n    if (active) {\n        text = cm.getLine(startPoint.line);\n        start = text.slice(0, startPoint.ch);\n        end = text.slice(startPoint.ch);\n        cm.replaceRange(start + end, {\n            line: startPoint.line,\n            ch: 0,\n        });\n    } else {\n        text = cm.getSelection();\n        cm.replaceSelection(start + text + end);\n\n        startPoint.ch += start.length;\n        if (startPoint !== endPoint) {\n            endPoint.ch += start.length;\n        }\n    }\n    cm.setSelection(startPoint, endPoint);\n    cm.focus();\n}\n\n\nfunction _toggleHeading(cm, direction, size) {\n    if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n        return;\n\n    var startPoint = cm.getCursor('start');\n    var endPoint = cm.getCursor('end');\n    for (var i = startPoint.line; i <= endPoint.line; i++) {\n        (function (i) {\n            var text = cm.getLine(i);\n            var currHeadingLevel = text.search(/[^#]/);\n\n            if (direction !== undefined) {\n                if (currHeadingLevel <= 0) {\n                    if (direction == 'bigger') {\n                        text = '###### ' + text;\n                    } else {\n                        text = '# ' + text;\n                    }\n                } else if (currHeadingLevel == 6 && direction == 'smaller') {\n                    text = text.substr(7);\n                } else if (currHeadingLevel == 1 && direction == 'bigger') {\n                    text = text.substr(2);\n                } else {\n                    if (direction == 'bigger') {\n                        text = text.substr(1);\n                    } else {\n                        text = '#' + text;\n                    }\n                }\n            } else {\n                if (size == 1) {\n                    if (currHeadingLevel <= 0) {\n                        text = '# ' + text;\n                    } else if (currHeadingLevel == size) {\n                        text = text.substr(currHeadingLevel + 1);\n                    } else {\n                        text = '# ' + text.substr(currHeadingLevel + 1);\n                    }\n                } else if (size == 2) {\n                    if (currHeadingLevel <= 0) {\n                        text = '## ' + text;\n                    } else if (currHeadingLevel == size) {\n                        text = text.substr(currHeadingLevel + 1);\n                    } else {\n                        text = '## ' + text.substr(currHeadingLevel + 1);\n                    }\n                } else {\n                    if (currHeadingLevel <= 0) {\n                        text = '### ' + text;\n                    } else if (currHeadingLevel == size) {\n                        text = text.substr(currHeadingLevel + 1);\n                    } else {\n                        text = '### ' + text.substr(currHeadingLevel + 1);\n                    }\n                }\n            }\n\n            cm.replaceRange(text, {\n                line: i,\n                ch: 0,\n            }, {\n                line: i,\n                ch: 99999999999999,\n            });\n        })(i);\n    }\n    cm.focus();\n}\n\n\nfunction _toggleLine(cm, name) {\n    if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n        return;\n\n    var listRegexp = /^(\\s*)(\\*|-|\\+|\\d*\\.)(\\s+)/;\n    var whitespacesRegexp = /^\\s*/;\n\n    var stat = getState(cm);\n    var startPoint = cm.getCursor('start');\n    var endPoint = cm.getCursor('end');\n    var repl = {\n        'quote': /^(\\s*)>\\s+/,\n        'unordered-list': listRegexp,\n        'ordered-list': listRegexp,\n    };\n\n    var _getChar = function (name, i) {\n        var map = {\n            'quote': '>',\n            'unordered-list': '*',\n            'ordered-list': '%%i.',\n        };\n\n        return map[name].replace('%%i', i);\n    };\n\n    var _checkChar = function (name, char) {\n        var map = {\n            'quote': '>',\n            'unordered-list': '*',\n            'ordered-list': '\\\\d+.',\n        };\n        var rt = new RegExp(map[name]);\n\n        return char && rt.test(char);\n    };\n\n    var _toggle = function (name, text, untoggleOnly) {\n        var arr = listRegexp.exec(text);\n        var char = _getChar(name, line);\n        if (arr !== null) {\n            if (_checkChar(name, arr[2])) {\n                char = '';\n            }\n            text = arr[1] + char + arr[3] + text.replace(whitespacesRegexp, '').replace(repl[name], '$1');\n        } else if (untoggleOnly == false) {\n            text = char + ' ' + text;\n        }\n        return text;\n    };\n\n    var line = 1;\n    for (var i = startPoint.line; i <= endPoint.line; i++) {\n        (function (i) {\n            var text = cm.getLine(i);\n            if (stat[name]) {\n                text = text.replace(repl[name], '$1');\n            } else {\n                // If we're toggling unordered-list formatting, check if the current line\n                // is part of an ordered-list, and if so, untoggle that first.\n                // Workaround for https://github.com/Ionaru/easy-markdown-editor/issues/92\n                if (name == 'unordered-list') {\n                    text = _toggle('ordered-list', text, true);\n                }\n                text = _toggle(name, text, false);\n                line += 1;\n            }\n            cm.replaceRange(text, {\n                line: i,\n                ch: 0,\n            }, {\n                line: i,\n                ch: 99999999999999,\n            });\n        })(i);\n    }\n    cm.focus();\n}\n\nfunction _toggleBlock(editor, type, start_chars, end_chars) {\n    if (/editor-preview-active/.test(editor.codemirror.getWrapperElement().lastChild.className))\n        return;\n\n    end_chars = (typeof end_chars === 'undefined') ? start_chars : end_chars;\n    var cm = editor.codemirror;\n    var stat = getState(cm);\n\n    var text;\n    var start = start_chars;\n    var end = end_chars;\n\n    var startPoint = cm.getCursor('start');\n    var endPoint = cm.getCursor('end');\n\n    if (stat[type]) {\n        text = cm.getLine(startPoint.line);\n        start = text.slice(0, startPoint.ch);\n        end = text.slice(startPoint.ch);\n        if (type == 'bold') {\n            start = start.replace(/(\\*\\*|__)(?![\\s\\S]*(\\*\\*|__))/, '');\n            end = end.replace(/(\\*\\*|__)/, '');\n        } else if (type == 'italic') {\n            start = start.replace(/(\\*|_)(?![\\s\\S]*(\\*|_))/, '');\n            end = end.replace(/(\\*|_)/, '');\n        } else if (type == 'strikethrough') {\n            start = start.replace(/(\\*\\*|~~)(?![\\s\\S]*(\\*\\*|~~))/, '');\n            end = end.replace(/(\\*\\*|~~)/, '');\n        }\n        cm.replaceRange(start + end, {\n            line: startPoint.line,\n            ch: 0,\n        }, {\n            line: startPoint.line,\n            ch: 99999999999999,\n        });\n\n        if (type == 'bold' || type == 'strikethrough') {\n            startPoint.ch -= 2;\n            if (startPoint !== endPoint) {\n                endPoint.ch -= 2;\n            }\n        } else if (type == 'italic') {\n            startPoint.ch -= 1;\n            if (startPoint !== endPoint) {\n                endPoint.ch -= 1;\n            }\n        }\n    } else {\n        text = cm.getSelection();\n        if (type == 'bold') {\n            text = text.split('**').join('');\n            text = text.split('__').join('');\n        } else if (type == 'italic') {\n            text = text.split('*').join('');\n            text = text.split('_').join('');\n        } else if (type == 'strikethrough') {\n            text = text.split('~~').join('');\n        }\n        cm.replaceSelection(start + text + end);\n\n        startPoint.ch += start_chars.length;\n        endPoint.ch = startPoint.ch + text.length;\n    }\n\n    cm.setSelection(startPoint, endPoint);\n    cm.focus();\n}\n\nfunction _cleanBlock(cm) {\n    if (/editor-preview-active/.test(cm.getWrapperElement().lastChild.className))\n        return;\n\n    var startPoint = cm.getCursor('start');\n    var endPoint = cm.getCursor('end');\n    var text;\n\n    for (var line = startPoint.line; line <= endPoint.line; line++) {\n        text = cm.getLine(line);\n        text = text.replace(/^[ ]*([# ]+|\\*|-|[> ]+|[0-9]+(.|\\)))[ ]*/, '');\n\n        cm.replaceRange(text, {\n            line: line,\n            ch: 0,\n        }, {\n            line: line,\n            ch: 99999999999999,\n        });\n    }\n}\n\n/**\n * Convert a number of bytes to a human-readable file size. If you desire\n * to add a space between the value and the unit, you need to add this space\n * to the given units.\n * @param bytes {integer} A number of bytes, as integer. Ex: 421137\n * @param units {number[]} An array of human-readable units, ie. [' B', ' K', ' MB']\n * @returns string A human-readable file size. Ex: '412 KB'\n */\nfunction humanFileSize(bytes, units) {\n    if (Math.abs(bytes) < 1024) {\n        return '' + bytes + units[0];\n    }\n    var u = 0;\n    do {\n        bytes /= 1024;\n        ++u;\n    } while (Math.abs(bytes) >= 1024 && u < units.length);\n    return '' + bytes.toFixed(1) + units[u];\n}\n\n// Merge the properties of one object into another.\nfunction _mergeProperties(target, source) {\n    for (var property in source) {\n        if (Object.prototype.hasOwnProperty.call(source, property)) {\n            if (source[property] instanceof Array) {\n                target[property] = source[property].concat(target[property] instanceof Array ? target[property] : []);\n            } else if (\n                source[property] !== null &&\n                typeof source[property] === 'object' &&\n                source[property].constructor === Object\n            ) {\n                target[property] = _mergeProperties(target[property] || {}, source[property]);\n            } else {\n                target[property] = source[property];\n            }\n        }\n    }\n\n    return target;\n}\n\n// Merge an arbitrary number of objects into one.\nfunction extend(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        target = _mergeProperties(target, arguments[i]);\n    }\n\n    return target;\n}\n\n/* The right word count in respect for CJK. */\nfunction wordCount(data) {\n    var pattern = /[a-zA-Z0-9_\\u00A0-\\u02AF\\u0392-\\u03c9\\u0410-\\u04F9]+|[\\u4E00-\\u9FFF\\u3400-\\u4dbf\\uf900-\\ufaff\\u3040-\\u309f\\uac00-\\ud7af]+/g;\n    var m = data.match(pattern);\n    var count = 0;\n    if (m === null) return count;\n    for (var i = 0; i < m.length; i++) {\n        if (m[i].charCodeAt(0) >= 0x4E00) {\n            count += m[i].length;\n        } else {\n            count += 1;\n        }\n    }\n    return count;\n}\n\nvar toolbarBuiltInButtons = {\n    'bold': {\n        name: 'bold',\n        action: toggleBold,\n        className: 'fa fa-bold',\n        title: 'Bold',\n        default: true,\n    },\n    'italic': {\n        name: 'italic',\n        action: toggleItalic,\n        className: 'fa fa-italic',\n        title: 'Italic',\n        default: true,\n    },\n    'strikethrough': {\n        name: 'strikethrough',\n        action: toggleStrikethrough,\n        className: 'fa fa-strikethrough',\n        title: 'Strikethrough',\n    },\n    'heading': {\n        name: 'heading',\n        action: toggleHeadingSmaller,\n        className: 'fa fa-header fa-heading',\n        title: 'Heading',\n        default: true,\n    },\n    'heading-smaller': {\n        name: 'heading-smaller',\n        action: toggleHeadingSmaller,\n        className: 'fa fa-header fa-heading header-smaller',\n        title: 'Smaller Heading',\n    },\n    'heading-bigger': {\n        name: 'heading-bigger',\n        action: toggleHeadingBigger,\n        className: 'fa fa-header fa-heading header-bigger',\n        title: 'Bigger Heading',\n    },\n    'heading-1': {\n        name: 'heading-1',\n        action: toggleHeading1,\n        className: 'fa fa-header fa-heading header-1',\n        title: 'Big Heading',\n    },\n    'heading-2': {\n        name: 'heading-2',\n        action: toggleHeading2,\n        className: 'fa fa-header fa-heading header-2',\n        title: 'Medium Heading',\n    },\n    'heading-3': {\n        name: 'heading-3',\n        action: toggleHeading3,\n        className: 'fa fa-header fa-heading header-3',\n        title: 'Small Heading',\n    },\n    'separator-1': {\n        name: 'separator-1',\n    },\n    'code': {\n        name: 'code',\n        action: toggleCodeBlock,\n        className: 'fa fa-code',\n        title: 'Code',\n    },\n    'quote': {\n        name: 'quote',\n        action: toggleBlockquote,\n        className: 'fa fa-quote-left',\n        title: 'Quote',\n        default: true,\n    },\n    'unordered-list': {\n        name: 'unordered-list',\n        action: toggleUnorderedList,\n        className: 'fa fa-list-ul',\n        title: 'Generic List',\n        default: true,\n    },\n    'ordered-list': {\n        name: 'ordered-list',\n        action: toggleOrderedList,\n        className: 'fa fa-list-ol',\n        title: 'Numbered List',\n        default: true,\n    },\n    'clean-block': {\n        name: 'clean-block',\n        action: cleanBlock,\n        className: 'fa fa-eraser',\n        title: 'Clean block',\n    },\n    'separator-2': {\n        name: 'separator-2',\n    },\n    'link': {\n        name: 'link',\n        action: drawLink,\n        className: 'fa fa-link',\n        title: 'Create Link',\n        default: true,\n    },\n    'image': {\n        name: 'image',\n        action: drawImage,\n        className: 'fa fa-image',\n        title: 'Insert Image',\n        default: true,\n    },\n    'upload-image': {\n        name: 'upload-image',\n        action: drawUploadedImage,\n        className: 'fa fa-image',\n        title: 'Import an image',\n    },\n    'table': {\n        name: 'table',\n        action: drawTable,\n        className: 'fa fa-table',\n        title: 'Insert Table',\n    },\n    'horizontal-rule': {\n        name: 'horizontal-rule',\n        action: drawHorizontalRule,\n        className: 'fa fa-minus',\n        title: 'Insert Horizontal Line',\n    },\n    'separator-3': {\n        name: 'separator-3',\n    },\n    'preview': {\n        name: 'preview',\n        action: togglePreview,\n        className: 'fa fa-eye',\n        noDisable: true,\n        title: 'Toggle Preview',\n        default: true,\n    },\n    'side-by-side': {\n        name: 'side-by-side',\n        action: toggleSideBySide,\n        className: 'fa fa-columns',\n        noDisable: true,\n        noMobile: true,\n        title: 'Toggle Side by Side',\n        default: true,\n    },\n    'fullscreen': {\n        name: 'fullscreen',\n        action: toggleFullScreen,\n        className: 'fa fa-arrows-alt',\n        noDisable: true,\n        noMobile: true,\n        title: 'Toggle Fullscreen',\n        default: true,\n    },\n    'separator-4': {\n        name: 'separator-4',\n    },\n    'guide': {\n        name: 'guide',\n        action: 'https://www.markdownguide.org/basic-syntax/',\n        className: 'fa fa-question-circle',\n        noDisable: true,\n        title: 'Markdown Guide',\n        default: true,\n    },\n    'separator-5': {\n        name: 'separator-5',\n    },\n    'undo': {\n        name: 'undo',\n        action: undo,\n        className: 'fa fa-undo',\n        noDisable: true,\n        title: 'Undo',\n    },\n    'redo': {\n        name: 'redo',\n        action: redo,\n        className: 'fa fa-repeat fa-redo',\n        noDisable: true,\n        title: 'Redo',\n    },\n};\n\nvar insertTexts = {\n    link: ['[', '](#url#)'],\n    image: ['![](', '#url#)'],\n    uploadedImage: ['![](#url#)', ''],\n    // uploadedImage: ['![](#url#)\\n', ''], // TODO: New line insertion doesn't work here.\n    table: ['', '\\n\\n| Column 1 | Column 2 | Column 3 |\\n| -------- | -------- | -------- |\\n| Text     | Text     | Text     |\\n\\n'],\n    horizontalRule: ['', '\\n\\n-----\\n\\n'],\n};\n\nvar promptTexts = {\n    link: 'URL for the link:',\n    image: 'URL of the image:',\n};\n\nvar timeFormat = {\n    locale: 'en-US',\n    format: {\n        hour: '2-digit',\n        minute: '2-digit',\n    },\n};\n\nvar blockStyles = {\n    'bold': '**',\n    'code': '```',\n    'italic': '*',\n};\n\n/**\n * Texts displayed to the user (mainly on the status bar) for the import image\n * feature. Can be used for customization or internationalization.\n */\nvar imageTexts = {\n    sbInit: 'Attach files by drag and dropping or pasting from clipboard.',\n    sbOnDragEnter: 'Drop image to upload it.',\n    sbOnDrop: 'Uploading image #images_names#...',\n    sbProgress: 'Uploading #file_name#: #progress#%',\n    sbOnUploaded: 'Uploaded #image_name#',\n    sizeUnits: ' B, KB, MB',\n};\n\n/**\n * Errors displayed to the user, using the `errorCallback` option. Can be used for\n * customization or internationalization.\n */\nvar errorMessages = {\n    noFileGiven: 'You must select a file.',\n    typeNotAllowed: 'This image type is not allowed.',\n    fileTooLarge: 'Image #image_name# is too big (#image_size#).\\n' +\n        'Maximum file size is #image_max_size#.',\n    importError: 'Something went wrong when uploading the image #image_name#.',\n};\n\n/**\n * Interface of EasyMDE.\n */\nfunction EasyMDE(options) {\n    // Handle options parameter\n    options = options || {};\n\n    // Used later to refer to it\"s parent\n    options.parent = this;\n\n    // Check if Font Awesome needs to be auto downloaded\n    var autoDownloadFA = true;\n\n    if (options.autoDownloadFontAwesome === false) {\n        autoDownloadFA = false;\n    }\n\n    if (options.autoDownloadFontAwesome !== true) {\n        var styleSheets = document.styleSheets;\n        for (var i = 0; i < styleSheets.length; i++) {\n            if (!styleSheets[i].href)\n                continue;\n\n            if (styleSheets[i].href.indexOf('//maxcdn.bootstrapcdn.com/font-awesome/') > -1) {\n                autoDownloadFA = false;\n            }\n        }\n    }\n\n    if (autoDownloadFA) {\n        var link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = 'https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css';\n        document.getElementsByTagName('head')[0].appendChild(link);\n    }\n\n\n    // Find the textarea to use\n    if (options.element) {\n        this.element = options.element;\n    } else if (options.element === null) {\n        // This means that the element option was specified, but no element was found\n        console.log('EasyMDE: Error. No element was found.');\n        return;\n    }\n\n\n    // Handle toolbar\n    if (options.toolbar === undefined) {\n        // Initialize\n        options.toolbar = [];\n\n\n        // Loop over the built in buttons, to get the preferred order\n        for (var key in toolbarBuiltInButtons) {\n            if (Object.prototype.hasOwnProperty.call(toolbarBuiltInButtons, key)) {\n                if (key.indexOf('separator-') != -1) {\n                    options.toolbar.push('|');\n                }\n\n                if (toolbarBuiltInButtons[key].default === true || (options.showIcons && options.showIcons.constructor === Array && options.showIcons.indexOf(key) != -1)) {\n                    options.toolbar.push(key);\n                }\n            }\n        }\n    }\n\n    // Editor preview styling class.\n    if (!Object.prototype.hasOwnProperty.call(options, 'previewClass')) {\n        options.previewClass = 'editor-preview';\n    }\n\n    // Handle status bar\n    if (!Object.prototype.hasOwnProperty.call(options, 'status')) {\n        options.status = ['autosave', 'lines', 'words', 'cursor'];\n\n        if (options.uploadImage) {\n            options.status.unshift('upload-image');\n        }\n    }\n\n\n    // Add default preview rendering function\n    if (!options.previewRender) {\n        options.previewRender = function (plainText) {\n            // Note: \"this\" refers to the options object\n            return this.parent.markdown(plainText);\n        };\n    }\n\n\n    // Set default options for parsing config\n    options.parsingConfig = extend({\n        highlightFormatting: true, // needed for toggleCodeBlock to detect types of code\n    }, options.parsingConfig || {});\n\n\n    // Merging the insertTexts, with the given options\n    options.insertTexts = extend({}, insertTexts, options.insertTexts || {});\n\n\n    // Merging the promptTexts, with the given options\n    options.promptTexts = extend({}, promptTexts, options.promptTexts || {});\n\n\n    // Merging the blockStyles, with the given options\n    options.blockStyles = extend({}, blockStyles, options.blockStyles || {});\n\n\n    if (options.autosave != undefined) {\n        // Merging the Autosave timeFormat, with the given options\n        options.autosave.timeFormat = extend({}, timeFormat, options.autosave.timeFormat || {});\n    }\n\n\n    // Merging the shortcuts, with the given options\n    options.shortcuts = extend({}, shortcuts, options.shortcuts || {});\n\n    options.maxHeight = options.maxHeight || undefined;\n\n    if (typeof options.maxHeight !== 'undefined') {\n        // Min and max height are equal if maxHeight is set\n        options.minHeight = options.maxHeight;\n    } else {\n        options.minHeight = options.minHeight || '300px';\n    }\n\n    options.errorCallback = options.errorCallback || function (errorMessage) {\n        alert(errorMessage);\n    };\n\n    // Import-image default configuration\n    options.uploadImage = options.uploadImage || false;\n    options.imageMaxSize = options.imageMaxSize || 2097152; // 1024 * 1024 * 2\n    options.imageAccept = options.imageAccept || 'image/png, image/jpeg';\n    options.imageTexts = extend({}, imageTexts, options.imageTexts || {});\n    options.errorMessages = extend({}, errorMessages, options.errorMessages || {});\n\n\n    // Change unique_id to uniqueId for backwards compatibility\n    if (options.autosave != undefined && options.autosave.unique_id != undefined && options.autosave.unique_id != '')\n        options.autosave.uniqueId = options.autosave.unique_id;\n\n    // If overlay mode is specified and combine is not provided, default it to true\n    if (options.overlayMode && options.overlayMode.combine === undefined) {\n      options.overlayMode.combine = true;\n    }\n\n    // Update this options\n    this.options = options;\n\n\n    // Auto render\n    this.render();\n\n\n    // The codemirror component is only available after rendering\n    // so, the setter for the initialValue can only run after\n    // the element has been rendered\n    if (options.initialValue && (!this.options.autosave || this.options.autosave.foundSavedValue !== true)) {\n        this.value(options.initialValue);\n    }\n\n    if (options.uploadImage) {\n        var self = this;\n\n        this.codemirror.on('dragenter', function (cm, event) {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n            event.stopPropagation();\n            event.preventDefault();\n        });\n        this.codemirror.on('dragend', function (cm, event) {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n            event.stopPropagation();\n            event.preventDefault();\n        });\n        this.codemirror.on('dragleave', function (cm, event) {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n            event.stopPropagation();\n            event.preventDefault();\n        });\n\n        this.codemirror.on('dragover', function (cm, event) {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbOnDragEnter);\n            event.stopPropagation();\n            event.preventDefault();\n        });\n\n        this.codemirror.on('drop', function (cm, event) {\n            event.stopPropagation();\n            event.preventDefault();\n            if (options.imageUploadFunction) {\n                self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.dataTransfer.files);\n            } else {\n                self.uploadImages(event.dataTransfer.files);\n            }\n        });\n\n        this.codemirror.on('paste', function (cm, event) {\n            if (options.imageUploadFunction) {\n                self.uploadImagesUsingCustomFunction(options.imageUploadFunction, event.clipboardData.files);\n            } else {\n                self.uploadImages(event.clipboardData.files);\n            }\n        });\n    }\n}\n\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param {FileList} files The files to upload the the server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\nEasyMDE.prototype.uploadImages = function (files, onSuccess, onError) {\n    if (files.length === 0) {\n      return;\n    }\n    var names = [];\n    for (var i = 0; i < files.length; i++) {\n        names.push(files[i].name);\n        this.uploadImage(files[i], onSuccess, onError);\n    }\n    this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n\n/**\n * Upload asynchronously a list of images to a server.\n *\n * Can be triggered by:\n * - drag&drop;\n * - copy-paste;\n * - the browse-file window (opened when the user clicks on the *upload-image* icon).\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options.\n * @param {FileList} files The files to upload the the server.\n */\nEasyMDE.prototype.uploadImagesUsingCustomFunction = function (imageUploadFunction, files) {\n    if (files.length === 0) {\n      return;\n    }\n    var names = [];\n    for (var i = 0; i < files.length; i++) {\n        names.push(files[i].name);\n        this.uploadImageUsingCustomFunction(imageUploadFunction, files[i]);\n    }\n    this.updateStatusBar('upload-image', this.options.imageTexts.sbOnDrop.replace('#images_names#', names.join(', ')));\n};\n\n/**\n * Update an item in the status bar.\n * @param itemName {string} The name of the item to update (ie. 'upload-image', 'autosave', etc.).\n * @param content {string} the new content of the item to write in the status bar.\n */\nEasyMDE.prototype.updateStatusBar = function (itemName, content) {\n    if (!this.gui.statusbar) {\n        return;\n    }\n\n    var matchingClasses = this.gui.statusbar.getElementsByClassName(itemName);\n    if (matchingClasses.length === 1) {\n        this.gui.statusbar.getElementsByClassName(itemName)[0].textContent = content;\n    } else if (matchingClasses.length === 0) {\n        console.log('EasyMDE: status bar item ' + itemName + ' was not found.');\n    } else {\n        console.log('EasyMDE: Several status bar items named ' + itemName + ' was found.');\n    }\n};\n\n/**\n * Default markdown render.\n */\nEasyMDE.prototype.markdown = function (text) {\n    if (marked) {\n        // Initialize\n        var markedOptions;\n        if (this.options && this.options.renderingConfig && this.options.renderingConfig.markedOptions) {\n            markedOptions = this.options.renderingConfig.markedOptions;\n        } else {\n            markedOptions = {};\n        }\n\n        // Update options\n        if (this.options && this.options.renderingConfig && this.options.renderingConfig.singleLineBreaks === false) {\n            markedOptions.breaks = false;\n        } else {\n            markedOptions.breaks = true;\n        }\n\n        if (this.options && this.options.renderingConfig && this.options.renderingConfig.codeSyntaxHighlighting === true) {\n\n            /* Get HLJS from config or window */\n            var hljs = this.options.renderingConfig.hljs || window.hljs;\n\n            /* Check if HLJS loaded */\n            if (hljs) {\n                markedOptions.highlight = function (code, language) {\n                    if (language && hljs.getLanguage(language)) {\n                      return hljs.highlight(language, code).value;\n                    } else {\n                    return hljs.highlightAuto(code).value;\n                    }\n                };\n            }\n        }\n\n        // Set options\n        marked.setOptions(markedOptions);\n\n        // Convert the markdown to HTML\n        var htmlText = marked(text);\n\n        // Sanitize HTML\n        if (this.options.renderingConfig && typeof this.options.renderingConfig.sanitizerFunction === 'function') {\n            htmlText = this.options.renderingConfig.sanitizerFunction.call(this, htmlText);\n        }\n\n        // Edit the HTML anchors to add 'target=\"_blank\"' by default.\n        htmlText = addAnchorTargetBlank(htmlText);\n\n        // Remove list-style when rendering checkboxes\n        htmlText = removeListStyleWhenCheckbox(htmlText);\n\n        return htmlText;\n    }\n};\n\n/**\n * Render editor to the given element.\n */\nEasyMDE.prototype.render = function (el) {\n    if (!el) {\n        el = this.element || document.getElementsByTagName('textarea')[0];\n    }\n\n    if (this._rendered && this._rendered === el) {\n        // Already rendered.\n        return;\n    }\n\n    this.element = el;\n    var options = this.options;\n\n    var self = this;\n    var keyMaps = {};\n\n    for (var key in options.shortcuts) {\n        // null stands for \"do not bind this command\"\n        if (options.shortcuts[key] !== null && bindings[key] !== null) {\n            (function (key) {\n                keyMaps[fixShortcut(options.shortcuts[key])] = function () {\n                    var action = bindings[key];\n                    if (typeof action === 'function') {\n                        action(self);\n                    } else if (typeof action === 'string') {\n                        window.open(action, '_blank');\n                    }\n                };\n            })(key);\n        }\n    }\n\n    keyMaps['Enter'] = 'newlineAndIndentContinueMarkdownList';\n    keyMaps['Tab'] = 'tabAndIndentMarkdownList';\n    keyMaps['Shift-Tab'] = 'shiftTabAndUnindentMarkdownList';\n    keyMaps['Esc'] = function (cm) {\n        if (cm.getOption('fullScreen')) toggleFullScreen(self);\n    };\n\n    this.documentOnKeyDown = function (e) {\n        e = e || window.event;\n\n        if (e.keyCode == 27) {\n            if (self.codemirror.getOption('fullScreen')) toggleFullScreen(self);\n        }\n    };\n    document.addEventListener('keydown', this.documentOnKeyDown, false);\n\n    var mode, backdrop;\n\n    // CodeMirror overlay mode\n    if (options.overlayMode) {\n      CodeMirror.defineMode('overlay-mode', function(config) {\n        return CodeMirror.overlayMode(CodeMirror.getMode(config, options.spellChecker !== false ? 'spell-checker' : 'gfm'), options.overlayMode.mode, options.overlayMode.combine);\n      });\n\n      mode = 'overlay-mode';\n      backdrop = options.parsingConfig;\n      backdrop.gitHubSpice = false;\n\n      if (options.spellChecker !== false) {\n        backdrop.name = 'gfm';\n\n        CodeMirrorSpellChecker({\n          codeMirrorInstance: CodeMirror,\n        });\n\n      } else if (options.spellChecker !== false) {\n        mode = 'spell-checker';\n        backdrop = options.parsingConfig;\n        backdrop.name = 'gfm';\n        backdrop.gitHubSpice = false;\n\n        CodeMirrorSpellChecker({\n            codeMirrorInstance: CodeMirror,\n        });\n      }\n    } else {\n        mode = options.parsingConfig;\n        mode.name = 'gfm';\n        mode.gitHubSpice = false;\n    }\n\n    // eslint-disable-next-line no-unused-vars\n    function configureMouse(cm, repeat, event) {\n        return {\n            addNew: false,\n        };\n    }\n\n    this.codemirror = CodeMirror.fromTextArea(el, {\n        mode: mode,\n        backdrop: backdrop,\n        theme: (options.theme != undefined) ? options.theme : 'easymde',\n        tabSize: (options.tabSize != undefined) ? options.tabSize : 2,\n        indentUnit: (options.tabSize != undefined) ? options.tabSize : 2,\n        indentWithTabs: (options.indentWithTabs === false) ? false : true,\n        lineNumbers: (options.lineNumbers === true) ? true : false,\n        autofocus: (options.autofocus === true) ? true : false,\n        extraKeys: keyMaps,\n        lineWrapping: (options.lineWrapping === false) ? false : true,\n        allowDropFileTypes: ['text/plain'],\n        placeholder: options.placeholder || el.getAttribute('placeholder') || '',\n        styleSelectedText: (options.styleSelectedText != undefined) ? options.styleSelectedText : !isMobile(),\n        configureMouse: configureMouse,\n        inputStyle: (options.inputStyle != undefined) ? options.inputStyle : isMobile() ? 'contenteditable' : 'textarea',\n        spellcheck: (options.nativeSpellcheck != undefined) ? options.nativeSpellcheck : true,\n        autoRefresh: (options.autoRefresh != undefined) ? options.autoRefresh : false,\n    });\n\n    this.codemirror.getScrollerElement().style.minHeight = options.minHeight;\n\n    if (typeof options.maxHeight !== 'undefined') {\n        this.codemirror.getScrollerElement().style.height = options.maxHeight;\n    }\n\n    if (options.forceSync === true) {\n        var cm = this.codemirror;\n        cm.on('change', function () {\n            cm.save();\n        });\n    }\n\n    this.gui = {};\n\n    // Wrap Codemirror with container before create toolbar, etc,\n    // to use with sideBySideFullscreen option.\n    var easyMDEContainer = document.createElement('div');\n    easyMDEContainer.classList.add('EasyMDEContainer');\n    var cmWrapper = this.codemirror.getWrapperElement();\n    cmWrapper.parentNode.insertBefore(easyMDEContainer, cmWrapper);\n    easyMDEContainer.appendChild(cmWrapper);\n\n    if (options.toolbar !== false) {\n        this.gui.toolbar = this.createToolbar();\n    }\n    if (options.status !== false) {\n        this.gui.statusbar = this.createStatusbar();\n    }\n    if (options.autosave != undefined && options.autosave.enabled === true) {\n        this.autosave(); // use to load localstorage content\n        this.codemirror.on('change', function () {\n            clearTimeout(self._autosave_timeout);\n            self._autosave_timeout = setTimeout(function () {\n                self.autosave();\n            }, self.options.autosave.submit_delay || self.options.autosave.delay || 1000);\n        });\n    }\n\n    function handleImages() {\n        if (!options.previewImagesInEditor) {\n            return;\n        }\n\n        function calcHeight(naturalWidth, naturalHeight) {\n            var height;\n            var viewportWidth = window.getComputedStyle(document.querySelector('.CodeMirror-sizer')).width.replace('px', '');\n            if (naturalWidth < viewportWidth) {\n                height = naturalHeight + 'px';\n            } else {\n                height = (naturalHeight / naturalWidth * 100) + '%';\n            }\n            return height;\n        }\n        easyMDEContainer.querySelectorAll('.cm-formatting-image').forEach(function(e) {\n            var parentEl =  e.parentElement;\n            if (!parentEl.hasAttribute('data-img-src')) {\n                var srcAttr = parentEl.innerText.match('\\\\((.*)\\\\)'); // might require better parsing according to markdown spec\n                if (srcAttr && srcAttr.length >= 2) {\n                    var img = document.createElement('img');\n                    img.onload = function() {\n                        parentEl.setAttribute('data-img-src', srcAttr[1]);\n                        parentEl.setAttribute('data-img-width', img.naturalWidth);\n                        parentEl.setAttribute('data-img-height', img.naturalHeight);\n                        parentEl.setAttribute('style', '--bg-image:url('+srcAttr[1]+');--width:'+img.naturalWidth+'px;--height:'+calcHeight(img.naturalWidth, img.naturalHeight));\n                    };\n                    img.src = srcAttr[1];\n                }\n            } else {\n                // handle resizes case\n                var src = parentEl.getAttribute('data-img-src');\n                var naturalWidth = +parentEl.getAttribute('data-img-width');\n                var naturalHeight = +parentEl.getAttribute('data-img-height');\n                parentEl.setAttribute('style', '--bg-image:url('+src+');--width:'+naturalWidth+'px;--height:'+calcHeight(naturalWidth, naturalHeight));\n            }\n        });\n    }\n    this.codemirror.on('update', function () {\n        handleImages();\n    });\n\n    this.onWindowResize = function() {\n        handleImages();\n    };\n\n    window.addEventListener('resize', this.onWindowResize, true);\n\n    this.gui.sideBySide = this.createSideBySide();\n    this._rendered = this.element;\n\n    // Fixes CodeMirror bug (#344)\n    var temp_cm = this.codemirror;\n    setTimeout(function () {\n        temp_cm.refresh();\n    }.bind(temp_cm), 0);\n};\n\nEasyMDE.prototype.cleanup = function () {\n    window.removeEventListener(this.onWindowResize);\n    document.removeEventListener('keydown', this.documentOnKeyDown);\n};\n\n// Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem throw QuotaExceededError. We're going to detect this and set a variable accordingly.\nfunction isLocalStorageAvailable() {\n    if (typeof localStorage === 'object') {\n        try {\n            localStorage.setItem('smde_localStorage', 1);\n            localStorage.removeItem('smde_localStorage');\n        } catch (e) {\n            return false;\n        }\n    } else {\n        return false;\n    }\n\n    return true;\n}\n\nEasyMDE.prototype.autosave = function () {\n    if (isLocalStorageAvailable()) {\n        var easyMDE = this;\n\n        if (this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n            console.log('EasyMDE: You must set a uniqueId to use the autosave feature');\n            return;\n        }\n\n        if (this.options.autosave.binded !== true) {\n            if (easyMDE.element.form != null && easyMDE.element.form != undefined) {\n                easyMDE.element.form.addEventListener('submit', function () {\n                    clearTimeout(easyMDE.autosaveTimeoutId);\n                    easyMDE.autosaveTimeoutId = undefined;\n\n                    localStorage.removeItem('smde_' + easyMDE.options.autosave.uniqueId);\n                });\n            }\n\n            this.options.autosave.binded = true;\n        }\n\n        if (this.options.autosave.loaded !== true) {\n            if (typeof localStorage.getItem('smde_' + this.options.autosave.uniqueId) == 'string' && localStorage.getItem('smde_' + this.options.autosave.uniqueId) != '') {\n                this.codemirror.setValue(localStorage.getItem('smde_' + this.options.autosave.uniqueId));\n                this.options.autosave.foundSavedValue = true;\n            }\n\n            this.options.autosave.loaded = true;\n        }\n\n        var value = easyMDE.value();\n        if (value !== '') {\n            localStorage.setItem('smde_' + this.options.autosave.uniqueId, value);\n        } else {\n            localStorage.removeItem('smde_' + this.options.autosave.uniqueId);\n        }\n\n        var el = document.getElementById('autosaved');\n        if (el != null && el != undefined && el != '') {\n            var d = new Date();\n            var dd = new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale, 'en-US'], this.options.autosave.timeFormat.format).format(d);\n            var save = this.options.autosave.text == undefined ? 'Autosaved: ' : this.options.autosave.text;\n\n            el.innerHTML = save + dd;\n        }\n    } else {\n        console.log('EasyMDE: localStorage not available, cannot autosave');\n    }\n};\n\nEasyMDE.prototype.clearAutosavedValue = function () {\n    if (isLocalStorageAvailable()) {\n        if (this.options.autosave == undefined || this.options.autosave.uniqueId == undefined || this.options.autosave.uniqueId == '') {\n            console.log('EasyMDE: You must set a uniqueId to clear the autosave value');\n            return;\n        }\n\n        localStorage.removeItem('smde_' + this.options.autosave.uniqueId);\n    } else {\n        console.log('EasyMDE: localStorage not available, cannot autosave');\n    }\n};\n\n/**\n * Open the browse-file window to upload an image to a server.\n * @param [onSuccess] {function} see EasyMDE.prototype.uploadImage\n * @param [onError] {function} see EasyMDE.prototype.uploadImage\n */\nEasyMDE.prototype.openBrowseFileWindow = function (onSuccess, onError) {\n    var self = this;\n    var imageInput = this.gui.toolbar.getElementsByClassName('imageInput')[0];\n    imageInput.click(); //dispatchEvent(new MouseEvent('click'));  // replaced with click() for IE11 compatibility.\n    function onChange(event) {\n        if (self.options.imageUploadFunction) {\n          self.uploadImagesUsingCustomFunction(self.options.imageUploadFunction, event.target.files);\n        } else {\n          self.uploadImages(event.target.files, onSuccess, onError);\n        }\n        imageInput.removeEventListener('change', onChange);\n    }\n\n    imageInput.addEventListener('change', onChange);\n};\n\n/**\n * Upload an image to the server.\n *\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File)\n * @param [onSuccess] {function} A callback function to execute after the image has been successfully uploaded, with one parameter:\n * - url (string): The URL of the uploaded image.\n * @param [onError] {function} A callback function to execute when the image upload fails, with one parameter:\n * - error (string): the detailed error to display to the user (based on messages from options.errorMessages).\n */\nEasyMDE.prototype.uploadImage = function (file, onSuccess, onError) {\n    var self = this;\n    onSuccess = onSuccess || function onSuccess(imageUrl) {\n        afterImageUploaded(self, imageUrl);\n    };\n\n    function onErrorSup(errorMessage) {\n        // show error on status bar and reset after 10000ms\n        self.updateStatusBar('upload-image', errorMessage);\n\n        setTimeout(function () {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n        }, 10000);\n\n        // run custom error handler\n        if (onError && typeof onError === 'function') {\n            onError(errorMessage);\n        }\n        // run error handler from options, this alerts the message.\n        self.options.errorCallback(errorMessage);\n    }\n\n    function fillErrorMessage(errorMessage) {\n        var units = self.options.imageTexts.sizeUnits.split(',');\n        return errorMessage\n            .replace('#image_name#', file.name)\n            .replace('#image_size#', humanFileSize(file.size, units))\n            .replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n    }\n\n    if (file.size > this.options.imageMaxSize) {\n        onErrorSup(fillErrorMessage(this.options.errorMessages.fileTooLarge));\n        return;\n    }\n\n    var formData = new FormData();\n    formData.append('image', file);\n\n    // insert CSRF token if provided in config.\n    if (self.options.imageCSRFToken) {\n        formData.append('csrfmiddlewaretoken', self.options.imageCSRFToken);\n    }\n    var request = new XMLHttpRequest();\n    request.upload.onprogress = function (event) {\n        if (event.lengthComputable) {\n            var progress = '' + Math.round((event.loaded * 100) / event.total);\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbProgress.replace('#file_name#', file.name).replace('#progress#', progress));\n        }\n    };\n    request.open('POST', this.options.imageUploadEndpoint);\n\n    request.onload = function () {\n        try {\n            var response = JSON.parse(this.responseText);\n        } catch (error) {\n            console.error('EasyMDE: The server did not return a valid json.');\n            onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n            return;\n        }\n        if (this.status === 200 && response && !response.error && response.data && response.data.filePath) {\n            onSuccess(window.location.origin + '/' + response.data.filePath);\n        } else {\n            if (response.error && response.error in self.options.errorMessages) {  // preformatted error message\n                onErrorSup(fillErrorMessage(self.options.errorMessages[response.error]));\n            } else if (response.error) {  // server side generated error message\n                onErrorSup(fillErrorMessage(response.error));\n            } else {  //unknown error\n                console.error('EasyMDE: Received an unexpected response after uploading the image.'\n                    + this.status + ' (' + this.statusText + ')');\n                onErrorSup(fillErrorMessage(self.options.errorMessages.importError));\n            }\n        }\n    };\n\n    request.onerror = function (event) {\n        console.error('EasyMDE: An unexpected error occurred when trying to upload the image.'\n            + event.target.status + ' (' + event.target.statusText + ')');\n        onErrorSup(self.options.errorMessages.importError);\n    };\n\n    request.send(formData);\n\n};\n\n/**\n * Upload an image to the server using a custom upload function.\n *\n * @param imageUploadFunction {Function} The custom function to upload the image passed in options\n * @param file {File} The image to upload, as a HTML5 File object (https://developer.mozilla.org/en-US/docs/Web/API/File).\n */\nEasyMDE.prototype.uploadImageUsingCustomFunction = function(imageUploadFunction, file) {\n    var self = this;\n    function onSuccess(imageUrl) {\n        afterImageUploaded(self, imageUrl);\n    }\n\n    function onError(errorMessage) {\n        var filledErrorMessage = fillErrorMessage(errorMessage);\n        // show error on status bar and reset after 10000ms\n        self.updateStatusBar('upload-image', filledErrorMessage);\n\n        setTimeout(function () {\n            self.updateStatusBar('upload-image', self.options.imageTexts.sbInit);\n        }, 10000);\n\n        // run error handler from options, this alerts the message.\n        self.options.errorCallback(filledErrorMessage);\n    }\n\n    function fillErrorMessage(errorMessage) {\n        var units = self.options.imageTexts.sizeUnits.split(',');\n        return errorMessage\n            .replace('#image_name#', file.name)\n            .replace('#image_size#', humanFileSize(file.size, units))\n            .replace('#image_max_size#', humanFileSize(self.options.imageMaxSize, units));\n    }\n\n    imageUploadFunction.apply(this, [file, onSuccess, onError]);\n};\n\nEasyMDE.prototype.setPreviewMaxHeight = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.nextSibling;\n\n    // Calc preview max height\n    var paddingTop = parseInt(window.getComputedStyle(wrapper).paddingTop);\n    var borderTopWidth = parseInt(window.getComputedStyle(wrapper).borderTopWidth);\n    var optionsMaxHeight = parseInt(this.options.maxHeight);\n    var wrapperMaxHeight = optionsMaxHeight + paddingTop * 2 + borderTopWidth * 2;\n    var previewMaxHeight = wrapperMaxHeight.toString() + 'px';\n\n    preview.style.height =  previewMaxHeight;\n};\n\nEasyMDE.prototype.createSideBySide = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.nextSibling;\n\n    if (!preview || !/editor-preview-side/.test(preview.className)) {\n        preview = document.createElement('div');\n        preview.className = 'editor-preview-side';\n\n        if (this.options.previewClass) {\n\n            if (Array.isArray(this.options.previewClass)) {\n                for (var i = 0; i < this.options.previewClass.length; i++) {\n                    preview.className += (' ' + this.options.previewClass[i]);\n                }\n\n            } else if (typeof this.options.previewClass === 'string') {\n                preview.className += (' ' + this.options.previewClass);\n            }\n        }\n\n        wrapper.parentNode.insertBefore(preview, wrapper.nextSibling);\n    }\n\n    if (typeof this.options.maxHeight !== 'undefined') {\n        this.setPreviewMaxHeight();\n    }\n\n    if (this.options.syncSideBySidePreviewScroll === false) return preview;\n    // Syncs scroll  editor -> preview\n    var cScroll = false;\n    var pScroll = false;\n    cm.on('scroll', function (v) {\n        if (cScroll) {\n            cScroll = false;\n            return;\n        }\n        pScroll = true;\n        var height = v.getScrollInfo().height - v.getScrollInfo().clientHeight;\n        var ratio = parseFloat(v.getScrollInfo().top) / height;\n        var move = (preview.scrollHeight - preview.clientHeight) * ratio;\n        preview.scrollTop = move;\n    });\n\n    // Syncs scroll  preview -> editor\n    preview.onscroll = function () {\n        if (pScroll) {\n            pScroll = false;\n            return;\n        }\n        cScroll = true;\n        var height = preview.scrollHeight - preview.clientHeight;\n        var ratio = parseFloat(preview.scrollTop) / height;\n        var move = (cm.getScrollInfo().height - cm.getScrollInfo().clientHeight) * ratio;\n        cm.scrollTo(0, move);\n    };\n    return preview;\n};\n\nEasyMDE.prototype.createToolbar = function (items) {\n    items = items || this.options.toolbar;\n\n    if (!items || items.length === 0) {\n        return;\n    }\n    var i;\n    for (i = 0; i < items.length; i++) {\n        if (toolbarBuiltInButtons[items[i]] != undefined) {\n            items[i] = toolbarBuiltInButtons[items[i]];\n        }\n    }\n\n    var bar = document.createElement('div');\n    bar.className = 'editor-toolbar';\n\n    var self = this;\n\n    var toolbarData = {};\n    self.toolbar = items;\n\n    for (i = 0; i < items.length; i++) {\n        if (items[i].name == 'guide' && self.options.toolbarGuideIcon === false)\n            continue;\n\n        if (self.options.hideIcons && self.options.hideIcons.indexOf(items[i].name) != -1)\n            continue;\n\n        // Fullscreen does not work well on mobile devices (even tablets)\n        // In the future, hopefully this can be resolved\n        if ((items[i].name == 'fullscreen' || items[i].name == 'side-by-side') && isMobile())\n            continue;\n\n\n        // Don't include trailing separators\n        if (items[i] === '|') {\n            var nonSeparatorIconsFollow = false;\n\n            for (var x = (i + 1); x < items.length; x++) {\n                if (items[x] !== '|' && (!self.options.hideIcons || self.options.hideIcons.indexOf(items[x].name) == -1)) {\n                    nonSeparatorIconsFollow = true;\n                }\n            }\n\n            if (!nonSeparatorIconsFollow)\n                continue;\n        }\n\n\n        // Create the icon and append to the toolbar\n        (function (item) {\n            var el;\n            if (item === '|') {\n                el = createSep();\n            } else if (item.children) {\n                el = createToolbarDropdown(item, self.options.toolbarTips, self.options.shortcuts, self);\n            } else {\n                el = createToolbarButton(item, true, self.options.toolbarTips, self.options.shortcuts, 'button', self);\n            }\n\n\n            toolbarData[item.name || item] = el;\n            bar.appendChild(el);\n\n            // Create the input element (ie. <input type='file'>), used among\n            // with the 'import-image' icon to open the browse-file window.\n            if (item.name === 'upload-image') {\n                var imageInput = document.createElement('input');\n                imageInput.className = 'imageInput';\n                imageInput.type = 'file';\n                imageInput.multiple = true;\n                imageInput.name = 'image';\n                imageInput.accept = self.options.imageAccept;\n                imageInput.style.display = 'none';\n                imageInput.style.opacity = 0;\n                bar.appendChild(imageInput);\n            }\n        })(items[i]);\n    }\n\n    self.toolbar_div = bar;\n    self.toolbarElements = toolbarData;\n\n    var cm = this.codemirror;\n    cm.on('cursorActivity', function () {\n        var stat = getState(cm);\n\n        for (var key in toolbarData) {\n            (function (key) {\n                var el = toolbarData[key];\n                if (stat[key]) {\n                    el.className += ' active';\n                } else if (key != 'fullscreen' && key != 'side-by-side') {\n                    el.className = el.className.replace(/\\s*active\\s*/g, '');\n                }\n            })(key);\n        }\n    });\n\n    var cmWrapper = cm.getWrapperElement();\n    cmWrapper.parentNode.insertBefore(bar, cmWrapper);\n    return bar;\n};\n\nEasyMDE.prototype.createStatusbar = function (status) {\n    // Initialize\n    status = status || this.options.status;\n    var options = this.options;\n    var cm = this.codemirror;\n\n    // Make sure the status variable is valid\n    if (!status || status.length === 0) {\n        return;\n    }\n\n    // Set up the built-in items\n    var items = [];\n    var i, onUpdate, onActivity, defaultValue;\n\n    for (i = 0; i < status.length; i++) {\n        // Reset some values\n        onUpdate = undefined;\n        onActivity = undefined;\n        defaultValue = undefined;\n\n\n        // Handle if custom or not\n        if (typeof status[i] === 'object') {\n            items.push({\n                className: status[i].className,\n                defaultValue: status[i].defaultValue,\n                onUpdate: status[i].onUpdate,\n                onActivity: status[i].onActivity,\n            });\n        } else {\n            var name = status[i];\n\n            if (name === 'words') {\n                defaultValue = function (el) {\n                    el.innerHTML = wordCount(cm.getValue());\n                };\n                onUpdate = function (el) {\n                    el.innerHTML = wordCount(cm.getValue());\n                };\n            } else if (name === 'lines') {\n                defaultValue = function (el) {\n                    el.innerHTML = cm.lineCount();\n                };\n                onUpdate = function (el) {\n                    el.innerHTML = cm.lineCount();\n                };\n            } else if (name === 'cursor') {\n                defaultValue = function (el) {\n                    el.innerHTML = '0:0';\n                };\n                onActivity = function (el) {\n                    var pos = cm.getCursor();\n                    el.innerHTML = pos.line + ':' + pos.ch;\n                };\n            } else if (name === 'autosave') {\n                defaultValue = function (el) {\n                    if (options.autosave != undefined && options.autosave.enabled === true) {\n                        el.setAttribute('id', 'autosaved');\n                    }\n                };\n            } else if (name === 'upload-image') {\n                defaultValue = function (el) {\n                    el.innerHTML = options.imageTexts.sbInit;\n                };\n            }\n\n            items.push({\n                className: name,\n                defaultValue: defaultValue,\n                onUpdate: onUpdate,\n                onActivity: onActivity,\n            });\n        }\n    }\n\n\n    // Create element for the status bar\n    var bar = document.createElement('div');\n    bar.className = 'editor-statusbar';\n\n\n    // Create a new span for each item\n    for (i = 0; i < items.length; i++) {\n        // Store in temporary variable\n        var item = items[i];\n\n\n        // Create span element\n        var el = document.createElement('span');\n        el.className = item.className;\n\n\n        // Ensure the defaultValue is a function\n        if (typeof item.defaultValue === 'function') {\n            item.defaultValue(el);\n        }\n\n\n        // Ensure the onUpdate is a function\n        if (typeof item.onUpdate === 'function') {\n            // Create a closure around the span of the current action, then execute the onUpdate handler\n            this.codemirror.on('update', (function (el, item) {\n                return function () {\n                    item.onUpdate(el);\n                };\n            }(el, item)));\n        }\n        if (typeof item.onActivity === 'function') {\n            // Create a closure around the span of the current action, then execute the onActivity handler\n            this.codemirror.on('cursorActivity', (function (el, item) {\n                return function () {\n                    item.onActivity(el);\n                };\n            }(el, item)));\n        }\n\n\n        // Append the item to the status bar\n        bar.appendChild(el);\n    }\n\n\n    // Insert the status bar into the DOM\n    var cmWrapper = this.codemirror.getWrapperElement();\n    cmWrapper.parentNode.insertBefore(bar, cmWrapper.nextSibling);\n    return bar;\n};\n\n/**\n * Get or set the text content.\n */\nEasyMDE.prototype.value = function (val) {\n    var cm = this.codemirror;\n    if (val === undefined) {\n        return cm.getValue();\n    } else {\n        cm.getDoc().setValue(val);\n        if (this.isPreviewActive()) {\n            var wrapper = cm.getWrapperElement();\n            var preview = wrapper.lastChild;\n            preview.innerHTML = this.options.previewRender(val, preview);\n        }\n        return this;\n    }\n};\n\n\n/**\n * Bind static methods for exports.\n */\nEasyMDE.toggleBold = toggleBold;\nEasyMDE.toggleItalic = toggleItalic;\nEasyMDE.toggleStrikethrough = toggleStrikethrough;\nEasyMDE.toggleBlockquote = toggleBlockquote;\nEasyMDE.toggleHeadingSmaller = toggleHeadingSmaller;\nEasyMDE.toggleHeadingBigger = toggleHeadingBigger;\nEasyMDE.toggleHeading1 = toggleHeading1;\nEasyMDE.toggleHeading2 = toggleHeading2;\nEasyMDE.toggleHeading3 = toggleHeading3;\nEasyMDE.toggleCodeBlock = toggleCodeBlock;\nEasyMDE.toggleUnorderedList = toggleUnorderedList;\nEasyMDE.toggleOrderedList = toggleOrderedList;\nEasyMDE.cleanBlock = cleanBlock;\nEasyMDE.drawLink = drawLink;\nEasyMDE.drawImage = drawImage;\nEasyMDE.drawUploadedImage = drawUploadedImage;\nEasyMDE.drawTable = drawTable;\nEasyMDE.drawHorizontalRule = drawHorizontalRule;\nEasyMDE.undo = undo;\nEasyMDE.redo = redo;\nEasyMDE.togglePreview = togglePreview;\nEasyMDE.toggleSideBySide = toggleSideBySide;\nEasyMDE.toggleFullScreen = toggleFullScreen;\n\n/**\n * Bind instance methods for exports.\n */\nEasyMDE.prototype.toggleBold = function () {\n    toggleBold(this);\n};\nEasyMDE.prototype.toggleItalic = function () {\n    toggleItalic(this);\n};\nEasyMDE.prototype.toggleStrikethrough = function () {\n    toggleStrikethrough(this);\n};\nEasyMDE.prototype.toggleBlockquote = function () {\n    toggleBlockquote(this);\n};\nEasyMDE.prototype.toggleHeadingSmaller = function () {\n    toggleHeadingSmaller(this);\n};\nEasyMDE.prototype.toggleHeadingBigger = function () {\n    toggleHeadingBigger(this);\n};\nEasyMDE.prototype.toggleHeading1 = function () {\n    toggleHeading1(this);\n};\nEasyMDE.prototype.toggleHeading2 = function () {\n    toggleHeading2(this);\n};\nEasyMDE.prototype.toggleHeading3 = function () {\n    toggleHeading3(this);\n};\nEasyMDE.prototype.toggleCodeBlock = function () {\n    toggleCodeBlock(this);\n};\nEasyMDE.prototype.toggleUnorderedList = function () {\n    toggleUnorderedList(this);\n};\nEasyMDE.prototype.toggleOrderedList = function () {\n    toggleOrderedList(this);\n};\nEasyMDE.prototype.cleanBlock = function () {\n    cleanBlock(this);\n};\nEasyMDE.prototype.drawLink = function () {\n    drawLink(this);\n};\nEasyMDE.prototype.drawImage = function () {\n    drawImage(this);\n};\nEasyMDE.prototype.drawUploadedImage = function () {\n    drawUploadedImage(this);\n};\nEasyMDE.prototype.drawTable = function () {\n    drawTable(this);\n};\nEasyMDE.prototype.drawHorizontalRule = function () {\n    drawHorizontalRule(this);\n};\nEasyMDE.prototype.undo = function () {\n    undo(this);\n};\nEasyMDE.prototype.redo = function () {\n    redo(this);\n};\nEasyMDE.prototype.togglePreview = function () {\n    togglePreview(this);\n};\nEasyMDE.prototype.toggleSideBySide = function () {\n    toggleSideBySide(this);\n};\nEasyMDE.prototype.toggleFullScreen = function () {\n    toggleFullScreen(this);\n};\n\nEasyMDE.prototype.isPreviewActive = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.lastChild;\n\n    return /editor-preview-active/.test(preview.className);\n};\n\nEasyMDE.prototype.isSideBySideActive = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var preview = wrapper.nextSibling;\n\n    return /editor-preview-active-side/.test(preview.className);\n};\n\nEasyMDE.prototype.isFullscreenActive = function () {\n    var cm = this.codemirror;\n\n    return cm.getOption('fullScreen');\n};\n\nEasyMDE.prototype.getState = function () {\n    var cm = this.codemirror;\n\n    return getState(cm);\n};\n\nEasyMDE.prototype.toTextArea = function () {\n    var cm = this.codemirror;\n    var wrapper = cm.getWrapperElement();\n    var easyMDEContainer = wrapper.parentNode;\n\n    if (easyMDEContainer) {\n        if (this.gui.toolbar) {\n            easyMDEContainer.removeChild(this.gui.toolbar);\n        }\n        if (this.gui.statusbar) {\n            easyMDEContainer.removeChild(this.gui.statusbar);\n        }\n        if (this.gui.sideBySide) {\n            easyMDEContainer.removeChild(this.gui.sideBySide);\n        }\n    }\n\n    // Unwrap easyMDEcontainer before codemirror toTextArea() call\n    easyMDEContainer.parentNode.insertBefore(wrapper, easyMDEContainer);\n    easyMDEContainer.remove();\n\n    cm.toTextArea();\n\n    if (this.autosaveTimeoutId) {\n        clearTimeout(this.autosaveTimeoutId);\n        this.autosaveTimeoutId = undefined;\n        this.clearAutosavedValue();\n    }\n};\n\nmodule.exports = EasyMDE;\n","'use strict';\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Helpers\n\n// Merge objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\nfunction isString(obj) { return _class(obj) === '[object String]'; }\nfunction isObject(obj) { return _class(obj) === '[object Object]'; }\nfunction isRegExp(obj) { return _class(obj) === '[object RegExp]'; }\nfunction isFunction(obj) { return _class(obj) === '[object Function]'; }\n\n\nfunction escapeRE(str) { return str.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&'); }\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar defaultOptions = {\n  fuzzyLink: true,\n  fuzzyEmail: true,\n  fuzzyIP: false\n};\n\n\nfunction isOptionsObj(obj) {\n  return Object.keys(obj || {}).reduce(function (acc, k) {\n    return acc || defaultOptions.hasOwnProperty(k);\n  }, false);\n}\n\n\nvar defaultSchemas = {\n  'http:': {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.http) {\n        // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.http =  new RegExp(\n          '^\\\\/\\\\/' + self.re.src_auth + self.re.src_host_port_strict + self.re.src_path, 'i'\n        );\n      }\n      if (self.re.http.test(tail)) {\n        return tail.match(self.re.http)[0].length;\n      }\n      return 0;\n    }\n  },\n  'https:':  'http:',\n  'ftp:':    'http:',\n  '//':      {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.no_http) {\n      // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.no_http =  new RegExp(\n          '^' +\n          self.re.src_auth +\n          // Don't allow single-level domains, because of false positives like '//test'\n          // with code comments\n          '(?:localhost|(?:(?:' + self.re.src_domain + ')\\\\.)+' + self.re.src_domain_root + ')' +\n          self.re.src_port +\n          self.re.src_host_terminator +\n          self.re.src_path,\n\n          'i'\n        );\n      }\n\n      if (self.re.no_http.test(tail)) {\n        // should not be `://` & `///`, that protects from errors in protocol name\n        if (pos >= 3 && text[pos - 3] === ':') { return 0; }\n        if (pos >= 3 && text[pos - 3] === '/') { return 0; }\n        return tail.match(self.re.no_http)[0].length;\n      }\n      return 0;\n    }\n  },\n  'mailto:': {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.mailto) {\n        self.re.mailto =  new RegExp(\n          '^' + self.re.src_email_name + '@' + self.re.src_host_strict, 'i'\n        );\n      }\n      if (self.re.mailto.test(tail)) {\n        return tail.match(self.re.mailto)[0].length;\n      }\n      return 0;\n    }\n  }\n};\n\n/*eslint-disable max-len*/\n\n// RE pattern for 2-character tlds (autogenerated by ./support/tlds_2char_gen.js)\nvar tlds_2ch_src_re = 'a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]';\n\n// DON'T try to make PRs with changes. Extend TLDs with LinkifyIt.tlds() instead\nvar tlds_default = 'biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|'.split('|');\n\n/*eslint-enable max-len*/\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction resetScanCache(self) {\n  self.__index__ = -1;\n  self.__text_cache__   = '';\n}\n\nfunction createValidator(re) {\n  return function (text, pos) {\n    var tail = text.slice(pos);\n\n    if (re.test(tail)) {\n      return tail.match(re)[0].length;\n    }\n    return 0;\n  };\n}\n\nfunction createNormalizer() {\n  return function (match, self) {\n    self.normalize(match);\n  };\n}\n\n// Schemas compiler. Build regexps.\n//\nfunction compile(self) {\n\n  // Load & clone RE patterns.\n  var re = self.re = require('./lib/re')(self.__opts__);\n\n  // Define dynamic patterns\n  var tlds = self.__tlds__.slice();\n\n  self.onCompile();\n\n  if (!self.__tlds_replaced__) {\n    tlds.push(tlds_2ch_src_re);\n  }\n  tlds.push(re.src_xn);\n\n  re.src_tlds = tlds.join('|');\n\n  function untpl(tpl) { return tpl.replace('%TLDS%', re.src_tlds); }\n\n  re.email_fuzzy      = RegExp(untpl(re.tpl_email_fuzzy), 'i');\n  re.link_fuzzy       = RegExp(untpl(re.tpl_link_fuzzy), 'i');\n  re.link_no_ip_fuzzy = RegExp(untpl(re.tpl_link_no_ip_fuzzy), 'i');\n  re.host_fuzzy_test  = RegExp(untpl(re.tpl_host_fuzzy_test), 'i');\n\n  //\n  // Compile each schema\n  //\n\n  var aliases = [];\n\n  self.__compiled__ = {}; // Reset compiled data\n\n  function schemaError(name, val) {\n    throw new Error('(LinkifyIt) Invalid schema \"' + name + '\": ' + val);\n  }\n\n  Object.keys(self.__schemas__).forEach(function (name) {\n    var val = self.__schemas__[name];\n\n    // skip disabled methods\n    if (val === null) { return; }\n\n    var compiled = { validate: null, link: null };\n\n    self.__compiled__[name] = compiled;\n\n    if (isObject(val)) {\n      if (isRegExp(val.validate)) {\n        compiled.validate = createValidator(val.validate);\n      } else if (isFunction(val.validate)) {\n        compiled.validate = val.validate;\n      } else {\n        schemaError(name, val);\n      }\n\n      if (isFunction(val.normalize)) {\n        compiled.normalize = val.normalize;\n      } else if (!val.normalize) {\n        compiled.normalize = createNormalizer();\n      } else {\n        schemaError(name, val);\n      }\n\n      return;\n    }\n\n    if (isString(val)) {\n      aliases.push(name);\n      return;\n    }\n\n    schemaError(name, val);\n  });\n\n  //\n  // Compile postponed aliases\n  //\n\n  aliases.forEach(function (alias) {\n    if (!self.__compiled__[self.__schemas__[alias]]) {\n      // Silently fail on missed schemas to avoid errons on disable.\n      // schemaError(alias, self.__schemas__[alias]);\n      return;\n    }\n\n    self.__compiled__[alias].validate =\n      self.__compiled__[self.__schemas__[alias]].validate;\n    self.__compiled__[alias].normalize =\n      self.__compiled__[self.__schemas__[alias]].normalize;\n  });\n\n  //\n  // Fake record for guessed links\n  //\n  self.__compiled__[''] = { validate: null, normalize: createNormalizer() };\n\n  //\n  // Build schema condition\n  //\n  var slist = Object.keys(self.__compiled__)\n                      .filter(function (name) {\n                        // Filter disabled & fake schemas\n                        return name.length > 0 && self.__compiled__[name];\n                      })\n                      .map(escapeRE)\n                      .join('|');\n  // (?!_) cause 1.5x slowdown\n  self.re.schema_test   = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'i');\n  self.re.schema_search = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'ig');\n\n  self.re.pretest = RegExp(\n    '(' + self.re.schema_test.source + ')|(' + self.re.host_fuzzy_test.source + ')|@',\n    'i'\n  );\n\n  //\n  // Cleanup\n  //\n\n  resetScanCache(self);\n}\n\n/**\n * class Match\n *\n * Match result. Single element of array, returned by [[LinkifyIt#match]]\n **/\nfunction Match(self, shift) {\n  var start = self.__index__,\n      end   = self.__last_index__,\n      text  = self.__text_cache__.slice(start, end);\n\n  /**\n   * Match#schema -> String\n   *\n   * Prefix (protocol) for matched string.\n   **/\n  this.schema    = self.__schema__.toLowerCase();\n  /**\n   * Match#index -> Number\n   *\n   * First position of matched string.\n   **/\n  this.index     = start + shift;\n  /**\n   * Match#lastIndex -> Number\n   *\n   * Next position after matched string.\n   **/\n  this.lastIndex = end + shift;\n  /**\n   * Match#raw -> String\n   *\n   * Matched string.\n   **/\n  this.raw       = text;\n  /**\n   * Match#text -> String\n   *\n   * Notmalized text of matched string.\n   **/\n  this.text      = text;\n  /**\n   * Match#url -> String\n   *\n   * Normalized url of matched string.\n   **/\n  this.url       = text;\n}\n\nfunction createMatch(self, shift) {\n  var match = new Match(self, shift);\n\n  self.__compiled__[match.schema].normalize(match, self);\n\n  return match;\n}\n\n\n/**\n * class LinkifyIt\n **/\n\n/**\n * new LinkifyIt(schemas, options)\n * - schemas (Object): Optional. Additional schemas to validate (prefix/validator)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Creates new linkifier instance with optional additional schemas.\n * Can be called without `new` keyword for convenience.\n *\n * By default understands:\n *\n * - `http(s)://...` , `ftp://...`, `mailto:...` & `//...` links\n * - \"fuzzy\" links and emails (example.com, foo@bar.com).\n *\n * `schemas` is an object, where each key/value describes protocol/rule:\n *\n * - __key__ - link prefix (usually, protocol name with `:` at the end, `skype:`\n *   for example). `linkify-it` makes shure that prefix is not preceeded with\n *   alphanumeric char and symbols. Only whitespaces and punctuation allowed.\n * - __value__ - rule to check tail after link prefix\n *   - _String_ - just alias to existing rule\n *   - _Object_\n *     - _validate_ - validator function (should return matched length on success),\n *       or `RegExp`.\n *     - _normalize_ - optional function to normalize text & url of matched result\n *       (for example, for @twitter mentions).\n *\n * `options`:\n *\n * - __fuzzyLink__ - recognige URL-s without `http(s):` prefix. Default `true`.\n * - __fuzzyIP__ - allow IPs in fuzzy links above. Can conflict with some texts\n *   like version numbers. Default `false`.\n * - __fuzzyEmail__ - recognize emails without `mailto:` prefix.\n *\n **/\nfunction LinkifyIt(schemas, options) {\n  if (!(this instanceof LinkifyIt)) {\n    return new LinkifyIt(schemas, options);\n  }\n\n  if (!options) {\n    if (isOptionsObj(schemas)) {\n      options = schemas;\n      schemas = {};\n    }\n  }\n\n  this.__opts__           = assign({}, defaultOptions, options);\n\n  // Cache last tested result. Used to skip repeating steps on next `match` call.\n  this.__index__          = -1;\n  this.__last_index__     = -1; // Next scan position\n  this.__schema__         = '';\n  this.__text_cache__     = '';\n\n  this.__schemas__        = assign({}, defaultSchemas, schemas);\n  this.__compiled__       = {};\n\n  this.__tlds__           = tlds_default;\n  this.__tlds_replaced__  = false;\n\n  this.re = {};\n\n  compile(this);\n}\n\n\n/** chainable\n * LinkifyIt#add(schema, definition)\n * - schema (String): rule name (fixed pattern prefix)\n * - definition (String|RegExp|Object): schema definition\n *\n * Add new rule definition. See constructor description for details.\n **/\nLinkifyIt.prototype.add = function add(schema, definition) {\n  this.__schemas__[schema] = definition;\n  compile(this);\n  return this;\n};\n\n\n/** chainable\n * LinkifyIt#set(options)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Set recognition options for links without schema.\n **/\nLinkifyIt.prototype.set = function set(options) {\n  this.__opts__ = assign(this.__opts__, options);\n  return this;\n};\n\n\n/**\n * LinkifyIt#test(text) -> Boolean\n *\n * Searches linkifiable pattern and returns `true` on success or `false` on fail.\n **/\nLinkifyIt.prototype.test = function test(text) {\n  // Reset scan cache\n  this.__text_cache__ = text;\n  this.__index__      = -1;\n\n  if (!text.length) { return false; }\n\n  var m, ml, me, len, shift, next, re, tld_pos, at_pos;\n\n  // try to scan for link with schema - that's the most simple rule\n  if (this.re.schema_test.test(text)) {\n    re = this.re.schema_search;\n    re.lastIndex = 0;\n    while ((m = re.exec(text)) !== null) {\n      len = this.testSchemaAt(text, m[2], re.lastIndex);\n      if (len) {\n        this.__schema__     = m[2];\n        this.__index__      = m.index + m[1].length;\n        this.__last_index__ = m.index + m[0].length + len;\n        break;\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyLink && this.__compiled__['http:']) {\n    // guess schemaless links\n    tld_pos = text.search(this.re.host_fuzzy_test);\n    if (tld_pos >= 0) {\n      // if tld is located after found link - no need to check fuzzy pattern\n      if (this.__index__ < 0 || tld_pos < this.__index__) {\n        if ((ml = text.match(this.__opts__.fuzzyIP ? this.re.link_fuzzy : this.re.link_no_ip_fuzzy)) !== null) {\n\n          shift = ml.index + ml[1].length;\n\n          if (this.__index__ < 0 || shift < this.__index__) {\n            this.__schema__     = '';\n            this.__index__      = shift;\n            this.__last_index__ = ml.index + ml[0].length;\n          }\n        }\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyEmail && this.__compiled__['mailto:']) {\n    // guess schemaless emails\n    at_pos = text.indexOf('@');\n    if (at_pos >= 0) {\n      // We can't skip this check, because this cases are possible:\n      // 192.168.1.1@gmail.com, my.in@example.com\n      if ((me = text.match(this.re.email_fuzzy)) !== null) {\n\n        shift = me.index + me[1].length;\n        next  = me.index + me[0].length;\n\n        if (this.__index__ < 0 || shift < this.__index__ ||\n            (shift === this.__index__ && next > this.__last_index__)) {\n          this.__schema__     = 'mailto:';\n          this.__index__      = shift;\n          this.__last_index__ = next;\n        }\n      }\n    }\n  }\n\n  return this.__index__ >= 0;\n};\n\n\n/**\n * LinkifyIt#pretest(text) -> Boolean\n *\n * Very quick check, that can give false positives. Returns true if link MAY BE\n * can exists. Can be used for speed optimization, when you need to check that\n * link NOT exists.\n **/\nLinkifyIt.prototype.pretest = function pretest(text) {\n  return this.re.pretest.test(text);\n};\n\n\n/**\n * LinkifyIt#testSchemaAt(text, name, position) -> Number\n * - text (String): text to scan\n * - name (String): rule (schema) name\n * - position (Number): text offset to check from\n *\n * Similar to [[LinkifyIt#test]] but checks only specific protocol tail exactly\n * at given position. Returns length of found pattern (0 on fail).\n **/\nLinkifyIt.prototype.testSchemaAt = function testSchemaAt(text, schema, pos) {\n  // If not supported schema check requested - terminate\n  if (!this.__compiled__[schema.toLowerCase()]) {\n    return 0;\n  }\n  return this.__compiled__[schema.toLowerCase()].validate(text, pos, this);\n};\n\n\n/**\n * LinkifyIt#match(text) -> Array|null\n *\n * Returns array of found link descriptions or `null` on fail. We strongly\n * recommend to use [[LinkifyIt#test]] first, for best speed.\n *\n * ##### Result match description\n *\n * - __schema__ - link schema, can be empty for fuzzy links, or `//` for\n *   protocol-neutral  links.\n * - __index__ - offset of matched text\n * - __lastIndex__ - index of next char after mathch end\n * - __raw__ - matched text\n * - __text__ - normalized text\n * - __url__ - link, generated from matched text\n **/\nLinkifyIt.prototype.match = function match(text) {\n  var shift = 0, result = [];\n\n  // Try to take previous element from cache, if .test() called before\n  if (this.__index__ >= 0 && this.__text_cache__ === text) {\n    result.push(createMatch(this, shift));\n    shift = this.__last_index__;\n  }\n\n  // Cut head if cache was used\n  var tail = shift ? text.slice(shift) : text;\n\n  // Scan string until end reached\n  while (this.test(tail)) {\n    result.push(createMatch(this, shift));\n\n    tail = tail.slice(this.__last_index__);\n    shift += this.__last_index__;\n  }\n\n  if (result.length) {\n    return result;\n  }\n\n  return null;\n};\n\n\n/** chainable\n * LinkifyIt#tlds(list [, keepOld]) -> this\n * - list (Array): list of tlds\n * - keepOld (Boolean): merge with current list if `true` (`false` by default)\n *\n * Load (or merge) new tlds list. Those are user for fuzzy links (without prefix)\n * to avoid false positives. By default this algorythm used:\n *\n * - hostname with any 2-letter root zones are ok.\n * - biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\n *   are ok.\n * - encoded (`xn--...`) root zones are ok.\n *\n * If list is replaced, then exact match for 2-chars root zones will be checked.\n **/\nLinkifyIt.prototype.tlds = function tlds(list, keepOld) {\n  list = Array.isArray(list) ? list : [ list ];\n\n  if (!keepOld) {\n    this.__tlds__ = list.slice();\n    this.__tlds_replaced__ = true;\n    compile(this);\n    return this;\n  }\n\n  this.__tlds__ = this.__tlds__.concat(list)\n                                  .sort()\n                                  .filter(function (el, idx, arr) {\n                                    return el !== arr[idx - 1];\n                                  })\n                                  .reverse();\n\n  compile(this);\n  return this;\n};\n\n/**\n * LinkifyIt#normalize(match)\n *\n * Default normalizer (if schema does not define it's own).\n **/\nLinkifyIt.prototype.normalize = function normalize(match) {\n\n  // Do minimal possible changes by default. Need to collect feedback prior\n  // to move forward https://github.com/markdown-it/linkify-it/issues/1\n\n  if (!match.schema) { match.url = 'http://' + match.url; }\n\n  if (match.schema === 'mailto:' && !/^mailto:/i.test(match.url)) {\n    match.url = 'mailto:' + match.url;\n  }\n};\n\n\n/**\n * LinkifyIt#onCompile()\n *\n * Override to modify basic RegExp-s.\n **/\nLinkifyIt.prototype.onCompile = function onCompile() {\n};\n\n\nmodule.exports = LinkifyIt;\n","'use strict';\n\n\nmodule.exports = function (opts) {\n  var re = {};\n\n  // Use direct extract instead of `regenerate` to reduse browserified size\n  re.src_Any = require('uc.micro/properties/Any/regex').source;\n  re.src_Cc  = require('uc.micro/categories/Cc/regex').source;\n  re.src_Z   = require('uc.micro/categories/Z/regex').source;\n  re.src_P   = require('uc.micro/categories/P/regex').source;\n\n  // \\p{\\Z\\P\\Cc\\CF} (white spaces + control + format + punctuation)\n  re.src_ZPCc = [ re.src_Z, re.src_P, re.src_Cc ].join('|');\n\n  // \\p{\\Z\\Cc} (white spaces + control)\n  re.src_ZCc = [ re.src_Z, re.src_Cc ].join('|');\n\n  // Experimental. List of chars, completely prohibited in links\n  // because can separate it from other part of text\n  var text_separators = '[><\\uff5c]';\n\n  // All possible word characters (everything without punctuation, spaces & controls)\n  // Defined via punctuation & spaces to save space\n  // Should be something like \\p{\\L\\N\\S\\M} (\\w but without `_`)\n  re.src_pseudo_letter       = '(?:(?!' + text_separators + '|' + re.src_ZPCc + ')' + re.src_Any + ')';\n  // The same as abothe but without [0-9]\n  // var src_pseudo_letter_non_d = '(?:(?![0-9]|' + src_ZPCc + ')' + src_Any + ')';\n\n  ////////////////////////////////////////////////////////////////////////////////\n\n  re.src_ip4 =\n\n    '(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)';\n\n  // Prohibit any of \"@/[]()\" in user/pass to avoid wrong domain fetch.\n  re.src_auth    = '(?:(?:(?!' + re.src_ZCc + '|[@/\\\\[\\\\]()]).)+@)?';\n\n  re.src_port =\n\n    '(?::(?:6(?:[0-4]\\\\d{3}|5(?:[0-4]\\\\d{2}|5(?:[0-2]\\\\d|3[0-5])))|[1-5]?\\\\d{1,4}))?';\n\n  re.src_host_terminator =\n\n    '(?=$|' + text_separators + '|' + re.src_ZPCc + ')(?!-|_|:\\\\d|\\\\.-|\\\\.(?!$|' + re.src_ZPCc + '))';\n\n  re.src_path =\n\n    '(?:' +\n      '[/?#]' +\n        '(?:' +\n          '(?!' + re.src_ZCc + '|' + text_separators + '|[()[\\\\]{}.,\"\\'?!\\\\-]).|' +\n          '\\\\[(?:(?!' + re.src_ZCc + '|\\\\]).)*\\\\]|' +\n          '\\\\((?:(?!' + re.src_ZCc + '|[)]).)*\\\\)|' +\n          '\\\\{(?:(?!' + re.src_ZCc + '|[}]).)*\\\\}|' +\n          '\\\\\"(?:(?!' + re.src_ZCc + '|[\"]).)+\\\\\"|' +\n          \"\\\\'(?:(?!\" + re.src_ZCc + \"|[']).)+\\\\'|\" +\n          \"\\\\'(?=\" + re.src_pseudo_letter + '|[-]).|' +  // allow `I'm_king` if no pair found\n          '\\\\.{2,}[a-zA-Z0-9%/&]|' + // google has many dots in \"google search\" links (#66, #81).\n                                     // github has ... in commit range links,\n                                     // Restrict to\n                                     // - english\n                                     // - percent-encoded\n                                     // - parts of file path\n                                     // - params separator\n                                     // until more examples found.\n          '\\\\.(?!' + re.src_ZCc + '|[.]).|' +\n          (opts && opts['---'] ?\n            '\\\\-(?!--(?:[^-]|$))(?:-*)|' // `---` => long dash, terminate\n            :\n            '\\\\-+|'\n          ) +\n          '\\\\,(?!' + re.src_ZCc + ').|' +       // allow `,,,` in paths\n          '\\\\!+(?!' + re.src_ZCc + '|[!]).|' +  // allow `!!!` in paths, but not at the end\n          '\\\\?(?!' + re.src_ZCc + '|[?]).' +\n        ')+' +\n      '|\\\\/' +\n    ')?';\n\n  // Allow anything in markdown spec, forbid quote (\") at the first position\n  // because emails enclosed in quotes are far more common\n  re.src_email_name =\n\n    '[\\\\-;:&=\\\\+\\\\$,\\\\.a-zA-Z0-9_][\\\\-;:&=\\\\+\\\\$,\\\\\"\\\\.a-zA-Z0-9_]*';\n\n  re.src_xn =\n\n    'xn--[a-z0-9\\\\-]{1,59}';\n\n  // More to read about domain names\n  // http://serverfault.com/questions/638260/\n\n  re.src_domain_root =\n\n    // Allow letters & digits (http://test1)\n    '(?:' +\n      re.src_xn +\n      '|' +\n      re.src_pseudo_letter + '{1,63}' +\n    ')';\n\n  re.src_domain =\n\n    '(?:' +\n      re.src_xn +\n      '|' +\n      '(?:' + re.src_pseudo_letter + ')' +\n      '|' +\n      '(?:' + re.src_pseudo_letter + '(?:-|' + re.src_pseudo_letter + '){0,61}' + re.src_pseudo_letter + ')' +\n    ')';\n\n  re.src_host =\n\n    '(?:' +\n    // Don't need IP check, because digits are already allowed in normal domain names\n    //   src_ip4 +\n    // '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)*' + re.src_domain/*_root*/ + ')' +\n    ')';\n\n  re.tpl_host_fuzzy =\n\n    '(?:' +\n      re.src_ip4 +\n    '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))' +\n    ')';\n\n  re.tpl_host_no_ip_fuzzy =\n\n    '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))';\n\n  re.src_host_strict =\n\n    re.src_host + re.src_host_terminator;\n\n  re.tpl_host_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_host_terminator;\n\n  re.src_host_port_strict =\n\n    re.src_host + re.src_port + re.src_host_terminator;\n\n  re.tpl_host_port_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_port + re.src_host_terminator;\n\n  re.tpl_host_port_no_ip_fuzzy_strict =\n\n    re.tpl_host_no_ip_fuzzy + re.src_port + re.src_host_terminator;\n\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Main rules\n\n  // Rude test fuzzy links by host, for quick deny\n  re.tpl_host_fuzzy_test =\n\n    'localhost|www\\\\.|\\\\.\\\\d{1,3}\\\\.|(?:\\\\.(?:%TLDS%)(?:' + re.src_ZPCc + '|>|$))';\n\n  re.tpl_email_fuzzy =\n\n      '(^|' + text_separators + '|\"|\\\\(|' + re.src_ZCc + ')' +\n      '(' + re.src_email_name + '@' + re.tpl_host_fuzzy_strict + ')';\n\n  re.tpl_link_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_fuzzy_strict + re.src_path + ')';\n\n  re.tpl_link_no_ip_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_no_ip_fuzzy_strict + re.src_path + ')';\n\n  return re;\n};\n","// Process block-level custom containers\n//\n'use strict';\n\n\nmodule.exports = function container_plugin(md, name, options) {\n\n  // Second param may be useful if you decide\n  // to increase minimal allowed marker length\n  function validateDefault(params/*, markup*/) {\n    return params.trim().split(' ', 2)[0] === name;\n  }\n\n  function renderDefault(tokens, idx, _options, env, slf) {\n\n    // add a class to the opening tag\n    if (tokens[idx].nesting === 1) {\n      tokens[idx].attrJoin('class', name);\n    }\n\n    return slf.renderToken(tokens, idx, _options, env, slf);\n  }\n\n  options = options || {};\n\n  var min_markers = 3,\n      marker_str  = options.marker || ':',\n      marker_char = marker_str.charCodeAt(0),\n      marker_len  = marker_str.length,\n      validate    = options.validate || validateDefault,\n      render      = options.render || renderDefault;\n\n  function container(state, startLine, endLine, silent) {\n    var pos, nextLine, marker_count, markup, params, token,\n        old_parent, old_line_max,\n        auto_closed = false,\n        start = state.bMarks[startLine] + state.tShift[startLine],\n        max = state.eMarks[startLine];\n\n    // Check out the first character quickly,\n    // this should filter out most of non-containers\n    //\n    if (marker_char !== state.src.charCodeAt(start)) { return false; }\n\n    // Check out the rest of the marker string\n    //\n    for (pos = start + 1; pos <= max; pos++) {\n      if (marker_str[(pos - start) % marker_len] !== state.src[pos]) {\n        break;\n      }\n    }\n\n    marker_count = Math.floor((pos - start) / marker_len);\n    if (marker_count < min_markers) { return false; }\n    pos -= (pos - start) % marker_len;\n\n    markup = state.src.slice(start, pos);\n    params = state.src.slice(pos, max);\n    if (!validate(params, markup)) { return false; }\n\n    // Since start is found, we can report success here in validation mode\n    //\n    if (silent) { return true; }\n\n    // Search for the end of the block\n    //\n    nextLine = startLine;\n\n    for (;;) {\n      nextLine++;\n      if (nextLine >= endLine) {\n        // unclosed block should be autoclosed by end of document.\n        // also block seems to be autoclosed by end of parent\n        break;\n      }\n\n      start = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n\n      if (start < max && state.sCount[nextLine] < state.blkIndent) {\n        // non-empty line with negative indent should stop the list:\n        // - ```\n        //  test\n        break;\n      }\n\n      if (marker_char !== state.src.charCodeAt(start)) { continue; }\n\n      if (state.sCount[nextLine] - state.blkIndent >= 4) {\n        // closing fence should be indented less than 4 spaces\n        continue;\n      }\n\n      for (pos = start + 1; pos <= max; pos++) {\n        if (marker_str[(pos - start) % marker_len] !== state.src[pos]) {\n          break;\n        }\n      }\n\n      // closing code fence must be at least as long as the opening one\n      if (Math.floor((pos - start) / marker_len) < marker_count) { continue; }\n\n      // make sure tail has spaces only\n      pos -= (pos - start) % marker_len;\n      pos = state.skipSpaces(pos);\n\n      if (pos < max) { continue; }\n\n      // found!\n      auto_closed = true;\n      break;\n    }\n\n    old_parent = state.parentType;\n    old_line_max = state.lineMax;\n    state.parentType = 'container';\n\n    // this will prevent lazy continuations from ever going past our end marker\n    state.lineMax = nextLine;\n\n    token        = state.push('container_' + name + '_open', 'div', 1);\n    token.markup = markup;\n    token.block  = true;\n    token.info   = params;\n    token.map    = [ startLine, nextLine ];\n\n    state.md.block.tokenize(state, startLine + 1, nextLine);\n\n    token        = state.push('container_' + name + '_close', 'div', -1);\n    token.markup = state.src.slice(start, pos);\n    token.block  = true;\n\n    state.parentType = old_parent;\n    state.lineMax = old_line_max;\n    state.line = nextLine + (auto_closed ? 1 : 0);\n\n    return true;\n  }\n\n  md.block.ruler.before('fence', 'container_' + name, container, {\n    alt: [ 'paragraph', 'reference', 'blockquote', 'list' ]\n  });\n  md.renderer.rules['container_' + name + '_open'] = render;\n  md.renderer.rules['container_' + name + '_close'] = render;\n};\n","'use strict';\n\n\nmodule.exports = require('./lib/');\n","// HTML5 entities map: { name -> utf16string }\n//\n'use strict';\n\n/*eslint quotes:0*/\nmodule.exports = require('entities/lib/maps/entities.json');\n","// List of valid html blocks names, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#html-blocks\n\n'use strict';\n\n\nmodule.exports = [\n  'address',\n  'article',\n  'aside',\n  'base',\n  'basefont',\n  'blockquote',\n  'body',\n  'caption',\n  'center',\n  'col',\n  'colgroup',\n  'dd',\n  'details',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'frame',\n  'frameset',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hr',\n  'html',\n  'iframe',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'menu',\n  'menuitem',\n  'meta',\n  'nav',\n  'noframes',\n  'ol',\n  'optgroup',\n  'option',\n  'p',\n  'param',\n  'section',\n  'source',\n  'summary',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'title',\n  'tr',\n  'track',\n  'ul'\n];\n","// Regexps to match html elements\n\n'use strict';\n\nvar attr_name     = '[a-zA-Z_:][a-zA-Z0-9:._-]*';\n\nvar unquoted      = '[^\"\\'=<>`\\\\x00-\\\\x20]+';\nvar single_quoted = \"'[^']*'\";\nvar double_quoted = '\"[^\"]*\"';\n\nvar attr_value  = '(?:' + unquoted + '|' + single_quoted + '|' + double_quoted + ')';\n\nvar attribute   = '(?:\\\\s+' + attr_name + '(?:\\\\s*=\\\\s*' + attr_value + ')?)';\n\nvar open_tag    = '<[A-Za-z][A-Za-z0-9\\\\-]*' + attribute + '*\\\\s*\\\\/?>';\n\nvar close_tag   = '<\\\\/[A-Za-z][A-Za-z0-9\\\\-]*\\\\s*>';\nvar comment     = '<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->';\nvar processing  = '<[?].*?[?]>';\nvar declaration = '<![A-Z]+\\\\s+[^>]*>';\nvar cdata       = '<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>';\n\nvar HTML_TAG_RE = new RegExp('^(?:' + open_tag + '|' + close_tag + '|' + comment +\n                        '|' + processing + '|' + declaration + '|' + cdata + ')');\nvar HTML_OPEN_CLOSE_TAG_RE = new RegExp('^(?:' + open_tag + '|' + close_tag + ')');\n\nmodule.exports.HTML_TAG_RE = HTML_TAG_RE;\nmodule.exports.HTML_OPEN_CLOSE_TAG_RE = HTML_OPEN_CLOSE_TAG_RE;\n","// Utilities\n//\n'use strict';\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction isString(obj) { return _class(obj) === '[object String]'; }\n\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction has(object, key) {\n  return _hasOwnProperty.call(object, key);\n}\n\n// Merge objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be object');\n    }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\n// Remove element from array and put another array at those position.\n// Useful for some operations with tokens\nfunction arrayReplaceAt(src, pos, newElements) {\n  return [].concat(src.slice(0, pos), newElements, src.slice(pos + 1));\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction isValidEntityCode(c) {\n  /*eslint no-bitwise:0*/\n  // broken sequence\n  if (c >= 0xD800 && c <= 0xDFFF) { return false; }\n  // never used\n  if (c >= 0xFDD0 && c <= 0xFDEF) { return false; }\n  if ((c & 0xFFFF) === 0xFFFF || (c & 0xFFFF) === 0xFFFE) { return false; }\n  // control codes\n  if (c >= 0x00 && c <= 0x08) { return false; }\n  if (c === 0x0B) { return false; }\n  if (c >= 0x0E && c <= 0x1F) { return false; }\n  if (c >= 0x7F && c <= 0x9F) { return false; }\n  // out of range\n  if (c > 0x10FFFF) { return false; }\n  return true;\n}\n\nfunction fromCodePoint(c) {\n  /*eslint no-bitwise:0*/\n  if (c > 0xffff) {\n    c -= 0x10000;\n    var surrogate1 = 0xd800 + (c >> 10),\n        surrogate2 = 0xdc00 + (c & 0x3ff);\n\n    return String.fromCharCode(surrogate1, surrogate2);\n  }\n  return String.fromCharCode(c);\n}\n\n\nvar UNESCAPE_MD_RE  = /\\\\([!\"#$%&'()*+,\\-.\\/:;<=>?@[\\\\\\]^_`{|}~])/g;\nvar ENTITY_RE       = /&([a-z#][a-z0-9]{1,31});/gi;\nvar UNESCAPE_ALL_RE = new RegExp(UNESCAPE_MD_RE.source + '|' + ENTITY_RE.source, 'gi');\n\nvar DIGITAL_ENTITY_TEST_RE = /^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;\n\nvar entities = require('./entities');\n\nfunction replaceEntityPattern(match, name) {\n  var code = 0;\n\n  if (has(entities, name)) {\n    return entities[name];\n  }\n\n  if (name.charCodeAt(0) === 0x23/* # */ && DIGITAL_ENTITY_TEST_RE.test(name)) {\n    code = name[1].toLowerCase() === 'x' ?\n      parseInt(name.slice(2), 16) : parseInt(name.slice(1), 10);\n\n    if (isValidEntityCode(code)) {\n      return fromCodePoint(code);\n    }\n  }\n\n  return match;\n}\n\n/*function replaceEntities(str) {\n  if (str.indexOf('&') < 0) { return str; }\n\n  return str.replace(ENTITY_RE, replaceEntityPattern);\n}*/\n\nfunction unescapeMd(str) {\n  if (str.indexOf('\\\\') < 0) { return str; }\n  return str.replace(UNESCAPE_MD_RE, '$1');\n}\n\nfunction unescapeAll(str) {\n  if (str.indexOf('\\\\') < 0 && str.indexOf('&') < 0) { return str; }\n\n  return str.replace(UNESCAPE_ALL_RE, function (match, escaped, entity) {\n    if (escaped) { return escaped; }\n    return replaceEntityPattern(match, entity);\n  });\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar HTML_ESCAPE_TEST_RE = /[&<>\"]/;\nvar HTML_ESCAPE_REPLACE_RE = /[&<>\"]/g;\nvar HTML_REPLACEMENTS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\n\nfunction replaceUnsafeChar(ch) {\n  return HTML_REPLACEMENTS[ch];\n}\n\nfunction escapeHtml(str) {\n  if (HTML_ESCAPE_TEST_RE.test(str)) {\n    return str.replace(HTML_ESCAPE_REPLACE_RE, replaceUnsafeChar);\n  }\n  return str;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar REGEXP_ESCAPE_RE = /[.?*+^$[\\]\\\\(){}|-]/g;\n\nfunction escapeRE(str) {\n  return str.replace(REGEXP_ESCAPE_RE, '\\\\$&');\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction isSpace(code) {\n  switch (code) {\n    case 0x09:\n    case 0x20:\n      return true;\n  }\n  return false;\n}\n\n// Zs (unicode class) || [\\t\\f\\v\\r\\n]\nfunction isWhiteSpace(code) {\n  if (code >= 0x2000 && code <= 0x200A) { return true; }\n  switch (code) {\n    case 0x09: // \\t\n    case 0x0A: // \\n\n    case 0x0B: // \\v\n    case 0x0C: // \\f\n    case 0x0D: // \\r\n    case 0x20:\n    case 0xA0:\n    case 0x1680:\n    case 0x202F:\n    case 0x205F:\n    case 0x3000:\n      return true;\n  }\n  return false;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/*eslint-disable max-len*/\nvar UNICODE_PUNCT_RE = require('uc.micro/categories/P/regex');\n\n// Currently without astral characters support.\nfunction isPunctChar(ch) {\n  return UNICODE_PUNCT_RE.test(ch);\n}\n\n\n// Markdown ASCII punctuation characters.\n//\n// !, \", #, $, %, &, ', (, ), *, +, ,, -, ., /, :, ;, <, =, >, ?, @, [, \\, ], ^, _, `, {, |, }, or ~\n// http://spec.commonmark.org/0.15/#ascii-punctuation-character\n//\n// Don't confuse with unicode punctuation !!! It lacks some chars in ascii range.\n//\nfunction isMdAsciiPunct(ch) {\n  switch (ch) {\n    case 0x21/* ! */:\n    case 0x22/* \" */:\n    case 0x23/* # */:\n    case 0x24/* $ */:\n    case 0x25/* % */:\n    case 0x26/* & */:\n    case 0x27/* ' */:\n    case 0x28/* ( */:\n    case 0x29/* ) */:\n    case 0x2A/* * */:\n    case 0x2B/* + */:\n    case 0x2C/* , */:\n    case 0x2D/* - */:\n    case 0x2E/* . */:\n    case 0x2F/* / */:\n    case 0x3A/* : */:\n    case 0x3B/* ; */:\n    case 0x3C/* < */:\n    case 0x3D/* = */:\n    case 0x3E/* > */:\n    case 0x3F/* ? */:\n    case 0x40/* @ */:\n    case 0x5B/* [ */:\n    case 0x5C/* \\ */:\n    case 0x5D/* ] */:\n    case 0x5E/* ^ */:\n    case 0x5F/* _ */:\n    case 0x60/* ` */:\n    case 0x7B/* { */:\n    case 0x7C/* | */:\n    case 0x7D/* } */:\n    case 0x7E/* ~ */:\n      return true;\n    default:\n      return false;\n  }\n}\n\n// Hepler to unify [reference labels].\n//\nfunction normalizeReference(str) {\n  // Trim and collapse whitespace\n  //\n  str = str.trim().replace(/\\s+/g, ' ');\n\n  // In node v10 ''.toLowerCase() === '', which is presumed to be a bug\n  // fixed in v12 (couldn't find any details).\n  //\n  // So treat this one as a special case\n  // (remove this when node v10 is no longer supported).\n  //\n  if (''.toLowerCase() === '') {\n    str = str.replace(//g, '');\n  }\n\n  // .toLowerCase().toUpperCase() should get rid of all differences\n  // between letter variants.\n  //\n  // Simple .toLowerCase() doesn't normalize 125 code points correctly,\n  // and .toUpperCase doesn't normalize 6 of them (list of exceptions:\n  // , , , , ,  - those are already uppercased, but have differently\n  // uppercased versions).\n  //\n  // Here's an example showing how it happens. Lets take greek letter omega:\n  // uppercase U+0398 (), U+03f4 () and lowercase U+03b8 (), U+03d1 ()\n  //\n  // Unicode entries:\n  // 0398;GREEK CAPITAL LETTER THETA;Lu;0;L;;;;;N;;;;03B8;\n  // 03B8;GREEK SMALL LETTER THETA;Ll;0;L;;;;;N;;;0398;;0398\n  // 03D1;GREEK THETA SYMBOL;Ll;0;L;<compat> 03B8;;;;N;GREEK SMALL LETTER SCRIPT THETA;;0398;;0398\n  // 03F4;GREEK CAPITAL THETA SYMBOL;Lu;0;L;<compat> 0398;;;;N;;;;03B8;\n  //\n  // Case-insensitive comparison should treat all of them as equivalent.\n  //\n  // But .toLowerCase() doesn't change  (it's already lowercase),\n  // and .toUpperCase() doesn't change  (already uppercase).\n  //\n  // Applying first lower then upper case normalizes any character:\n  // '\\u0398\\u03f4\\u03b8\\u03d1'.toLowerCase().toUpperCase() === '\\u0398\\u0398\\u0398\\u0398'\n  //\n  // Note: this is equivalent to unicode case folding; unicode normalization\n  // is a different step that is not required here.\n  //\n  // Final result should be uppercased, because it's later stored in an object\n  // (this avoid a conflict with Object.prototype members,\n  // most notably, `__proto__`)\n  //\n  return str.toLowerCase().toUpperCase();\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n// Re-export libraries commonly used in both markdown-it and its plugins,\n// so plugins won't have to depend on them explicitly, which reduces their\n// bundled size (e.g. a browser build).\n//\nexports.lib                 = {};\nexports.lib.mdurl           = require('mdurl');\nexports.lib.ucmicro         = require('uc.micro');\n\nexports.assign              = assign;\nexports.isString            = isString;\nexports.has                 = has;\nexports.unescapeMd          = unescapeMd;\nexports.unescapeAll         = unescapeAll;\nexports.isValidEntityCode   = isValidEntityCode;\nexports.fromCodePoint       = fromCodePoint;\n// exports.replaceEntities     = replaceEntities;\nexports.escapeHtml          = escapeHtml;\nexports.arrayReplaceAt      = arrayReplaceAt;\nexports.isSpace             = isSpace;\nexports.isWhiteSpace        = isWhiteSpace;\nexports.isMdAsciiPunct      = isMdAsciiPunct;\nexports.isPunctChar         = isPunctChar;\nexports.escapeRE            = escapeRE;\nexports.normalizeReference  = normalizeReference;\n","// Just a shortcut for bulk export\n'use strict';\n\n\nexports.parseLinkLabel       = require('./parse_link_label');\nexports.parseLinkDestination = require('./parse_link_destination');\nexports.parseLinkTitle       = require('./parse_link_title');\n","// Parse link destination\n//\n'use strict';\n\n\nvar unescapeAll = require('../common/utils').unescapeAll;\n\n\nmodule.exports = function parseLinkDestination(str, pos, max) {\n  var code, level,\n      lines = 0,\n      start = pos,\n      result = {\n        ok: false,\n        pos: 0,\n        lines: 0,\n        str: ''\n      };\n\n  if (str.charCodeAt(pos) === 0x3C /* < */) {\n    pos++;\n    while (pos < max) {\n      code = str.charCodeAt(pos);\n      if (code === 0x0A /* \\n */) { return result; }\n      if (code === 0x3E /* > */) {\n        result.pos = pos + 1;\n        result.str = unescapeAll(str.slice(start + 1, pos));\n        result.ok = true;\n        return result;\n      }\n      if (code === 0x5C /* \\ */ && pos + 1 < max) {\n        pos += 2;\n        continue;\n      }\n\n      pos++;\n    }\n\n    // no closing '>'\n    return result;\n  }\n\n  // this should be ... } else { ... branch\n\n  level = 0;\n  while (pos < max) {\n    code = str.charCodeAt(pos);\n\n    if (code === 0x20) { break; }\n\n    // ascii control characters\n    if (code < 0x20 || code === 0x7F) { break; }\n\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    if (code === 0x28 /* ( */) {\n      level++;\n    }\n\n    if (code === 0x29 /* ) */) {\n      if (level === 0) { break; }\n      level--;\n    }\n\n    pos++;\n  }\n\n  if (start === pos) { return result; }\n  if (level !== 0) { return result; }\n\n  result.str = unescapeAll(str.slice(start, pos));\n  result.lines = lines;\n  result.pos = pos;\n  result.ok = true;\n  return result;\n};\n","// Parse link label\n//\n// this function assumes that first character (\"[\") already matches;\n// returns the end of the label\n//\n'use strict';\n\nmodule.exports = function parseLinkLabel(state, start, disableNested) {\n  var level, found, marker, prevPos,\n      labelEnd = -1,\n      max = state.posMax,\n      oldPos = state.pos;\n\n  state.pos = start + 1;\n  level = 1;\n\n  while (state.pos < max) {\n    marker = state.src.charCodeAt(state.pos);\n    if (marker === 0x5D /* ] */) {\n      level--;\n      if (level === 0) {\n        found = true;\n        break;\n      }\n    }\n\n    prevPos = state.pos;\n    state.md.inline.skipToken(state);\n    if (marker === 0x5B /* [ */) {\n      if (prevPos === state.pos - 1) {\n        // increase level if we find text `[`, which is not a part of any token\n        level++;\n      } else if (disableNested) {\n        state.pos = oldPos;\n        return -1;\n      }\n    }\n  }\n\n  if (found) {\n    labelEnd = state.pos;\n  }\n\n  // restore old state\n  state.pos = oldPos;\n\n  return labelEnd;\n};\n","// Parse link title\n//\n'use strict';\n\n\nvar unescapeAll = require('../common/utils').unescapeAll;\n\n\nmodule.exports = function parseLinkTitle(str, pos, max) {\n  var code,\n      marker,\n      lines = 0,\n      start = pos,\n      result = {\n        ok: false,\n        pos: 0,\n        lines: 0,\n        str: ''\n      };\n\n  if (pos >= max) { return result; }\n\n  marker = str.charCodeAt(pos);\n\n  if (marker !== 0x22 /* \" */ && marker !== 0x27 /* ' */ && marker !== 0x28 /* ( */) { return result; }\n\n  pos++;\n\n  // if opening marker is \"(\", switch it to closing marker \")\"\n  if (marker === 0x28) { marker = 0x29; }\n\n  while (pos < max) {\n    code = str.charCodeAt(pos);\n    if (code === marker) {\n      result.pos = pos + 1;\n      result.lines = lines;\n      result.str = unescapeAll(str.slice(start + 1, pos));\n      result.ok = true;\n      return result;\n    } else if (code === 0x0A) {\n      lines++;\n    } else if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos++;\n      if (str.charCodeAt(pos) === 0x0A) {\n        lines++;\n      }\n    }\n\n    pos++;\n  }\n\n  return result;\n};\n","// Main parser class\n\n'use strict';\n\n\nvar utils        = require('./common/utils');\nvar helpers      = require('./helpers');\nvar Renderer     = require('./renderer');\nvar ParserCore   = require('./parser_core');\nvar ParserBlock  = require('./parser_block');\nvar ParserInline = require('./parser_inline');\nvar LinkifyIt    = require('linkify-it');\nvar mdurl        = require('mdurl');\nvar punycode     = require('punycode');\n\n\nvar config = {\n  default: require('./presets/default'),\n  zero: require('./presets/zero'),\n  commonmark: require('./presets/commonmark')\n};\n\n////////////////////////////////////////////////////////////////////////////////\n//\n// This validator can prohibit more than really needed to prevent XSS. It's a\n// tradeoff to keep code simple and to be secure by default.\n//\n// If you need different setup - override validator method as you wish. Or\n// replace it with dummy function and use external sanitizer.\n//\n\nvar BAD_PROTO_RE = /^(vbscript|javascript|file|data):/;\nvar GOOD_DATA_RE = /^data:image\\/(gif|png|jpeg|webp);/;\n\nfunction validateLink(url) {\n  // url should be normalized at this point, and existing entities are decoded\n  var str = url.trim().toLowerCase();\n\n  return BAD_PROTO_RE.test(str) ? (GOOD_DATA_RE.test(str) ? true : false) : true;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar RECODE_HOSTNAME_FOR = [ 'http:', 'https:', 'mailto:' ];\n\nfunction normalizeLink(url) {\n  var parsed = mdurl.parse(url, true);\n\n  if (parsed.hostname) {\n    // Encode hostnames in urls like:\n    // `http://host/`, `https://host/`, `mailto:user@host`, `//host/`\n    //\n    // We don't encode unknown schemas, because it's likely that we encode\n    // something we shouldn't (e.g. `skype:name` treated as `skype:host`)\n    //\n    if (!parsed.protocol || RECODE_HOSTNAME_FOR.indexOf(parsed.protocol) >= 0) {\n      try {\n        parsed.hostname = punycode.toASCII(parsed.hostname);\n      } catch (er) { /**/ }\n    }\n  }\n\n  return mdurl.encode(mdurl.format(parsed));\n}\n\nfunction normalizeLinkText(url) {\n  var parsed = mdurl.parse(url, true);\n\n  if (parsed.hostname) {\n    // Encode hostnames in urls like:\n    // `http://host/`, `https://host/`, `mailto:user@host`, `//host/`\n    //\n    // We don't encode unknown schemas, because it's likely that we encode\n    // something we shouldn't (e.g. `skype:name` treated as `skype:host`)\n    //\n    if (!parsed.protocol || RECODE_HOSTNAME_FOR.indexOf(parsed.protocol) >= 0) {\n      try {\n        parsed.hostname = punycode.toUnicode(parsed.hostname);\n      } catch (er) { /**/ }\n    }\n  }\n\n  // add '%' to exclude list because of https://github.com/markdown-it/markdown-it/issues/720\n  return mdurl.decode(mdurl.format(parsed), mdurl.decode.defaultChars + '%');\n}\n\n\n/**\n * class MarkdownIt\n *\n * Main parser/renderer class.\n *\n * ##### Usage\n *\n * ```javascript\n * // node.js, \"classic\" way:\n * var MarkdownIt = require('markdown-it'),\n *     md = new MarkdownIt();\n * var result = md.render('# markdown-it rulezz!');\n *\n * // node.js, the same, but with sugar:\n * var md = require('markdown-it')();\n * var result = md.render('# markdown-it rulezz!');\n *\n * // browser without AMD, added to \"window\" on script load\n * // Note, there are no dash.\n * var md = window.markdownit();\n * var result = md.render('# markdown-it rulezz!');\n * ```\n *\n * Single line rendering, without paragraph wrap:\n *\n * ```javascript\n * var md = require('markdown-it')();\n * var result = md.renderInline('__markdown-it__ rulezz!');\n * ```\n **/\n\n/**\n * new MarkdownIt([presetName, options])\n * - presetName (String): optional, `commonmark` / `zero`\n * - options (Object)\n *\n * Creates parser instanse with given config. Can be called without `new`.\n *\n * ##### presetName\n *\n * MarkdownIt provides named presets as a convenience to quickly\n * enable/disable active syntax rules and options for common use cases.\n *\n * - [\"commonmark\"](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/commonmark.js) -\n *   configures parser to strict [CommonMark](http://commonmark.org/) mode.\n * - [default](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/default.js) -\n *   similar to GFM, used when no preset name given. Enables all available rules,\n *   but still without html, typographer & autolinker.\n * - [\"zero\"](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/zero.js) -\n *   all rules disabled. Useful to quickly setup your config via `.enable()`.\n *   For example, when you need only `bold` and `italic` markup and nothing else.\n *\n * ##### options:\n *\n * - __html__ - `false`. Set `true` to enable HTML tags in source. Be careful!\n *   That's not safe! You may need external sanitizer to protect output from XSS.\n *   It's better to extend features via plugins, instead of enabling HTML.\n * - __xhtmlOut__ - `false`. Set `true` to add '/' when closing single tags\n *   (`<br />`). This is needed only for full CommonMark compatibility. In real\n *   world you will need HTML output.\n * - __breaks__ - `false`. Set `true` to convert `\\n` in paragraphs into `<br>`.\n * - __langPrefix__ - `language-`. CSS language class prefix for fenced blocks.\n *   Can be useful for external highlighters.\n * - __linkify__ - `false`. Set `true` to autoconvert URL-like text to links.\n * - __typographer__  - `false`. Set `true` to enable [some language-neutral\n *   replacement](https://github.com/markdown-it/markdown-it/blob/master/lib/rules_core/replacements.js) +\n *   quotes beautification (smartquotes).\n * - __quotes__ - ``, String or Array. Double + single quotes replacement\n *   pairs, when typographer enabled and smartquotes on. For example, you can\n *   use `''` for Russian, `''` for German, and\n *   `['\\xA0', '\\xA0', '\\xA0', '\\xA0']` for French (including nbsp).\n * - __highlight__ - `null`. Highlighter function for fenced code blocks.\n *   Highlighter `function (str, lang)` should return escaped HTML. It can also\n *   return empty string if the source was not changed and should be escaped\n *   externaly. If result starts with <pre... internal wrapper is skipped.\n *\n * ##### Example\n *\n * ```javascript\n * // commonmark mode\n * var md = require('markdown-it')('commonmark');\n *\n * // default mode\n * var md = require('markdown-it')();\n *\n * // enable everything\n * var md = require('markdown-it')({\n *   html: true,\n *   linkify: true,\n *   typographer: true\n * });\n * ```\n *\n * ##### Syntax highlighting\n *\n * ```js\n * var hljs = require('highlight.js') // https://highlightjs.org/\n *\n * var md = require('markdown-it')({\n *   highlight: function (str, lang) {\n *     if (lang && hljs.getLanguage(lang)) {\n *       try {\n *         return hljs.highlight(lang, str, true).value;\n *       } catch (__) {}\n *     }\n *\n *     return ''; // use external default escaping\n *   }\n * });\n * ```\n *\n * Or with full wrapper override (if you need assign class to `<pre>`):\n *\n * ```javascript\n * var hljs = require('highlight.js') // https://highlightjs.org/\n *\n * // Actual default values\n * var md = require('markdown-it')({\n *   highlight: function (str, lang) {\n *     if (lang && hljs.getLanguage(lang)) {\n *       try {\n *         return '<pre class=\"hljs\"><code>' +\n *                hljs.highlight(lang, str, true).value +\n *                '</code></pre>';\n *       } catch (__) {}\n *     }\n *\n *     return '<pre class=\"hljs\"><code>' + md.utils.escapeHtml(str) + '</code></pre>';\n *   }\n * });\n * ```\n *\n **/\nfunction MarkdownIt(presetName, options) {\n  if (!(this instanceof MarkdownIt)) {\n    return new MarkdownIt(presetName, options);\n  }\n\n  if (!options) {\n    if (!utils.isString(presetName)) {\n      options = presetName || {};\n      presetName = 'default';\n    }\n  }\n\n  /**\n   * MarkdownIt#inline -> ParserInline\n   *\n   * Instance of [[ParserInline]]. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.inline = new ParserInline();\n\n  /**\n   * MarkdownIt#block -> ParserBlock\n   *\n   * Instance of [[ParserBlock]]. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.block = new ParserBlock();\n\n  /**\n   * MarkdownIt#core -> Core\n   *\n   * Instance of [[Core]] chain executor. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.core = new ParserCore();\n\n  /**\n   * MarkdownIt#renderer -> Renderer\n   *\n   * Instance of [[Renderer]]. Use it to modify output look. Or to add rendering\n   * rules for new token types, generated by plugins.\n   *\n   * ##### Example\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   *\n   * function myToken(tokens, idx, options, env, self) {\n   *   //...\n   *   return result;\n   * };\n   *\n   * md.renderer.rules['my_token'] = myToken\n   * ```\n   *\n   * See [[Renderer]] docs and [source code](https://github.com/markdown-it/markdown-it/blob/master/lib/renderer.js).\n   **/\n  this.renderer = new Renderer();\n\n  /**\n   * MarkdownIt#linkify -> LinkifyIt\n   *\n   * [linkify-it](https://github.com/markdown-it/linkify-it) instance.\n   * Used by [linkify](https://github.com/markdown-it/markdown-it/blob/master/lib/rules_core/linkify.js)\n   * rule.\n   **/\n  this.linkify = new LinkifyIt();\n\n  /**\n   * MarkdownIt#validateLink(url) -> Boolean\n   *\n   * Link validation function. CommonMark allows too much in links. By default\n   * we disable `javascript:`, `vbscript:`, `file:` schemas, and almost all `data:...` schemas\n   * except some embedded image types.\n   *\n   * You can change this behaviour:\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   * // enable everything\n   * md.validateLink = function () { return true; }\n   * ```\n   **/\n  this.validateLink = validateLink;\n\n  /**\n   * MarkdownIt#normalizeLink(url) -> String\n   *\n   * Function used to encode link url to a machine-readable format,\n   * which includes url-encoding, punycode, etc.\n   **/\n  this.normalizeLink = normalizeLink;\n\n  /**\n   * MarkdownIt#normalizeLinkText(url) -> String\n   *\n   * Function used to decode link url to a human-readable format`\n   **/\n  this.normalizeLinkText = normalizeLinkText;\n\n\n  // Expose utils & helpers for easy acces from plugins\n\n  /**\n   * MarkdownIt#utils -> utils\n   *\n   * Assorted utility functions, useful to write plugins. See details\n   * [here](https://github.com/markdown-it/markdown-it/blob/master/lib/common/utils.js).\n   **/\n  this.utils = utils;\n\n  /**\n   * MarkdownIt#helpers -> helpers\n   *\n   * Link components parser functions, useful to write plugins. See details\n   * [here](https://github.com/markdown-it/markdown-it/blob/master/lib/helpers).\n   **/\n  this.helpers = utils.assign({}, helpers);\n\n\n  this.options = {};\n  this.configure(presetName);\n\n  if (options) { this.set(options); }\n}\n\n\n/** chainable\n * MarkdownIt.set(options)\n *\n * Set parser options (in the same format as in constructor). Probably, you\n * will never need it, but you can change options after constructor call.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')()\n *             .set({ html: true, breaks: true })\n *             .set({ typographer, true });\n * ```\n *\n * __Note:__ To achieve the best possible performance, don't modify a\n * `markdown-it` instance options on the fly. If you need multiple configurations\n * it's best to create multiple instances and initialize each with separate\n * config.\n **/\nMarkdownIt.prototype.set = function (options) {\n  utils.assign(this.options, options);\n  return this;\n};\n\n\n/** chainable, internal\n * MarkdownIt.configure(presets)\n *\n * Batch load of all options and compenent settings. This is internal method,\n * and you probably will not need it. But if you will - see available presets\n * and data structure [here](https://github.com/markdown-it/markdown-it/tree/master/lib/presets)\n *\n * We strongly recommend to use presets instead of direct config loads. That\n * will give better compatibility with next versions.\n **/\nMarkdownIt.prototype.configure = function (presets) {\n  var self = this, presetName;\n\n  if (utils.isString(presets)) {\n    presetName = presets;\n    presets = config[presetName];\n    if (!presets) { throw new Error('Wrong `markdown-it` preset \"' + presetName + '\", check name'); }\n  }\n\n  if (!presets) { throw new Error('Wrong `markdown-it` preset, can\\'t be empty'); }\n\n  if (presets.options) { self.set(presets.options); }\n\n  if (presets.components) {\n    Object.keys(presets.components).forEach(function (name) {\n      if (presets.components[name].rules) {\n        self[name].ruler.enableOnly(presets.components[name].rules);\n      }\n      if (presets.components[name].rules2) {\n        self[name].ruler2.enableOnly(presets.components[name].rules2);\n      }\n    });\n  }\n  return this;\n};\n\n\n/** chainable\n * MarkdownIt.enable(list, ignoreInvalid)\n * - list (String|Array): rule name or list of rule names to enable\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable list or rules. It will automatically find appropriate components,\n * containing rules with given names. If rule not found, and `ignoreInvalid`\n * not set - throws exception.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')()\n *             .enable(['sub', 'sup'])\n *             .disable('smartquotes');\n * ```\n **/\nMarkdownIt.prototype.enable = function (list, ignoreInvalid) {\n  var result = [];\n\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  [ 'core', 'block', 'inline' ].forEach(function (chain) {\n    result = result.concat(this[chain].ruler.enable(list, true));\n  }, this);\n\n  result = result.concat(this.inline.ruler2.enable(list, true));\n\n  var missed = list.filter(function (name) { return result.indexOf(name) < 0; });\n\n  if (missed.length && !ignoreInvalid) {\n    throw new Error('MarkdownIt. Failed to enable unknown rule(s): ' + missed);\n  }\n\n  return this;\n};\n\n\n/** chainable\n * MarkdownIt.disable(list, ignoreInvalid)\n * - list (String|Array): rule name or list of rule names to disable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * The same as [[MarkdownIt.enable]], but turn specified rules off.\n **/\nMarkdownIt.prototype.disable = function (list, ignoreInvalid) {\n  var result = [];\n\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  [ 'core', 'block', 'inline' ].forEach(function (chain) {\n    result = result.concat(this[chain].ruler.disable(list, true));\n  }, this);\n\n  result = result.concat(this.inline.ruler2.disable(list, true));\n\n  var missed = list.filter(function (name) { return result.indexOf(name) < 0; });\n\n  if (missed.length && !ignoreInvalid) {\n    throw new Error('MarkdownIt. Failed to disable unknown rule(s): ' + missed);\n  }\n  return this;\n};\n\n\n/** chainable\n * MarkdownIt.use(plugin, params)\n *\n * Load specified plugin with given params into current parser instance.\n * It's just a sugar to call `plugin(md, params)` with curring.\n *\n * ##### Example\n *\n * ```javascript\n * var iterator = require('markdown-it-for-inline');\n * var md = require('markdown-it')()\n *             .use(iterator, 'foo_replace', 'text', function (tokens, idx) {\n *               tokens[idx].content = tokens[idx].content.replace(/foo/g, 'bar');\n *             });\n * ```\n **/\nMarkdownIt.prototype.use = function (plugin /*, params, ... */) {\n  var args = [ this ].concat(Array.prototype.slice.call(arguments, 1));\n  plugin.apply(plugin, args);\n  return this;\n};\n\n\n/** internal\n * MarkdownIt.parse(src, env) -> Array\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Parse input string and return list of block tokens (special token type\n * \"inline\" will contain list of inline tokens). You should not call this\n * method directly, until you write custom renderer (for example, to produce\n * AST).\n *\n * `env` is used to pass data between \"distributed\" rules and return additional\n * metadata like reference info, needed for the renderer. It also can be used to\n * inject data in specific cases. Usually, you will be ok to pass `{}`,\n * and then pass updated object to renderer.\n **/\nMarkdownIt.prototype.parse = function (src, env) {\n  if (typeof src !== 'string') {\n    throw new Error('Input data should be a String');\n  }\n\n  var state = new this.core.State(src, this, env);\n\n  this.core.process(state);\n\n  return state.tokens;\n};\n\n\n/**\n * MarkdownIt.render(src [, env]) -> String\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Render markdown string into html. It does all magic for you :).\n *\n * `env` can be used to inject additional metadata (`{}` by default).\n * But you will not need it with high probability. See also comment\n * in [[MarkdownIt.parse]].\n **/\nMarkdownIt.prototype.render = function (src, env) {\n  env = env || {};\n\n  return this.renderer.render(this.parse(src, env), this.options, env);\n};\n\n\n/** internal\n * MarkdownIt.parseInline(src, env) -> Array\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * The same as [[MarkdownIt.parse]] but skip all block rules. It returns the\n * block tokens list with the single `inline` element, containing parsed inline\n * tokens in `children` property. Also updates `env` object.\n **/\nMarkdownIt.prototype.parseInline = function (src, env) {\n  var state = new this.core.State(src, this, env);\n\n  state.inlineMode = true;\n  this.core.process(state);\n\n  return state.tokens;\n};\n\n\n/**\n * MarkdownIt.renderInline(src [, env]) -> String\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Similar to [[MarkdownIt.render]] but for single paragraph content. Result\n * will NOT be wrapped into `<p>` tags.\n **/\nMarkdownIt.prototype.renderInline = function (src, env) {\n  env = env || {};\n\n  return this.renderer.render(this.parseInline(src, env), this.options, env);\n};\n\n\nmodule.exports = MarkdownIt;\n","/** internal\n * class ParserBlock\n *\n * Block-level tokenizer.\n **/\n'use strict';\n\n\nvar Ruler           = require('./ruler');\n\n\nvar _rules = [\n  // First 2 params - rule name & source. Secondary array - list of rules,\n  // which can be terminated by this one.\n  [ 'table',      require('./rules_block/table'),      [ 'paragraph', 'reference' ] ],\n  [ 'code',       require('./rules_block/code') ],\n  [ 'fence',      require('./rules_block/fence'),      [ 'paragraph', 'reference', 'blockquote', 'list' ] ],\n  [ 'blockquote', require('./rules_block/blockquote'), [ 'paragraph', 'reference', 'blockquote', 'list' ] ],\n  [ 'hr',         require('./rules_block/hr'),         [ 'paragraph', 'reference', 'blockquote', 'list' ] ],\n  [ 'list',       require('./rules_block/list'),       [ 'paragraph', 'reference', 'blockquote' ] ],\n  [ 'reference',  require('./rules_block/reference') ],\n  [ 'heading',    require('./rules_block/heading'),    [ 'paragraph', 'reference', 'blockquote' ] ],\n  [ 'lheading',   require('./rules_block/lheading') ],\n  [ 'html_block', require('./rules_block/html_block'), [ 'paragraph', 'reference', 'blockquote' ] ],\n  [ 'paragraph',  require('./rules_block/paragraph') ]\n];\n\n\n/**\n * new ParserBlock()\n **/\nfunction ParserBlock() {\n  /**\n   * ParserBlock#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of block rules.\n   **/\n  this.ruler = new Ruler();\n\n  for (var i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1], { alt: (_rules[i][2] || []).slice() });\n  }\n}\n\n\n// Generate tokens for input range\n//\nParserBlock.prototype.tokenize = function (state, startLine, endLine) {\n  var ok, i,\n      rules = this.ruler.getRules(''),\n      len = rules.length,\n      line = startLine,\n      hasEmptyLines = false,\n      maxNesting = state.md.options.maxNesting;\n\n  while (line < endLine) {\n    state.line = line = state.skipEmptyLines(line);\n    if (line >= endLine) { break; }\n\n    // Termination condition for nested calls.\n    // Nested calls currently used for blockquotes & lists\n    if (state.sCount[line] < state.blkIndent) { break; }\n\n    // If nesting level exceeded - skip tail to the end. That's not ordinary\n    // situation and we should not care about content.\n    if (state.level >= maxNesting) {\n      state.line = endLine;\n      break;\n    }\n\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.line`\n    // - update `state.tokens`\n    // - return true\n\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, line, endLine, false);\n      if (ok) { break; }\n    }\n\n    // set state.tight if we had an empty line before current tag\n    // i.e. latest empty line should not count\n    state.tight = !hasEmptyLines;\n\n    // paragraph might \"eat\" one newline after it in nested lists\n    if (state.isEmpty(state.line - 1)) {\n      hasEmptyLines = true;\n    }\n\n    line = state.line;\n\n    if (line < endLine && state.isEmpty(line)) {\n      hasEmptyLines = true;\n      line++;\n      state.line = line;\n    }\n  }\n};\n\n\n/**\n * ParserBlock.parse(str, md, env, outTokens)\n *\n * Process input string and push block tokens into `outTokens`\n **/\nParserBlock.prototype.parse = function (src, md, env, outTokens) {\n  var state;\n\n  if (!src) { return; }\n\n  state = new this.State(src, md, env, outTokens);\n\n  this.tokenize(state, state.line, state.lineMax);\n};\n\n\nParserBlock.prototype.State = require('./rules_block/state_block');\n\n\nmodule.exports = ParserBlock;\n","/** internal\n * class Core\n *\n * Top-level rules executor. Glues block/inline parsers and does intermediate\n * transformations.\n **/\n'use strict';\n\n\nvar Ruler  = require('./ruler');\n\n\nvar _rules = [\n  [ 'normalize',      require('./rules_core/normalize')      ],\n  [ 'block',          require('./rules_core/block')          ],\n  [ 'inline',         require('./rules_core/inline')         ],\n  [ 'linkify',        require('./rules_core/linkify')        ],\n  [ 'replacements',   require('./rules_core/replacements')   ],\n  [ 'smartquotes',    require('./rules_core/smartquotes')    ]\n];\n\n\n/**\n * new Core()\n **/\nfunction Core() {\n  /**\n   * Core#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of core rules.\n   **/\n  this.ruler = new Ruler();\n\n  for (var i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n}\n\n\n/**\n * Core.process(state)\n *\n * Executes core chain rules.\n **/\nCore.prototype.process = function (state) {\n  var i, l, rules;\n\n  rules = this.ruler.getRules('');\n\n  for (i = 0, l = rules.length; i < l; i++) {\n    rules[i](state);\n  }\n};\n\nCore.prototype.State = require('./rules_core/state_core');\n\n\nmodule.exports = Core;\n","/** internal\n * class ParserInline\n *\n * Tokenizes paragraph content.\n **/\n'use strict';\n\n\nvar Ruler           = require('./ruler');\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Parser rules\n\nvar _rules = [\n  [ 'text',            require('./rules_inline/text') ],\n  [ 'newline',         require('./rules_inline/newline') ],\n  [ 'escape',          require('./rules_inline/escape') ],\n  [ 'backticks',       require('./rules_inline/backticks') ],\n  [ 'strikethrough',   require('./rules_inline/strikethrough').tokenize ],\n  [ 'emphasis',        require('./rules_inline/emphasis').tokenize ],\n  [ 'link',            require('./rules_inline/link') ],\n  [ 'image',           require('./rules_inline/image') ],\n  [ 'autolink',        require('./rules_inline/autolink') ],\n  [ 'html_inline',     require('./rules_inline/html_inline') ],\n  [ 'entity',          require('./rules_inline/entity') ]\n];\n\nvar _rules2 = [\n  [ 'balance_pairs',   require('./rules_inline/balance_pairs') ],\n  [ 'strikethrough',   require('./rules_inline/strikethrough').postProcess ],\n  [ 'emphasis',        require('./rules_inline/emphasis').postProcess ],\n  [ 'text_collapse',   require('./rules_inline/text_collapse') ]\n];\n\n\n/**\n * new ParserInline()\n **/\nfunction ParserInline() {\n  var i;\n\n  /**\n   * ParserInline#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of inline rules.\n   **/\n  this.ruler = new Ruler();\n\n  for (i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n\n  /**\n   * ParserInline#ruler2 -> Ruler\n   *\n   * [[Ruler]] instance. Second ruler used for post-processing\n   * (e.g. in emphasis-like rules).\n   **/\n  this.ruler2 = new Ruler();\n\n  for (i = 0; i < _rules2.length; i++) {\n    this.ruler2.push(_rules2[i][0], _rules2[i][1]);\n  }\n}\n\n\n// Skip single token by running all rules in validation mode;\n// returns `true` if any rule reported success\n//\nParserInline.prototype.skipToken = function (state) {\n  var ok, i, pos = state.pos,\n      rules = this.ruler.getRules(''),\n      len = rules.length,\n      maxNesting = state.md.options.maxNesting,\n      cache = state.cache;\n\n\n  if (typeof cache[pos] !== 'undefined') {\n    state.pos = cache[pos];\n    return;\n  }\n\n  if (state.level < maxNesting) {\n    for (i = 0; i < len; i++) {\n      // Increment state.level and decrement it later to limit recursion.\n      // It's harmless to do here, because no tokens are created. But ideally,\n      // we'd need a separate private state variable for this purpose.\n      //\n      state.level++;\n      ok = rules[i](state, true);\n      state.level--;\n\n      if (ok) { break; }\n    }\n  } else {\n    // Too much nesting, just skip until the end of the paragraph.\n    //\n    // NOTE: this will cause links to behave incorrectly in the following case,\n    //       when an amount of `[` is exactly equal to `maxNesting + 1`:\n    //\n    //       [[[[[[[[[[[[[[[[[[[[[foo]()\n    //\n    // TODO: remove this workaround when CM standard will allow nested links\n    //       (we can replace it by preventing links from being parsed in\n    //       validation mode)\n    //\n    state.pos = state.posMax;\n  }\n\n  if (!ok) { state.pos++; }\n  cache[pos] = state.pos;\n};\n\n\n// Generate tokens for input range\n//\nParserInline.prototype.tokenize = function (state) {\n  var ok, i,\n      rules = this.ruler.getRules(''),\n      len = rules.length,\n      end = state.posMax,\n      maxNesting = state.md.options.maxNesting;\n\n  while (state.pos < end) {\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.pos`\n    // - update `state.tokens`\n    // - return true\n\n    if (state.level < maxNesting) {\n      for (i = 0; i < len; i++) {\n        ok = rules[i](state, false);\n        if (ok) { break; }\n      }\n    }\n\n    if (ok) {\n      if (state.pos >= end) { break; }\n      continue;\n    }\n\n    state.pending += state.src[state.pos++];\n  }\n\n  if (state.pending) {\n    state.pushPending();\n  }\n};\n\n\n/**\n * ParserInline.parse(str, md, env, outTokens)\n *\n * Process input string and push inline tokens into `outTokens`\n **/\nParserInline.prototype.parse = function (str, md, env, outTokens) {\n  var i, rules, len;\n  var state = new this.State(str, md, env, outTokens);\n\n  this.tokenize(state);\n\n  rules = this.ruler2.getRules('');\n  len = rules.length;\n\n  for (i = 0; i < len; i++) {\n    rules[i](state);\n  }\n};\n\n\nParserInline.prototype.State = require('./rules_inline/state_inline');\n\n\nmodule.exports = ParserInline;\n","// Commonmark default options\n\n'use strict';\n\n\nmodule.exports = {\n  options: {\n    html:         true,         // Enable HTML tags in source\n    xhtmlOut:     true,         // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkify:      false,        // autoconvert URL-like texts to links\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '' for Russian, '' for German,\n    // and ['\\xA0', '\\xA0', '\\xA0', '\\xA0'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019', /*  */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'normalize',\n        'block',\n        'inline'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fence',\n        'heading',\n        'hr',\n        'html_block',\n        'lheading',\n        'list',\n        'reference',\n        'paragraph'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'emphasis',\n        'entity',\n        'escape',\n        'html_inline',\n        'image',\n        'link',\n        'newline',\n        'text'\n      ],\n      rules2: [\n        'balance_pairs',\n        'emphasis',\n        'text_collapse'\n      ]\n    }\n  }\n};\n","// markdown-it default options\n\n'use strict';\n\n\nmodule.exports = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkify:      false,        // autoconvert URL-like texts to links\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '' for Russian, '' for German,\n    // and ['\\xA0', '\\xA0', '\\xA0', '\\xA0'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019', /*  */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   100            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {},\n    block: {},\n    inline: {}\n  }\n};\n","// \"Zero\" preset, with nothing enabled. Useful for manual configuring of simple\n// modes. For example, to parse bold/italic only.\n\n'use strict';\n\n\nmodule.exports = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkify:      false,        // autoconvert URL-like texts to links\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '' for Russian, '' for German,\n    // and ['\\xA0', '\\xA0', '\\xA0', '\\xA0'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019', /*  */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'normalize',\n        'block',\n        'inline'\n      ]\n    },\n\n    block: {\n      rules: [\n        'paragraph'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'text'\n      ],\n      rules2: [\n        'balance_pairs',\n        'text_collapse'\n      ]\n    }\n  }\n};\n","/**\n * class Renderer\n *\n * Generates HTML from parsed token stream. Each instance has independent\n * copy of rules. Those can be rewritten with ease. Also, you can add new\n * rules if you create plugin and adds new token types.\n **/\n'use strict';\n\n\nvar assign          = require('./common/utils').assign;\nvar unescapeAll     = require('./common/utils').unescapeAll;\nvar escapeHtml      = require('./common/utils').escapeHtml;\n\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar default_rules = {};\n\n\ndefault_rules.code_inline = function (tokens, idx, options, env, slf) {\n  var token = tokens[idx];\n\n  return  '<code' + slf.renderAttrs(token) + '>' +\n          escapeHtml(tokens[idx].content) +\n          '</code>';\n};\n\n\ndefault_rules.code_block = function (tokens, idx, options, env, slf) {\n  var token = tokens[idx];\n\n  return  '<pre' + slf.renderAttrs(token) + '><code>' +\n          escapeHtml(tokens[idx].content) +\n          '</code></pre>\\n';\n};\n\n\ndefault_rules.fence = function (tokens, idx, options, env, slf) {\n  var token = tokens[idx],\n      info = token.info ? unescapeAll(token.info).trim() : '',\n      langName = '',\n      langAttrs = '',\n      highlighted, i, arr, tmpAttrs, tmpToken;\n\n  if (info) {\n    arr = info.split(/(\\s+)/g);\n    langName = arr[0];\n    langAttrs = arr.slice(2).join('');\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight(token.content, langName, langAttrs) || escapeHtml(token.content);\n  } else {\n    highlighted = escapeHtml(token.content);\n  }\n\n  if (highlighted.indexOf('<pre') === 0) {\n    return highlighted + '\\n';\n  }\n\n  // If language exists, inject class gently, without modifying original token.\n  // May be, one day we will add .clone() for token and simplify this part, but\n  // now we prefer to keep things local.\n  if (info) {\n    i        = token.attrIndex('class');\n    tmpAttrs = token.attrs ? token.attrs.slice() : [];\n\n    if (i < 0) {\n      tmpAttrs.push([ 'class', options.langPrefix + langName ]);\n    } else {\n      tmpAttrs[i][1] += ' ' + options.langPrefix + langName;\n    }\n\n    // Fake token just to render attributes\n    tmpToken = {\n      attrs: tmpAttrs\n    };\n\n    return  '<pre><code' + slf.renderAttrs(tmpToken) + '>'\n          + highlighted\n          + '</code></pre>\\n';\n  }\n\n\n  return  '<pre><code' + slf.renderAttrs(token) + '>'\n        + highlighted\n        + '</code></pre>\\n';\n};\n\n\ndefault_rules.image = function (tokens, idx, options, env, slf) {\n  var token = tokens[idx];\n\n  // \"alt\" attr MUST be set, even if empty. Because it's mandatory and\n  // should be placed on proper position for tests.\n  //\n  // Replace content with actual value\n\n  token.attrs[token.attrIndex('alt')][1] =\n    slf.renderInlineAsText(token.children, options, env);\n\n  return slf.renderToken(tokens, idx, options);\n};\n\n\ndefault_rules.hardbreak = function (tokens, idx, options /*, env */) {\n  return options.xhtmlOut ? '<br />\\n' : '<br>\\n';\n};\ndefault_rules.softbreak = function (tokens, idx, options /*, env */) {\n  return options.breaks ? (options.xhtmlOut ? '<br />\\n' : '<br>\\n') : '\\n';\n};\n\n\ndefault_rules.text = function (tokens, idx /*, options, env */) {\n  return escapeHtml(tokens[idx].content);\n};\n\n\ndefault_rules.html_block = function (tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\ndefault_rules.html_inline = function (tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\n\n\n/**\n * new Renderer()\n *\n * Creates new [[Renderer]] instance and fill [[Renderer#rules]] with defaults.\n **/\nfunction Renderer() {\n\n  /**\n   * Renderer#rules -> Object\n   *\n   * Contains render rules for tokens. Can be updated and extended.\n   *\n   * ##### Example\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   *\n   * md.renderer.rules.strong_open  = function () { return '<b>'; };\n   * md.renderer.rules.strong_close = function () { return '</b>'; };\n   *\n   * var result = md.renderInline(...);\n   * ```\n   *\n   * Each rule is called as independent static function with fixed signature:\n   *\n   * ```javascript\n   * function my_token_render(tokens, idx, options, env, renderer) {\n   *   // ...\n   *   return renderedHTML;\n   * }\n   * ```\n   *\n   * See [source code](https://github.com/markdown-it/markdown-it/blob/master/lib/renderer.js)\n   * for more details and examples.\n   **/\n  this.rules = assign({}, default_rules);\n}\n\n\n/**\n * Renderer.renderAttrs(token) -> String\n *\n * Render token attributes to string.\n **/\nRenderer.prototype.renderAttrs = function renderAttrs(token) {\n  var i, l, result;\n\n  if (!token.attrs) { return ''; }\n\n  result = '';\n\n  for (i = 0, l = token.attrs.length; i < l; i++) {\n    result += ' ' + escapeHtml(token.attrs[i][0]) + '=\"' + escapeHtml(token.attrs[i][1]) + '\"';\n  }\n\n  return result;\n};\n\n\n/**\n * Renderer.renderToken(tokens, idx, options) -> String\n * - tokens (Array): list of tokens\n * - idx (Numbed): token index to render\n * - options (Object): params of parser instance\n *\n * Default token renderer. Can be overriden by custom function\n * in [[Renderer#rules]].\n **/\nRenderer.prototype.renderToken = function renderToken(tokens, idx, options) {\n  var nextToken,\n      result = '',\n      needLf = false,\n      token = tokens[idx];\n\n  // Tight list paragraphs\n  if (token.hidden) {\n    return '';\n  }\n\n  // Insert a newline between hidden paragraph and subsequent opening\n  // block-level tag.\n  //\n  // For example, here we should insert a newline before blockquote:\n  //  - a\n  //    >\n  //\n  if (token.block && token.nesting !== -1 && idx && tokens[idx - 1].hidden) {\n    result += '\\n';\n  }\n\n  // Add token name, e.g. `<img`\n  result += (token.nesting === -1 ? '</' : '<') + token.tag;\n\n  // Encode attributes, e.g. `<img src=\"foo\"`\n  result += this.renderAttrs(token);\n\n  // Add a slash for self-closing tags, e.g. `<img src=\"foo\" /`\n  if (token.nesting === 0 && options.xhtmlOut) {\n    result += ' /';\n  }\n\n  // Check if we need to add a newline after this tag\n  if (token.block) {\n    needLf = true;\n\n    if (token.nesting === 1) {\n      if (idx + 1 < tokens.length) {\n        nextToken = tokens[idx + 1];\n\n        if (nextToken.type === 'inline' || nextToken.hidden) {\n          // Block-level tag containing an inline tag.\n          //\n          needLf = false;\n\n        } else if (nextToken.nesting === -1 && nextToken.tag === token.tag) {\n          // Opening tag + closing tag of the same type. E.g. `<li></li>`.\n          //\n          needLf = false;\n        }\n      }\n    }\n  }\n\n  result += needLf ? '>\\n' : '>';\n\n  return result;\n};\n\n\n/**\n * Renderer.renderInline(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to renter\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * The same as [[Renderer.render]], but for single token of `inline` type.\n **/\nRenderer.prototype.renderInline = function (tokens, options, env) {\n  var type,\n      result = '',\n      rules = this.rules;\n\n  for (var i = 0, len = tokens.length; i < len; i++) {\n    type = tokens[i].type;\n\n    if (typeof rules[type] !== 'undefined') {\n      result += rules[type](tokens, i, options, env, this);\n    } else {\n      result += this.renderToken(tokens, i, options);\n    }\n  }\n\n  return result;\n};\n\n\n/** internal\n * Renderer.renderInlineAsText(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to renter\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * Special kludge for image `alt` attributes to conform CommonMark spec.\n * Don't try to use it! Spec requires to show `alt` content with stripped markup,\n * instead of simple escaping.\n **/\nRenderer.prototype.renderInlineAsText = function (tokens, options, env) {\n  var result = '';\n\n  for (var i = 0, len = tokens.length; i < len; i++) {\n    if (tokens[i].type === 'text') {\n      result += tokens[i].content;\n    } else if (tokens[i].type === 'image') {\n      result += this.renderInlineAsText(tokens[i].children, options, env);\n    }\n  }\n\n  return result;\n};\n\n\n/**\n * Renderer.render(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to renter\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * Takes token stream and generates HTML. Probably, you will never need to call\n * this method directly.\n **/\nRenderer.prototype.render = function (tokens, options, env) {\n  var i, len, type,\n      result = '',\n      rules = this.rules;\n\n  for (i = 0, len = tokens.length; i < len; i++) {\n    type = tokens[i].type;\n\n    if (type === 'inline') {\n      result += this.renderInline(tokens[i].children, options, env);\n    } else if (typeof rules[type] !== 'undefined') {\n      result += rules[tokens[i].type](tokens, i, options, env, this);\n    } else {\n      result += this.renderToken(tokens, i, options, env);\n    }\n  }\n\n  return result;\n};\n\nmodule.exports = Renderer;\n","/**\n * class Ruler\n *\n * Helper class, used by [[MarkdownIt#core]], [[MarkdownIt#block]] and\n * [[MarkdownIt#inline]] to manage sequences of functions (rules):\n *\n * - keep rules in defined order\n * - assign the name to each rule\n * - enable/disable rules\n * - add/replace rules\n * - allow assign rules to additional named chains (in the same)\n * - cacheing lists of active rules\n *\n * You will not need use this class directly until write plugins. For simple\n * rules control use [[MarkdownIt.disable]], [[MarkdownIt.enable]] and\n * [[MarkdownIt.use]].\n **/\n'use strict';\n\n\n/**\n * new Ruler()\n **/\nfunction Ruler() {\n  // List of added rules. Each element is:\n  //\n  // {\n  //   name: XXX,\n  //   enabled: Boolean,\n  //   fn: Function(),\n  //   alt: [ name2, name3 ]\n  // }\n  //\n  this.__rules__ = [];\n\n  // Cached rule chains.\n  //\n  // First level - chain name, '' for default.\n  // Second level - diginal anchor for fast filtering by charcodes.\n  //\n  this.__cache__ = null;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Helper methods, should not be used directly\n\n\n// Find rule index by name\n//\nRuler.prototype.__find__ = function (name) {\n  for (var i = 0; i < this.__rules__.length; i++) {\n    if (this.__rules__[i].name === name) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n\n// Build rules lookup cache\n//\nRuler.prototype.__compile__ = function () {\n  var self = this;\n  var chains = [ '' ];\n\n  // collect unique names\n  self.__rules__.forEach(function (rule) {\n    if (!rule.enabled) { return; }\n\n    rule.alt.forEach(function (altName) {\n      if (chains.indexOf(altName) < 0) {\n        chains.push(altName);\n      }\n    });\n  });\n\n  self.__cache__ = {};\n\n  chains.forEach(function (chain) {\n    self.__cache__[chain] = [];\n    self.__rules__.forEach(function (rule) {\n      if (!rule.enabled) { return; }\n\n      if (chain && rule.alt.indexOf(chain) < 0) { return; }\n\n      self.__cache__[chain].push(rule.fn);\n    });\n  });\n};\n\n\n/**\n * Ruler.at(name, fn [, options])\n * - name (String): rule name to replace.\n * - fn (Function): new rule function.\n * - options (Object): new rule options (not mandatory).\n *\n * Replace rule by name with new function & options. Throws error if name not\n * found.\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * Replace existing typographer replacement rule with new one:\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.core.ruler.at('replacements', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.at = function (name, fn, options) {\n  var index = this.__find__(name);\n  var opt = options || {};\n\n  if (index === -1) { throw new Error('Parser rule not found: ' + name); }\n\n  this.__rules__[index].fn = fn;\n  this.__rules__[index].alt = opt.alt || [];\n  this.__cache__ = null;\n};\n\n\n/**\n * Ruler.before(beforeName, ruleName, fn [, options])\n * - beforeName (String): new rule will be added before this one.\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Add new rule to chain before one with given name. See also\n * [[Ruler.after]], [[Ruler.push]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.block.ruler.before('paragraph', 'my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.before = function (beforeName, ruleName, fn, options) {\n  var index = this.__find__(beforeName);\n  var opt = options || {};\n\n  if (index === -1) { throw new Error('Parser rule not found: ' + beforeName); }\n\n  this.__rules__.splice(index, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n\n/**\n * Ruler.after(afterName, ruleName, fn [, options])\n * - afterName (String): new rule will be added after this one.\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Add new rule to chain after one with given name. See also\n * [[Ruler.before]], [[Ruler.push]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.inline.ruler.after('text', 'my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.after = function (afterName, ruleName, fn, options) {\n  var index = this.__find__(afterName);\n  var opt = options || {};\n\n  if (index === -1) { throw new Error('Parser rule not found: ' + afterName); }\n\n  this.__rules__.splice(index + 1, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Ruler.push(ruleName, fn [, options])\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Push new rule to the end of chain. See also\n * [[Ruler.before]], [[Ruler.after]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.core.ruler.push('my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.push = function (ruleName, fn, options) {\n  var opt = options || {};\n\n  this.__rules__.push({\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n\n/**\n * Ruler.enable(list [, ignoreInvalid]) -> Array\n * - list (String|Array): list of rule names to enable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable rules with given names. If any rule name not found - throw Error.\n * Errors can be disabled by second param.\n *\n * Returns list of found rule names (if no exception happened).\n *\n * See also [[Ruler.disable]], [[Ruler.enableOnly]].\n **/\nRuler.prototype.enable = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  var result = [];\n\n  // Search by name and enable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n\n    if (idx < 0) {\n      if (ignoreInvalid) { return; }\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = true;\n    result.push(name);\n  }, this);\n\n  this.__cache__ = null;\n  return result;\n};\n\n\n/**\n * Ruler.enableOnly(list [, ignoreInvalid])\n * - list (String|Array): list of rule names to enable (whitelist).\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable rules with given names, and disable everything else. If any rule name\n * not found - throw Error. Errors can be disabled by second param.\n *\n * See also [[Ruler.disable]], [[Ruler.enable]].\n **/\nRuler.prototype.enableOnly = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  this.__rules__.forEach(function (rule) { rule.enabled = false; });\n\n  this.enable(list, ignoreInvalid);\n};\n\n\n/**\n * Ruler.disable(list [, ignoreInvalid]) -> Array\n * - list (String|Array): list of rule names to disable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Disable rules with given names. If any rule name not found - throw Error.\n * Errors can be disabled by second param.\n *\n * Returns list of found rule names (if no exception happened).\n *\n * See also [[Ruler.enable]], [[Ruler.enableOnly]].\n **/\nRuler.prototype.disable = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  var result = [];\n\n  // Search by name and disable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n\n    if (idx < 0) {\n      if (ignoreInvalid) { return; }\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = false;\n    result.push(name);\n  }, this);\n\n  this.__cache__ = null;\n  return result;\n};\n\n\n/**\n * Ruler.getRules(chainName) -> Array\n *\n * Return array of active functions (rules) for given chain name. It analyzes\n * rules configuration, compiles caches if not exists and returns result.\n *\n * Default chain name is `''` (empty string). It can't be skipped. That's\n * done intentionally, to keep signature monomorphic for high speed.\n **/\nRuler.prototype.getRules = function (chainName) {\n  if (this.__cache__ === null) {\n    this.__compile__();\n  }\n\n  // Chain can be empty, if rules disabled. But we still have to return Array.\n  return this.__cache__[chainName] || [];\n};\n\nmodule.exports = Ruler;\n","// Block quotes\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function blockquote(state, startLine, endLine, silent) {\n  var adjustTab,\n      ch,\n      i,\n      initial,\n      l,\n      lastLineEmpty,\n      lines,\n      nextLine,\n      offset,\n      oldBMarks,\n      oldBSCount,\n      oldIndent,\n      oldParentType,\n      oldSCount,\n      oldTShift,\n      spaceAfterMarker,\n      terminate,\n      terminatorRules,\n      token,\n      isOutdented,\n      oldLineMax = state.lineMax,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  // check the block quote marker\n  if (state.src.charCodeAt(pos++) !== 0x3E/* > */) { return false; }\n\n  // we know that it's going to be a valid blockquote,\n  // so no point trying to find the end of it in silent mode\n  if (silent) { return true; }\n\n  // set offset past spaces and \">\"\n  initial = offset = state.sCount[startLine] + 1;\n\n  // skip one optional space after '>'\n  if (state.src.charCodeAt(pos) === 0x20 /* space */) {\n    // ' >   test '\n    //     ^ -- position start of line here:\n    pos++;\n    initial++;\n    offset++;\n    adjustTab = false;\n    spaceAfterMarker = true;\n  } else if (state.src.charCodeAt(pos) === 0x09 /* tab */) {\n    spaceAfterMarker = true;\n\n    if ((state.bsCount[startLine] + offset) % 4 === 3) {\n      // '  >\\t  test '\n      //       ^ -- position start of line here (tab has width===1)\n      pos++;\n      initial++;\n      offset++;\n      adjustTab = false;\n    } else {\n      // ' >\\t  test '\n      //    ^ -- position start of line here + shift bsCount slightly\n      //         to make extra space appear\n      adjustTab = true;\n    }\n  } else {\n    spaceAfterMarker = false;\n  }\n\n  oldBMarks = [ state.bMarks[startLine] ];\n  state.bMarks[startLine] = pos;\n\n  while (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (isSpace(ch)) {\n      if (ch === 0x09) {\n        offset += 4 - (offset + state.bsCount[startLine] + (adjustTab ? 1 : 0)) % 4;\n      } else {\n        offset++;\n      }\n    } else {\n      break;\n    }\n\n    pos++;\n  }\n\n  oldBSCount = [ state.bsCount[startLine] ];\n  state.bsCount[startLine] = state.sCount[startLine] + 1 + (spaceAfterMarker ? 1 : 0);\n\n  lastLineEmpty = pos >= max;\n\n  oldSCount = [ state.sCount[startLine] ];\n  state.sCount[startLine] = offset - initial;\n\n  oldTShift = [ state.tShift[startLine] ];\n  state.tShift[startLine] = pos - state.bMarks[startLine];\n\n  terminatorRules = state.md.block.ruler.getRules('blockquote');\n\n  oldParentType = state.parentType;\n  state.parentType = 'blockquote';\n\n  // Search the end of the block\n  //\n  // Block ends with either:\n  //  1. an empty line outside:\n  //     ```\n  //     > test\n  //\n  //     ```\n  //  2. an empty line inside:\n  //     ```\n  //     >\n  //     test\n  //     ```\n  //  3. another tag:\n  //     ```\n  //     > test\n  //      - - -\n  //     ```\n  for (nextLine = startLine + 1; nextLine < endLine; nextLine++) {\n    // check if it's outdented, i.e. it's inside list item and indented\n    // less than said list item:\n    //\n    // ```\n    // 1. anything\n    //    > current blockquote\n    // 2. checking this line\n    // ```\n    isOutdented = state.sCount[nextLine] < state.blkIndent;\n\n    pos = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos >= max) {\n      // Case 1: line is not inside the blockquote, and this line is empty.\n      break;\n    }\n\n    if (state.src.charCodeAt(pos++) === 0x3E/* > */ && !isOutdented) {\n      // This line is inside the blockquote.\n\n      // set offset past spaces and \">\"\n      initial = offset = state.sCount[nextLine] + 1;\n\n      // skip one optional space after '>'\n      if (state.src.charCodeAt(pos) === 0x20 /* space */) {\n        // ' >   test '\n        //     ^ -- position start of line here:\n        pos++;\n        initial++;\n        offset++;\n        adjustTab = false;\n        spaceAfterMarker = true;\n      } else if (state.src.charCodeAt(pos) === 0x09 /* tab */) {\n        spaceAfterMarker = true;\n\n        if ((state.bsCount[nextLine] + offset) % 4 === 3) {\n          // '  >\\t  test '\n          //       ^ -- position start of line here (tab has width===1)\n          pos++;\n          initial++;\n          offset++;\n          adjustTab = false;\n        } else {\n          // ' >\\t  test '\n          //    ^ -- position start of line here + shift bsCount slightly\n          //         to make extra space appear\n          adjustTab = true;\n        }\n      } else {\n        spaceAfterMarker = false;\n      }\n\n      oldBMarks.push(state.bMarks[nextLine]);\n      state.bMarks[nextLine] = pos;\n\n      while (pos < max) {\n        ch = state.src.charCodeAt(pos);\n\n        if (isSpace(ch)) {\n          if (ch === 0x09) {\n            offset += 4 - (offset + state.bsCount[nextLine] + (adjustTab ? 1 : 0)) % 4;\n          } else {\n            offset++;\n          }\n        } else {\n          break;\n        }\n\n        pos++;\n      }\n\n      lastLineEmpty = pos >= max;\n\n      oldBSCount.push(state.bsCount[nextLine]);\n      state.bsCount[nextLine] = state.sCount[nextLine] + 1 + (spaceAfterMarker ? 1 : 0);\n\n      oldSCount.push(state.sCount[nextLine]);\n      state.sCount[nextLine] = offset - initial;\n\n      oldTShift.push(state.tShift[nextLine]);\n      state.tShift[nextLine] = pos - state.bMarks[nextLine];\n      continue;\n    }\n\n    // Case 2: line is not inside the blockquote, and the last line was empty.\n    if (lastLineEmpty) { break; }\n\n    // Case 3: another tag found.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n\n    if (terminate) {\n      // Quirk to enforce \"hard termination mode\" for paragraphs;\n      // normally if you call `tokenize(state, startLine, nextLine)`,\n      // paragraphs will look below nextLine for paragraph continuation,\n      // but if blockquote is terminated by another tag, they shouldn't\n      state.lineMax = nextLine;\n\n      if (state.blkIndent !== 0) {\n        // state.blkIndent was non-zero, we now set it to zero,\n        // so we need to re-calculate all offsets to appear as\n        // if indent wasn't changed\n        oldBMarks.push(state.bMarks[nextLine]);\n        oldBSCount.push(state.bsCount[nextLine]);\n        oldTShift.push(state.tShift[nextLine]);\n        oldSCount.push(state.sCount[nextLine]);\n        state.sCount[nextLine] -= state.blkIndent;\n      }\n\n      break;\n    }\n\n    oldBMarks.push(state.bMarks[nextLine]);\n    oldBSCount.push(state.bsCount[nextLine]);\n    oldTShift.push(state.tShift[nextLine]);\n    oldSCount.push(state.sCount[nextLine]);\n\n    // A negative indentation means that this is a paragraph continuation\n    //\n    state.sCount[nextLine] = -1;\n  }\n\n  oldIndent = state.blkIndent;\n  state.blkIndent = 0;\n\n  token        = state.push('blockquote_open', 'blockquote', 1);\n  token.markup = '>';\n  token.map    = lines = [ startLine, 0 ];\n\n  state.md.block.tokenize(state, startLine, nextLine);\n\n  token        = state.push('blockquote_close', 'blockquote', -1);\n  token.markup = '>';\n\n  state.lineMax = oldLineMax;\n  state.parentType = oldParentType;\n  lines[1] = state.line;\n\n  // Restore original tShift; this might not be necessary since the parser\n  // has already been here, but just to make sure we can do that.\n  for (i = 0; i < oldTShift.length; i++) {\n    state.bMarks[i + startLine] = oldBMarks[i];\n    state.tShift[i + startLine] = oldTShift[i];\n    state.sCount[i + startLine] = oldSCount[i];\n    state.bsCount[i + startLine] = oldBSCount[i];\n  }\n  state.blkIndent = oldIndent;\n\n  return true;\n};\n","// Code block (4 spaces padded)\n\n'use strict';\n\n\nmodule.exports = function code(state, startLine, endLine/*, silent*/) {\n  var nextLine, last, token;\n\n  if (state.sCount[startLine] - state.blkIndent < 4) { return false; }\n\n  last = nextLine = startLine + 1;\n\n  while (nextLine < endLine) {\n    if (state.isEmpty(nextLine)) {\n      nextLine++;\n      continue;\n    }\n\n    if (state.sCount[nextLine] - state.blkIndent >= 4) {\n      nextLine++;\n      last = nextLine;\n      continue;\n    }\n    break;\n  }\n\n  state.line = last;\n\n  token         = state.push('code_block', 'code', 0);\n  token.content = state.getLines(startLine, last, 4 + state.blkIndent, true);\n  token.map     = [ startLine, state.line ];\n\n  return true;\n};\n","// fences (``` lang, ~~~ lang)\n\n'use strict';\n\n\nmodule.exports = function fence(state, startLine, endLine, silent) {\n  var marker, len, params, nextLine, mem, token, markup,\n      haveEndMarker = false,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  if (pos + 3 > max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x7E/* ~ */ && marker !== 0x60 /* ` */) {\n    return false;\n  }\n\n  // scan marker length\n  mem = pos;\n  pos = state.skipChars(pos, marker);\n\n  len = pos - mem;\n\n  if (len < 3) { return false; }\n\n  markup = state.src.slice(mem, pos);\n  params = state.src.slice(pos, max);\n\n  if (marker === 0x60 /* ` */) {\n    if (params.indexOf(String.fromCharCode(marker)) >= 0) {\n      return false;\n    }\n  }\n\n  // Since start is found, we can report success here in validation mode\n  if (silent) { return true; }\n\n  // search end of block\n  nextLine = startLine;\n\n  for (;;) {\n    nextLine++;\n    if (nextLine >= endLine) {\n      // unclosed block should be autoclosed by end of document.\n      // also block seems to be autoclosed by end of parent\n      break;\n    }\n\n    pos = mem = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos < max && state.sCount[nextLine] < state.blkIndent) {\n      // non-empty line with negative indent should stop the list:\n      // - ```\n      //  test\n      break;\n    }\n\n    if (state.src.charCodeAt(pos) !== marker) { continue; }\n\n    if (state.sCount[nextLine] - state.blkIndent >= 4) {\n      // closing fence should be indented less than 4 spaces\n      continue;\n    }\n\n    pos = state.skipChars(pos, marker);\n\n    // closing code fence must be at least as long as the opening one\n    if (pos - mem < len) { continue; }\n\n    // make sure tail has spaces only\n    pos = state.skipSpaces(pos);\n\n    if (pos < max) { continue; }\n\n    haveEndMarker = true;\n    // found!\n    break;\n  }\n\n  // If a fence has heading spaces, they should be removed from its inner block\n  len = state.sCount[startLine];\n\n  state.line = nextLine + (haveEndMarker ? 1 : 0);\n\n  token         = state.push('fence', 'code', 0);\n  token.info    = params;\n  token.content = state.getLines(startLine + 1, nextLine, len, true);\n  token.markup  = markup;\n  token.map     = [ startLine, state.line ];\n\n  return true;\n};\n","// heading (#, ##, ...)\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function heading(state, startLine, endLine, silent) {\n  var ch, level, tmp, token,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  ch  = state.src.charCodeAt(pos);\n\n  if (ch !== 0x23/* # */ || pos >= max) { return false; }\n\n  // count heading level\n  level = 1;\n  ch = state.src.charCodeAt(++pos);\n  while (ch === 0x23/* # */ && pos < max && level <= 6) {\n    level++;\n    ch = state.src.charCodeAt(++pos);\n  }\n\n  if (level > 6 || (pos < max && !isSpace(ch))) { return false; }\n\n  if (silent) { return true; }\n\n  // Let's cut tails like '    ###  ' from the end of string\n\n  max = state.skipSpacesBack(max, pos);\n  tmp = state.skipCharsBack(max, 0x23, pos); // #\n  if (tmp > pos && isSpace(state.src.charCodeAt(tmp - 1))) {\n    max = tmp;\n  }\n\n  state.line = startLine + 1;\n\n  token        = state.push('heading_open', 'h' + String(level), 1);\n  token.markup = '########'.slice(0, level);\n  token.map    = [ startLine, state.line ];\n\n  token          = state.push('inline', '', 0);\n  token.content  = state.src.slice(pos, max).trim();\n  token.map      = [ startLine, state.line ];\n  token.children = [];\n\n  token        = state.push('heading_close', 'h' + String(level), -1);\n  token.markup = '########'.slice(0, level);\n\n  return true;\n};\n","// Horizontal rule\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function hr(state, startLine, endLine, silent) {\n  var marker, cnt, ch, token,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  marker = state.src.charCodeAt(pos++);\n\n  // Check hr marker\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x5F/* _ */) {\n    return false;\n  }\n\n  // markers can be mixed with spaces, but there should be at least 3 of them\n\n  cnt = 1;\n  while (pos < max) {\n    ch = state.src.charCodeAt(pos++);\n    if (ch !== marker && !isSpace(ch)) { return false; }\n    if (ch === marker) { cnt++; }\n  }\n\n  if (cnt < 3) { return false; }\n\n  if (silent) { return true; }\n\n  state.line = startLine + 1;\n\n  token        = state.push('hr', 'hr', 0);\n  token.map    = [ startLine, state.line ];\n  token.markup = Array(cnt + 1).join(String.fromCharCode(marker));\n\n  return true;\n};\n","// HTML block\n\n'use strict';\n\n\nvar block_names = require('../common/html_blocks');\nvar HTML_OPEN_CLOSE_TAG_RE = require('../common/html_re').HTML_OPEN_CLOSE_TAG_RE;\n\n// An array of opening and corresponding closing sequences for html tags,\n// last argument defines whether it can terminate a paragraph or not\n//\nvar HTML_SEQUENCES = [\n  [ /^<(script|pre|style)(?=(\\s|>|$))/i, /<\\/(script|pre|style)>/i, true ],\n  [ /^<!--/,        /-->/,   true ],\n  [ /^<\\?/,         /\\?>/,   true ],\n  [ /^<![A-Z]/,     />/,     true ],\n  [ /^<!\\[CDATA\\[/, /\\]\\]>/, true ],\n  [ new RegExp('^</?(' + block_names.join('|') + ')(?=(\\\\s|/?>|$))', 'i'), /^$/, true ],\n  [ new RegExp(HTML_OPEN_CLOSE_TAG_RE.source + '\\\\s*$'),  /^$/, false ]\n];\n\n\nmodule.exports = function html_block(state, startLine, endLine, silent) {\n  var i, nextLine, token, lineText,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  if (!state.md.options.html) { return false; }\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  lineText = state.src.slice(pos, max);\n\n  for (i = 0; i < HTML_SEQUENCES.length; i++) {\n    if (HTML_SEQUENCES[i][0].test(lineText)) { break; }\n  }\n\n  if (i === HTML_SEQUENCES.length) { return false; }\n\n  if (silent) {\n    // true if this sequence can be a terminator, false otherwise\n    return HTML_SEQUENCES[i][2];\n  }\n\n  nextLine = startLine + 1;\n\n  // If we are here - we detected HTML block.\n  // Let's roll down till block end.\n  if (!HTML_SEQUENCES[i][1].test(lineText)) {\n    for (; nextLine < endLine; nextLine++) {\n      if (state.sCount[nextLine] < state.blkIndent) { break; }\n\n      pos = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n      lineText = state.src.slice(pos, max);\n\n      if (HTML_SEQUENCES[i][1].test(lineText)) {\n        if (lineText.length !== 0) { nextLine++; }\n        break;\n      }\n    }\n  }\n\n  state.line = nextLine;\n\n  token         = state.push('html_block', '', 0);\n  token.map     = [ startLine, nextLine ];\n  token.content = state.getLines(startLine, nextLine, state.blkIndent, true);\n\n  return true;\n};\n","// lheading (---, ===)\n\n'use strict';\n\n\nmodule.exports = function lheading(state, startLine, endLine/*, silent*/) {\n  var content, terminate, i, l, token, pos, max, level, marker,\n      nextLine = startLine + 1, oldParentType,\n      terminatorRules = state.md.block.ruler.getRules('paragraph');\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  oldParentType = state.parentType;\n  state.parentType = 'paragraph'; // use paragraph to match terminatorRules\n\n  // jump line-by-line until empty one or EOF\n  for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) { continue; }\n\n    //\n    // Check for underline in setext header\n    //\n    if (state.sCount[nextLine] >= state.blkIndent) {\n      pos = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n\n      if (pos < max) {\n        marker = state.src.charCodeAt(pos);\n\n        if (marker === 0x2D/* - */ || marker === 0x3D/* = */) {\n          pos = state.skipChars(pos, marker);\n          pos = state.skipSpaces(pos);\n\n          if (pos >= max) {\n            level = (marker === 0x3D/* = */ ? 1 : 2);\n            break;\n          }\n        }\n      }\n    }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) { continue; }\n\n    // Some tags can terminate paragraph without empty line.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n  }\n\n  if (!level) {\n    // Didn't find valid underline\n    return false;\n  }\n\n  content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n\n  state.line = nextLine + 1;\n\n  token          = state.push('heading_open', 'h' + String(level), 1);\n  token.markup   = String.fromCharCode(marker);\n  token.map      = [ startLine, state.line ];\n\n  token          = state.push('inline', '', 0);\n  token.content  = content;\n  token.map      = [ startLine, state.line - 1 ];\n  token.children = [];\n\n  token          = state.push('heading_close', 'h' + String(level), -1);\n  token.markup   = String.fromCharCode(marker);\n\n  state.parentType = oldParentType;\n\n  return true;\n};\n","// Lists\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\n// Search `[-+*][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipBulletListMarker(state, startLine) {\n  var marker, pos, max, ch;\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n  max = state.eMarks[startLine];\n\n  marker = state.src.charCodeAt(pos++);\n  // Check bullet\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x2B/* + */) {\n    return -1;\n  }\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (!isSpace(ch)) {\n      // \" -test \" - is not a list item\n      return -1;\n    }\n  }\n\n  return pos;\n}\n\n// Search `\\d+[.)][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipOrderedListMarker(state, startLine) {\n  var ch,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      pos = start,\n      max = state.eMarks[startLine];\n\n  // List marker should have at least 2 chars (digit + dot)\n  if (pos + 1 >= max) { return -1; }\n\n  ch = state.src.charCodeAt(pos++);\n\n  if (ch < 0x30/* 0 */ || ch > 0x39/* 9 */) { return -1; }\n\n  for (;;) {\n    // EOL -> fail\n    if (pos >= max) { return -1; }\n\n    ch = state.src.charCodeAt(pos++);\n\n    if (ch >= 0x30/* 0 */ && ch <= 0x39/* 9 */) {\n\n      // List marker should have no more than 9 digits\n      // (prevents integer overflow in browsers)\n      if (pos - start >= 10) { return -1; }\n\n      continue;\n    }\n\n    // found valid marker\n    if (ch === 0x29/* ) */ || ch === 0x2e/* . */) {\n      break;\n    }\n\n    return -1;\n  }\n\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (!isSpace(ch)) {\n      // \" 1.test \" - is not a list item\n      return -1;\n    }\n  }\n  return pos;\n}\n\nfunction markTightParagraphs(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].hidden = true;\n      state.tokens[i].hidden = true;\n      i += 2;\n    }\n  }\n}\n\n\nmodule.exports = function list(state, startLine, endLine, silent) {\n  var ch,\n      contentStart,\n      i,\n      indent,\n      indentAfterMarker,\n      initial,\n      isOrdered,\n      itemLines,\n      l,\n      listLines,\n      listTokIdx,\n      markerCharCode,\n      markerValue,\n      max,\n      nextLine,\n      offset,\n      oldListIndent,\n      oldParentType,\n      oldSCount,\n      oldTShift,\n      oldTight,\n      pos,\n      posAfterMarker,\n      prevEmptyEnd,\n      start,\n      terminate,\n      terminatorRules,\n      token,\n      isTerminatingParagraph = false,\n      tight = true;\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  // Special case:\n  //  - item 1\n  //   - item 2\n  //    - item 3\n  //     - item 4\n  //      - this one is a paragraph continuation\n  if (state.listIndent >= 0 &&\n      state.sCount[startLine] - state.listIndent >= 4 &&\n      state.sCount[startLine] < state.blkIndent) {\n    return false;\n  }\n\n  // limit conditions when list can interrupt\n  // a paragraph (validation mode only)\n  if (silent && state.parentType === 'paragraph') {\n    // Next list item should still terminate previous list item;\n    //\n    // This code can fail if plugins use blkIndent as well as lists,\n    // but I hope the spec gets fixed long before that happens.\n    //\n    if (state.tShift[startLine] >= state.blkIndent) {\n      isTerminatingParagraph = true;\n    }\n  }\n\n  // Detect list type and position after marker\n  if ((posAfterMarker = skipOrderedListMarker(state, startLine)) >= 0) {\n    isOrdered = true;\n    start = state.bMarks[startLine] + state.tShift[startLine];\n    markerValue = Number(state.src.substr(start, posAfterMarker - start - 1));\n\n    // If we're starting a new ordered list right after\n    // a paragraph, it should start with 1.\n    if (isTerminatingParagraph && markerValue !== 1) return false;\n\n  } else if ((posAfterMarker = skipBulletListMarker(state, startLine)) >= 0) {\n    isOrdered = false;\n\n  } else {\n    return false;\n  }\n\n  // If we're starting a new unordered list right after\n  // a paragraph, first line should not be empty.\n  if (isTerminatingParagraph) {\n    if (state.skipSpaces(posAfterMarker) >= state.eMarks[startLine]) return false;\n  }\n\n  // We should terminate list on style change. Remember first one to compare.\n  markerCharCode = state.src.charCodeAt(posAfterMarker - 1);\n\n  // For validation mode we can terminate immediately\n  if (silent) { return true; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  if (isOrdered) {\n    token       = state.push('ordered_list_open', 'ol', 1);\n    if (markerValue !== 1) {\n      token.attrs = [ [ 'start', markerValue ] ];\n    }\n\n  } else {\n    token       = state.push('bullet_list_open', 'ul', 1);\n  }\n\n  token.map    = listLines = [ startLine, 0 ];\n  token.markup = String.fromCharCode(markerCharCode);\n\n  //\n  // Iterate list items\n  //\n\n  nextLine = startLine;\n  prevEmptyEnd = false;\n  terminatorRules = state.md.block.ruler.getRules('list');\n\n  oldParentType = state.parentType;\n  state.parentType = 'list';\n\n  while (nextLine < endLine) {\n    pos = posAfterMarker;\n    max = state.eMarks[nextLine];\n\n    initial = offset = state.sCount[nextLine] + posAfterMarker - (state.bMarks[startLine] + state.tShift[startLine]);\n\n    while (pos < max) {\n      ch = state.src.charCodeAt(pos);\n\n      if (ch === 0x09) {\n        offset += 4 - (offset + state.bsCount[nextLine]) % 4;\n      } else if (ch === 0x20) {\n        offset++;\n      } else {\n        break;\n      }\n\n      pos++;\n    }\n\n    contentStart = pos;\n\n    if (contentStart >= max) {\n      // trimming space in \"-    \\n  3\" case, indent is 1 here\n      indentAfterMarker = 1;\n    } else {\n      indentAfterMarker = offset - initial;\n    }\n\n    // If we have more than 4 spaces, the indent is 1\n    // (the rest is just indented code block)\n    if (indentAfterMarker > 4) { indentAfterMarker = 1; }\n\n    // \"  -  test\"\n    //  ^^^^^ - calculating total length of this thing\n    indent = initial + indentAfterMarker;\n\n    // Run subparser & write tokens\n    token        = state.push('list_item_open', 'li', 1);\n    token.markup = String.fromCharCode(markerCharCode);\n    token.map    = itemLines = [ startLine, 0 ];\n\n    // change current state, then restore it after parser subcall\n    oldTight = state.tight;\n    oldTShift = state.tShift[startLine];\n    oldSCount = state.sCount[startLine];\n\n    //  - example list\n    // ^ listIndent position will be here\n    //   ^ blkIndent position will be here\n    //\n    oldListIndent = state.listIndent;\n    state.listIndent = state.blkIndent;\n    state.blkIndent = indent;\n\n    state.tight = true;\n    state.tShift[startLine] = contentStart - state.bMarks[startLine];\n    state.sCount[startLine] = offset;\n\n    if (contentStart >= max && state.isEmpty(startLine + 1)) {\n      // workaround for this case\n      // (list item is empty, list terminates before \"foo\"):\n      // ~~~~~~~~\n      //   -\n      //\n      //     foo\n      // ~~~~~~~~\n      state.line = Math.min(state.line + 2, endLine);\n    } else {\n      state.md.block.tokenize(state, startLine, endLine, true);\n    }\n\n    // If any of list item is tight, mark list as tight\n    if (!state.tight || prevEmptyEnd) {\n      tight = false;\n    }\n    // Item become loose if finish with empty line,\n    // but we should filter last element, because it means list finish\n    prevEmptyEnd = (state.line - startLine) > 1 && state.isEmpty(state.line - 1);\n\n    state.blkIndent = state.listIndent;\n    state.listIndent = oldListIndent;\n    state.tShift[startLine] = oldTShift;\n    state.sCount[startLine] = oldSCount;\n    state.tight = oldTight;\n\n    token        = state.push('list_item_close', 'li', -1);\n    token.markup = String.fromCharCode(markerCharCode);\n\n    nextLine = startLine = state.line;\n    itemLines[1] = nextLine;\n    contentStart = state.bMarks[startLine];\n\n    if (nextLine >= endLine) { break; }\n\n    //\n    // Try to check if list is terminated or continued.\n    //\n    if (state.sCount[nextLine] < state.blkIndent) { break; }\n\n    // if it's indented more than 3 spaces, it should be a code block\n    if (state.sCount[startLine] - state.blkIndent >= 4) { break; }\n\n    // fail if terminating block found\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    // fail if list has another type\n    if (isOrdered) {\n      posAfterMarker = skipOrderedListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    } else {\n      posAfterMarker = skipBulletListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    }\n\n    if (markerCharCode !== state.src.charCodeAt(posAfterMarker - 1)) { break; }\n  }\n\n  // Finalize list\n  if (isOrdered) {\n    token = state.push('ordered_list_close', 'ol', -1);\n  } else {\n    token = state.push('bullet_list_close', 'ul', -1);\n  }\n  token.markup = String.fromCharCode(markerCharCode);\n\n  listLines[1] = nextLine;\n  state.line = nextLine;\n\n  state.parentType = oldParentType;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs(state, listTokIdx);\n  }\n\n  return true;\n};\n","// Paragraph\n\n'use strict';\n\n\nmodule.exports = function paragraph(state, startLine/*, endLine*/) {\n  var content, terminate, i, l, token, oldParentType,\n      nextLine = startLine + 1,\n      terminatorRules = state.md.block.ruler.getRules('paragraph'),\n      endLine = state.lineMax;\n\n  oldParentType = state.parentType;\n  state.parentType = 'paragraph';\n\n  // jump line-by-line until empty one or EOF\n  for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) { continue; }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) { continue; }\n\n    // Some tags can terminate paragraph without empty line.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n  }\n\n  content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n\n  state.line = nextLine;\n\n  token          = state.push('paragraph_open', 'p', 1);\n  token.map      = [ startLine, state.line ];\n\n  token          = state.push('inline', '', 0);\n  token.content  = content;\n  token.map      = [ startLine, state.line ];\n  token.children = [];\n\n  token          = state.push('paragraph_close', 'p', -1);\n\n  state.parentType = oldParentType;\n\n  return true;\n};\n","'use strict';\n\n\nvar normalizeReference   = require('../common/utils').normalizeReference;\nvar isSpace              = require('../common/utils').isSpace;\n\n\nmodule.exports = function reference(state, startLine, _endLine, silent) {\n  var ch,\n      destEndPos,\n      destEndLineNo,\n      endLine,\n      href,\n      i,\n      l,\n      label,\n      labelEnd,\n      oldParentType,\n      res,\n      start,\n      str,\n      terminate,\n      terminatorRules,\n      title,\n      lines = 0,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine],\n      nextLine = startLine + 1;\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  if (state.src.charCodeAt(pos) !== 0x5B/* [ */) { return false; }\n\n  // Simple check to quickly interrupt scan on [link](url) at the start of line.\n  // Can be useful on practice: https://github.com/markdown-it/markdown-it/issues/54\n  while (++pos < max) {\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */ &&\n        state.src.charCodeAt(pos - 1) !== 0x5C/* \\ */) {\n      if (pos + 1 === max) { return false; }\n      if (state.src.charCodeAt(pos + 1) !== 0x3A/* : */) { return false; }\n      break;\n    }\n  }\n\n  endLine = state.lineMax;\n\n  // jump line-by-line until empty one or EOF\n  terminatorRules = state.md.block.ruler.getRules('reference');\n\n  oldParentType = state.parentType;\n  state.parentType = 'reference';\n\n  for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) { continue; }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) { continue; }\n\n    // Some tags can terminate paragraph without empty line.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n  }\n\n  str = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n  max = str.length;\n\n  for (pos = 1; pos < max; pos++) {\n    ch = str.charCodeAt(pos);\n    if (ch === 0x5B /* [ */) {\n      return false;\n    } else if (ch === 0x5D /* ] */) {\n      labelEnd = pos;\n      break;\n    } else if (ch === 0x0A /* \\n */) {\n      lines++;\n    } else if (ch === 0x5C /* \\ */) {\n      pos++;\n      if (pos < max && str.charCodeAt(pos) === 0x0A) {\n        lines++;\n      }\n    }\n  }\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return false; }\n\n  // [label]:   destination   'title'\n  //         ^^^ skip optional whitespace here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    ch = str.charCodeAt(pos);\n    if (ch === 0x0A) {\n      lines++;\n    } else if (isSpace(ch)) {\n      /*eslint no-empty:0*/\n    } else {\n      break;\n    }\n  }\n\n  // [label]:   destination   'title'\n  //            ^^^^^^^^^^^ parse this\n  res = state.md.helpers.parseLinkDestination(str, pos, max);\n  if (!res.ok) { return false; }\n\n  href = state.md.normalizeLink(res.str);\n  if (!state.md.validateLink(href)) { return false; }\n\n  pos = res.pos;\n  lines += res.lines;\n\n  // save cursor state, we could require to rollback later\n  destEndPos = pos;\n  destEndLineNo = lines;\n\n  // [label]:   destination   'title'\n  //                       ^^^ skipping those spaces\n  start = pos;\n  for (; pos < max; pos++) {\n    ch = str.charCodeAt(pos);\n    if (ch === 0x0A) {\n      lines++;\n    } else if (isSpace(ch)) {\n      /*eslint no-empty:0*/\n    } else {\n      break;\n    }\n  }\n\n  // [label]:   destination   'title'\n  //                          ^^^^^^^ parse this\n  res = state.md.helpers.parseLinkTitle(str, pos, max);\n  if (pos < max && start !== pos && res.ok) {\n    title = res.str;\n    pos = res.pos;\n    lines += res.lines;\n  } else {\n    title = '';\n    pos = destEndPos;\n    lines = destEndLineNo;\n  }\n\n  // skip trailing spaces until the rest of the line\n  while (pos < max) {\n    ch = str.charCodeAt(pos);\n    if (!isSpace(ch)) { break; }\n    pos++;\n  }\n\n  if (pos < max && str.charCodeAt(pos) !== 0x0A) {\n    if (title) {\n      // garbage at the end of the line after title,\n      // but it could still be a valid reference if we roll back\n      title = '';\n      pos = destEndPos;\n      lines = destEndLineNo;\n      while (pos < max) {\n        ch = str.charCodeAt(pos);\n        if (!isSpace(ch)) { break; }\n        pos++;\n      }\n    }\n  }\n\n  if (pos < max && str.charCodeAt(pos) !== 0x0A) {\n    // garbage at the end of the line\n    return false;\n  }\n\n  label = normalizeReference(str.slice(1, labelEnd));\n  if (!label) {\n    // CommonMark 0.20 disallows empty labels\n    return false;\n  }\n\n  // Reference can not terminate anything. This check is for safety only.\n  /*istanbul ignore if*/\n  if (silent) { return true; }\n\n  if (typeof state.env.references === 'undefined') {\n    state.env.references = {};\n  }\n  if (typeof state.env.references[label] === 'undefined') {\n    state.env.references[label] = { title: title, href: href };\n  }\n\n  state.parentType = oldParentType;\n\n  state.line = startLine + lines + 1;\n  return true;\n};\n","// Parser state class\n\n'use strict';\n\nvar Token = require('../token');\nvar isSpace = require('../common/utils').isSpace;\n\n\nfunction StateBlock(src, md, env, tokens) {\n  var ch, s, start, pos, len, indent, offset, indent_found;\n\n  this.src = src;\n\n  // link to parser instance\n  this.md     = md;\n\n  this.env = env;\n\n  //\n  // Internal state vartiables\n  //\n\n  this.tokens = tokens;\n\n  this.bMarks = [];  // line begin offsets for fast jumps\n  this.eMarks = [];  // line end offsets for fast jumps\n  this.tShift = [];  // offsets of the first non-space characters (tabs not expanded)\n  this.sCount = [];  // indents for each line (tabs expanded)\n\n  // An amount of virtual spaces (tabs expanded) between beginning\n  // of each line (bMarks) and real beginning of that line.\n  //\n  // It exists only as a hack because blockquotes override bMarks\n  // losing information in the process.\n  //\n  // It's used only when expanding tabs, you can think about it as\n  // an initial tab length, e.g. bsCount=21 applied to string `\\t123`\n  // means first tab should be expanded to 4-21%4 === 3 spaces.\n  //\n  this.bsCount = [];\n\n  // block parser variables\n  this.blkIndent  = 0; // required block content indent (for example, if we are\n                       // inside a list, it would be positioned after list marker)\n  this.line       = 0; // line index in src\n  this.lineMax    = 0; // lines count\n  this.tight      = false;  // loose/tight mode for lists\n  this.ddIndent   = -1; // indent of the current dd block (-1 if there isn't any)\n  this.listIndent = -1; // indent of the current list block (-1 if there isn't any)\n\n  // can be 'blockquote', 'list', 'root', 'paragraph' or 'reference'\n  // used in lists to determine if they interrupt a paragraph\n  this.parentType = 'root';\n\n  this.level = 0;\n\n  // renderer\n  this.result = '';\n\n  // Create caches\n  // Generate markers.\n  s = this.src;\n  indent_found = false;\n\n  for (start = pos = indent = offset = 0, len = s.length; pos < len; pos++) {\n    ch = s.charCodeAt(pos);\n\n    if (!indent_found) {\n      if (isSpace(ch)) {\n        indent++;\n\n        if (ch === 0x09) {\n          offset += 4 - offset % 4;\n        } else {\n          offset++;\n        }\n        continue;\n      } else {\n        indent_found = true;\n      }\n    }\n\n    if (ch === 0x0A || pos === len - 1) {\n      if (ch !== 0x0A) { pos++; }\n      this.bMarks.push(start);\n      this.eMarks.push(pos);\n      this.tShift.push(indent);\n      this.sCount.push(offset);\n      this.bsCount.push(0);\n\n      indent_found = false;\n      indent = 0;\n      offset = 0;\n      start = pos + 1;\n    }\n  }\n\n  // Push fake entry to simplify cache bounds checks\n  this.bMarks.push(s.length);\n  this.eMarks.push(s.length);\n  this.tShift.push(0);\n  this.sCount.push(0);\n  this.bsCount.push(0);\n\n  this.lineMax = this.bMarks.length - 1; // don't count last fake line\n}\n\n// Push new token to \"stream\".\n//\nStateBlock.prototype.push = function (type, tag, nesting) {\n  var token = new Token(type, tag, nesting);\n  token.block = true;\n\n  if (nesting < 0) this.level--; // closing tag\n  token.level = this.level;\n  if (nesting > 0) this.level++; // opening tag\n\n  this.tokens.push(token);\n  return token;\n};\n\nStateBlock.prototype.isEmpty = function isEmpty(line) {\n  return this.bMarks[line] + this.tShift[line] >= this.eMarks[line];\n};\n\nStateBlock.prototype.skipEmptyLines = function skipEmptyLines(from) {\n  for (var max = this.lineMax; from < max; from++) {\n    if (this.bMarks[from] + this.tShift[from] < this.eMarks[from]) {\n      break;\n    }\n  }\n  return from;\n};\n\n// Skip spaces from given position.\nStateBlock.prototype.skipSpaces = function skipSpaces(pos) {\n  var ch;\n\n  for (var max = this.src.length; pos < max; pos++) {\n    ch = this.src.charCodeAt(pos);\n    if (!isSpace(ch)) { break; }\n  }\n  return pos;\n};\n\n// Skip spaces from given position in reverse.\nStateBlock.prototype.skipSpacesBack = function skipSpacesBack(pos, min) {\n  if (pos <= min) { return pos; }\n\n  while (pos > min) {\n    if (!isSpace(this.src.charCodeAt(--pos))) { return pos + 1; }\n  }\n  return pos;\n};\n\n// Skip char codes from given position\nStateBlock.prototype.skipChars = function skipChars(pos, code) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== code) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes reverse from given position - 1\nStateBlock.prototype.skipCharsBack = function skipCharsBack(pos, code, min) {\n  if (pos <= min) { return pos; }\n\n  while (pos > min) {\n    if (code !== this.src.charCodeAt(--pos)) { return pos + 1; }\n  }\n  return pos;\n};\n\n// cut lines range from source.\nStateBlock.prototype.getLines = function getLines(begin, end, indent, keepLastLF) {\n  var i, lineIndent, ch, first, last, queue, lineStart,\n      line = begin;\n\n  if (begin >= end) {\n    return '';\n  }\n\n  queue = new Array(end - begin);\n\n  for (i = 0; line < end; line++, i++) {\n    lineIndent = 0;\n    lineStart = first = this.bMarks[line];\n\n    if (line + 1 < end || keepLastLF) {\n      // No need for bounds check because we have fake entry on tail.\n      last = this.eMarks[line] + 1;\n    } else {\n      last = this.eMarks[line];\n    }\n\n    while (first < last && lineIndent < indent) {\n      ch = this.src.charCodeAt(first);\n\n      if (isSpace(ch)) {\n        if (ch === 0x09) {\n          lineIndent += 4 - (lineIndent + this.bsCount[line]) % 4;\n        } else {\n          lineIndent++;\n        }\n      } else if (first - lineStart < this.tShift[line]) {\n        // patched tShift masked characters to look like spaces (blockquotes, list markers)\n        lineIndent++;\n      } else {\n        break;\n      }\n\n      first++;\n    }\n\n    if (lineIndent > indent) {\n      // partially expanding tabs in code blocks, e.g '\\t\\tfoobar'\n      // with indent=2 becomes '  \\tfoobar'\n      queue[i] = new Array(lineIndent - indent + 1).join(' ') + this.src.slice(first, last);\n    } else {\n      queue[i] = this.src.slice(first, last);\n    }\n  }\n\n  return queue.join('');\n};\n\n// re-export Token class to use in block rules\nStateBlock.prototype.Token = Token;\n\n\nmodule.exports = StateBlock;\n","// GFM table, https://github.github.com/gfm/#tables-extension-\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nfunction getLine(state, line) {\n  var pos = state.bMarks[line] + state.tShift[line],\n      max = state.eMarks[line];\n\n  return state.src.substr(pos, max - pos);\n}\n\nfunction escapedSplit(str) {\n  var result = [],\n      pos = 0,\n      max = str.length,\n      ch,\n      isEscaped = false,\n      lastPos = 0,\n      current = '';\n\n  ch  = str.charCodeAt(pos);\n\n  while (pos < max) {\n    if (ch === 0x7c/* | */) {\n      if (!isEscaped) {\n        // pipe separating cells, '|'\n        result.push(current + str.substring(lastPos, pos));\n        current = '';\n        lastPos = pos + 1;\n      } else {\n        // escaped pipe, '\\|'\n        current += str.substring(lastPos, pos - 1);\n        lastPos = pos;\n      }\n    }\n\n    isEscaped = (ch === 0x5c/* \\ */);\n    pos++;\n\n    ch = str.charCodeAt(pos);\n  }\n\n  result.push(current + str.substring(lastPos));\n\n  return result;\n}\n\n\nmodule.exports = function table(state, startLine, endLine, silent) {\n  var ch, lineText, pos, i, l, nextLine, columns, columnCount, token,\n      aligns, t, tableLines, tbodyLines, oldParentType, terminate,\n      terminatorRules;\n\n  // should have at least two lines\n  if (startLine + 2 > endLine) { return false; }\n\n  nextLine = startLine + 1;\n\n  if (state.sCount[nextLine] < state.blkIndent) { return false; }\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[nextLine] - state.blkIndent >= 4) { return false; }\n\n  // first character of the second line should be '|', '-', ':',\n  // and no other characters are allowed but spaces;\n  // basically, this is the equivalent of /^[-:|][-:|\\s]*$/ regexp\n\n  pos = state.bMarks[nextLine] + state.tShift[nextLine];\n  if (pos >= state.eMarks[nextLine]) { return false; }\n\n  ch = state.src.charCodeAt(pos++);\n  if (ch !== 0x7C/* | */ && ch !== 0x2D/* - */ && ch !== 0x3A/* : */) { return false; }\n\n  while (pos < state.eMarks[nextLine]) {\n    ch = state.src.charCodeAt(pos);\n\n    if (ch !== 0x7C/* | */ && ch !== 0x2D/* - */ && ch !== 0x3A/* : */ && !isSpace(ch)) { return false; }\n\n    pos++;\n  }\n\n  lineText = getLine(state, startLine + 1);\n\n  columns = lineText.split('|');\n  aligns = [];\n  for (i = 0; i < columns.length; i++) {\n    t = columns[i].trim();\n    if (!t) {\n      // allow empty columns before and after table, but not in between columns;\n      // e.g. allow ` |---| `, disallow ` ---||--- `\n      if (i === 0 || i === columns.length - 1) {\n        continue;\n      } else {\n        return false;\n      }\n    }\n\n    if (!/^:?-+:?$/.test(t)) { return false; }\n    if (t.charCodeAt(t.length - 1) === 0x3A/* : */) {\n      aligns.push(t.charCodeAt(0) === 0x3A/* : */ ? 'center' : 'right');\n    } else if (t.charCodeAt(0) === 0x3A/* : */) {\n      aligns.push('left');\n    } else {\n      aligns.push('');\n    }\n  }\n\n  lineText = getLine(state, startLine).trim();\n  if (lineText.indexOf('|') === -1) { return false; }\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n  columns = escapedSplit(lineText);\n  if (columns.length && columns[0] === '') columns.shift();\n  if (columns.length && columns[columns.length - 1] === '') columns.pop();\n\n  // header row will define an amount of columns in the entire table,\n  // and align row should be exactly the same (the rest of the rows can differ)\n  columnCount = columns.length;\n  if (columnCount === 0 || columnCount !== aligns.length) { return false; }\n\n  if (silent) { return true; }\n\n  oldParentType = state.parentType;\n  state.parentType = 'table';\n\n  // use 'blockquote' lists for termination because it's\n  // the most similar to tables\n  terminatorRules = state.md.block.ruler.getRules('blockquote');\n\n  token     = state.push('table_open', 'table', 1);\n  token.map = tableLines = [ startLine, 0 ];\n\n  token     = state.push('thead_open', 'thead', 1);\n  token.map = [ startLine, startLine + 1 ];\n\n  token     = state.push('tr_open', 'tr', 1);\n  token.map = [ startLine, startLine + 1 ];\n\n  for (i = 0; i < columns.length; i++) {\n    token          = state.push('th_open', 'th', 1);\n    if (aligns[i]) {\n      token.attrs  = [ [ 'style', 'text-align:' + aligns[i] ] ];\n    }\n\n    token          = state.push('inline', '', 0);\n    token.content  = columns[i].trim();\n    token.children = [];\n\n    token          = state.push('th_close', 'th', -1);\n  }\n\n  token     = state.push('tr_close', 'tr', -1);\n  token     = state.push('thead_close', 'thead', -1);\n\n  for (nextLine = startLine + 2; nextLine < endLine; nextLine++) {\n    if (state.sCount[nextLine] < state.blkIndent) { break; }\n\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n\n    if (terminate) { break; }\n    lineText = getLine(state, nextLine).trim();\n    if (!lineText) { break; }\n    if (state.sCount[nextLine] - state.blkIndent >= 4) { break; }\n    columns = escapedSplit(lineText);\n    if (columns.length && columns[0] === '') columns.shift();\n    if (columns.length && columns[columns.length - 1] === '') columns.pop();\n\n    if (nextLine === startLine + 2) {\n      token     = state.push('tbody_open', 'tbody', 1);\n      token.map = tbodyLines = [ startLine + 2, 0 ];\n    }\n\n    token     = state.push('tr_open', 'tr', 1);\n    token.map = [ nextLine, nextLine + 1 ];\n\n    for (i = 0; i < columnCount; i++) {\n      token          = state.push('td_open', 'td', 1);\n      if (aligns[i]) {\n        token.attrs  = [ [ 'style', 'text-align:' + aligns[i] ] ];\n      }\n\n      token          = state.push('inline', '', 0);\n      token.content  = columns[i] ? columns[i].trim() : '';\n      token.children = [];\n\n      token          = state.push('td_close', 'td', -1);\n    }\n    token = state.push('tr_close', 'tr', -1);\n  }\n\n  if (tbodyLines) {\n    token = state.push('tbody_close', 'tbody', -1);\n    tbodyLines[1] = nextLine;\n  }\n\n  token = state.push('table_close', 'table', -1);\n  tableLines[1] = nextLine;\n\n  state.parentType = oldParentType;\n  state.line = nextLine;\n  return true;\n};\n","'use strict';\n\n\nmodule.exports = function block(state) {\n  var token;\n\n  if (state.inlineMode) {\n    token          = new state.Token('inline', '', 0);\n    token.content  = state.src;\n    token.map      = [ 0, 1 ];\n    token.children = [];\n    state.tokens.push(token);\n  } else {\n    state.md.block.parse(state.src, state.md, state.env, state.tokens);\n  }\n};\n","'use strict';\n\nmodule.exports = function inline(state) {\n  var tokens = state.tokens, tok, i, l;\n\n  // Parse inlines\n  for (i = 0, l = tokens.length; i < l; i++) {\n    tok = tokens[i];\n    if (tok.type === 'inline') {\n      state.md.inline.parse(tok.content, state.md, state.env, tok.children);\n    }\n  }\n};\n","// Replace link-like texts with link nodes.\n//\n// Currently restricted by `md.validateLink()` to http/https/ftp\n//\n'use strict';\n\n\nvar arrayReplaceAt = require('../common/utils').arrayReplaceAt;\n\n\nfunction isLinkOpen(str) {\n  return /^<a[>\\s]/i.test(str);\n}\nfunction isLinkClose(str) {\n  return /^<\\/a\\s*>/i.test(str);\n}\n\n\nmodule.exports = function linkify(state) {\n  var i, j, l, tokens, token, currentToken, nodes, ln, text, pos, lastPos,\n      level, htmlLinkLevel, url, fullUrl, urlText,\n      blockTokens = state.tokens,\n      links;\n\n  if (!state.md.options.linkify) { return; }\n\n  for (j = 0, l = blockTokens.length; j < l; j++) {\n    if (blockTokens[j].type !== 'inline' ||\n        !state.md.linkify.pretest(blockTokens[j].content)) {\n      continue;\n    }\n\n    tokens = blockTokens[j].children;\n\n    htmlLinkLevel = 0;\n\n    // We scan from the end, to keep position when new tags added.\n    // Use reversed logic in links start/end match\n    for (i = tokens.length - 1; i >= 0; i--) {\n      currentToken = tokens[i];\n\n      // Skip content of markdown links\n      if (currentToken.type === 'link_close') {\n        i--;\n        while (tokens[i].level !== currentToken.level && tokens[i].type !== 'link_open') {\n          i--;\n        }\n        continue;\n      }\n\n      // Skip content of html tag links\n      if (currentToken.type === 'html_inline') {\n        if (isLinkOpen(currentToken.content) && htmlLinkLevel > 0) {\n          htmlLinkLevel--;\n        }\n        if (isLinkClose(currentToken.content)) {\n          htmlLinkLevel++;\n        }\n      }\n      if (htmlLinkLevel > 0) { continue; }\n\n      if (currentToken.type === 'text' && state.md.linkify.test(currentToken.content)) {\n\n        text = currentToken.content;\n        links = state.md.linkify.match(text);\n\n        // Now split string to nodes\n        nodes = [];\n        level = currentToken.level;\n        lastPos = 0;\n\n        for (ln = 0; ln < links.length; ln++) {\n\n          url = links[ln].url;\n          fullUrl = state.md.normalizeLink(url);\n          if (!state.md.validateLink(fullUrl)) { continue; }\n\n          urlText = links[ln].text;\n\n          // Linkifier might send raw hostnames like \"example.com\", where url\n          // starts with domain name. So we prepend http:// in those cases,\n          // and remove it afterwards.\n          //\n          if (!links[ln].schema) {\n            urlText = state.md.normalizeLinkText('http://' + urlText).replace(/^http:\\/\\//, '');\n          } else if (links[ln].schema === 'mailto:' && !/^mailto:/i.test(urlText)) {\n            urlText = state.md.normalizeLinkText('mailto:' + urlText).replace(/^mailto:/, '');\n          } else {\n            urlText = state.md.normalizeLinkText(urlText);\n          }\n\n          pos = links[ln].index;\n\n          if (pos > lastPos) {\n            token         = new state.Token('text', '', 0);\n            token.content = text.slice(lastPos, pos);\n            token.level   = level;\n            nodes.push(token);\n          }\n\n          token         = new state.Token('link_open', 'a', 1);\n          token.attrs   = [ [ 'href', fullUrl ] ];\n          token.level   = level++;\n          token.markup  = 'linkify';\n          token.info    = 'auto';\n          nodes.push(token);\n\n          token         = new state.Token('text', '', 0);\n          token.content = urlText;\n          token.level   = level;\n          nodes.push(token);\n\n          token         = new state.Token('link_close', 'a', -1);\n          token.level   = --level;\n          token.markup  = 'linkify';\n          token.info    = 'auto';\n          nodes.push(token);\n\n          lastPos = links[ln].lastIndex;\n        }\n        if (lastPos < text.length) {\n          token         = new state.Token('text', '', 0);\n          token.content = text.slice(lastPos);\n          token.level   = level;\n          nodes.push(token);\n        }\n\n        // replace current node\n        blockTokens[j].children = tokens = arrayReplaceAt(tokens, i, nodes);\n      }\n    }\n  }\n};\n","// Normalize input string\n\n'use strict';\n\n\n// https://spec.commonmark.org/0.29/#line-ending\nvar NEWLINES_RE  = /\\r\\n?|\\n/g;\nvar NULL_RE      = /\\0/g;\n\n\nmodule.exports = function normalize(state) {\n  var str;\n\n  // Normalize newlines\n  str = state.src.replace(NEWLINES_RE, '\\n');\n\n  // Replace NULL characters\n  str = str.replace(NULL_RE, '\\uFFFD');\n\n  state.src = str;\n};\n","// Simple typographic replacements\n//\n// (c) (C)  \n// (tm) (TM)  \n// (r) (R)  \n// +-  \n// (p) (P) -> \n// ...   (also ?....  ?.., !....  !..)\n// ????????  ???, !!!!!  !!!, `,,`  `,`\n// --  &ndash;, ---  &mdash;\n//\n'use strict';\n\n// TODO:\n// - fractionals 1/2, 1/4, 3/4 -> , , \n// - miltiplication 2 x 4 -> 2  4\n\nvar RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\n// Workaround for phantomjs - need regex without /g flag,\n// or root check will fail every second time\nvar SCOPED_ABBR_TEST_RE = /\\((c|tm|r|p)\\)/i;\n\nvar SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\nvar SCOPED_ABBR = {\n  c: '',\n  r: '',\n  p: '',\n  tm: ''\n};\n\nfunction replaceFn(match, name) {\n  return SCOPED_ABBR[name.toLowerCase()];\n}\n\nfunction replace_scoped(inlineTokens) {\n  var i, token, inside_autolink = 0;\n\n  for (i = inlineTokens.length - 1; i >= 0; i--) {\n    token = inlineTokens[i];\n\n    if (token.type === 'text' && !inside_autolink) {\n      token.content = token.content.replace(SCOPED_ABBR_RE, replaceFn);\n    }\n\n    if (token.type === 'link_open' && token.info === 'auto') {\n      inside_autolink--;\n    }\n\n    if (token.type === 'link_close' && token.info === 'auto') {\n      inside_autolink++;\n    }\n  }\n}\n\nfunction replace_rare(inlineTokens) {\n  var i, token, inside_autolink = 0;\n\n  for (i = inlineTokens.length - 1; i >= 0; i--) {\n    token = inlineTokens[i];\n\n    if (token.type === 'text' && !inside_autolink) {\n      if (RARE_RE.test(token.content)) {\n        token.content = token.content\n          .replace(/\\+-/g, '')\n          // .., ..., ....... -> \n          // but ?..... & !..... -> ?.. & !..\n          .replace(/\\.{2,}/g, '').replace(/([?!])/g, '$1..')\n          .replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n          // em-dash\n          .replace(/(^|[^-])---(?=[^-]|$)/mg, '$1\\u2014')\n          // en-dash\n          .replace(/(^|\\s)--(?=\\s|$)/mg, '$1\\u2013')\n          .replace(/(^|[^-\\s])--(?=[^-\\s]|$)/mg, '$1\\u2013');\n      }\n    }\n\n    if (token.type === 'link_open' && token.info === 'auto') {\n      inside_autolink--;\n    }\n\n    if (token.type === 'link_close' && token.info === 'auto') {\n      inside_autolink++;\n    }\n  }\n}\n\n\nmodule.exports = function replace(state) {\n  var blkIdx;\n\n  if (!state.md.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    if (SCOPED_ABBR_TEST_RE.test(state.tokens[blkIdx].content)) {\n      replace_scoped(state.tokens[blkIdx].children);\n    }\n\n    if (RARE_RE.test(state.tokens[blkIdx].content)) {\n      replace_rare(state.tokens[blkIdx].children);\n    }\n\n  }\n};\n","// Convert straight quotation marks to typographic ones\n//\n'use strict';\n\n\nvar isWhiteSpace   = require('../common/utils').isWhiteSpace;\nvar isPunctChar    = require('../common/utils').isPunctChar;\nvar isMdAsciiPunct = require('../common/utils').isMdAsciiPunct;\n\nvar QUOTE_TEST_RE = /['\"]/;\nvar QUOTE_RE = /['\"]/g;\nvar APOSTROPHE = '\\u2019'; /*  */\n\n\nfunction replaceAt(str, index, ch) {\n  return str.substr(0, index) + ch + str.substr(index + 1);\n}\n\nfunction process_inlines(tokens, state) {\n  var i, token, text, t, pos, max, thisLevel, item, lastChar, nextChar,\n      isLastPunctChar, isNextPunctChar, isLastWhiteSpace, isNextWhiteSpace,\n      canOpen, canClose, j, isSingle, stack, openQuote, closeQuote;\n\n  stack = [];\n\n  for (i = 0; i < tokens.length; i++) {\n    token = tokens[i];\n\n    thisLevel = tokens[i].level;\n\n    for (j = stack.length - 1; j >= 0; j--) {\n      if (stack[j].level <= thisLevel) { break; }\n    }\n    stack.length = j + 1;\n\n    if (token.type !== 'text') { continue; }\n\n    text = token.content;\n    pos = 0;\n    max = text.length;\n\n    /*eslint no-labels:0,block-scoped-var:0*/\n    OUTER:\n    while (pos < max) {\n      QUOTE_RE.lastIndex = pos;\n      t = QUOTE_RE.exec(text);\n      if (!t) { break; }\n\n      canOpen = canClose = true;\n      pos = t.index + 1;\n      isSingle = (t[0] === \"'\");\n\n      // Find previous character,\n      // default to space if it's the beginning of the line\n      //\n      lastChar = 0x20;\n\n      if (t.index - 1 >= 0) {\n        lastChar = text.charCodeAt(t.index - 1);\n      } else {\n        for (j = i - 1; j >= 0; j--) {\n          if (tokens[j].type === 'softbreak' || tokens[j].type === 'hardbreak') break; // lastChar defaults to 0x20\n          if (!tokens[j].content) continue; // should skip all tokens except 'text', 'html_inline' or 'code_inline'\n\n          lastChar = tokens[j].content.charCodeAt(tokens[j].content.length - 1);\n          break;\n        }\n      }\n\n      // Find next character,\n      // default to space if it's the end of the line\n      //\n      nextChar = 0x20;\n\n      if (pos < max) {\n        nextChar = text.charCodeAt(pos);\n      } else {\n        for (j = i + 1; j < tokens.length; j++) {\n          if (tokens[j].type === 'softbreak' || tokens[j].type === 'hardbreak') break; // nextChar defaults to 0x20\n          if (!tokens[j].content) continue; // should skip all tokens except 'text', 'html_inline' or 'code_inline'\n\n          nextChar = tokens[j].content.charCodeAt(0);\n          break;\n        }\n      }\n\n      isLastPunctChar = isMdAsciiPunct(lastChar) || isPunctChar(String.fromCharCode(lastChar));\n      isNextPunctChar = isMdAsciiPunct(nextChar) || isPunctChar(String.fromCharCode(nextChar));\n\n      isLastWhiteSpace = isWhiteSpace(lastChar);\n      isNextWhiteSpace = isWhiteSpace(nextChar);\n\n      if (isNextWhiteSpace) {\n        canOpen = false;\n      } else if (isNextPunctChar) {\n        if (!(isLastWhiteSpace || isLastPunctChar)) {\n          canOpen = false;\n        }\n      }\n\n      if (isLastWhiteSpace) {\n        canClose = false;\n      } else if (isLastPunctChar) {\n        if (!(isNextWhiteSpace || isNextPunctChar)) {\n          canClose = false;\n        }\n      }\n\n      if (nextChar === 0x22 /* \" */ && t[0] === '\"') {\n        if (lastChar >= 0x30 /* 0 */ && lastChar <= 0x39 /* 9 */) {\n          // special case: 1\"\" - count first quote as an inch\n          canClose = canOpen = false;\n        }\n      }\n\n      if (canOpen && canClose) {\n        // Replace quotes in the middle of punctuation sequence, but not\n        // in the middle of the words, i.e.:\n        //\n        // 1. foo \" bar \" baz - not replaced\n        // 2. foo-\"-bar-\"-baz - replaced\n        // 3. foo\"bar\"baz     - not replaced\n        //\n        canOpen = isLastPunctChar;\n        canClose = isNextPunctChar;\n      }\n\n      if (!canOpen && !canClose) {\n        // middle of word\n        if (isSingle) {\n          token.content = replaceAt(token.content, t.index, APOSTROPHE);\n        }\n        continue;\n      }\n\n      if (canClose) {\n        // this could be a closing quote, rewind the stack to get a match\n        for (j = stack.length - 1; j >= 0; j--) {\n          item = stack[j];\n          if (stack[j].level < thisLevel) { break; }\n          if (item.single === isSingle && stack[j].level === thisLevel) {\n            item = stack[j];\n\n            if (isSingle) {\n              openQuote = state.md.options.quotes[2];\n              closeQuote = state.md.options.quotes[3];\n            } else {\n              openQuote = state.md.options.quotes[0];\n              closeQuote = state.md.options.quotes[1];\n            }\n\n            // replace token.content *before* tokens[item.token].content,\n            // because, if they are pointing at the same token, replaceAt\n            // could mess up indices when quote length != 1\n            token.content = replaceAt(token.content, t.index, closeQuote);\n            tokens[item.token].content = replaceAt(\n              tokens[item.token].content, item.pos, openQuote);\n\n            pos += closeQuote.length - 1;\n            if (item.token === i) { pos += openQuote.length - 1; }\n\n            text = token.content;\n            max = text.length;\n\n            stack.length = j;\n            continue OUTER;\n          }\n        }\n      }\n\n      if (canOpen) {\n        stack.push({\n          token: i,\n          pos: t.index,\n          single: isSingle,\n          level: thisLevel\n        });\n      } else if (canClose && isSingle) {\n        token.content = replaceAt(token.content, t.index, APOSTROPHE);\n      }\n    }\n  }\n}\n\n\nmodule.exports = function smartquotes(state) {\n  /*eslint max-depth:0*/\n  var blkIdx;\n\n  if (!state.md.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline' ||\n        !QUOTE_TEST_RE.test(state.tokens[blkIdx].content)) {\n      continue;\n    }\n\n    process_inlines(state.tokens[blkIdx].children, state);\n  }\n};\n","// Core state object\n//\n'use strict';\n\nvar Token = require('../token');\n\n\nfunction StateCore(src, md, env) {\n  this.src = src;\n  this.env = env;\n  this.tokens = [];\n  this.inlineMode = false;\n  this.md = md; // link to parser instance\n}\n\n// re-export Token class to use in core rules\nStateCore.prototype.Token = Token;\n\n\nmodule.exports = StateCore;\n","// Process autolinks '<protocol:...>'\n\n'use strict';\n\n\n/*eslint max-len:0*/\nvar EMAIL_RE    = /^<([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/;\nvar AUTOLINK_RE = /^<([a-zA-Z][a-zA-Z0-9+.\\-]{1,31}):([^<>\\x00-\\x20]*)>/;\n\n\nmodule.exports = function autolink(state, silent) {\n  var tail, linkMatch, emailMatch, url, fullUrl, token,\n      pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  tail = state.src.slice(pos);\n\n  if (tail.indexOf('>') < 0) { return false; }\n\n  if (AUTOLINK_RE.test(tail)) {\n    linkMatch = tail.match(AUTOLINK_RE);\n\n    url = linkMatch[0].slice(1, -1);\n    fullUrl = state.md.normalizeLink(url);\n    if (!state.md.validateLink(fullUrl)) { return false; }\n\n    if (!silent) {\n      token         = state.push('link_open', 'a', 1);\n      token.attrs   = [ [ 'href', fullUrl ] ];\n      token.markup  = 'autolink';\n      token.info    = 'auto';\n\n      token         = state.push('text', '', 0);\n      token.content = state.md.normalizeLinkText(url);\n\n      token         = state.push('link_close', 'a', -1);\n      token.markup  = 'autolink';\n      token.info    = 'auto';\n    }\n\n    state.pos += linkMatch[0].length;\n    return true;\n  }\n\n  if (EMAIL_RE.test(tail)) {\n    emailMatch = tail.match(EMAIL_RE);\n\n    url = emailMatch[0].slice(1, -1);\n    fullUrl = state.md.normalizeLink('mailto:' + url);\n    if (!state.md.validateLink(fullUrl)) { return false; }\n\n    if (!silent) {\n      token         = state.push('link_open', 'a', 1);\n      token.attrs   = [ [ 'href', fullUrl ] ];\n      token.markup  = 'autolink';\n      token.info    = 'auto';\n\n      token         = state.push('text', '', 0);\n      token.content = state.md.normalizeLinkText(url);\n\n      token         = state.push('link_close', 'a', -1);\n      token.markup  = 'autolink';\n      token.info    = 'auto';\n    }\n\n    state.pos += emailMatch[0].length;\n    return true;\n  }\n\n  return false;\n};\n","// Parse backticks\n\n'use strict';\n\nmodule.exports = function backtick(state, silent) {\n  var start, max, marker, matchStart, matchEnd, token,\n      pos = state.pos,\n      ch = state.src.charCodeAt(pos);\n\n  if (ch !== 0x60/* ` */) { return false; }\n\n  start = pos;\n  pos++;\n  max = state.posMax;\n\n  while (pos < max && state.src.charCodeAt(pos) === 0x60/* ` */) { pos++; }\n\n  marker = state.src.slice(start, pos);\n\n  matchStart = matchEnd = pos;\n\n  while ((matchStart = state.src.indexOf('`', matchEnd)) !== -1) {\n    matchEnd = matchStart + 1;\n\n    while (matchEnd < max && state.src.charCodeAt(matchEnd) === 0x60/* ` */) { matchEnd++; }\n\n    if (matchEnd - matchStart === marker.length) {\n      if (!silent) {\n        token         = state.push('code_inline', 'code', 0);\n        token.markup  = marker;\n        token.content = state.src.slice(pos, matchStart)\n          .replace(/\\n/g, ' ')\n          .replace(/^ (.+) $/, '$1');\n      }\n      state.pos = matchEnd;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += marker; }\n  state.pos += marker.length;\n  return true;\n};\n","// For each opening emphasis-like marker find a matching closing one\n//\n'use strict';\n\n\nfunction processDelimiters(state, delimiters) {\n  var closerIdx, openerIdx, closer, opener, minOpenerIdx, newMinOpenerIdx,\n      isOddMatch, lastJump,\n      openersBottom = {},\n      max = delimiters.length;\n\n  for (closerIdx = 0; closerIdx < max; closerIdx++) {\n    closer = delimiters[closerIdx];\n\n    // Length is only used for emphasis-specific \"rule of 3\",\n    // if it's not defined (in strikethrough or 3rd party plugins),\n    // we can default it to 0 to disable those checks.\n    //\n    closer.length = closer.length || 0;\n\n    if (!closer.close) continue;\n\n    // Previously calculated lower bounds (previous fails)\n    // for each marker and each delimiter length modulo 3.\n    if (!openersBottom.hasOwnProperty(closer.marker)) {\n      openersBottom[closer.marker] = [ -1, -1, -1 ];\n    }\n\n    minOpenerIdx = openersBottom[closer.marker][closer.length % 3];\n    newMinOpenerIdx = -1;\n\n    openerIdx = closerIdx - closer.jump - 1;\n\n    for (; openerIdx > minOpenerIdx; openerIdx -= opener.jump + 1) {\n      opener = delimiters[openerIdx];\n\n      if (opener.marker !== closer.marker) continue;\n\n      if (newMinOpenerIdx === -1) newMinOpenerIdx = openerIdx;\n\n      if (opener.open && opener.end < 0) {\n\n        isOddMatch = false;\n\n        // from spec:\n        //\n        // If one of the delimiters can both open and close emphasis, then the\n        // sum of the lengths of the delimiter runs containing the opening and\n        // closing delimiters must not be a multiple of 3 unless both lengths\n        // are multiples of 3.\n        //\n        if (opener.close || closer.open) {\n          if ((opener.length + closer.length) % 3 === 0) {\n            if (opener.length % 3 !== 0 || closer.length % 3 !== 0) {\n              isOddMatch = true;\n            }\n          }\n        }\n\n        if (!isOddMatch) {\n          // If previous delimiter cannot be an opener, we can safely skip\n          // the entire sequence in future checks. This is required to make\n          // sure algorithm has linear complexity (see *_*_*_*_*_... case).\n          //\n          lastJump = openerIdx > 0 && !delimiters[openerIdx - 1].open ?\n            delimiters[openerIdx - 1].jump + 1 :\n            0;\n\n          closer.jump  = closerIdx - openerIdx + lastJump;\n          closer.open  = false;\n          opener.end   = closerIdx;\n          opener.jump  = lastJump;\n          opener.close = false;\n          newMinOpenerIdx = -1;\n          break;\n        }\n      }\n    }\n\n    if (newMinOpenerIdx !== -1) {\n      // If match for this delimiter run failed, we want to set lower bound for\n      // future lookups. This is required to make sure algorithm has linear\n      // complexity.\n      //\n      // See details here:\n      // https://github.com/commonmark/cmark/issues/178#issuecomment-270417442\n      //\n      openersBottom[closer.marker][(closer.length || 0) % 3] = newMinOpenerIdx;\n    }\n  }\n}\n\n\nmodule.exports = function link_pairs(state) {\n  var curr,\n      tokens_meta = state.tokens_meta,\n      max = state.tokens_meta.length;\n\n  processDelimiters(state, state.delimiters);\n\n  for (curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      processDelimiters(state, tokens_meta[curr].delimiters);\n    }\n  }\n};\n","// Process *this* and _that_\n//\n'use strict';\n\n\n// Insert each marker as a separate text token, and add it to delimiter list\n//\nmodule.exports.tokenize = function emphasis(state, silent) {\n  var i, scanned, token,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (silent) { return false; }\n\n  if (marker !== 0x5F /* _ */ && marker !== 0x2A /* * */) { return false; }\n\n  scanned = state.scanDelims(state.pos, marker === 0x2A);\n\n  for (i = 0; i < scanned.length; i++) {\n    token         = state.push('text', '', 0);\n    token.content = String.fromCharCode(marker);\n\n    state.delimiters.push({\n      // Char code of the starting marker (number).\n      //\n      marker: marker,\n\n      // Total length of these series of delimiters.\n      //\n      length: scanned.length,\n\n      // An amount of characters before this one that's equivalent to\n      // current one. In plain English: if this delimiter does not open\n      // an emphasis, neither do previous `jump` characters.\n      //\n      // Used to skip sequences like \"*****\" in one step, for 1st asterisk\n      // value will be 0, for 2nd it's 1 and so on.\n      //\n      jump:   i,\n\n      // A position of the token this delimiter corresponds to.\n      //\n      token:  state.tokens.length - 1,\n\n      // If this delimiter is matched as a valid opener, `end` will be\n      // equal to its position, otherwise it's `-1`.\n      //\n      end:    -1,\n\n      // Boolean flags that determine if this delimiter could open or close\n      // an emphasis.\n      //\n      open:   scanned.can_open,\n      close:  scanned.can_close\n    });\n  }\n\n  state.pos += scanned.length;\n\n  return true;\n};\n\n\nfunction postProcess(state, delimiters) {\n  var i,\n      startDelim,\n      endDelim,\n      token,\n      ch,\n      isStrong,\n      max = delimiters.length;\n\n  for (i = max - 1; i >= 0; i--) {\n    startDelim = delimiters[i];\n\n    if (startDelim.marker !== 0x5F/* _ */ && startDelim.marker !== 0x2A/* * */) {\n      continue;\n    }\n\n    // Process only opening markers\n    if (startDelim.end === -1) {\n      continue;\n    }\n\n    endDelim = delimiters[startDelim.end];\n\n    // If the previous delimiter has the same marker and is adjacent to this one,\n    // merge those into one strong delimiter.\n    //\n    // `<em><em>whatever</em></em>` -> `<strong>whatever</strong>`\n    //\n    isStrong = i > 0 &&\n               delimiters[i - 1].end === startDelim.end + 1 &&\n               delimiters[i - 1].token === startDelim.token - 1 &&\n               delimiters[startDelim.end + 1].token === endDelim.token + 1 &&\n               delimiters[i - 1].marker === startDelim.marker;\n\n    ch = String.fromCharCode(startDelim.marker);\n\n    token         = state.tokens[startDelim.token];\n    token.type    = isStrong ? 'strong_open' : 'em_open';\n    token.tag     = isStrong ? 'strong' : 'em';\n    token.nesting = 1;\n    token.markup  = isStrong ? ch + ch : ch;\n    token.content = '';\n\n    token         = state.tokens[endDelim.token];\n    token.type    = isStrong ? 'strong_close' : 'em_close';\n    token.tag     = isStrong ? 'strong' : 'em';\n    token.nesting = -1;\n    token.markup  = isStrong ? ch + ch : ch;\n    token.content = '';\n\n    if (isStrong) {\n      state.tokens[delimiters[i - 1].token].content = '';\n      state.tokens[delimiters[startDelim.end + 1].token].content = '';\n      i--;\n    }\n  }\n}\n\n\n// Walk through delimiter list and replace text tokens with tags\n//\nmodule.exports.postProcess = function emphasis(state) {\n  var curr,\n      tokens_meta = state.tokens_meta,\n      max = state.tokens_meta.length;\n\n  postProcess(state, state.delimiters);\n\n  for (curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      postProcess(state, tokens_meta[curr].delimiters);\n    }\n  }\n};\n","// Process html entity - &#123;, &#xAF;, &quot;, ...\n\n'use strict';\n\nvar entities          = require('../common/entities');\nvar has               = require('../common/utils').has;\nvar isValidEntityCode = require('../common/utils').isValidEntityCode;\nvar fromCodePoint     = require('../common/utils').fromCodePoint;\n\n\nvar DIGITAL_RE = /^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i;\nvar NAMED_RE   = /^&([a-z][a-z0-9]{1,31});/i;\n\n\nmodule.exports = function entity(state, silent) {\n  var ch, code, match, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x26/* & */) { return false; }\n\n  if (pos + 1 < max) {\n    ch = state.src.charCodeAt(pos + 1);\n\n    if (ch === 0x23 /* # */) {\n      match = state.src.slice(pos).match(DIGITAL_RE);\n      if (match) {\n        if (!silent) {\n          code = match[1][0].toLowerCase() === 'x' ? parseInt(match[1].slice(1), 16) : parseInt(match[1], 10);\n          state.pending += isValidEntityCode(code) ? fromCodePoint(code) : fromCodePoint(0xFFFD);\n        }\n        state.pos += match[0].length;\n        return true;\n      }\n    } else {\n      match = state.src.slice(pos).match(NAMED_RE);\n      if (match) {\n        if (has(entities, match[1])) {\n          if (!silent) { state.pending += entities[match[1]]; }\n          state.pos += match[0].length;\n          return true;\n        }\n      }\n    }\n  }\n\n  if (!silent) { state.pending += '&'; }\n  state.pos++;\n  return true;\n};\n","// Process escaped chars and hardbreaks\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\nvar ESCAPED = [];\n\nfor (var i = 0; i < 256; i++) { ESCAPED.push(0); }\n\n'\\\\!\"#$%&\\'()*+,./:;<=>?@[]^_`{|}~-'\n  .split('').forEach(function (ch) { ESCAPED[ch.charCodeAt(0)] = 1; });\n\n\nmodule.exports = function escape(state, silent) {\n  var ch, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x5C/* \\ */) { return false; }\n\n  pos++;\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (ch < 256 && ESCAPED[ch] !== 0) {\n      if (!silent) { state.pending += state.src[pos]; }\n      state.pos += 2;\n      return true;\n    }\n\n    if (ch === 0x0A) {\n      if (!silent) {\n        state.push('hardbreak', 'br', 0);\n      }\n\n      pos++;\n      // skip leading whitespaces from next line\n      while (pos < max) {\n        ch = state.src.charCodeAt(pos);\n        if (!isSpace(ch)) { break; }\n        pos++;\n      }\n\n      state.pos = pos;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += '\\\\'; }\n  state.pos++;\n  return true;\n};\n","// Process html tags\n\n'use strict';\n\n\nvar HTML_TAG_RE = require('../common/html_re').HTML_TAG_RE;\n\n\nfunction isLetter(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\n\nmodule.exports = function html_inline(state, silent) {\n  var ch, match, max, token,\n      pos = state.pos;\n\n  if (!state.md.options.html) { return false; }\n\n  // Check start\n  max = state.posMax;\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */ ||\n      pos + 2 >= max) {\n    return false;\n  }\n\n  // Quick fail on second char\n  ch = state.src.charCodeAt(pos + 1);\n  if (ch !== 0x21/* ! */ &&\n      ch !== 0x3F/* ? */ &&\n      ch !== 0x2F/* / */ &&\n      !isLetter(ch)) {\n    return false;\n  }\n\n  match = state.src.slice(pos).match(HTML_TAG_RE);\n  if (!match) { return false; }\n\n  if (!silent) {\n    token         = state.push('html_inline', '', 0);\n    token.content = state.src.slice(pos, pos + match[0].length);\n  }\n  state.pos += match[0].length;\n  return true;\n};\n","// Process ![image](<src> \"title\")\n\n'use strict';\n\nvar normalizeReference   = require('../common/utils').normalizeReference;\nvar isSpace              = require('../common/utils').isSpace;\n\n\nmodule.exports = function image(state, silent) {\n  var attrs,\n      code,\n      content,\n      label,\n      labelEnd,\n      labelStart,\n      pos,\n      ref,\n      res,\n      title,\n      token,\n      tokens,\n      start,\n      href = '',\n      oldPos = state.pos,\n      max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x21/* ! */) { return false; }\n  if (state.src.charCodeAt(state.pos + 1) !== 0x5B/* [ */) { return false; }\n\n  labelStart = state.pos + 2;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos + 1, false);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) { return false; }\n\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28/* ( */) {\n    //\n    // Inline link\n    //\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) { break; }\n    }\n    if (pos >= max) { return false; }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                ^^ skipping these spaces\n    start = pos;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) { break; }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                  ^^^^^^^ parsing link title\n    res = state.md.helpers.parseLinkTitle(state.src, pos, state.posMax);\n    if (pos < max && start !== pos && res.ok) {\n      title = res.str;\n      pos = res.pos;\n\n      // [link](  <href>  \"title\"  )\n      //                         ^^ skipping these spaces\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (!isSpace(code) && code !== 0x0A) { break; }\n      }\n    } else {\n      title = '';\n    }\n\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29/* ) */) {\n      state.pos = oldPos;\n      return false;\n    }\n    pos++;\n  } else {\n    //\n    // Link reference\n    //\n    if (typeof state.env.references === 'undefined') { return false; }\n\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B/* [ */) {\n      start = pos + 1;\n      pos = state.md.helpers.parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = labelEnd + 1;\n      }\n    } else {\n      pos = labelEnd + 1;\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) { label = state.src.slice(labelStart, labelEnd); }\n\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    content = state.src.slice(labelStart, labelEnd);\n\n    state.md.inline.parse(\n      content,\n      state.md,\n      state.env,\n      tokens = []\n    );\n\n    token          = state.push('image', 'img', 0);\n    token.attrs    = attrs = [ [ 'src', href ], [ 'alt', '' ] ];\n    token.children = tokens;\n    token.content  = content;\n\n    if (title) {\n      attrs.push([ 'title', title ]);\n    }\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n};\n","// Process [link](<to> \"stuff\")\n\n'use strict';\n\nvar normalizeReference   = require('../common/utils').normalizeReference;\nvar isSpace              = require('../common/utils').isSpace;\n\n\nmodule.exports = function link(state, silent) {\n  var attrs,\n      code,\n      label,\n      labelEnd,\n      labelStart,\n      pos,\n      res,\n      ref,\n      title,\n      token,\n      href = '',\n      oldPos = state.pos,\n      max = state.posMax,\n      start = state.pos,\n      parseReference = true;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5B/* [ */) { return false; }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) { return false; }\n\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28/* ( */) {\n    //\n    // Inline link\n    //\n\n    // might have found a valid shortcut link, disable reference parsing\n    parseReference = false;\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) { break; }\n    }\n    if (pos >= max) { return false; }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                ^^ skipping these spaces\n    start = pos;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) { break; }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                  ^^^^^^^ parsing link title\n    res = state.md.helpers.parseLinkTitle(state.src, pos, state.posMax);\n    if (pos < max && start !== pos && res.ok) {\n      title = res.str;\n      pos = res.pos;\n\n      // [link](  <href>  \"title\"  )\n      //                         ^^ skipping these spaces\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (!isSpace(code) && code !== 0x0A) { break; }\n      }\n    } else {\n      title = '';\n    }\n\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29/* ) */) {\n      // parsing a valid shortcut link failed, fallback to reference\n      parseReference = true;\n    }\n    pos++;\n  }\n\n  if (parseReference) {\n    //\n    // Link reference\n    //\n    if (typeof state.env.references === 'undefined') { return false; }\n\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B/* [ */) {\n      start = pos + 1;\n      pos = state.md.helpers.parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = labelEnd + 1;\n      }\n    } else {\n      pos = labelEnd + 1;\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) { label = state.src.slice(labelStart, labelEnd); }\n\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token        = state.push('link_open', 'a', 1);\n    token.attrs  = attrs = [ [ 'href', href ] ];\n    if (title) {\n      attrs.push([ 'title', title ]);\n    }\n\n    state.md.inline.tokenize(state);\n\n    token        = state.push('link_close', 'a', -1);\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n};\n","// Proceess '\\n'\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function newline(state, silent) {\n  var pmax, max, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x0A/* \\n */) { return false; }\n\n  pmax = state.pending.length - 1;\n  max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        state.pending = state.pending.replace(/ +$/, '');\n        state.push('hardbreak', 'br', 0);\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push('softbreak', 'br', 0);\n      }\n\n    } else {\n      state.push('softbreak', 'br', 0);\n    }\n  }\n\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && isSpace(state.src.charCodeAt(pos))) { pos++; }\n\n  state.pos = pos;\n  return true;\n};\n","// Inline parser state\n\n'use strict';\n\n\nvar Token          = require('../token');\nvar isWhiteSpace   = require('../common/utils').isWhiteSpace;\nvar isPunctChar    = require('../common/utils').isPunctChar;\nvar isMdAsciiPunct = require('../common/utils').isMdAsciiPunct;\n\n\nfunction StateInline(src, md, env, outTokens) {\n  this.src = src;\n  this.env = env;\n  this.md = md;\n  this.tokens = outTokens;\n  this.tokens_meta = Array(outTokens.length);\n\n  this.pos = 0;\n  this.posMax = this.src.length;\n  this.level = 0;\n  this.pending = '';\n  this.pendingLevel = 0;\n\n  // Stores { start: end } pairs. Useful for backtrack\n  // optimization of pairs parse (emphasis, strikes).\n  this.cache = {};\n\n  // List of emphasis-like delimiters for current tag\n  this.delimiters = [];\n\n  // Stack of delimiter lists for upper level tags\n  this._prev_delimiters = [];\n}\n\n\n// Flush pending text\n//\nStateInline.prototype.pushPending = function () {\n  var token = new Token('text', '', 0);\n  token.content = this.pending;\n  token.level = this.pendingLevel;\n  this.tokens.push(token);\n  this.pending = '';\n  return token;\n};\n\n\n// Push new token to \"stream\".\n// If pending text exists - flush it as text token\n//\nStateInline.prototype.push = function (type, tag, nesting) {\n  if (this.pending) {\n    this.pushPending();\n  }\n\n  var token = new Token(type, tag, nesting);\n  var token_meta = null;\n\n  if (nesting < 0) {\n    // closing tag\n    this.level--;\n    this.delimiters = this._prev_delimiters.pop();\n  }\n\n  token.level = this.level;\n\n  if (nesting > 0) {\n    // opening tag\n    this.level++;\n    this._prev_delimiters.push(this.delimiters);\n    this.delimiters = [];\n    token_meta = { delimiters: this.delimiters };\n  }\n\n  this.pendingLevel = this.level;\n  this.tokens.push(token);\n  this.tokens_meta.push(token_meta);\n  return token;\n};\n\n\n// Scan a sequence of emphasis-like markers, and determine whether\n// it can start an emphasis sequence or end an emphasis sequence.\n//\n//  - start - position to scan from (it should point at a valid marker);\n//  - canSplitWord - determine if these markers can be found inside a word\n//\nStateInline.prototype.scanDelims = function (start, canSplitWord) {\n  var pos = start, lastChar, nextChar, count, can_open, can_close,\n      isLastWhiteSpace, isLastPunctChar,\n      isNextWhiteSpace, isNextPunctChar,\n      left_flanking = true,\n      right_flanking = true,\n      max = this.posMax,\n      marker = this.src.charCodeAt(start);\n\n  // treat beginning of the line as a whitespace\n  lastChar = start > 0 ? this.src.charCodeAt(start - 1) : 0x20;\n\n  while (pos < max && this.src.charCodeAt(pos) === marker) { pos++; }\n\n  count = pos - start;\n\n  // treat end of the line as a whitespace\n  nextChar = pos < max ? this.src.charCodeAt(pos) : 0x20;\n\n  isLastPunctChar = isMdAsciiPunct(lastChar) || isPunctChar(String.fromCharCode(lastChar));\n  isNextPunctChar = isMdAsciiPunct(nextChar) || isPunctChar(String.fromCharCode(nextChar));\n\n  isLastWhiteSpace = isWhiteSpace(lastChar);\n  isNextWhiteSpace = isWhiteSpace(nextChar);\n\n  if (isNextWhiteSpace) {\n    left_flanking = false;\n  } else if (isNextPunctChar) {\n    if (!(isLastWhiteSpace || isLastPunctChar)) {\n      left_flanking = false;\n    }\n  }\n\n  if (isLastWhiteSpace) {\n    right_flanking = false;\n  } else if (isLastPunctChar) {\n    if (!(isNextWhiteSpace || isNextPunctChar)) {\n      right_flanking = false;\n    }\n  }\n\n  if (!canSplitWord) {\n    can_open  = left_flanking  && (!right_flanking || isLastPunctChar);\n    can_close = right_flanking && (!left_flanking  || isNextPunctChar);\n  } else {\n    can_open  = left_flanking;\n    can_close = right_flanking;\n  }\n\n  return {\n    can_open:  can_open,\n    can_close: can_close,\n    length:    count\n  };\n};\n\n\n// re-export Token class to use in block rules\nStateInline.prototype.Token = Token;\n\n\nmodule.exports = StateInline;\n","// ~~strike through~~\n//\n'use strict';\n\n\n// Insert each marker as a separate text token, and add it to delimiter list\n//\nmodule.exports.tokenize = function strikethrough(state, silent) {\n  var i, scanned, token, len, ch,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (silent) { return false; }\n\n  if (marker !== 0x7E/* ~ */) { return false; }\n\n  scanned = state.scanDelims(state.pos, true);\n  len = scanned.length;\n  ch = String.fromCharCode(marker);\n\n  if (len < 2) { return false; }\n\n  if (len % 2) {\n    token         = state.push('text', '', 0);\n    token.content = ch;\n    len--;\n  }\n\n  for (i = 0; i < len; i += 2) {\n    token         = state.push('text', '', 0);\n    token.content = ch + ch;\n\n    state.delimiters.push({\n      marker: marker,\n      length: 0, // disable \"rule of 3\" length checks meant for emphasis\n      jump:   i,\n      token:  state.tokens.length - 1,\n      end:    -1,\n      open:   scanned.can_open,\n      close:  scanned.can_close\n    });\n  }\n\n  state.pos += scanned.length;\n\n  return true;\n};\n\n\nfunction postProcess(state, delimiters) {\n  var i, j,\n      startDelim,\n      endDelim,\n      token,\n      loneMarkers = [],\n      max = delimiters.length;\n\n  for (i = 0; i < max; i++) {\n    startDelim = delimiters[i];\n\n    if (startDelim.marker !== 0x7E/* ~ */) {\n      continue;\n    }\n\n    if (startDelim.end === -1) {\n      continue;\n    }\n\n    endDelim = delimiters[startDelim.end];\n\n    token         = state.tokens[startDelim.token];\n    token.type    = 's_open';\n    token.tag     = 's';\n    token.nesting = 1;\n    token.markup  = '~~';\n    token.content = '';\n\n    token         = state.tokens[endDelim.token];\n    token.type    = 's_close';\n    token.tag     = 's';\n    token.nesting = -1;\n    token.markup  = '~~';\n    token.content = '';\n\n    if (state.tokens[endDelim.token - 1].type === 'text' &&\n        state.tokens[endDelim.token - 1].content === '~') {\n\n      loneMarkers.push(endDelim.token - 1);\n    }\n  }\n\n  // If a marker sequence has an odd number of characters, it's splitted\n  // like this: `~~~~~` -> `~` + `~~` + `~~`, leaving one marker at the\n  // start of the sequence.\n  //\n  // So, we have to move all those markers after subsequent s_close tags.\n  //\n  while (loneMarkers.length) {\n    i = loneMarkers.pop();\n    j = i + 1;\n\n    while (j < state.tokens.length && state.tokens[j].type === 's_close') {\n      j++;\n    }\n\n    j--;\n\n    if (i !== j) {\n      token = state.tokens[j];\n      state.tokens[j] = state.tokens[i];\n      state.tokens[i] = token;\n    }\n  }\n}\n\n\n// Walk through delimiter list and replace text tokens with tags\n//\nmodule.exports.postProcess = function strikethrough(state) {\n  var curr,\n      tokens_meta = state.tokens_meta,\n      max = state.tokens_meta.length;\n\n  postProcess(state, state.delimiters);\n\n  for (curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      postProcess(state, tokens_meta[curr].delimiters);\n    }\n  }\n};\n","// Skip text characters for text token, place those to pending buffer\n// and increment current pos\n\n'use strict';\n\n\n// Rule to skip pure text\n// '{}$%@~+=:' reserved for extentions\n\n// !, \", #, $, %, &, ', (, ), *, +, ,, -, ., /, :, ;, <, =, >, ?, @, [, \\, ], ^, _, `, {, |, }, or ~\n\n// !!!! Don't confuse with \"Markdown ASCII Punctuation\" chars\n// http://spec.commonmark.org/0.15/#ascii-punctuation-character\nfunction isTerminatorChar(ch) {\n  switch (ch) {\n    case 0x0A/* \\n */:\n    case 0x21/* ! */:\n    case 0x23/* # */:\n    case 0x24/* $ */:\n    case 0x25/* % */:\n    case 0x26/* & */:\n    case 0x2A/* * */:\n    case 0x2B/* + */:\n    case 0x2D/* - */:\n    case 0x3A/* : */:\n    case 0x3C/* < */:\n    case 0x3D/* = */:\n    case 0x3E/* > */:\n    case 0x40/* @ */:\n    case 0x5B/* [ */:\n    case 0x5C/* \\ */:\n    case 0x5D/* ] */:\n    case 0x5E/* ^ */:\n    case 0x5F/* _ */:\n    case 0x60/* ` */:\n    case 0x7B/* { */:\n    case 0x7D/* } */:\n    case 0x7E/* ~ */:\n      return true;\n    default:\n      return false;\n  }\n}\n\nmodule.exports = function text(state, silent) {\n  var pos = state.pos;\n\n  while (pos < state.posMax && !isTerminatorChar(state.src.charCodeAt(pos))) {\n    pos++;\n  }\n\n  if (pos === state.pos) { return false; }\n\n  if (!silent) { state.pending += state.src.slice(state.pos, pos); }\n\n  state.pos = pos;\n\n  return true;\n};\n\n// Alternative implementation, for memory.\n//\n// It costs 10% of performance, but allows extend terminators list, if place it\n// to `ParcerInline` property. Probably, will switch to it sometime, such\n// flexibility required.\n\n/*\nvar TERMINATOR_RE = /[\\n!#$%&*+\\-:<=>@[\\\\\\]^_`{}~]/;\n\nmodule.exports = function text(state, silent) {\n  var pos = state.pos,\n      idx = state.src.slice(pos).search(TERMINATOR_RE);\n\n  // first char is terminator -> empty text\n  if (idx === 0) { return false; }\n\n  // no terminator -> text till end of string\n  if (idx < 0) {\n    if (!silent) { state.pending += state.src.slice(pos); }\n    state.pos = state.src.length;\n    return true;\n  }\n\n  if (!silent) { state.pending += state.src.slice(pos, pos + idx); }\n\n  state.pos += idx;\n\n  return true;\n};*/\n","// Clean up tokens after emphasis and strikethrough postprocessing:\n// merge adjacent text nodes into one and re-calculate all token levels\n//\n// This is necessary because initially emphasis delimiter markers (*, _, ~)\n// are treated as their own separate text tokens. Then emphasis rule either\n// leaves them as text (needed to merge with adjacent text) or turns them\n// into opening/closing tags (which messes up levels inside).\n//\n'use strict';\n\n\nmodule.exports = function text_collapse(state) {\n  var curr, last,\n      level = 0,\n      tokens = state.tokens,\n      max = state.tokens.length;\n\n  for (curr = last = 0; curr < max; curr++) {\n    // re-calculate levels after emphasis/strikethrough turns some text nodes\n    // into opening/closing tags\n    if (tokens[curr].nesting < 0) level--; // closing tag\n    tokens[curr].level = level;\n    if (tokens[curr].nesting > 0) level++; // opening tag\n\n    if (tokens[curr].type === 'text' &&\n        curr + 1 < max &&\n        tokens[curr + 1].type === 'text') {\n\n      // collapse two adjacent text nodes\n      tokens[curr + 1].content = tokens[curr].content + tokens[curr + 1].content;\n    } else {\n      if (curr !== last) { tokens[last] = tokens[curr]; }\n\n      last++;\n    }\n  }\n\n  if (curr !== last) {\n    tokens.length = last;\n  }\n};\n","// Token class\n\n'use strict';\n\n\n/**\n * class Token\n **/\n\n/**\n * new Token(type, tag, nesting)\n *\n * Create new token and fill passed properties.\n **/\nfunction Token(type, tag, nesting) {\n  /**\n   * Token#type -> String\n   *\n   * Type of the token (string, e.g. \"paragraph_open\")\n   **/\n  this.type     = type;\n\n  /**\n   * Token#tag -> String\n   *\n   * html tag name, e.g. \"p\"\n   **/\n  this.tag      = tag;\n\n  /**\n   * Token#attrs -> Array\n   *\n   * Html attributes. Format: `[ [ name1, value1 ], [ name2, value2 ] ]`\n   **/\n  this.attrs    = null;\n\n  /**\n   * Token#map -> Array\n   *\n   * Source map info. Format: `[ line_begin, line_end ]`\n   **/\n  this.map      = null;\n\n  /**\n   * Token#nesting -> Number\n   *\n   * Level change (number in {-1, 0, 1} set), where:\n   *\n   * -  `1` means the tag is opening\n   * -  `0` means the tag is self-closing\n   * - `-1` means the tag is closing\n   **/\n  this.nesting  = nesting;\n\n  /**\n   * Token#level -> Number\n   *\n   * nesting level, the same as `state.level`\n   **/\n  this.level    = 0;\n\n  /**\n   * Token#children -> Array\n   *\n   * An array of child nodes (inline and img tokens)\n   **/\n  this.children = null;\n\n  /**\n   * Token#content -> String\n   *\n   * In a case of self-closing tag (code, html, fence, etc.),\n   * it has contents of this tag.\n   **/\n  this.content  = '';\n\n  /**\n   * Token#markup -> String\n   *\n   * '*' or '_' for emphasis, fence string for fence, etc.\n   **/\n  this.markup   = '';\n\n  /**\n   * Token#info -> String\n   *\n   * fence infostring\n   **/\n  this.info     = '';\n\n  /**\n   * Token#meta -> Object\n   *\n   * A place for plugins to store an arbitrary data\n   **/\n  this.meta     = null;\n\n  /**\n   * Token#block -> Boolean\n   *\n   * True for block-level tokens, false for inline tokens.\n   * Used in renderer to calculate line breaks\n   **/\n  this.block    = false;\n\n  /**\n   * Token#hidden -> Boolean\n   *\n   * If it's true, ignore this element when rendering. Used for tight lists\n   * to hide paragraphs.\n   **/\n  this.hidden   = false;\n}\n\n\n/**\n * Token.attrIndex(name) -> Number\n *\n * Search attribute index by name.\n **/\nToken.prototype.attrIndex = function attrIndex(name) {\n  var attrs, i, len;\n\n  if (!this.attrs) { return -1; }\n\n  attrs = this.attrs;\n\n  for (i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i][0] === name) { return i; }\n  }\n  return -1;\n};\n\n\n/**\n * Token.attrPush(attrData)\n *\n * Add `[ name, value ]` attribute to list. Init attrs if necessary\n **/\nToken.prototype.attrPush = function attrPush(attrData) {\n  if (this.attrs) {\n    this.attrs.push(attrData);\n  } else {\n    this.attrs = [ attrData ];\n  }\n};\n\n\n/**\n * Token.attrSet(name, value)\n *\n * Set `name` attribute to `value`. Override old value if exists.\n **/\nToken.prototype.attrSet = function attrSet(name, value) {\n  var idx = this.attrIndex(name),\n      attrData = [ name, value ];\n\n  if (idx < 0) {\n    this.attrPush(attrData);\n  } else {\n    this.attrs[idx] = attrData;\n  }\n};\n\n\n/**\n * Token.attrGet(name)\n *\n * Get the value of attribute `name`, or null if it does not exist.\n **/\nToken.prototype.attrGet = function attrGet(name) {\n  var idx = this.attrIndex(name), value = null;\n  if (idx >= 0) {\n    value = this.attrs[idx][1];\n  }\n  return value;\n};\n\n\n/**\n * Token.attrJoin(name, value)\n *\n * Join value to existing attribute via space. Or create new attribute if not\n * exists. Useful to operate with token classes.\n **/\nToken.prototype.attrJoin = function attrJoin(name, value) {\n  var idx = this.attrIndex(name);\n\n  if (idx < 0) {\n    this.attrPush([ name, value ]);\n  } else {\n    this.attrs[idx][1] = this.attrs[idx][1] + ' ' + value;\n  }\n};\n\n\nmodule.exports = Token;\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2020, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.marked = factory());\n}(this, (function () { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it;\n\n    if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n        return function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    it = o[Symbol.iterator]();\n    return it.next.bind(it);\n  }\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  var defaults = createCommonjsModule(function (module) {\n    function getDefaults() {\n      return {\n        baseUrl: null,\n        breaks: false,\n        gfm: true,\n        headerIds: true,\n        headerPrefix: '',\n        highlight: null,\n        langPrefix: 'language-',\n        mangle: true,\n        pedantic: false,\n        renderer: null,\n        sanitize: false,\n        sanitizer: null,\n        silent: false,\n        smartLists: false,\n        smartypants: false,\n        tokenizer: null,\n        walkTokens: null,\n        xhtml: false\n      };\n    }\n\n    function changeDefaults(newDefaults) {\n      module.exports.defaults = newDefaults;\n    }\n\n    module.exports = {\n      defaults: getDefaults(),\n      getDefaults: getDefaults,\n      changeDefaults: changeDefaults\n    };\n  });\n  var defaults_1 = defaults.defaults;\n  var defaults_2 = defaults.getDefaults;\n  var defaults_3 = defaults.changeDefaults;\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  var caret = /(^|[^\\[])\\^/g;\n\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n\n  function repeatString(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  var helpers = {\n    escape: escape,\n    unescape: unescape,\n    edit: edit,\n    cleanUrl: cleanUrl,\n    resolveUrl: resolveUrl,\n    noopTest: noopTest,\n    merge: merge,\n    splitCells: splitCells,\n    rtrim: rtrim,\n    findClosingBracket: findClosingBracket,\n    checkSanitizeDeprecation: checkSanitizeDeprecation,\n    repeatString: repeatString\n  };\n\n  var defaults$1 = defaults.defaults;\n  var rtrim$1 = helpers.rtrim,\n      splitCells$1 = helpers.splitCells,\n      _escape = helpers.escape,\n      findClosingBracket$1 = helpers.findClosingBracket;\n\n  function outputLink(cap, link, raw) {\n    var href = link.href;\n    var title = link.title ? _escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      return {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text\n      };\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        href: href,\n        title: title,\n        text: _escape(text)\n      };\n    }\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer_1 = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || defaults$1;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap) {\n        if (cap[0].length > 1) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n\n        return {\n          raw: '\\n'\n        };\n      }\n    };\n\n    _proto.code = function code(src, tokens) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n        if (lastToken && lastToken.type === 'paragraph') {\n          return {\n            raw: cap[0],\n            text: cap[0].trimRight()\n          };\n        }\n\n        var text = cap[0].replace(/^ {4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim$1(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: cap[2]\n        };\n      }\n    };\n\n    _proto.nptable = function nptable(src) {\n      var cap = this.rules.block.nptable.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n          raw: cap[0]\n        };\n\n        if (item.header.length === item.align.length) {\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var bull = cap[2];\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: raw,\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        }; // Get each top-level item.\n\n        var itemMatch = cap[0].match(this.rules.block.item);\n        var next = false,\n            item,\n            space,\n            bcurr,\n            bnext,\n            addBack,\n            loose,\n            istask,\n            ischecked;\n        var l = itemMatch.length;\n        bcurr = this.rules.block.listItemStart.exec(itemMatch[0]);\n\n        for (var i = 0; i < l; i++) {\n          item = itemMatch[i];\n          raw = item; // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n          if (i !== l - 1) {\n            bnext = this.rules.block.listItemStart.exec(itemMatch[i + 1]);\n\n            if (bnext[1].length > bcurr[0].length || bnext[1].length > 3) {\n              // nested list\n              itemMatch.splice(i, 2, itemMatch[i] + '\\n' + itemMatch[i + 1]);\n              i--;\n              l--;\n              continue;\n            } else {\n              if ( // different bullet style\n              !this.options.pedantic || this.options.smartLists ? bnext[2][bnext[2].length - 1] !== bull[bull.length - 1] : isordered === (bnext[2].length === 1)) {\n                addBack = itemMatch.slice(i + 1).join('\\n');\n                list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n                i = l - 1;\n              }\n            }\n\n            bcurr = bnext;\n          } // Remove the list item's bullet\n          // so it is seen as the next token.\n\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+[.)]) ?/, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            list.loose = true;\n          } // Check for task list items\n\n\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: istask,\n            checked: ischecked,\n            loose: loose,\n            text: item\n          });\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        return {\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        };\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        return {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        };\n      }\n    };\n\n    _proto.text = function text(src, tokens) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1];\n\n        if (lastToken && lastToken.type === 'text') {\n          return {\n            raw: cap[0],\n            text: cap[0]\n          };\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n    };\n\n    _proto.escape = function escape(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: _escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src, inLink, inRawBlock) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!inLink && /^<a /i.test(cap[0])) {\n          inLink = true;\n        } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n          inLink = false;\n        }\n\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = true;\n        } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: inLink,\n          inRawBlock: inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var lastParenIndex = findClosingBracket$1(cap[2], '()');\n\n        if (lastParenIndex > -1) {\n          var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          var linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        var token = outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0]);\n        return token;\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        var token = outputLink(cap, link, cap[0]);\n        return token;\n      }\n    };\n\n    _proto.strong = function strong(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.strong.start.exec(src);\n\n      if (match && (!match[1] || match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n        maskedSrc = maskedSrc.slice(-1 * src.length);\n        var endReg = match[0] === '**' ? this.rules.inline.strong.endAst : this.rules.inline.strong.endUnd;\n        endReg.lastIndex = 0;\n        var cap;\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          cap = this.rules.inline.strong.middle.exec(maskedSrc.slice(0, match.index + 3));\n\n          if (cap) {\n            return {\n              type: 'strong',\n              raw: src.slice(0, cap[0].length),\n              text: src.slice(2, cap[0].length - 2)\n            };\n          }\n        }\n      }\n    };\n\n    _proto.em = function em(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.em.start.exec(src);\n\n      if (match && (!match[1] || match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n        maskedSrc = maskedSrc.slice(-1 * src.length);\n        var endReg = match[0] === '*' ? this.rules.inline.em.endAst : this.rules.inline.em.endUnd;\n        endReg.lastIndex = 0;\n        var cap;\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          cap = this.rules.inline.em.middle.exec(maskedSrc.slice(0, match.index + 2));\n\n          if (cap) {\n            return {\n              type: 'em',\n              raw: src.slice(0, cap[0].length),\n              text: src.slice(1, cap[0].length - 1)\n            };\n          }\n        }\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        var text = cap[2].replace(/\\n/g, ' ');\n        var hasNonSpaceChars = /[^ ]/.test(text);\n        var hasSpaceCharsOnBothEnds = text.startsWith(' ') && text.endsWith(' ');\n\n        if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n          text = text.substring(1, text.length - 1);\n        }\n\n        text = _escape(text, true);\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[2]\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = _escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          var prevCapZero;\n\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = _escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.inlineText = function inlineText(src, inRawBlock, smartypants) {\n      var cap = this.rules.inline.text.exec(src);\n\n      if (cap) {\n        var text;\n\n        if (inRawBlock) {\n          text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0];\n        } else {\n          text = _escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    return Tokenizer;\n  }();\n\n  var noopTest$1 = helpers.noopTest,\n      edit$1 = helpers.edit,\n      merge$1 = helpers.merge;\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^\\n+/,\n    code: /^( {4}[^\\n]+\\n*)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n    hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?! {0,3}bull )\\n*|\\s*$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n    nptable: noopTest$1,\n    table: noopTest$1,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit$1(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\n  block.item = /^( *)(bull) ?[^\\n]*(?:\\n(?! *bull ?)[^\\n]*)*/;\n  block.item = edit$1(block.item, 'gm').replace(/bull/g, block.bullet).getRegex();\n  block.listItemStart = edit$1(/^( *)(bull)/).replace('bull', block.bullet).getRegex();\n  block.list = edit$1(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\n  block.html = edit$1(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit$1(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit$1(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge$1({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge$1({}, block.normal, {\n    nptable: '^ *([^|\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}([-:]+ *\\\\|[-| :]*)' // Align\n    + '(?:\\\\n((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)',\n    // Cells\n    table: '^ *\\\\|(.+)\\\\n' // Header\n    + ' {0,3}\\\\|?( *[-:]+[-| :]*)' // Align\n    + '(?:\\\\n *((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n\n  });\n  block.gfm.nptable = edit$1(block.gfm.nptable).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)').replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  block.gfm.table = edit$1(block.gfm.table).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)').replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block.pedantic = merge$1({}, block.normal, {\n    html: edit$1('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n    fences: noopTest$1,\n    // fences not supported\n    paragraph: edit$1(block.normal._paragraph).replace('hr', block.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest$1,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n    nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    strong: {\n      start: /^(?:(\\*\\*(?=[*punctuation]))|\\*\\*)(?![\\s])|__/,\n      // (1) returns if starts w/ punctuation\n      middle: /^\\*\\*(?:(?:(?!overlapSkip)(?:[^*]|\\\\\\*)|overlapSkip)|\\*(?:(?!overlapSkip)(?:[^*]|\\\\\\*)|overlapSkip)*?\\*)+?\\*\\*$|^__(?![\\s])((?:(?:(?!overlapSkip)(?:[^_]|\\\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\\\_)|overlapSkip)*?_)+?)__$/,\n      endAst: /[^punctuation\\s]\\*\\*(?!\\*)|[punctuation]\\*\\*(?!\\*)(?:(?=[punctuation_\\s]|$))/,\n      // last char can't be punct, or final * must also be followed by punct (or endline)\n      endUnd: /[^\\s]__(?!_)(?:(?=[punctuation*\\s])|$)/ // last char can't be a space, and final _ must preceed punct or \\s (or endline)\n\n    },\n    em: {\n      start: /^(?:(\\*(?=[punctuation]))|\\*)(?![*\\s])|_/,\n      // (1) returns if starts w/ punctuation\n      middle: /^\\*(?:(?:(?!overlapSkip)(?:[^*]|\\\\\\*)|overlapSkip)|\\*(?:(?!overlapSkip)(?:[^*]|\\\\\\*)|overlapSkip)*?\\*)+?\\*$|^_(?![_\\s])(?:(?:(?!overlapSkip)(?:[^_]|\\\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\\\_)|overlapSkip)*?_)+?_$/,\n      endAst: /[^punctuation\\s]\\*(?!\\*)|[punctuation]\\*(?!\\*)(?:(?=[punctuation_\\s]|$))/,\n      // last char can't be punct, or final * must also be followed by punct (or endline)\n      endUnd: /[^\\s]_(?!_)(?:(?=[punctuation*\\s])|$)/ // last char can't be a space, and final _ must preceed punct or \\s (or endline)\n\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest$1,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^([\\s*punctuation])/\n  }; // list of punctuation marks from common mark spec\n  // without * and _ to workaround cases with double emphasis\n\n  inline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\n  inline.punctuation = edit$1(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex(); // sequences em should skip over [title](link), `code`, <html>\n\n  inline._blockSkip = '\\\\[[^\\\\]]*?\\\\]\\\\([^\\\\)]*?\\\\)|`[^`]*?`|<[^>]*?>';\n  inline._overlapSkip = '__[^_]*?__|\\\\*\\\\*\\\\[^\\\\*\\\\]*?\\\\*\\\\*';\n  inline._comment = edit$1(block._comment).replace('(?:-->|$)', '-->').getRegex();\n  inline.em.start = edit$1(inline.em.start).replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.em.middle = edit$1(inline.em.middle).replace(/punctuation/g, inline._punctuation).replace(/overlapSkip/g, inline._overlapSkip).getRegex();\n  inline.em.endAst = edit$1(inline.em.endAst, 'g').replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.em.endUnd = edit$1(inline.em.endUnd, 'g').replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.strong.start = edit$1(inline.strong.start).replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.strong.middle = edit$1(inline.strong.middle).replace(/punctuation/g, inline._punctuation).replace(/overlapSkip/g, inline._overlapSkip).getRegex();\n  inline.strong.endAst = edit$1(inline.strong.endAst, 'g').replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.strong.endUnd = edit$1(inline.strong.endUnd, 'g').replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.blockSkip = edit$1(inline._blockSkip, 'g').getRegex();\n  inline.overlapSkip = edit$1(inline._overlapSkip, 'g').getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit$1(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit$1(inline.tag).replace('comment', inline._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline._href = /<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit$1(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit$1(inline.reflink).replace('label', inline._label).getRegex();\n  inline.reflinkSearch = edit$1(inline.reflinkSearch, 'g').replace('reflink', inline.reflink).replace('nolink', inline.nolink).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge$1({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge$1({}, inline.normal, {\n    strong: {\n      start: /^__|\\*\\*/,\n      middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n      endAst: /\\*\\*(?!\\*)/g,\n      endUnd: /__(?!_)/g\n    },\n    em: {\n      start: /^_|\\*/,\n      middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n      endAst: /\\*(?!\\*)/g,\n      endUnd: /_(?!_)/g\n    },\n    link: edit$1(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit$1(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge$1({}, inline.normal, {\n    escape: edit$1(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n  });\n  inline.gfm.url = edit$1(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge$1({}, inline.gfm, {\n    br: edit$1(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit$1(inline.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n  var rules = {\n    block: block,\n    inline: inline\n  };\n\n  var defaults$2 = defaults.defaults;\n  var block$1 = rules.block,\n      inline$1 = rules.inline;\n  var repeatString$1 = helpers.repeatString;\n  /**\n   * smartypants text replacement\n   */\n\n  function smartypants(text) {\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  }\n  /**\n   * mangle email addresses\n   */\n\n\n  function mangle(text) {\n    var out = '',\n        i,\n        ch;\n    var l = text.length;\n\n    for (i = 0; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n  /**\n   * Block Lexer\n   */\n\n\n  var Lexer_1 = /*#__PURE__*/function () {\n    function Lexer(options) {\n      this.tokens = [];\n      this.tokens.links = Object.create(null);\n      this.options = options || defaults$2;\n      this.options.tokenizer = this.options.tokenizer || new Tokenizer_1();\n      this.tokenizer = this.options.tokenizer;\n      this.tokenizer.options = this.options;\n      var rules = {\n        block: block$1.normal,\n        inline: inline$1.normal\n      };\n\n      if (this.options.pedantic) {\n        rules.block = block$1.pedantic;\n        rules.inline = inline$1.pedantic;\n      } else if (this.options.gfm) {\n        rules.block = block$1.gfm;\n\n        if (this.options.breaks) {\n          rules.inline = inline$1.breaks;\n        } else {\n          rules.inline = inline$1.gfm;\n        }\n      }\n\n      this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n\n\n    /**\n     * Static Lex Method\n     */\n    Lexer.lex = function lex(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    ;\n\n    Lexer.lexInline = function lexInline(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    ;\n\n    var _proto = Lexer.prototype;\n\n    _proto.lex = function lex(src) {\n      src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ');\n      this.blockTokens(src, this.tokens, true);\n      this.inline(this.tokens);\n      return this.tokens;\n    }\n    /**\n     * Lexing\n     */\n    ;\n\n    _proto.blockTokens = function blockTokens(src, tokens, top) {\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (top === void 0) {\n        top = true;\n      }\n\n      src = src.replace(/^ +$/gm, '');\n      var token, i, l, lastToken;\n\n      while (src) {\n        // newline\n        if (token = this.tokenizer.space(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type) {\n            tokens.push(token);\n          }\n\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.code(src, tokens)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type) {\n            tokens.push(token);\n          } else {\n            lastToken = tokens[tokens.length - 1];\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          }\n\n          continue;\n        } // fences\n\n\n        if (token = this.tokenizer.fences(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // heading\n\n\n        if (token = this.tokenizer.heading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // table no leading pipe (gfm)\n\n\n        if (token = this.tokenizer.nptable(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // hr\n\n\n        if (token = this.tokenizer.hr(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // blockquote\n\n\n        if (token = this.tokenizer.blockquote(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.blockTokens(token.text, [], top);\n          tokens.push(token);\n          continue;\n        } // list\n\n\n        if (token = this.tokenizer.list(src)) {\n          src = src.substring(token.raw.length);\n          l = token.items.length;\n\n          for (i = 0; i < l; i++) {\n            token.items[i].tokens = this.blockTokens(token.items[i].text, [], false);\n          }\n\n          tokens.push(token);\n          continue;\n        } // html\n\n\n        if (token = this.tokenizer.html(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // def\n\n\n        if (top && (token = this.tokenizer.def(src))) {\n          src = src.substring(token.raw.length);\n\n          if (!this.tokens.links[token.tag]) {\n            this.tokens.links[token.tag] = {\n              href: token.href,\n              title: token.title\n            };\n          }\n\n          continue;\n        } // table (gfm)\n\n\n        if (token = this.tokenizer.table(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // lheading\n\n\n        if (token = this.tokenizer.lheading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // top-level paragraph\n\n\n        if (top && (token = this.tokenizer.paragraph(src))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.text(src, tokens)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type) {\n            tokens.push(token);\n          } else {\n            lastToken = tokens[tokens.length - 1];\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _proto.inline = function inline(tokens) {\n      var i, j, k, l2, row, token;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'paragraph':\n          case 'text':\n          case 'heading':\n            {\n              token.tokens = [];\n              this.inlineTokens(token.text, token.tokens);\n              break;\n            }\n\n          case 'table':\n            {\n              token.tokens = {\n                header: [],\n                cells: []\n              }; // header\n\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                token.tokens.header[j] = [];\n                this.inlineTokens(token.header[j], token.tokens.header[j]);\n              } // cells\n\n\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.cells[j];\n                token.tokens.cells[j] = [];\n\n                for (k = 0; k < row.length; k++) {\n                  token.tokens.cells[j][k] = [];\n                  this.inlineTokens(row[k], token.tokens.cells[j][k]);\n                }\n              }\n\n              break;\n            }\n\n          case 'blockquote':\n            {\n              this.inline(token.tokens);\n              break;\n            }\n\n          case 'list':\n            {\n              l2 = token.items.length;\n\n              for (j = 0; j < l2; j++) {\n                this.inline(token.items[j].tokens);\n              }\n\n              break;\n            }\n        }\n      }\n\n      return tokens;\n    }\n    /**\n     * Lexing/Compiling\n     */\n    ;\n\n    _proto.inlineTokens = function inlineTokens(src, tokens, inLink, inRawBlock, prevChar) {\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (inLink === void 0) {\n        inLink = false;\n      }\n\n      if (inRawBlock === void 0) {\n        inRawBlock = false;\n      }\n\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var token; // String with links masked to avoid interference with em and strong\n\n      var maskedSrc = src;\n      var match; // Mask out reflinks\n\n      if (this.tokens.links) {\n        var links = Object.keys(this.tokens.links);\n\n        if (links.length > 0) {\n          while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n            if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n              maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString$1('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n            }\n          }\n        }\n      } // Mask out other blocks\n\n\n      while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString$1('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n      }\n\n      while (src) {\n        // escape\n        if (token = this.tokenizer.escape(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // tag\n\n\n        if (token = this.tokenizer.tag(src, inLink, inRawBlock)) {\n          src = src.substring(token.raw.length);\n          inLink = token.inLink;\n          inRawBlock = token.inRawBlock;\n          tokens.push(token);\n          continue;\n        } // link\n\n\n        if (token = this.tokenizer.link(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type === 'link') {\n            token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n          }\n\n          tokens.push(token);\n          continue;\n        } // reflink, nolink\n\n\n        if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type === 'link') {\n            token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n          }\n\n          tokens.push(token);\n          continue;\n        } // strong\n\n\n        if (token = this.tokenizer.strong(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // em\n\n\n        if (token = this.tokenizer.em(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.codespan(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.inlineText(src, inRawBlock, smartypants)) {\n          src = src.substring(token.raw.length);\n          prevChar = token.raw.slice(-1);\n          tokens.push(token);\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block$1,\n          inline: inline$1\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  var defaults$3 = defaults.defaults;\n  var cleanUrl$1 = helpers.cleanUrl,\n      escape$1 = helpers.escape;\n  /**\n   * Renderer\n   */\n\n  var Renderer_1 = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || defaults$3;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape$1(lang, true) + '\">' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n    };\n\n    _proto.blockquote = function blockquote(quote) {\n      return '<blockquote>\\n' + quote + '</blockquote>\\n';\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    };\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n      } // ignore IDs\n\n\n      return '<h' + level + '>' + text + '</h' + level + '>\\n';\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    };\n\n    _proto.listitem = function listitem(text) {\n      return '<li>' + text + '</li>\\n';\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    };\n\n    _proto.paragraph = function paragraph(text) {\n      return '<p>' + text + '</p>\\n';\n    };\n\n    _proto.table = function table(header, body) {\n      if (body) body = '<tbody>' + body + '</tbody>';\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    };\n\n    _proto.tablerow = function tablerow(content) {\n      return '<tr>\\n' + content + '</tr>\\n';\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n      return tag + content + '</' + type + '>\\n';\n    } // span level renderer\n    ;\n\n    _proto.strong = function strong(text) {\n      return '<strong>' + text + '</strong>';\n    };\n\n    _proto.em = function em(text) {\n      return '<em>' + text + '</em>';\n    };\n\n    _proto.codespan = function codespan(text) {\n      return '<code>' + text + '</code>';\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    };\n\n    _proto.del = function del(text) {\n      return '<del>' + text + '</del>';\n    };\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape$1(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    };\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n  var TextRenderer_1 = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype;\n\n    // no need for block level renderers\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n\n  /**\n   * Slugger generates header id\n   */\n  var Slugger_1 = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n\n    var _proto = Slugger.prototype;\n\n    _proto.serialize = function serialize(value) {\n      return value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n    }\n    /**\n     * Finds the next safe (unique) slug to use\n     */\n    ;\n\n    _proto.getNextSafeSlug = function getNextSafeSlug(originalSlug, isDryRun) {\n      var slug = originalSlug;\n      var occurenceAccumulator = 0;\n\n      if (this.seen.hasOwnProperty(slug)) {\n        occurenceAccumulator = this.seen[originalSlug];\n\n        do {\n          occurenceAccumulator++;\n          slug = originalSlug + '-' + occurenceAccumulator;\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      if (!isDryRun) {\n        this.seen[originalSlug] = occurenceAccumulator;\n        this.seen[slug] = 0;\n      }\n\n      return slug;\n    }\n    /**\n     * Convert string to unique id\n     * @param {object} options\n     * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\n     */\n    ;\n\n    _proto.slug = function slug(value, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var slug = this.serialize(value);\n      return this.getNextSafeSlug(slug, options.dryrun);\n    };\n\n    return Slugger;\n  }();\n\n  var defaults$4 = defaults.defaults;\n  var unescape$1 = helpers.unescape;\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser_1 = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || defaults$4;\n      this.options.renderer = this.options.renderer || new Renderer_1();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer_1();\n      this.slugger = new Slugger_1();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    ;\n\n    Parser.parseInline = function parseInline(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape$1(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.tokens.header[j]), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.tokens.cells[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k]), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens.length > 0 && item.tokens[0].type === 'text') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  var merge$2 = helpers.merge,\n      checkSanitizeDeprecation$1 = helpers.checkSanitizeDeprecation,\n      escape$2 = helpers.escape;\n  var getDefaults = defaults.getDefaults,\n      changeDefaults = defaults.changeDefaults,\n      defaults$5 = defaults.defaults;\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer_1.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            out = Parser_1.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer_1.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser_1.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge$2(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = defaults$5;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function (extension) {\n    var opts = merge$2({}, extension);\n\n    if (extension.renderer) {\n      (function () {\n        var renderer = marked.defaults.renderer || new Renderer_1();\n\n        var _loop = function _loop(prop) {\n          var prevRenderer = renderer[prop];\n\n          renderer[prop] = function () {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            var ret = extension.renderer[prop].apply(renderer, args);\n\n            if (ret === false) {\n              ret = prevRenderer.apply(renderer, args);\n            }\n\n            return ret;\n          };\n        };\n\n        for (var prop in extension.renderer) {\n          _loop(prop);\n        }\n\n        opts.renderer = renderer;\n      })();\n    }\n\n    if (extension.tokenizer) {\n      (function () {\n        var tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\n\n        var _loop2 = function _loop2(prop) {\n          var prevTokenizer = tokenizer[prop];\n\n          tokenizer[prop] = function () {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n\n            var ret = extension.tokenizer[prop].apply(tokenizer, args);\n\n            if (ret === false) {\n              ret = prevTokenizer.apply(tokenizer, args);\n            }\n\n            return ret;\n          };\n        };\n\n        for (var prop in extension.tokenizer) {\n          _loop2(prop);\n        }\n\n        opts.tokenizer = tokenizer;\n      })();\n    }\n\n    if (extension.walkTokens) {\n      var walkTokens = marked.defaults.walkTokens;\n\n      opts.walkTokens = function (token) {\n        extension.walkTokens(token);\n\n        if (walkTokens) {\n          walkTokens(token);\n        }\n      };\n    }\n\n    marked.setOptions(opts);\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      var token = _step.value;\n      callback(token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.tokens.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.tokens.cells), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    }\n  };\n  /**\n   * Parse Inline\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n\n    try {\n      var tokens = Lexer_1.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser_1.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser_1;\n  marked.parser = Parser_1.parse;\n  marked.Renderer = Renderer_1;\n  marked.TextRenderer = TextRenderer_1;\n  marked.Lexer = Lexer_1;\n  marked.lexer = Lexer_1.lex;\n  marked.Tokenizer = Tokenizer_1;\n  marked.Slugger = Slugger_1;\n  marked.parse = marked;\n  var marked_1 = marked;\n\n  return marked_1;\n\n})));\n","\n'use strict';\n\n\n/* eslint-disable no-bitwise */\n\nvar decodeCache = {};\n\nfunction getDecodeCache(exclude) {\n  var i, ch, cache = decodeCache[exclude];\n  if (cache) { return cache; }\n\n  cache = decodeCache[exclude] = [];\n\n  for (i = 0; i < 128; i++) {\n    ch = String.fromCharCode(i);\n    cache.push(ch);\n  }\n\n  for (i = 0; i < exclude.length; i++) {\n    ch = exclude.charCodeAt(i);\n    cache[ch] = '%' + ('0' + ch.toString(16).toUpperCase()).slice(-2);\n  }\n\n  return cache;\n}\n\n\n// Decode percent-encoded string.\n//\nfunction decode(string, exclude) {\n  var cache;\n\n  if (typeof exclude !== 'string') {\n    exclude = decode.defaultChars;\n  }\n\n  cache = getDecodeCache(exclude);\n\n  return string.replace(/(%[a-f0-9]{2})+/gi, function(seq) {\n    var i, l, b1, b2, b3, b4, chr,\n        result = '';\n\n    for (i = 0, l = seq.length; i < l; i += 3) {\n      b1 = parseInt(seq.slice(i + 1, i + 3), 16);\n\n      if (b1 < 0x80) {\n        result += cache[b1];\n        continue;\n      }\n\n      if ((b1 & 0xE0) === 0xC0 && (i + 3 < l)) {\n        // 110xxxxx 10xxxxxx\n        b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n\n        if ((b2 & 0xC0) === 0x80) {\n          chr = ((b1 << 6) & 0x7C0) | (b2 & 0x3F);\n\n          if (chr < 0x80) {\n            result += '\\ufffd\\ufffd';\n          } else {\n            result += String.fromCharCode(chr);\n          }\n\n          i += 3;\n          continue;\n        }\n      }\n\n      if ((b1 & 0xF0) === 0xE0 && (i + 6 < l)) {\n        // 1110xxxx 10xxxxxx 10xxxxxx\n        b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n        b3 = parseInt(seq.slice(i + 7, i + 9), 16);\n\n        if ((b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n          chr = ((b1 << 12) & 0xF000) | ((b2 << 6) & 0xFC0) | (b3 & 0x3F);\n\n          if (chr < 0x800 || (chr >= 0xD800 && chr <= 0xDFFF)) {\n            result += '\\ufffd\\ufffd\\ufffd';\n          } else {\n            result += String.fromCharCode(chr);\n          }\n\n          i += 6;\n          continue;\n        }\n      }\n\n      if ((b1 & 0xF8) === 0xF0 && (i + 9 < l)) {\n        // 111110xx 10xxxxxx 10xxxxxx 10xxxxxx\n        b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n        b3 = parseInt(seq.slice(i + 7, i + 9), 16);\n        b4 = parseInt(seq.slice(i + 10, i + 12), 16);\n\n        if ((b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80 && (b4 & 0xC0) === 0x80) {\n          chr = ((b1 << 18) & 0x1C0000) | ((b2 << 12) & 0x3F000) | ((b3 << 6) & 0xFC0) | (b4 & 0x3F);\n\n          if (chr < 0x10000 || chr > 0x10FFFF) {\n            result += '\\ufffd\\ufffd\\ufffd\\ufffd';\n          } else {\n            chr -= 0x10000;\n            result += String.fromCharCode(0xD800 + (chr >> 10), 0xDC00 + (chr & 0x3FF));\n          }\n\n          i += 9;\n          continue;\n        }\n      }\n\n      result += '\\ufffd';\n    }\n\n    return result;\n  });\n}\n\n\ndecode.defaultChars   = ';/?:@&=+$,#';\ndecode.componentChars = '';\n\n\nmodule.exports = decode;\n","\n'use strict';\n\n\nvar encodeCache = {};\n\n\n// Create a lookup array where anything but characters in `chars` string\n// and alphanumeric chars is percent-encoded.\n//\nfunction getEncodeCache(exclude) {\n  var i, ch, cache = encodeCache[exclude];\n  if (cache) { return cache; }\n\n  cache = encodeCache[exclude] = [];\n\n  for (i = 0; i < 128; i++) {\n    ch = String.fromCharCode(i);\n\n    if (/^[0-9a-z]$/i.test(ch)) {\n      // always allow unencoded alphanumeric characters\n      cache.push(ch);\n    } else {\n      cache.push('%' + ('0' + i.toString(16).toUpperCase()).slice(-2));\n    }\n  }\n\n  for (i = 0; i < exclude.length; i++) {\n    cache[exclude.charCodeAt(i)] = exclude[i];\n  }\n\n  return cache;\n}\n\n\n// Encode unsafe characters with percent-encoding, skipping already\n// encoded sequences.\n//\n//  - string       - string to encode\n//  - exclude      - list of characters to ignore (in addition to a-zA-Z0-9)\n//  - keepEscaped  - don't encode '%' in a correct escape sequence (default: true)\n//\nfunction encode(string, exclude, keepEscaped) {\n  var i, l, code, nextCode, cache,\n      result = '';\n\n  if (typeof exclude !== 'string') {\n    // encode(string, keepEscaped)\n    keepEscaped  = exclude;\n    exclude = encode.defaultChars;\n  }\n\n  if (typeof keepEscaped === 'undefined') {\n    keepEscaped = true;\n  }\n\n  cache = getEncodeCache(exclude);\n\n  for (i = 0, l = string.length; i < l; i++) {\n    code = string.charCodeAt(i);\n\n    if (keepEscaped && code === 0x25 /* % */ && i + 2 < l) {\n      if (/^[0-9a-f]{2}$/i.test(string.slice(i + 1, i + 3))) {\n        result += string.slice(i, i + 3);\n        i += 2;\n        continue;\n      }\n    }\n\n    if (code < 128) {\n      result += cache[code];\n      continue;\n    }\n\n    if (code >= 0xD800 && code <= 0xDFFF) {\n      if (code >= 0xD800 && code <= 0xDBFF && i + 1 < l) {\n        nextCode = string.charCodeAt(i + 1);\n        if (nextCode >= 0xDC00 && nextCode <= 0xDFFF) {\n          result += encodeURIComponent(string[i] + string[i + 1]);\n          i++;\n          continue;\n        }\n      }\n      result += '%EF%BF%BD';\n      continue;\n    }\n\n    result += encodeURIComponent(string[i]);\n  }\n\n  return result;\n}\n\nencode.defaultChars   = \";/?:@&=+$,-_.!~*'()#\";\nencode.componentChars = \"-_.!~*'()\";\n\n\nmodule.exports = encode;\n","\n'use strict';\n\n\nmodule.exports = function format(url) {\n  var result = '';\n\n  result += url.protocol || '';\n  result += url.slashes ? '//' : '';\n  result += url.auth ? url.auth + '@' : '';\n\n  if (url.hostname && url.hostname.indexOf(':') !== -1) {\n    // ipv6 address\n    result += '[' + url.hostname + ']';\n  } else {\n    result += url.hostname || '';\n  }\n\n  result += url.port ? ':' + url.port : '';\n  result += url.pathname || '';\n  result += url.search || '';\n  result += url.hash || '';\n\n  return result;\n};\n","'use strict';\n\n\nmodule.exports.encode = require('./encode');\nmodule.exports.decode = require('./decode');\nmodule.exports.format = require('./format');\nmodule.exports.parse  = require('./parse');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n//\n// Changes from joyent/node:\n//\n// 1. No leading slash in paths,\n//    e.g. in `url.parse('http://foo?bar')` pathname is ``, not `/`\n//\n// 2. Backslashes are not replaced with slashes,\n//    so `http:\\\\example.org\\` is treated like a relative path\n//\n// 3. Trailing colon is treated like a part of the path,\n//    i.e. in `http://example.org:foo` pathname is `:foo`\n//\n// 4. Nothing is URL-encoded in the resulting object,\n//    (in joyent/node some chars in auth and paths are encoded)\n//\n// 5. `url.parse()` does not have `parseQueryString` argument\n//\n// 6. Removed extraneous result properties: `host`, `path`, `query`, etc.,\n//    which can be constructed using other parts of the url.\n//\n\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.pathname = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = [ '<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t' ],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = [ '{', '}', '|', '\\\\', '^', '`' ].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = [ '\\'' ].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = [ '%', '/', '?', ';', '#' ].concat(autoEscape),\n    hostEndingChars = [ '/', '?', '#' ],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    /* eslint-disable no-script-url */\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    };\n    /* eslint-enable no-script-url */\n\nfunction urlParse(url, slashesDenoteHost) {\n  if (url && url instanceof Url) { return url; }\n\n  var u = new Url();\n  u.parse(url, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, slashesDenoteHost) {\n  var i, l, lowerProto, hec, slashes,\n      rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    lowerProto = proto.toLowerCase();\n    this.protocol = proto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (i = 0; i < hostEndingChars.length; i++) {\n      hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) {\n        hostEnd = hec;\n      }\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = auth;\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (i = 0; i < nonHostChars.length; i++) {\n      hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) {\n        hostEnd = hec;\n      }\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1) {\n      hostEnd = rest.length;\n    }\n\n    if (rest[hostEnd - 1] === ':') { hostEnd--; }\n    var host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost(host);\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) { continue; }\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    }\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n    }\n  }\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    rest = rest.slice(0, qm);\n  }\n  if (rest) { this.pathname = rest; }\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '';\n  }\n\n  return this;\n};\n\nUrl.prototype.parseHost = function(host) {\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) { this.hostname = host; }\n};\n\nmodule.exports = urlParse;\n","'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tconst parts = string.split('@');\n\tlet result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tconst labels = string.split('.');\n\tconst encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter < length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = array => String.fromCodePoint(...array);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tlet oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tlet inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tlet basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue == n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.1.0',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nexport { ucs2decode, ucs2encode, decode, encode, toASCII, toUnicode };\nexport default punycode;\n","/* globals chrome: false */\n/* globals __dirname: false */\n/* globals require: false */\n/* globals Buffer: false */\n/* globals module: false */\n\n/**\n * Typo is a JavaScript implementation of a spellchecker using hunspell-style \n * dictionaries.\n */\n\nvar Typo;\n\n(function () {\n\"use strict\";\n\n/**\n * Typo constructor.\n *\n * @param {String} [dictionary] The locale code of the dictionary being used. e.g.,\n *                              \"en_US\". This is only used to auto-load dictionaries.\n * @param {String} [affData]    The data from the dictionary's .aff file. If omitted\n *                              and Typo.js is being used in a Chrome extension, the .aff\n *                              file will be loaded automatically from\n *                              lib/typo/dictionaries/[dictionary]/[dictionary].aff\n *                              In other environments, it will be loaded from\n *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].aff\n * @param {String} [wordsData]  The data from the dictionary's .dic file. If omitted\n *                              and Typo.js is being used in a Chrome extension, the .dic\n *                              file will be loaded automatically from\n *                              lib/typo/dictionaries/[dictionary]/[dictionary].dic\n *                              In other environments, it will be loaded from\n *                              [settings.dictionaryPath]/dictionaries/[dictionary]/[dictionary].dic\n * @param {Object} [settings]   Constructor settings. Available properties are:\n *                              {String} [dictionaryPath]: path to load dictionary from in non-chrome\n *                              environment.\n *                              {Object} [flags]: flag information.\n *                              {Boolean} [asyncLoad]: If true, affData and wordsData will be loaded\n *                              asynchronously.\n *                              {Function} [loadedCallback]: Called when both affData and wordsData\n *                              have been loaded. Only used if asyncLoad is set to true. The parameter\n *                              is the instantiated Typo object.\n *\n * @returns {Typo} A Typo object.\n */\n\nTypo = function (dictionary, affData, wordsData, settings) {\n\tsettings = settings || {};\n\n\tthis.dictionary = null;\n\t\n\tthis.rules = {};\n\tthis.dictionaryTable = {};\n\t\n\tthis.compoundRules = [];\n\tthis.compoundRuleCodes = {};\n\t\n\tthis.replacementTable = [];\n\t\n\tthis.flags = settings.flags || {}; \n\t\n\tthis.memoized = {};\n\n\tthis.loaded = false;\n\t\n\tvar self = this;\n\t\n\tvar path;\n\t\n\t// Loop-control variables.\n\tvar i, j, _len, _jlen;\n\t\n\tif (dictionary) {\n\t\tself.dictionary = dictionary;\n\t\t\n\t\t// If the data is preloaded, just setup the Typo object.\n\t\tif (affData && wordsData) {\n\t\t\tsetup();\n\t\t}\n\t\t// Loading data for Chrome extentions.\n\t\telse if (typeof window !== 'undefined' && 'chrome' in window && 'extension' in window.chrome && 'getURL' in window.chrome.extension) {\n\t\t\tif (settings.dictionaryPath) {\n\t\t\t\tpath = settings.dictionaryPath;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpath = \"typo/dictionaries\";\n\t\t\t}\n\t\t\t\n\t\t\tif (!affData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\"), setAffData);\n\t\t\tif (!wordsData) readDataFile(chrome.extension.getURL(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\"), setWordsData);\n\t\t}\n\t\telse {\n\t\t\tif (settings.dictionaryPath) {\n\t\t\t\tpath = settings.dictionaryPath;\n\t\t\t}\n\t\t\telse if (typeof __dirname !== 'undefined') {\n\t\t\t\tpath = __dirname + '/dictionaries';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpath = './dictionaries';\n\t\t\t}\n\t\t\t\n\t\t\tif (!affData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".aff\", setAffData);\n\t\t\tif (!wordsData) readDataFile(path + \"/\" + dictionary + \"/\" + dictionary + \".dic\", setWordsData);\n\t\t}\n\t}\n\t\n\tfunction readDataFile(url, setFunc) {\n\t\tvar response = self._readFile(url, null, settings.asyncLoad);\n\t\t\n\t\tif (settings.asyncLoad) {\n\t\t\tresponse.then(function(data) {\n\t\t\t\tsetFunc(data);\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tsetFunc(response);\n\t\t}\n\t}\n\n\tfunction setAffData(data) {\n\t\taffData = data;\n\n\t\tif (wordsData) {\n\t\t\tsetup();\n\t\t}\n\t}\n\n\tfunction setWordsData(data) {\n\t\twordsData = data;\n\n\t\tif (affData) {\n\t\t\tsetup();\n\t\t}\n\t}\n\n\tfunction setup() {\n\t\tself.rules = self._parseAFF(affData);\n\t\t\n\t\t// Save the rule codes that are used in compound rules.\n\t\tself.compoundRuleCodes = {};\n\t\t\n\t\tfor (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n\t\t\tvar rule = self.compoundRules[i];\n\t\t\t\n\t\t\tfor (j = 0, _jlen = rule.length; j < _jlen; j++) {\n\t\t\t\tself.compoundRuleCodes[rule[j]] = [];\n\t\t\t}\n\t\t}\n\t\t\n\t\t// If we add this ONLYINCOMPOUND flag to self.compoundRuleCodes, then _parseDIC\n\t\t// will do the work of saving the list of words that are compound-only.\n\t\tif (\"ONLYINCOMPOUND\" in self.flags) {\n\t\t\tself.compoundRuleCodes[self.flags.ONLYINCOMPOUND] = [];\n\t\t}\n\t\t\n\t\tself.dictionaryTable = self._parseDIC(wordsData);\n\t\t\n\t\t// Get rid of any codes from the compound rule codes that are never used \n\t\t// (or that were special regex characters).  Not especially necessary... \n\t\tfor (i in self.compoundRuleCodes) {\n\t\t\tif (self.compoundRuleCodes[i].length === 0) {\n\t\t\t\tdelete self.compoundRuleCodes[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Build the full regular expressions for each compound rule.\n\t\t// I have a feeling (but no confirmation yet) that this method of \n\t\t// testing for compound words is probably slow.\n\t\tfor (i = 0, _len = self.compoundRules.length; i < _len; i++) {\n\t\t\tvar ruleText = self.compoundRules[i];\n\t\t\t\n\t\t\tvar expressionText = \"\";\n\t\t\t\n\t\t\tfor (j = 0, _jlen = ruleText.length; j < _jlen; j++) {\n\t\t\t\tvar character = ruleText[j];\n\t\t\t\t\n\t\t\t\tif (character in self.compoundRuleCodes) {\n\t\t\t\t\texpressionText += \"(\" + self.compoundRuleCodes[character].join(\"|\") + \")\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\texpressionText += character;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.compoundRules[i] = new RegExp(expressionText, \"i\");\n\t\t}\n\t\t\n\t\tself.loaded = true;\n\t\t\n\t\tif (settings.asyncLoad && settings.loadedCallback) {\n\t\t\tsettings.loadedCallback(self);\n\t\t}\n\t}\n\t\n\treturn this;\n};\n\nTypo.prototype = {\n\t/**\n\t * Loads a Typo instance from a hash of all of the Typo properties.\n\t *\n\t * @param object obj A hash of Typo properties, probably gotten from a JSON.parse(JSON.stringify(typo_instance)).\n\t */\n\t\n\tload : function (obj) {\n\t\tfor (var i in obj) {\n\t\t\tif (obj.hasOwnProperty(i)) {\n\t\t\t\tthis[i] = obj[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t * Read the contents of a file.\n\t * \n\t * @param {String} path The path (relative) to the file.\n\t * @param {String} [charset=\"ISO8859-1\"] The expected charset of the file\n\t * @param {Boolean} async If true, the file will be read asynchronously. For node.js this does nothing, all\n\t *        files are read synchronously.\n\t * @returns {String} The file data if async is false, otherwise a promise object. If running node.js, the data is\n\t *          always returned.\n\t */\n\t\n\t_readFile : function (path, charset, async) {\n\t\tcharset = charset || \"utf8\";\n\t\t\n\t\tif (typeof XMLHttpRequest !== 'undefined') {\n\t\t\tvar promise;\n\t\t\tvar req = new XMLHttpRequest();\n\t\t\treq.open(\"GET\", path, async);\n\t\t\t\n\t\t\tif (async) {\n\t\t\t\tpromise = new Promise(function(resolve, reject) {\n\t\t\t\t\treq.onload = function() {\n\t\t\t\t\t\tif (req.status === 200) {\n\t\t\t\t\t\t\tresolve(req.responseText);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treject(req.statusText);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\treq.onerror = function() {\n\t\t\t\t\t\treject(req.statusText);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\n\t\t\tif (req.overrideMimeType)\n\t\t\t\treq.overrideMimeType(\"text/plain; charset=\" + charset);\n\t\t\n\t\t\treq.send(null);\n\t\t\t\n\t\t\treturn async ? promise : req.responseText;\n\t\t}\n\t\telse if (typeof require !== 'undefined') {\n\t\t\t// Node.js\n\t\t\tvar fs = require(\"fs\");\n\t\t\t\n\t\t\ttry {\n\t\t\t\tif (fs.existsSync(path)) {\n\t\t\t\t\treturn fs.readFileSync(path, charset);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.log(\"Path \" + path + \" does not exist.\");\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t * Parse the rules out from a .aff file.\n\t *\n\t * @param {String} data The contents of the affix file.\n\t * @returns object The rules from the file.\n\t */\n\t\n\t_parseAFF : function (data) {\n\t\tvar rules = {};\n\t\t\n\t\tvar line, subline, numEntries, lineParts;\n\t\tvar i, j, _len, _jlen;\n\t\t\n\t\t// Remove comment lines\n\t\tdata = this._removeAffixComments(data);\n\t\t\n\t\tvar lines = data.split(/\\r?\\n/);\n\t\t\n\t\tfor (i = 0, _len = lines.length; i < _len; i++) {\n\t\t\tline = lines[i];\n\t\t\t\n\t\t\tvar definitionParts = line.split(/\\s+/);\n\t\t\t\n\t\t\tvar ruleType = definitionParts[0];\n\t\t\t\n\t\t\tif (ruleType == \"PFX\" || ruleType == \"SFX\") {\n\t\t\t\tvar ruleCode = definitionParts[1];\n\t\t\t\tvar combineable = definitionParts[2];\n\t\t\t\tnumEntries = parseInt(definitionParts[3], 10);\n\t\t\t\t\n\t\t\t\tvar entries = [];\n\t\t\t\t\n\t\t\t\tfor (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n\t\t\t\t\tsubline = lines[j];\n\t\t\t\t\t\n\t\t\t\t\tlineParts = subline.split(/\\s+/);\n\t\t\t\t\tvar charactersToRemove = lineParts[2];\n\t\t\t\t\t\n\t\t\t\t\tvar additionParts = lineParts[3].split(\"/\");\n\t\t\t\t\t\n\t\t\t\t\tvar charactersToAdd = additionParts[0];\n\t\t\t\t\tif (charactersToAdd === \"0\") charactersToAdd = \"\";\n\t\t\t\t\t\n\t\t\t\t\tvar continuationClasses = this.parseRuleCodes(additionParts[1]);\n\t\t\t\t\t\n\t\t\t\t\tvar regexToMatch = lineParts[4];\n\t\t\t\t\t\n\t\t\t\t\tvar entry = {};\n\t\t\t\t\tentry.add = charactersToAdd;\n\t\t\t\t\t\n\t\t\t\t\tif (continuationClasses.length > 0) entry.continuationClasses = continuationClasses;\n\t\t\t\t\t\n\t\t\t\t\tif (regexToMatch !== \".\") {\n\t\t\t\t\t\tif (ruleType === \"SFX\") {\n\t\t\t\t\t\t\tentry.match = new RegExp(regexToMatch + \"$\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tentry.match = new RegExp(\"^\" + regexToMatch);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (charactersToRemove != \"0\") {\n\t\t\t\t\t\tif (ruleType === \"SFX\") {\n\t\t\t\t\t\t\tentry.remove = new RegExp(charactersToRemove  + \"$\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tentry.remove = charactersToRemove;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tentries.push(entry);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trules[ruleCode] = { \"type\" : ruleType, \"combineable\" : (combineable == \"Y\"), \"entries\" : entries };\n\t\t\t\t\n\t\t\t\ti += numEntries;\n\t\t\t}\n\t\t\telse if (ruleType === \"COMPOUNDRULE\") {\n\t\t\t\tnumEntries = parseInt(definitionParts[1], 10);\n\t\t\t\t\n\t\t\t\tfor (j = i + 1, _jlen = i + 1 + numEntries; j < _jlen; j++) {\n\t\t\t\t\tline = lines[j];\n\t\t\t\t\t\n\t\t\t\t\tlineParts = line.split(/\\s+/);\n\t\t\t\t\tthis.compoundRules.push(lineParts[1]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ti += numEntries;\n\t\t\t}\n\t\t\telse if (ruleType === \"REP\") {\n\t\t\t\tlineParts = line.split(/\\s+/);\n\t\t\t\t\n\t\t\t\tif (lineParts.length === 3) {\n\t\t\t\t\tthis.replacementTable.push([ lineParts[1], lineParts[2] ]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// ONLYINCOMPOUND\n\t\t\t\t// COMPOUNDMIN\n\t\t\t\t// FLAG\n\t\t\t\t// KEEPCASE\n\t\t\t\t// NEEDAFFIX\n\t\t\t\t\n\t\t\t\tthis.flags[ruleType] = definitionParts[1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rules;\n\t},\n\t\n\t/**\n\t * Removes comment lines and then cleans up blank lines and trailing whitespace.\n\t *\n\t * @param {String} data The data from an affix file.\n\t * @return {String} The cleaned-up data.\n\t */\n\t\n\t_removeAffixComments : function (data) {\n\t\t// Remove comments\n\t\t// This used to remove any string starting with '#' up to the end of the line,\n\t\t// but some COMPOUNDRULE definitions include '#' as part of the rule.\n\t\t// I haven't seen any affix files that use comments on the same line as real data,\n\t\t// so I don't think this will break anything.\n\t\tdata = data.replace(/^\\s*#.*$/mg, \"\");\n\t\t\n\t\t// Trim each line\n\t\tdata = data.replace(/^\\s\\s*/m, '').replace(/\\s\\s*$/m, '');\n\t\t\n\t\t// Remove blank lines.\n\t\tdata = data.replace(/\\n{2,}/g, \"\\n\");\n\t\t\n\t\t// Trim the entire string\n\t\tdata = data.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\t\t\n\t\treturn data;\n\t},\n\t\n\t/**\n\t * Parses the words out from the .dic file.\n\t *\n\t * @param {String} data The data from the dictionary file.\n\t * @returns object The lookup table containing all of the words and\n\t *                 word forms from the dictionary.\n\t */\n\t\n\t_parseDIC : function (data) {\n\t\tdata = this._removeDicComments(data);\n\t\t\n\t\tvar lines = data.split(/\\r?\\n/);\n\t\tvar dictionaryTable = {};\n\t\t\n\t\tfunction addWord(word, rules) {\n\t\t\t// Some dictionaries will list the same word multiple times with different rule sets.\n\t\t\tif (!dictionaryTable.hasOwnProperty(word)) {\n\t\t\t\tdictionaryTable[word] = null;\n\t\t\t}\n\t\t\t\n\t\t\tif (rules.length > 0) {\n\t\t\t\tif (dictionaryTable[word] === null) {\n\t\t\t\t\tdictionaryTable[word] = [];\n\t\t\t\t}\n\n\t\t\t\tdictionaryTable[word].push(rules);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// The first line is the number of words in the dictionary.\n\t\tfor (var i = 1, _len = lines.length; i < _len; i++) {\n\t\t\tvar line = lines[i];\n\t\t\t\n\t\t\tif (!line) {\n\t\t\t\t// Ignore empty lines.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar parts = line.split(\"/\", 2);\n\t\t\t\n\t\t\tvar word = parts[0];\n\n\t\t\t// Now for each affix rule, generate that form of the word.\n\t\t\tif (parts.length > 1) {\n\t\t\t\tvar ruleCodesArray = this.parseRuleCodes(parts[1]);\n\t\t\t\t\n\t\t\t\t// Save the ruleCodes for compound word situations.\n\t\t\t\tif (!(\"NEEDAFFIX\" in this.flags) || ruleCodesArray.indexOf(this.flags.NEEDAFFIX) == -1) {\n\t\t\t\t\taddWord(word, ruleCodesArray);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor (var j = 0, _jlen = ruleCodesArray.length; j < _jlen; j++) {\n\t\t\t\t\tvar code = ruleCodesArray[j];\n\t\t\t\t\t\n\t\t\t\t\tvar rule = this.rules[code];\n\t\t\t\t\t\n\t\t\t\t\tif (rule) {\n\t\t\t\t\t\tvar newWords = this._applyRule(word, rule);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var ii = 0, _iilen = newWords.length; ii < _iilen; ii++) {\n\t\t\t\t\t\t\tvar newWord = newWords[ii];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\taddWord(newWord, []);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (rule.combineable) {\n\t\t\t\t\t\t\t\tfor (var k = j + 1; k < _jlen; k++) {\n\t\t\t\t\t\t\t\t\tvar combineCode = ruleCodesArray[k];\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tvar combineRule = this.rules[combineCode];\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tif (combineRule) {\n\t\t\t\t\t\t\t\t\t\tif (combineRule.combineable && (rule.type != combineRule.type)) {\n\t\t\t\t\t\t\t\t\t\t\tvar otherNewWords = this._applyRule(newWord, combineRule);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tfor (var iii = 0, _iiilen = otherNewWords.length; iii < _iiilen; iii++) {\n\t\t\t\t\t\t\t\t\t\t\t\tvar otherNewWord = otherNewWords[iii];\n\t\t\t\t\t\t\t\t\t\t\t\taddWord(otherNewWord, []);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (code in this.compoundRuleCodes) {\n\t\t\t\t\t\tthis.compoundRuleCodes[code].push(word);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\taddWord(word.trim(), []);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn dictionaryTable;\n\t},\n\t\n\t\n\t/**\n\t * Removes comment lines and then cleans up blank lines and trailing whitespace.\n\t *\n\t * @param {String} data The data from a .dic file.\n\t * @return {String} The cleaned-up data.\n\t */\n\t\n\t_removeDicComments : function (data) {\n\t\t// I can't find any official documentation on it, but at least the de_DE\n\t\t// dictionary uses tab-indented lines as comments.\n\t\t\n\t\t// Remove comments\n\t\tdata = data.replace(/^\\t.*$/mg, \"\");\n\t\t\n\t\treturn data;\n\t},\n\t\n\tparseRuleCodes : function (textCodes) {\n\t\tif (!textCodes) {\n\t\t\treturn [];\n\t\t}\n\t\telse if (!(\"FLAG\" in this.flags)) {\n\t\t\treturn textCodes.split(\"\");\n\t\t}\n\t\telse if (this.flags.FLAG === \"long\") {\n\t\t\tvar flags = [];\n\t\t\t\n\t\t\tfor (var i = 0, _len = textCodes.length; i < _len; i += 2) {\n\t\t\t\tflags.push(textCodes.substr(i, 2));\n\t\t\t}\n\t\t\t\n\t\t\treturn flags;\n\t\t}\n\t\telse if (this.flags.FLAG === \"num\") {\n\t\t\treturn textCodes.split(\",\");\n\t\t}\n\t},\n\t\n\t/**\n\t * Applies an affix rule to a word.\n\t *\n\t * @param {String} word The base word.\n\t * @param {Object} rule The affix rule.\n\t * @returns {String[]} The new words generated by the rule.\n\t */\n\t\n\t_applyRule : function (word, rule) {\n\t\tvar entries = rule.entries;\n\t\tvar newWords = [];\n\t\t\n\t\tfor (var i = 0, _len = entries.length; i < _len; i++) {\n\t\t\tvar entry = entries[i];\n\t\t\t\n\t\t\tif (!entry.match || word.match(entry.match)) {\n\t\t\t\tvar newWord = word;\n\t\t\t\t\n\t\t\t\tif (entry.remove) {\n\t\t\t\t\tnewWord = newWord.replace(entry.remove, \"\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (rule.type === \"SFX\") {\n\t\t\t\t\tnewWord = newWord + entry.add;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewWord = entry.add + newWord;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tnewWords.push(newWord);\n\t\t\t\t\n\t\t\t\tif (\"continuationClasses\" in entry) {\n\t\t\t\t\tfor (var j = 0, _jlen = entry.continuationClasses.length; j < _jlen; j++) {\n\t\t\t\t\t\tvar continuationRule = this.rules[entry.continuationClasses[j]];\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (continuationRule) {\n\t\t\t\t\t\t\tnewWords = newWords.concat(this._applyRule(newWord, continuationRule));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// This shouldn't happen, but it does, at least in the de_DE dictionary.\n\t\t\t\t\t\t\t// I think the author mistakenly supplied lower-case rule codes instead \n\t\t\t\t\t\t\t// of upper-case.\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn newWords;\n\t},\n\t\n\t/**\n\t * Checks whether a word or a capitalization variant exists in the current dictionary.\n\t * The word is trimmed and several variations of capitalizations are checked.\n\t * If you want to check a word without any changes made to it, call checkExact()\n\t *\n\t * @see http://blog.stevenlevithan.com/archives/faster-trim-javascript re:trimming function\n\t *\n\t * @param {String} aWord The word to check.\n\t * @returns {Boolean}\n\t */\n\t\n\tcheck : function (aWord) {\n\t\tif (!this.loaded) {\n\t\t\tthrow \"Dictionary not loaded.\";\n\t\t}\n\t\t\n\t\t// Remove leading and trailing whitespace\n\t\tvar trimmedWord = aWord.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\t\t\n\t\tif (this.checkExact(trimmedWord)) {\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\t// The exact word is not in the dictionary.\n\t\tif (trimmedWord.toUpperCase() === trimmedWord) {\n\t\t\t// The word was supplied in all uppercase.\n\t\t\t// Check for a capitalized form of the word.\n\t\t\tvar capitalizedWord = trimmedWord[0] + trimmedWord.substring(1).toLowerCase();\n\t\t\t\n\t\t\tif (this.hasFlag(capitalizedWord, \"KEEPCASE\")) {\n\t\t\t\t// Capitalization variants are not allowed for this word.\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.checkExact(capitalizedWord)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar lowercaseWord = trimmedWord.toLowerCase();\n\t\t\n\t\tif (lowercaseWord !== trimmedWord) {\n\t\t\tif (this.hasFlag(lowercaseWord, \"KEEPCASE\")) {\n\t\t\t\t// Capitalization variants are not allowed for this word.\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// Check for a lowercase form\n\t\t\tif (this.checkExact(lowercaseWord)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\t\n\t/**\n\t * Checks whether a word exists in the current dictionary.\n\t *\n\t * @param {String} word The word to check.\n\t * @returns {Boolean}\n\t */\n\t\n\tcheckExact : function (word) {\n\t\tif (!this.loaded) {\n\t\t\tthrow \"Dictionary not loaded.\";\n\t\t}\n\n\t\tvar ruleCodes = this.dictionaryTable[word];\n\t\t\n\t\tvar i, _len;\n\t\t\n\t\tif (typeof ruleCodes === 'undefined') {\n\t\t\t// Check if this might be a compound word.\n\t\t\tif (\"COMPOUNDMIN\" in this.flags && word.length >= this.flags.COMPOUNDMIN) {\n\t\t\t\tfor (i = 0, _len = this.compoundRules.length; i < _len; i++) {\n\t\t\t\t\tif (word.match(this.compoundRules[i])) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (ruleCodes === null) {\n\t\t\t// a null (but not undefined) value for an entry in the dictionary table\n\t\t\t// means that the word is in the dictionary but has no flags.\n\t\t\treturn true;\n\t\t}\n\t\telse if (typeof ruleCodes === 'object') { // this.dictionary['hasOwnProperty'] will be a function.\n\t\t\tfor (i = 0, _len = ruleCodes.length; i < _len; i++) {\n\t\t\t\tif (!this.hasFlag(word, \"ONLYINCOMPOUND\", ruleCodes[i])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\t\n\t/**\n\t * Looks up whether a given word is flagged with a given flag.\n\t *\n\t * @param {String} word The word in question.\n\t * @param {String} flag The flag in question.\n\t * @return {Boolean}\n\t */\n\t \n\thasFlag : function (word, flag, wordFlags) {\n\t\tif (!this.loaded) {\n\t\t\tthrow \"Dictionary not loaded.\";\n\t\t}\n\n\t\tif (flag in this.flags) {\n\t\t\tif (typeof wordFlags === 'undefined') {\n\t\t\t\twordFlags = Array.prototype.concat.apply([], this.dictionaryTable[word]);\n\t\t\t}\n\t\t\t\n\t\t\tif (wordFlags && wordFlags.indexOf(this.flags[flag]) !== -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\t\n\t/**\n\t * Returns a list of suggestions for a misspelled word.\n\t *\n\t * @see http://www.norvig.com/spell-correct.html for the basis of this suggestor.\n\t * This suggestor is primitive, but it works.\n\t *\n\t * @param {String} word The misspelling.\n\t * @param {Number} [limit=5] The maximum number of suggestions to return.\n\t * @returns {String[]} The array of suggestions.\n\t */\n\t\n\talphabet : \"\",\n\t\n\tsuggest : function (word, limit) {\n\t\tif (!this.loaded) {\n\t\t\tthrow \"Dictionary not loaded.\";\n\t\t}\n\n\t\tlimit = limit || 5;\n\n\t\tif (this.memoized.hasOwnProperty(word)) {\n\t\t\tvar memoizedLimit = this.memoized[word]['limit'];\n\n\t\t\t// Only return the cached list if it's big enough or if there weren't enough suggestions\n\t\t\t// to fill a smaller limit.\n\t\t\tif (limit <= memoizedLimit || this.memoized[word]['suggestions'].length < memoizedLimit) {\n\t\t\t\treturn this.memoized[word]['suggestions'].slice(0, limit);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.check(word)) return [];\n\t\t\n\t\t// Check the replacement table.\n\t\tfor (var i = 0, _len = this.replacementTable.length; i < _len; i++) {\n\t\t\tvar replacementEntry = this.replacementTable[i];\n\t\t\t\n\t\t\tif (word.indexOf(replacementEntry[0]) !== -1) {\n\t\t\t\tvar correctedWord = word.replace(replacementEntry[0], replacementEntry[1]);\n\t\t\t\t\n\t\t\t\tif (this.check(correctedWord)) {\n\t\t\t\t\treturn [ correctedWord ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar self = this;\n\t\tself.alphabet = \"abcdefghijklmnopqrstuvwxyz\";\n\t\t\n\t\t/*\n\t\tif (!self.alphabet) {\n\t\t\t// Use the alphabet as implicitly defined by the words in the dictionary.\n\t\t\tvar alphaHash = {};\n\t\t\t\n\t\t\tfor (var i in self.dictionaryTable) {\n\t\t\t\tfor (var j = 0, _len = i.length; j < _len; j++) {\n\t\t\t\t\talphaHash[i[j]] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfor (var i in alphaHash) {\n\t\t\t\tself.alphabet += i;\n\t\t\t}\n\t\t\t\n\t\t\tvar alphaArray = self.alphabet.split(\"\");\n\t\t\talphaArray.sort();\n\t\t\tself.alphabet = alphaArray.join(\"\");\n\t\t}\n\t\t*/\n\t\t\n\t\t/**\n\t\t * Returns a hash keyed by all of the strings that can be made by making a single edit to the word (or words in) `words`\n\t\t * The value of each entry is the number of unique ways that the resulting word can be made.\n\t\t *\n\t\t * @arg mixed words Either a hash keyed by words or a string word to operate on.\n\t\t * @arg bool known_only Whether this function should ignore strings that are not in the dictionary.\n\t\t */\n\t\tfunction edits1(words, known_only) {\n\t\t\tvar rv = {};\n\t\t\t\n\t\t\tvar i, j, _iilen, _len, _jlen, _edit;\n\t\t\t\n\t\t\tif (typeof words == 'string') {\n\t\t\t\tvar word = words;\n\t\t\t\twords = {};\n\t\t\t\twords[word] = true;\n\t\t\t}\n\n\t\t\tfor (var word in words) {\n\t\t\t\tfor (i = 0, _len = word.length + 1; i < _len; i++) {\n\t\t\t\t\tvar s = [ word.substring(0, i), word.substring(i) ];\n\t\t\t\t\n\t\t\t\t\tif (s[1]) {\n\t\t\t\t\t\t_edit = s[0] + s[1].substring(1);\n\n\t\t\t\t\t\tif (!known_only || self.check(_edit)) {\n\t\t\t\t\t\t\tif (!(_edit in rv)) {\n\t\t\t\t\t\t\t\trv[_edit] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\trv[_edit] += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Eliminate transpositions of identical letters\n\t\t\t\t\tif (s[1].length > 1 && s[1][1] !== s[1][0]) {\n\t\t\t\t\t\t_edit = s[0] + s[1][1] + s[1][0] + s[1].substring(2);\n\n\t\t\t\t\t\tif (!known_only || self.check(_edit)) {\n\t\t\t\t\t\t\tif (!(_edit in rv)) {\n\t\t\t\t\t\t\t\trv[_edit] = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\trv[_edit] += 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (s[1]) {\n\t\t\t\t\t\tfor (j = 0, _jlen = self.alphabet.length; j < _jlen; j++) {\n\t\t\t\t\t\t\t// Eliminate replacement of a letter by itself\n\t\t\t\t\t\t\tif (self.alphabet[j] != s[1].substring(0,1)){\n\t\t\t\t\t\t\t\t_edit = s[0] + self.alphabet[j] + s[1].substring(1);\n\n\t\t\t\t\t\t\t\tif (!known_only || self.check(_edit)) {\n\t\t\t\t\t\t\t\t\tif (!(_edit in rv)) {\n\t\t\t\t\t\t\t\t\t\trv[_edit] = 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\trv[_edit] += 1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (s[1]) {\n\t\t\t\t\t\tfor (j = 0, _jlen = self.alphabet.length; j < _jlen; j++) {\n\t\t\t\t\t\t\t_edit = s[0] + self.alphabet[j] + s[1];\n\n\t\t\t\t\t\t\tif (!known_only || self.check(_edit)) {\n\t\t\t\t\t\t\t\tif (!(_edit in rv)) {\n\t\t\t\t\t\t\t\t\trv[_edit] = 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\trv[_edit] += 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn rv;\n\t\t}\n\n\t\tfunction correct(word) {\n\t\t\t// Get the edit-distance-1 and edit-distance-2 forms of this word.\n\t\t\tvar ed1 = edits1(word);\n\t\t\tvar ed2 = edits1(ed1, true);\n\t\t\t\n\t\t\t// Sort the edits based on how many different ways they were created.\n\t\t\tvar weighted_corrections = ed2;\n\t\t\t\n\t\t\tfor (var ed1word in ed1) {\n\t\t\t\tif (!self.check(ed1word)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (ed1word in weighted_corrections) {\n\t\t\t\t\tweighted_corrections[ed1word] += ed1[ed1word];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tweighted_corrections[ed1word] = ed1[ed1word];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar i, _len;\n\n\t\t\tvar sorted_corrections = [];\n\t\t\t\n\t\t\tfor (i in weighted_corrections) {\n\t\t\t\tif (weighted_corrections.hasOwnProperty(i)) {\n\t\t\t\t\tsorted_corrections.push([ i, weighted_corrections[i] ]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction sorter(a, b) {\n\t\t\t\tvar a_val = a[1];\n\t\t\t\tvar b_val = b[1];\n\t\t\t\tif (a_val < b_val) {\n\t\t\t\t\treturn -1;\n\t\t\t\t} else if (a_val > b_val) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\t// @todo If a and b are equally weighted, add our own weight based on something like the key locations on this language's default keyboard.\n\t\t\t\treturn b[0].localeCompare(a[0]);\n\t\t\t}\n\t\t\t\n\t\t\tsorted_corrections.sort(sorter).reverse();\n\n\t\t\tvar rv = [];\n\n\t\t\tvar capitalization_scheme = \"lowercase\";\n\t\t\t\n\t\t\tif (word.toUpperCase() === word) {\n\t\t\t\tcapitalization_scheme = \"uppercase\";\n\t\t\t}\n\t\t\telse if (word.substr(0, 1).toUpperCase() + word.substr(1).toLowerCase() === word) {\n\t\t\t\tcapitalization_scheme = \"capitalized\";\n\t\t\t}\n\t\t\t\n\t\t\tvar working_limit = limit;\n\n\t\t\tfor (i = 0; i < Math.min(working_limit, sorted_corrections.length); i++) {\n\t\t\t\tif (\"uppercase\" === capitalization_scheme) {\n\t\t\t\t\tsorted_corrections[i][0] = sorted_corrections[i][0].toUpperCase();\n\t\t\t\t}\n\t\t\t\telse if (\"capitalized\" === capitalization_scheme) {\n\t\t\t\t\tsorted_corrections[i][0] = sorted_corrections[i][0].substr(0, 1).toUpperCase() + sorted_corrections[i][0].substr(1);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!self.hasFlag(sorted_corrections[i][0], \"NOSUGGEST\") && rv.indexOf(sorted_corrections[i][0]) == -1) {\n\t\t\t\t\trv.push(sorted_corrections[i][0]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// If one of the corrections is not eligible as a suggestion , make sure we still return the right number of suggestions.\n\t\t\t\t\tworking_limit++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn rv;\n\t\t}\n\t\t\n\t\tthis.memoized[word] = {\n\t\t\t'suggestions': correct(word),\n\t\t\t'limit': limit\n\t\t};\n\n\t\treturn this.memoized[word]['suggestions'];\n\t}\n};\n})();\n\n// Support for use as a node.js module.\nif (typeof module !== 'undefined') {\n\tmodule.exports = Typo;\n}\n","module.exports=/[\\0-\\x1F\\x7F-\\x9F]/","module.exports=/[\\xAD\\u0600-\\u0605\\u061C\\u06DD\\u070F\\u08E2\\u180E\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u2066-\\u206F\\uFEFF\\uFFF9-\\uFFFB]|\\uD804[\\uDCBD\\uDCCD]|\\uD82F[\\uDCA0-\\uDCA3]|\\uD834[\\uDD73-\\uDD7A]|\\uDB40[\\uDC01\\uDC20-\\uDC7F]/","module.exports=/[!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4E\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD803[\\uDF55-\\uDF59]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC8\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDC4B-\\uDC4F\\uDC5B\\uDC5D\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDE60-\\uDE6C\\uDF3C-\\uDF3E]|\\uD806[\\uDC3B\\uDE3F-\\uDE46\\uDE9A-\\uDE9C\\uDE9E-\\uDEA2]|\\uD807[\\uDC41-\\uDC45\\uDC70\\uDC71\\uDEF7\\uDEF8]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD81B[\\uDE97-\\uDE9A]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]|\\uD83A[\\uDD5E\\uDD5F]/","module.exports=/[ \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]/","'use strict';\n\nexports.Any = require('./properties/Any/regex');\nexports.Cc  = require('./categories/Cc/regex');\nexports.Cf  = require('./categories/Cf/regex');\nexports.P   = require('./categories/P/regex');\nexports.Z   = require('./categories/Z/regex');\n","module.exports=/[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/","import { Meme, ChatMeme, markdownIt } from './mmde.js';\n\nimport { QuickInsertPlugin } from './plugins/quick-insert.js';\n\nimport { MemeSettings } from './settings.js';\n\nwindow.MEME = {\n\tChatMeme,\n\tmarkdownIt,\n\tBaseMeme: Meme,\n};\n\n// Hooks.on('ready', () => game.journal.get('Gb3Z2SCBSDp1sEVe').sheet.render(true))\n\nHooks.on('init', function () {\n\tMemeSettings.init();\n\tQuickInsertPlugin.init();\n\n\tif (MemeSettings.isRichTextActive) activateRichTextFeatures();\n\n\tif (MemeSettings.isChatActive)\n\t\tHooks.on('renderChatLog', (app, html, options) => {\n\t\t\tconst chat = html[0].querySelector('#chat-message');\n\t\t\tlet editorOptions = {\n\t\t\t\telement: chat,\n\t\t\t};\n\n\t\t\t// Use this hook to modify e.g. the toolbar content or other options for invoking the editor\n\t\t\tHooks.callAll('MemeActivateChat', editorOptions);\n\t\t\tapp.editor = new MEME.ChatMeme(editorOptions);\n\t\t});\n});\n\nfunction activateRichTextFeatures() {\n\tHandlebars.unregisterHelper('editor');\n\tHandlebars.registerHelper('editor', function (options) {\n\t\tlet target = options.hash['target'],\n\t\t\tcontent = options.hash['content'] || '',\n\t\t\tbutton = Boolean(options.hash['button']),\n\t\t\towner = Boolean(options.hash['owner']),\n\t\t\teditable = Boolean(options.hash['editable']);\n\t\tif (!target) throw new Error('You must define the name of a target field.');\n\n\t\tlet editor = $(\n\t\t\t`<div class=\"editor\" ${owner ? 'data-owner=\"1\"' : ''}><textarea class=\"editor-content\" ${\n\t\t\t\teditable ? 'data-editable=\"true\"' : ''\n\t\t\t} name=\"${target}\" data-dtype=\"String\"></textarea></div>`\n\t\t);\n\n\t\t// Append edit button\n\t\tif (button && editable) editor.append($('<a class=\"editor-edit\"><i class=\"fas fa-edit\"></i></a>'));\n\n\t\treturn new Handlebars.SafeString(editor[0].outerHTML);\n\t});\n\n\tconst oldActivateListeners = FormApplication.prototype.activateListeners;\n\tFormApplication.prototype.activateListeners = function (html) {\n\t\toldActivateListeners.bind(this)(html);\n\t\thtml.find('.editor-content').each((i, div) => this._activateEditor(div));\n\t};\n\n\tFormApplication.prototype._activateEditor = function (textarea) {\n\t\tconst div = textarea.parentNode;\n\t\tconst target = textarea.name;\n\n\t\t// Trying to avoid the strange handlebars partial indentation issues by just inserting the content now\n\t\tlet content =\n\t\t\tgetProperty(this.object.data, target) ||\n\t\t\t// Maybe the editor is used for something not adhering to the regular entity data structure, then try to get the data without the additional \"data\" key\n\t\t\tgetProperty(this.object, target) ||\n\t\t\t// If all else fails, use an empty string.\n\t\t\t'';\n\n\t\tconst editable = !!textarea.dataset.editable;\n\t\tlet editorOptions = {\n\t\t\telement: textarea,\n\t\t\towner: !!div.dataset.owner,\n\t\t\tsaveCallback: (content) => this._onEditorSave(target, textarea, content),\n\t\t\tcontent,\n\t\t\ttoolbar: MEME.BaseMeme.toolbar,\n\t\t};\n\n\t\t//\t\ttextarea.innerHTML = content;\n\t\t// Use this hook to modify e.g. the toolbar content or other options for invoking the editor\n\t\tHooks.callAll('MemeActivateEditor', this, editorOptions);\n\t\tconsole.log(editorOptions);\n\t\ttextarea.innerHTML = editorOptions.content;\n\t\tdelete editorOptions.content;\n\n\t\tif (!editable) editorOptions.toolbar = false;\n\t\tthis.editors[target] = new MEME.BaseMeme(editorOptions);\n\n\t\tif (!editable) {\n\t\t\tthis.editors[target].makePreviewOnly();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editors[target].togglePreview();\n\n\t\tdiv.querySelector('.editor-toolbar').classList.add('hidden');\n\n\t\tconst btn = div.querySelector('.editor-edit');\n\t\tif (btn)\n\t\t\tbtn.addEventListener('click', (ev) => {\n\t\t\t\tev.currentTarget.style.display = 'none';\n\t\t\t\tev.currentTarget.parentNode.querySelector('.editor-toolbar').classList.remove('hidden');\n\t\t\t\tconst cm = this.editors[target].codemirror;\n\t\t\t\tthis.editors[target].togglePreview();\n\t\t\t\t// next 2 lines needed to avoid text sometimes not showing when starting to edit, until the editor is clicked on.\n\t\t\t\tcm.focus();\n\t\t\t\t// Jump to end of text\n\t\t\t\tcm.setCursor(cm.lineCount(), 0);\n\t\t\t});\n\t};\n\n\tFormApplication.prototype._onEditorSave = function (target, element, content) {\n\t\tlet event = new Event('memesave');\n\t\treturn this._onSubmit(event);\n\t};\n}\n","import EasyMDE from 'easymde';\n\nconst md = require('markdown-it')({\n\thtml: true,\n\tlinkify: true,\n});\nexport const markdownIt = md;\nrequire('codemirror/keymap/vim.js');\n\nmd.use(require('markdown-it-container'), 'secret', {\n\tvalidate: function (params) {\n\t\treturn true;\n\t},\n\tmarker: '$',\n\trender: function (tokens, idx) {\n\t\tif (tokens[idx].nesting > 0)\n\t\t\t// opening tag\n\t\t\treturn '<section class=\"secret\">';\n\t\telse return '</section>';\n\t},\n});\n\nmd.renderer.rules['heading_open'] = function (tokens, idx /*, options, env */) {\n\tconst token = tokens[idx],\n\t\tnextToken = tokens[idx + 1],\n\t\tlink = nextToken.content; //.replace(/\\s/g, '_');\n\treturn `<${token.tag} name='${token.markup}${link}'>`;\n};\n\nexport class Meme extends EasyMDE {\n\tconstructor(options = {}) {\n\t\tsuper({ ...Meme.defaultOptions, ...options });\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn {\n\t\t\tautoDownloadFontAwesome: false,\n\t\t\tforceSync: true,\n\t\t\tminHeight: '0px',\n\t\t\tstatus: false,\n\t\t\tspellChecker: false,\n\t\t\ttoolbar: this.toolbar,\n\t\t\towner: true,\n\t\t};\n\t}\n\n\tstatic get toolbar() {\n\t\treturn [\n\t\t\t'bold',\n\t\t\t'italic',\n\t\t\t'strikethrough',\n\t\t\t'heading',\n\t\t\t'|',\n\t\t\t'ordered-list',\n\t\t\t'unordered-list',\n\t\t\t{\n\t\t\t\tname: 'secret',\n\t\t\t\taction: this.toggleSecretBlock,\n\t\t\t\tclassName: 'fas fa-user-secret',\n\t\t\t\ttitle: 'Make Secret block',\n\t\t\t},\n\t\t\t'quote',\n\t\t\t// \"code\",\n\t\t\t'table',\n\t\t\t'|',\n\t\t\t'link',\n\t\t\t{\n\t\t\t\tname: 'image',\n\t\t\t\taction: this.chooseImage,\n\t\t\t\tclassName: 'fa fa-image',\n\t\t\t\ttitle: 'Image',\n\t\t\t},\n\t\t\t'horizontal-rule',\n\t\t\t'|',\n\t\t\t'preview',\n\t\t\t'side-by-side',\n\t\t\t'fullscreen',\n\t\t\t'|',\n\t\t\t{\n\t\t\t\tname: 'plugins',\n\t\t\t\ttitle: 'Plugins',\n\t\t\t\tclassName: 'fas fa-list',\n\t\t\t\tchildren: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'save',\n\t\t\t\taction: this.save,\n\t\t\t\tclassName: 'fas fa-save',\n\t\t\t\ttitle: 'Save',\n\t\t\t\tnoDisable: true,\n\t\t\t},\n\t\t\t'|',\n\t\t\t'guide',\n\t\t];\n\t}\n\n\tstatic toggleSecretBlock(editor) {\n\t\tconst secretChars = '$$$';\n\t\tlet cm = editor.codemirror;\n\t\tconst text = cm.getSelection();\n\t\tlet cur_start = cm.getCursor('start'),\n\t\t\tcur_end = cm.getCursor('end');\n\n\t\tif (cur_start.line !== cur_end.line || cur_start.ch !== cur_end.ch) {\n\t\t\tconst start_line = cur_start.line,\n\t\t\t\tend_line = cur_end.line,\n\t\t\t\tend_text = cm.getLineHandle(end_line).text;\n\t\t\tconst orig_text = cm.getRange({ line: cur_start.line, ch: 0 }, { line: cur_end.line, ch: end_text.length }),\n\t\t\t\tcap = rules.block.secret.exec(orig_text);\n\t\t\tlet new_text = orig_text,\n\t\t\t\thead,\n\t\t\t\tanchor;\n\t\t\t// remove  $$$ from start and finish if whole selection encompasses exactly one secret block\n\t\t\tif (cap && cap[0].length === orig_text.length) {\n\t\t\t\tnew_text = cap[3];\n\t\t\t\thead = { line: end_line - 2, ch: cm.getLineHandle(end_line - 1).text.length };\n\t\t\t\tanchor = { line: start_line, ch: 0 };\n\t\t\t} else {\n\t\t\t\t// Else add  $$$ at start and finish of block\n\t\t\t\tnew_text = '\\n' + secretChars + '\\n' + orig_text + '\\n' + secretChars + '\\n';\n\t\t\t\tanchor = { line: start_line + 1, ch: 0 };\n\t\t\t\thead = { line: end_line + 3, ch: 3 };\n\t\t\t}\n\t\t\tcm.replaceRange(new_text, { line: cur_start.line, ch: 0 }, { line: cur_end.line, ch: end_text.length });\n\t\t\tcm.setSelection(anchor, head);\n\t\t} // no selection? just add secret block chars\n\t\telse cm.replaceSelection('\\n' + secretChars + '\\n' + text + '\\n' + secretChars + '\\n');\n\n\t\tcm.focus();\n\t}\n\n\ttoggleSecretBlock() {\n\t\tthis.constructor.toggleSecretBlock(this);\n\t}\n\n\tstatic chooseImage(editor) {\n\t\tconst cm = editor.codemirror;\n\t\tconst wrapper = cm.getWrapperElement();\n\t\tnew FilePicker({\n\t\t\ttype: 'image',\n\t\t\tcallback: (path) => {\n\t\t\t\tcm.replaceSelection(`![](${path})`);\n\t\t\t},\n\t\t\ttop: wrapper.style.position.top + 40,\n\t\t\tleft: wrapper.style.position.left + 10,\n\t\t}).browse();\n\t}\n\n\tstatic save(editor) {\n\t\tconst wrapper = editor.element.parentNode;\n\t\tconst btn = wrapper.querySelector('.editor-edit');\n\t\tbtn.style.display = '';\n\t\tif (!editor.isPreviewActive()) editor.togglePreview();\n\t\twrapper.querySelector('.editor-toolbar').classList.add('hidden');\n\n\t\tif (editor.options.saveCallback) editor.options.saveCallback(editor.codemirror.getValue());\n\t}\n\n\tsave() {\n\t\tthis.constructor.name.save(this);\n\t}\n\n\tmakePreviewOnly() {\n\t\tconst cm = this.codemirror;\n\t\tconst wrapper = cm.getWrapperElement();\n\t\tconst preview = wrapper.lastChild;\n\t\tif (!preview || !preview.classList.contains('editor-preview-full')) this.togglePreview();\n\t\twrapper.classList.add('preview-only');\n\t}\n\n\trender() {\n\t\tsuper.render();\n\n\t\tthis.codemirror.on('drop', this._onDrop);\n\n\t\tif (game.settings.get('markdown-editor', 'vim-mode')) {\n\t\t\tdelete this.codemirror.options.extraKeys['Esc'];\n\t\t\tthis.codemirror.setOption('vimMode', true);\n\t\t}\n\n\t\tHooks.callAll('MemeRenderEditor', this, this.options.parent);\n\t}\n\n\t_onDrop(inst, ev) {\n\t\tlet data;\n\t\ttry {\n\t\t\t// catch stuff that is not correctly formatted.. like  accidently dropping \"just plain text drags\"\n\t\t\tdata = JSON.parse(event.dataTransfer.getData('text/plain'));\n\t\t} catch (e) {\n\t\t\treturn;\n\t\t}\n\t\tif (!data) return;\n\t\tev.preventDefault();\n\t\tconst insertIntoEditor = function (link) {\n\t\t\tconst pos = inst.coordsChar({ left: ev.clientX, top: ev.clientY });\n\t\t\tinst.setCursor(pos);\n\t\t\tinst.replaceSelection(link);\n\t\t\tinst.focus();\n\t\t};\n\t\ttry {\n\t\t\tif (data.pack) {\n\t\t\t\tconst pack = game.packs.get(data.pack);\n\t\t\t\tpack.getEntity(data.id).then((entity) => insertIntoEditor(`@Compendium[${data.pack}.${data.id}]{${entity.name}}`));\n\t\t\t} else {\n\t\t\t\tconst entity = CONFIG[data.type].collection.instance.get(data.id);\n\t\t\t\tinsertIntoEditor(`@${data.type}[${entity._id}]{${entity.name}}`);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Dropped incorrect data!', data);\n\t\t}\n\t}\n\t/**\n\t * @override\n\t */\n\tmarkdown(text) {\n\t\treturn TextEditor.enrichHTML(md.render(text), { secrets: this.options.owner, documents: true });\n\t}\n\n\tcreateToolbar(items) {\n\t\tconst bar = super.createToolbar(items);\n\t\tconsole.log(bar);\n\t\tconst pluginBtn = bar.querySelector('.plugins');\n\t\tconst btns = Array.from(pluginBtn.querySelectorAll('.easymde-dropdown-content button'));\n\t\tif (btns.length === 0) pluginBtn.remove();\n\t\telse {\n\t\t\tfor (let btn of btns) {\n\t\t\t\tbtn.appendChild(document.createTextNode(btn.title));\n\t\t\t}\n\t\t}\n\t\treturn bar;\n\t}\n}\n\nexport class ChatMeme extends Meme {\n\tconstructor(options) {\n\t\tsuper({ ...ChatMeme.defaultOptions, ...options });\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn {\n\t\t\ttoolbar: false,\n\t\t};\n\t}\n\n\trender() {\n\t\tsuper.render();\n\n\t\t// remove enter to new line\n\t\tthis.codemirror.options.extraKeys['Enter'] = this._sendChatMessage.bind(this);\n\n\t\tthis.codemirror.options.extraKeys['PageDown'] = this._chatRecallMessageDown.bind(this);\n\t\tthis.codemirror.options.extraKeys['PageUp'] = this._chatRecallMessageUp.bind(this);\n\n\t\t// Emojule integration without plugin manager.. cause easier this way\n\t\tHooks.on('emojuleSelectEmoji', (emojiCode) => {\n\t\t\tconst word = this.codemirror.findWordAt(this.codemirror.getCursor());\n\t\t\tthis.codemirror.replaceRange(emojiCode.substring(1), word.anchor, word.head);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t * Do not do enrichHTML for text messages, since that will be done \"anyway\" when processing the message\n\t * @param {*} text\n\t */\n\tmarkdown(text) {\n\t\treturn md.render(text);\n\t}\n\n\t/**\n\t * Sends the content of the textarea to chat.\n\t */\n\t_sendChatMessage() {\n\t\tconst editor = this;\n\t\tconst textarea = editor.element;\n\t\tif (!editor.value()) return;\n\t\tlet message = editor.value();\n\t\t// if rollcommand, leave it be\n\t\tlet [command, match] = ui.chat.constructor.parse(message);\n\t\t// on whisper, move the whisper target outside of the parsed tetx\n\t\tif (command === 'whisper') {\n\t\t\tmessage = match[1] + match[2] + ' ' + this.markdown(match[3]).replace(/\\n/g, '');\n\t\t\t// similar for ooc, iic, emote\n\t\t} else if (['ic', 'ooc', 'emote'].includes(command)) {\n\t\t\tmessage = match[1] + ' ' + this.markdown(match[2]).replace(/\\n/g, '');\n\t\t} else if (command === 'none') message = this.markdown(message).replace(/\\n/g, '');\n\n\t\t// Prepare chat message data and handle result\n\t\tui.chat\n\t\t\t.processMessage(message)\n\t\t\t.then(() => {\n\t\t\t\tui.chat._remember(editor.value());\n\t\t\t\ttextarea.value = '';\n\t\t\t\teditor.value('');\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tui.notifications.error(error);\n\t\t\t\tthrow error;\n\t\t\t});\n\t}\n\n\t_chatRecallMessageUp() {\n\t\tthis.value(ui.chat._recall(1));\n\t}\n\n\t_chatRecallMessageDown() {\n\t\tthis.value(ui.chat._recall(-1));\n\t}\n}\n","export class PluginBase {\n  /** \n   * @returns {Boolean} if initialization was successful\n  **/\n  static init() { return false; }\n\n  /**\n   * React on editor rendering and do stuff, like activating listeners.\n   * @param {Meme} editor \n   */\n  static onRender(editor) {}\n}","import { PluginBase } from './base.js';\n\nlet QuickInsert,\n    SearchContext;\n\nlet dependenciesLoaded;\n\n\nexport class QuickInsertPlugin extends PluginBase {\n  static init() {\n    const module = game.modules.get('quick-insert');\n    if (!module || !module.active) return false;\n    dependenciesLoaded = this.loadDependencies();\n    Hooks.on('MemeRenderEditor', QuickInsertPlugin.onRender);\n    return true;\n  }\n\n  static async loadDependencies() {\n    const dep = await import(/* webpackIgnore: true */ '/modules/quick-insert/quick-insert.js');\n    QuickInsert = dep.QuickInsert;\n    SearchContext = dep.SearchContext\n\n    console.log('MEME | finished loading quick insert dependencies.');\n    return dep;\n  };\n\n  static onRender(editor) {\n    // work with the promise to make sure the code is only executed when everything is loaded.\n    dependenciesLoaded.then(() => {\n      editor.codemirror.on('keydown', (cm, ev) => {\n        const key = window.Azzu.SettingsTypes.KeyBinding.parse(\n            game.settings.get('quick-insert', 'quickOpen')\n          );\n        if (!window.Azzu.SettingsTypes.KeyBinding.eventIsForBinding(ev, key)) return;\n        ev.stopPropagation();\n        const context = new SearchContext();\n        context.spawnCSS = QuickInsertPlugin.spawnCSS(cm);\n        context.onSubmit = (item) => {\n          cm.replaceSelection(item.journalLink);\n          cm.focus();\n        };\n        QuickInsert.open(context);\n      });\n    })\n  }\n\n  static spawnCSS(cm) {\n    const lineHeight = 22; // taken from the css file for the search thingy\n    const {left, right, top, bottom} = cm.cursorCoords(true, 'page');\n    const centering = (bottom - top - lineHeight) / 2;\n    const targetRect = cm.getWrapperElement().getBoundingClientRect();\n    const bodyRect = document.body.getBoundingClientRect();\n    return {\n      // Make sure its inside the container! 300px is default width for quick insert\n      left: Math.min(left, targetRect.right - Math.min(targetRect.width, 300)),\n      bottom: bodyRect.height - bottom + centering,\n      maxWidth: targetRect.width - 10\n    }\n  }\n}","export class MemeSettings extends FormApplication {\n\tstatic init() {\n\t\tgame.settings.registerMenu('markdown-editor', 'menu', {\n      name: '',\n      label: 'GM Settings',\n      icon: 'fas fa-mug-hot',\n      type: MemeSettings,\n      restricted: true\n    });\n\n    game.settings.register('markdown-editor', 'world-settings', {\n      name: 'Settings object for world level markdown editor settings',\n      type: Object,\n      default: {\n        chat: true,\n        richText: true\n      },\n      config: false,\n      onChange: () => {\n        new Dialog({\n          content: `<p>Some settings have changed, that require a refresh of the page to be applied.</p>`,\n          buttons: {\n            yes: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: 'Refresh page.',\n              callback: () => location.reload()\n            },\n            no: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: 'I\\'ll refresh later.'\n            }\n          }\n        }).render(true);\n      }\n    })\n\n    game.settings.register('markdown-editor', 'vim-mode', {\n      name: 'VIM Keybindings',\n      hint: 'Enable VIM keybindings for the markdown editor. [User Setting]',\n      scope: 'client',\n      default: false,\n      type: Boolean,\n      restricted: false,\n      config: true\n    });\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn {\n\t\t\t...super.defaultOptions,\n\t\t\ttemplate: \"modules/markdown-editor/html/settings.html\",\n\t\t\theight: \"auto\",\n\t\t\ttitle: \"MEME - Settings & Info\",\n\t\t\twidth: 600,\n\t\t\tclasses: [\"meme\", \"settings\"],\n\t\t\ttabs: [ \n\t\t\t\t{\n\t\t\t\t\tnavSelector: '.tabs',\n\t\t\t\t\tcontentSelector: 'form',\n\t\t\t\t\tinitial: 'info'\n\t\t\t\t} \n\t\t\t],\n\t\t\tsubmitOnClose: true\n\t\t}\n\t}\n\n  static get isRichTextActive() {\n    const settings = game.settings.get('markdown-editor', 'world-settings');\n    return settings.richText;\n  }\n\n  static get isChatActive() {\n    const settings = game.settings.get('markdown-editor', 'world-settings');\n    return settings.chat;    \n  }\n\n\tconstructor(object = {}, options) {\n\t\tsuper(object, options);\n\t}\n\n\t_getHeaderButtons() {\n\t\tlet btns = super._getHeaderButtons();\n\t\tbtns[0].label = \"Save & Close\";\n\t\treturn btns;\n\t}\n\n\tgetSettingsData() {\t\t\n\t\treturn game.settings.get('markdown-editor', 'world-settings');\n\t}\n\n\tgetData() {\n\t\tlet data = super.getData();\n\t\tdata.settings = this.getSettingsData();\n\t\treturn data;\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\t}\n\n\t_updateObject(ev, formData) {\n    const data = expandObject(formData);\n    game.settings.set('markdown-editor', 'world-settings', data);\n\t}\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/scripts/index.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}